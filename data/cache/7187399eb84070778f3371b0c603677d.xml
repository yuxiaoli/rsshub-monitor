<?xml version="1.0" encoding="UTF-8"?><rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>连享会 - 全部专题</title><link>https://www.lianxh.cn/blogs/all.html</link><atom:link href="http://rsshub.henry.wang/lianxh" rel="self" type="application/rss+xml"></atom:link><description>连享会 - 全部专题 - Powered by RSSHub</description><generator>RSSHub</generator><webMaster>contact@rsshub.app (RSSHub)</webMaster><language>en</language><lastBuildDate>Wed, 19 Mar 2025 23:25:37 GMT</lastBuildDate><ttl>14</ttl><item><title>⛵ 连享会 - 课程主页</title><description>&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;主页&lt;/a&gt;  || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;视频&lt;/a&gt; || &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || | &lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;资料分享&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;1. 课程总览&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;A&lt;/strong&gt;. &lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;结构模型 · 2025 · 现场班&lt;/a&gt;&lt;/strong&gt;, 2025 年 6 月 7-8 日 (每天 6 小时 + 30 分钟答疑)；&lt;strong&gt;&lt;font color=&quot;red&quot;&gt;现场班&lt;/font&gt;&lt;/strong&gt;, 谭用 (南京财经大学，教授)&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3&gt;A. 结构模型 · 2025 · 现场班&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;${\color{red}{\Rightarrow}}$ &lt;a href=&quot;https://file.lianxh.cn/KC/lianxh_smodel.pdf&quot;&gt;PDF 版&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;网页版&lt;/a&gt; | &lt;a href=&quot;https://www.jianguoyun.com/p/DeXEUNUQtKiFCBjxzPkFIAA&quot;&gt;预读资料&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;嘉宾：&lt;/strong&gt; 谭用 (南京财经大学，教授)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;时间：&lt;/strong&gt; 2025 年 6 月 7-8 日 (每天 6 小时 + 30 分钟答疑)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;方式：&lt;/strong&gt; 现场班&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;报名/助教&lt;/strong&gt;：&lt;a href=&quot;https://www.wjx.top/vm/QfdWOa3.aspx#&quot;&gt;-报名-&lt;/a&gt; (全程班：2000 元/人) | &lt;a href=&quot;https://www.wjx.top/vm/OlWbUuM.aspx#&quot;&gt;助教招聘&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;联系方式：&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;邮箱：&lt;a href=&quot;https://www.lianxh.cn/details/wjx004@sina.com&quot;&gt;wjx004@sina.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;王老师：18903405450 (微信同号)&lt;/li&gt;
&lt;li&gt;李老师：18636102467 (微信同号)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;2. 连享会小课堂：在线视频课程&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;${\color{red}{NEW}}$ 连享会在线课堂：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;连玉君，&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，观看量超过 100 万人次的 Stata 入门课&lt;/li&gt;
&lt;li&gt;连玉君，&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，2 小时，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443315&quot;&gt;Stata 软件及计量基础&lt;/a&gt;, 五次课，Stata 入门必备&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443328&quot;&gt;因果推断：控制变量如何选？&lt;/a&gt;，2 小时, 9.9 元&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443329&quot;&gt;因果推断：反事实架构及主流计量方法&lt;/a&gt;, 2 小时, 9.9 元&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443313&quot;&gt;我的特斯拉-实证研究设计&lt;/a&gt;，2.4 小时&lt;/li&gt;
&lt;li&gt;连玉君，&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443314&quot;&gt;我的甲壳虫-论文精讲与重现&lt;/a&gt;，两次课，共 6 小时&lt;/li&gt;
&lt;li&gt;连玉君，&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443312&quot;&gt;动态面板数据模型&lt;/a&gt;，2.2 小时，理论+实操&lt;br&gt;
&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;……&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 资源分享&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;详情：&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;主页 - 资料分享&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Data&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.gtarsc.com/#/datacenter/singletable&quot;&gt;CSMAR-国泰安&lt;/a&gt; | &lt;a href=&quot;https://www.wind.com.cn/Default.html&quot;&gt;Wind-万德&lt;/a&gt; | &lt;a href=&quot;http://www.resset.cn/databases&quot;&gt;Resset-锐思&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;论文复现&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Stata论文重现：&lt;a href=&quot;https://dataverse.harvard.edu/dataverse&quot;&gt;Harvard&lt;/a&gt; | &lt;a href=&quot;https://ejd.econ.mathematik.uni-ulm.de/&quot;&gt;Top 期刊论文&lt;/a&gt; | &lt;a href=&quot;http://jfe.rochester.edu/data.htm&quot;&gt;JFE&lt;/a&gt;  | &lt;a href=&quot;https://github.com/search?utf8=%E2%9C%93&amp;amp;q=stata&amp;amp;type=&quot;&gt;github&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;学者主页：&lt;a href=&quot;http://economics.mit.edu/faculty/angrist/data1/data&quot;&gt;Angrist&lt;/a&gt; | &lt;a href=&quot;http://economics.mit.edu/faculty/acemoglu/data&quot;&gt;Acemoglu&lt;/a&gt;  | &lt;a href=&quot;http://faculty.haas.berkeley.edu/ross_levine/papers.htm&quot;&gt;Levine&lt;/a&gt; | &lt;a href=&quot;http://economics.mit.edu/faculty/eduflo/papers&quot;&gt;Duflo&lt;/a&gt; | &lt;a href=&quot;http://www.rajchetty.com/&quot;&gt;Chetty&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;推文&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;推文集合：&lt;a href=&quot;https://file.lianxh.cn/KC/lianxh_Blogs.pdf&quot;&gt;PDF 合集&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;Stata：&lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;教程&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/35.html&quot;&gt;资料&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/43.html&quot;&gt;新命令&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/26.html&quot;&gt;程序&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项-调节&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/38.html&quot;&gt;IV-GMM&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/27.html&quot;&gt;Logit&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/29.html&quot;&gt;空间计量&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/41.html&quot;&gt;PSM&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/42.html&quot;&gt;合成控制&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/36.html&quot;&gt;文本分析&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;关于我们&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt; 和 &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;Bilibili 站&lt;/a&gt;有很多视频课程，可以自由安排学习时间。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;分类推文&lt;/a&gt; 中包含 1000+ 推文，实证分析不再抓狂&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;&lt;code&gt;lianxh&lt;/code&gt; 命令发布了！&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在 Stata 命令窗口搜推文、Stata 资源，安装命令如下：&lt;br&gt;
  &lt;code&gt;. ssc install lianxh&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;使用详情参见帮助文件 (有惊喜)：&lt;br&gt;
  &lt;code&gt;. help lianxh&lt;/code&gt;&lt;br&gt;
  &lt;code&gt;. lianxh DID 倍分法&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E8%8D%89%E6%96%99%E4%B8%BB%E9%A1%B5-%E4%B8%80%E7%A0%81%E5%B9%B3%E5%B7%9D600.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/17.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/17.html</guid><pubDate>Sun, 13 Dec 2026 16:00:00 GMT</pubDate><author>连享会</author></item><item><title>R语言：Top期刊中使用最多的50个R扩展包</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者：&lt;/strong&gt; 连小白 (连享会)&lt;br&gt;
&lt;strong&gt;邮箱：&lt;/strong&gt; &lt;a href=&quot;mailto:arlionn@163.com&quot;&gt;arlionn@163.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;: R语言：Top期刊中使用最多的50个R扩展包&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;: ggplot2, dplyr, foreign, stargazer, tidyverse, xtable, plyr, gridExtra, lmtest, MASS, 论文复现, Harvard Dataverse, 学术论文&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 简介&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://dataverse.harvard.edu/&quot;&gt;Harvard Dataverse&lt;/a&gt; 是全球知名的开放数据平台，托管了超过大量学术论文的复现文档与代码资源库。为了摸清学术界最常用的 R 扩展包，&lt;a href=&quot;https://arelbundock.com/&quot;&gt;Vincent Arel-Bundock&lt;/a&gt; 教授下载了 &lt;a href=&quot;https://dataverse.org/&quot;&gt;Dataverse&lt;/a&gt; 平台上的 4539 个项目 (每个项目通常是一篇期刊论文的复现文档集合)，其中包含了 19162 个 R 脚本 (&lt;strong&gt;.R&lt;/strong&gt; 文档)，并 &lt;a href=&quot;https://arelbundock.com/posts/dataverse_r/index.html&quot;&gt;详细分析&lt;/a&gt; 了这些文档中 R 扩展包的调用情况。具体分析过程如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;数据获取&lt;/strong&gt;：基于 Trisovic 等 (2022) 的方法构建 Python 爬虫，批量下载平台上的 R 脚本文件。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;依赖解析&lt;/strong&gt;：运用 R 环境管理包 &lt;a href=&quot;https://rstudio.github.io/renv/&quot;&gt;&lt;code&gt;renv&lt;/code&gt;&lt;/a&gt; 中的 &lt;code&gt;dependencies()&lt;/code&gt; 函数，精准识别每个脚本调用的扩展包。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;频次统计&lt;/strong&gt;：生成 19162 个 R 脚本中 R 扩展包使用频率的完整排名。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;最终，一共识别出使用频次超过两次以上的扩展包共 &lt;a href=&quot;https://arelbundock.com/posts/dataverse_r/index.html&quot;&gt;1,243 个&lt;/a&gt;。这些扩展包涵盖了经济学、社会学、医学等多个学科，主要源自学术论文。对于 R 语言的用户而言，我们可以从这个列表中找出适合特定分析目标的扩展包，大幅提高工作效率。&lt;a href=&quot;https://arelbundock.com/posts/dataverse_r/index.html&quot;&gt;点击查看完整扩展包列表&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;受限于篇幅，本文重点介绍使用频率最高的 50 个包，并额外提供近年来新推出的的 20 个包。&lt;/p&gt;
&lt;h2&gt;2. Top 50 Packages&lt;/h2&gt;
&lt;p&gt;以下是学术论文中最常使用的 50 个 R 扩展包，已根据包的用途进行了分类，并在包名上添加了超链接，便于读者点击查看每个包的详细信息。Note：表中的 &lt;code&gt;# Loaded&lt;/code&gt; 表示该包被加载的次数。&lt;/p&gt;
&lt;h3&gt;数据处理类&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Package&lt;/th&gt;
&lt;th&gt;# loaded&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;功能介绍&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://dplyr.tidyverse.org/&quot;&gt;dplyr&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;1583&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;数据清洗和变换&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://www.tidyverse.org/&quot;&gt;tidyverse&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;1136&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;数据科学工具包，整合多种 tidy 风格包&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/plyr/index.html&quot;&gt;plyr&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;796&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;数据聚合与处理&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/data.table/index.html&quot;&gt;data.table&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;480&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;快速高效的数据处理工具&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/Hmisc/index.html&quot;&gt;Hmisc&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;396&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;数据分析与描述性统计&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/reshape2/index.html&quot;&gt;reshape2&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;579&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;数据纵横变换工具&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/tidyr/index.html&quot;&gt;tidyr&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;455&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;数据整形与转换&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;数据导入类&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Package&lt;/th&gt;
&lt;th&gt;# loaded&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;功能介绍&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/foreign/index.html&quot;&gt;foreign&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;1361&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;导入 SPSS、Stata 等格式数据&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/haven/index.html&quot;&gt;haven&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;535&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;导入和导出 SPSS、Stata、SAS 数据&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/readstata13/index.html&quot;&gt;readstata13&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;465&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;专门读取 Stata 13+ 数据&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/readxl/index.html&quot;&gt;readxl&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;385&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;导入 Excel 数据&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;可视化类&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Package&lt;/th&gt;
&lt;th&gt;# loaded&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;功能介绍&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://ggplot2.tidyverse.org/&quot;&gt;ggplot2&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;2092&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;数据可视化工具，基于 Grammar of Graphics&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/gridExtra/index.html&quot;&gt;gridExtra&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;721&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;图表布局工具&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/scales/index.html&quot;&gt;scales&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;631&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;缩放、配色及标签工具&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/ggpubr/index.html&quot;&gt;ggpubr&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;354&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;以简化 ggplot2 图表绘制&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/RColorBrewer/index.html&quot;&gt;RColorBrewer&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;330&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;专业调色板工具&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;统计建模与检验类&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Package&lt;/th&gt;
&lt;th&gt;# loaded&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;功能介绍&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/lmtest/index.html&quot;&gt;lmtest&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;701&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;回归模型诊断与检验&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/MASS/index.html&quot;&gt;MASS&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;664&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;提供广泛的统计分析工具&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/car/index.html&quot;&gt;car&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;606&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;线性模型诊断工具&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/sandwich/index.html&quot;&gt;sandwich&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;579&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;稳健方差估计工具&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/lme4/index.html&quot;&gt;lme4&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;413&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;线性混合效应模型&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/arm/index.html&quot;&gt;arm&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;280&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;贝叶斯分析与多层次模型&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;结果输出类&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Package&lt;/th&gt;
&lt;th&gt;# loaded&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;功能介绍&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/stargazer/index.html&quot;&gt;stargazer&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;1243&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;结果表格输出，支持 LaTeX/HTML&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/xtable/index.html&quot;&gt;xtable&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;854&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;创建 HTML、LaTeX 格式表格&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/texreg/index.html&quot;&gt;texreg&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;389&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;模型结果整合输出工具&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;3. 新兴 R 扩展包推荐&lt;/h2&gt;
&lt;p&gt;除了上述扩展包外，近年来新发布的一些扩展包在功能上表现出色，使用便捷，逐渐受到越来越多科研人员的青睐。这里列举一些，供大家参考：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;包名&lt;/th&gt;
&lt;th&gt;功能介绍&lt;/th&gt;
&lt;th&gt;核心优势&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;数据处理与质量管控&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/tidylog/&quot;&gt;tidylog&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;数据操作日志&lt;/td&gt;
&lt;td&gt;自动记录&lt;code&gt;dplyr&lt;/code&gt;/&lt;code&gt;tidyr&lt;/code&gt;操作步骤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/visdat/&quot;&gt;visdat&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;数据可视化&lt;/td&gt;
&lt;td&gt;图形化显示缺失值/异常值分布&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/skimr/&quot;&gt;skimr&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;数据摘要&lt;/td&gt;
&lt;td&gt;一键输出变量类型/分布/缺失统计&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/datawizard/&quot;&gt;datawizard&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;数据清洗转换&lt;/td&gt;
&lt;td&gt;支持标准化/归一化/变量类型转换&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;可视化增强工具&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/paletteer/&quot;&gt;paletteer&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;调色板管理&lt;/td&gt;
&lt;td&gt;整合RColorBrewer/viridis等50+配色方案&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://patchwork.data-imaginist.com/&quot;&gt;patchwork&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;图形拼接语法&lt;/td&gt;
&lt;td&gt;多图组合排版（支持嵌套布局）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/ggtext/&quot;&gt;ggtext&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;富文本渲染&lt;/td&gt;
&lt;td&gt;在ggplot2中使用Markdown格式文本&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/ggalluvial/&quot;&gt;ggalluvial&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;复杂关系可视化&lt;/td&gt;
&lt;td&gt;绘制桑基图/冲积图（Alluvial diagrams）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;结果输出与报告&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://modelsummary.com/&quot;&gt;modelsummary&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;模型结果整合&lt;/td&gt;
&lt;td&gt;支持LaTeX/Word/HTML/PDF&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://gt.rstudio.com/&quot;&gt;gt&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;交互式表格&lt;/td&gt;
&lt;td&gt;生成带排序/筛选功能的HTML表格&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://www.danieldsjoberg.com/gtsummary/&quot;&gt;gtsummary&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;统计报告生成&lt;/td&gt;
&lt;td&gt;自动生成临床研究三线表&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://davidgohel.github.io/flextable/&quot;&gt;flextable&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;动态表格设计&lt;/td&gt;
&lt;td&gt;支持合并单元格/条件格式设置&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;统计和计量分析&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://easystats.github.io/easystats/&quot;&gt;easystats&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;统计建模&lt;/td&gt;
&lt;td&gt;整合performance/parameters/bayestestR&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://easystats.github.io/bayestestR/&quot;&gt;bayestestR&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;贝叶斯分析&lt;/td&gt;
&lt;td&gt;计算ROPE/PD/贝叶斯因子&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://corrr.tidymodels.org/&quot;&gt;corrr&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;相关分析&lt;/td&gt;
&lt;td&gt;可视化相关矩阵网络图&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;交互式分析&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://plotly.com/r/&quot;&gt;plotly&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;动态可视化&lt;/td&gt;
&lt;td&gt;支持缩放/高亮/数据框选&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;4. 参考资料&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Vincent Arel-Bundock, 2023, Blog, Which R packages do scientists use? An analysis of 19,000 R scripts hosted by The Dataverse Project. &lt;a href=&quot;https://arelbundock.com/posts/dataverse_r/index.html&quot;&gt;Link&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Trisovic, A., Lau, M. K., Pasquier, T., &amp;amp; Crosas, M. (2022). A large-scale study on research code quality and execution. Scientific Data, 9(1). &lt;a href=&quot;https://doi.org/10.1038/s41597-022-01143-6&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://d1wqtxts1xzle7.cloudfront.net/88132406/s41597-022-01143-6-libre.pdf?1656612233=&amp;amp;response-content-disposition=inline%3B+filename%3DA_large_scale_study_on_research_code_qua.pdf&amp;amp;Expires=1742198059&amp;amp;Signature=GjcOQu1awDUbB05cU3Fn5ZzI0xiNf-sjAtWpgkQa4y-vYp1SxmSXRkE0SKv7WdvGXD8QtapJ-KcTHWTKt0L0m1K50M5R3ptMveb8IOYI347hKaBFWK0UEo-8NyDIXiuO7r63JgGnYsg5rLnD8KhOAHLTMsmA-KmcVF43Dob0y25rjyvr7aZv8E6qAvF1ceoSswYpF77XTnpbqlEvfuNyTAJTugOiKz5YBTb5P7lrDtJeD4XbXLPlKP627VmP~~LO-ZBbk8MfGD2wy51rdOQW9xrgcda~FKlYnQF8Zg58ArZJodPZbKRAVMzOlg0~JLc7IZ2DsEIyp7v2sfvcBq6ILA__&amp;amp;Key-Pair-Id=APKAJLOHF5GGSLRBV4ZA&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://d1wqtxts1xzle7.cloudfront.net/107231823/2103.12793-libre.pdf?1699442741=&amp;amp;response-content-disposition=inline%3B+filename%3DA_large_scale_study_on_research_code_qua.pdf&amp;amp;Expires=1742198087&amp;amp;Signature=M8xyLuOeiH3qz1VhQBD4oXfpNozp22MBNhLhQBimQxJU8-Uagnc9mMOeFY8eI1DPnAi-Uq0jhEIPJzzY86iiUxXCTZuNPJMeyrDaZ~sSb-VINvKOHwFVJzW5g2jdw98nJKWQbVTdH7gSDQah-UiljJxcHGk9KRm9P3nxU7vR0wbRLQBI92qMrF4sT6YYd5XGN~uxmT2wuVDp1KHlRWgvNUViHISTOs-ZPKiWeHh~Hsqk6npLSsElxJlxel-cloEmShpvWmA3uJOuVld5ggRQ1RDyry5zJqrNicZBIN0LMvh~YpYOV5fYvtq7bnkogcExf8R9q4Of6ZbzFB5J3ua56A__&amp;amp;Key-Pair-Id=APKAJLOHF5GGSLRBV4ZA&quot;&gt;-PDF2-&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=A%20large-scale%20study%20on%20research%20code%20quality%20and%20execution&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Ushey K (2022). renv: Project Environments. R package version 0.16.0, https://rstudio.github.io/renv/.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;5. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh R语言：基本 RStudio 狐狸 statar gtExtras tidyplots, md nocat&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;刘晓飞, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1414.html&quot;&gt;R语言：基本的数据处理和统计分析实例&lt;/a&gt;, 连享会 No.1414.&lt;/li&gt;
&lt;li&gt;李明来, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/773.html&quot;&gt;R和RStudio安装教程&lt;/a&gt;, 连享会 No.773.&lt;/li&gt;
&lt;li&gt;范思妤, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1333.html&quot;&gt;R/RStudio下载安装指南&lt;/a&gt;, 连享会 No.1333.&lt;/li&gt;
&lt;li&gt;连享会, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1265.html&quot;&gt;Stata2R：针对 Stata 用户的 R 课程&lt;/a&gt;, 连享会 No.1265.&lt;/li&gt;
&lt;li&gt;连玉君, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1481.html&quot;&gt;RStudio常用的快捷键一览&lt;/a&gt;, 连享会 No.1481.&lt;/li&gt;
&lt;li&gt;连玉君, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1270.html&quot;&gt;刺猬与狐狸：Stata与R语言常用命令等价对比&lt;/a&gt;, 连享会 No.1270.&lt;/li&gt;
&lt;li&gt;郭盼亭, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1228.html&quot;&gt;R语言与Stata等价命令-statar&lt;/a&gt;, 连享会 No.1228.&lt;/li&gt;
&lt;li&gt;闫钊鹏, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1311.html&quot;&gt;R语言：gtExtras包-绘制漂亮的表格和图形&lt;/a&gt;, 连享会 No.1311.&lt;/li&gt;
&lt;li&gt;颜国强, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1518.html&quot;&gt;R语言绘图：Tidyplots（二）-函数一览及实例&lt;/a&gt;, 连享会 No.1518.&lt;/li&gt;
&lt;li&gt;颜国强,连玉君, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1513.html&quot;&gt;tidyplots：跟 ggplot2 说再见吧！&lt;/a&gt;, 连享会 No.1513.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1550.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1550.html</guid><pubDate>Tue, 18 Mar 2025 16:00:00 GMT</pubDate><author>连小白（连享会）</author></item><item><title>Stata：更适合中国的坐标命令-cngcode-cnaddress</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：谢嘉伟 (赣南师范大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:1221249017@gnnu.edu.cn&quot;&gt;1221249017@gnnu.edu.cn&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;：本文主要内容摘自下文，特此致谢！&lt;br&gt;
&lt;strong&gt;Source&lt;/strong&gt;：Xue, Y., &amp;amp; Li, C. (2020). Extracting Chinese geographic data from Baidu Map API. The Stata Journal, 20(4), 805-811. &lt;a href=&quot;https://journals.sagepub.com/doi/10.1177/1536867X20976313?icid=int.sj-abstract.similar-articles.3&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;https://journals.sagepub.com/doi/pdf/10.1177/1536867X20976313&quot;&gt;-PDF-&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;：Stata：更适合中国的坐标命令-cngcode-cnaddress&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;：Sata 绘图，cngcode，cnaddress，BD09II，百度地图，中国地理编码&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 引言&lt;/h2&gt;
&lt;p&gt;地理信息由于其基本性质，在科学研究中发挥着越来越重要的作用。有时我们需要相关程序处理地理数据，将人类语言转换为地理位置或相反操作。然而，目前大多数地图默认都不是为中文用户设计的，中文地址无法正确处理和及时更新。此外，由于国家安全和意识形态的原因，其中一些电子地图在中国无法访问。而且这些地图服务通常不会以中文显示。由于中国是世界上人口最多的国家，在科研领域有越来越多的人需要处理中文地址或地理位置，这就需要 Stata 中增加新的命令。&lt;/p&gt;
&lt;p&gt;本文我们介绍两个新的命令 &lt;code&gt;cngcode&lt;/code&gt; 和 &lt;code&gt;cnaddress&lt;/code&gt;，它们可以配合百度地图 API 的应用来填补这一空白。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 准备工作&lt;/h2&gt;
&lt;p&gt;在正式操作前，我们需要了解百度独有的 BD09II 坐标系统和百度地图 API 的获取流程。&lt;/p&gt;
&lt;h3&gt;2.1 BD09II 大地坐标系&lt;/h3&gt;
&lt;p&gt;BD09II 是百度专为其在中国的地图和导航服务而开发的大地坐标系统，属于百度开发的 BD09 坐标系统的一部分，通常用于百度地图相关服务和 API 中。BD09II 是 BD09 坐标系的一种内嵌版本，常用于在线地图和 API 数据传输场景。与 BD09 的主要区别在于，BD09II 是一个更加精简的内部实现版本。&lt;/p&gt;
&lt;p&gt;BD09II 是 GCJ-02 (火星坐标系) 的一种变换形式，而 GCJ-02 源自 WGS-84 系统。这意味着 BD09II 坐标间接链接到 WGS-84 系统。BD09II 的目标是提高地理空间数据的准确性、确保与百度地图技术的兼容性，并遵守中国政府对地理数据的限制。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;加密转换&lt;/strong&gt;：BD09II 在 GCJ-02 坐标上应用了额外的转换层。此转换涉及复杂的数学算法组合，包括三角运算和指数运算，以混淆精确的地理信息。从 WGS-84 到 GCJ-02，再到 BD09II 的信息混淆转换，既符合中国国家安全需求，也为商业用途提供了精确的地图绘制。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;投影系统&lt;/strong&gt;：BD09II 主要使用墨卡托投影 (Mercator Projection)，该投影基于 Web 的地图绘制应用程序。这确保了与全球地图绘制标准的兼容性，同时保持其专有的转换方法。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;偏移性质&lt;/strong&gt;：与 GCJ-02 一样，BD09II 也在地理坐标中引入了偏移。这种偏移确保原始地理数据不能直接使用，除非通过专有转换回 GCJ-02 或 WGS-84。&lt;/p&gt;
&lt;p&gt;在实际应用中，BD09II 是百度地图及其相关服务的核心，其提供的精确定位对于需要地理空间数据的 AR 和 VR 应用至关重要。因此，许多集成百度地图的第三方应用程序都依赖 BD09II 来提供精确的位置服务。本文所介绍的命令依赖的 API 正是基于这一坐标系进行运作。&lt;/p&gt;
&lt;h3&gt;2.2 百度地图 API 获取&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;cngcode&lt;/code&gt; 和 &lt;code&gt;cnaddress&lt;/code&gt; 的使用必须获取百度地图 &lt;strong&gt;API Key&lt;/strong&gt;，该 API Key 在&lt;a href=&quot;http://lbsyun.baidu.com/&quot;&gt;百度地图开放平台&lt;/a&gt;上注册。以下是具体的申请 API Key 的详细流程。&lt;/p&gt;
&lt;h4&gt;2.2.1 Step1：注册登录百度账号&lt;/h4&gt;
&lt;p&gt;首先，用户必须注册一个百度账号。这是百度为所有用户使用百度地图开放平台资源设定的前提条件。具体步骤如下：用户需要访问&lt;a href=&quot;https://www.baidu.com/&quot;&gt;百度主页&lt;/a&gt;，点击右上角的【登录】按钮，在空白处填写账号和密码 (见下图)。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig1_cntraveltime%E5%9B%BE1_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;若用户尚未拥有百度账号，可以点击上图主界面右上角的【登录】，并点击弹窗右下角的【立即注册】按钮，进入百度账号注册页面。在百度账号注册页面，用户需要按照页面提示输入所需信息：用户名、手机号、密码和手机验证码等 (见下图)。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig2_cntraveltime%E5%9B%BE2_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;注册成功后，用户可以访问&lt;a href=&quot;https://lbsyun.baidu.com/index.php&quot;&gt;官方网站&lt;/a&gt;。右上角会自动显示登录信息，表示百度账号已注册成功，可以进行前期工作了 (见下图)。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig3_cntraveltime%E5%9B%BE3_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h4&gt;2.2.2 Step2：开发者认证&lt;/h4&gt;
&lt;p&gt;要获得 API 额度，用户除了需要百度账号，还需进行开发者身份注册。如上图所示，用户首先点击右上角的【控制台】，进入开发者注册界面。然后，如下图所示，按要求填写姓名、手机号码及验证码、企业名称和邮箱等相关信息。这种注册方式能够提供更多 API 额度。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig4_cntraveltime%E5%9B%BE4_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;如果用户希望作为个人开发者注册，则需要在上图的下方点击【我不是企业员工】或【我是学生】按钮来完成注册。以学生身份注册为例，用户需要提供以下信息：姓名、手机号码、个人邮箱、学校名称、专业、毕业日期、身份证号码、认证地址以及学生证的照片等验证材料。此外，还需提交使用 API 的具体原因 (使用场景) (见下图)。在完成所有信息填写并通过人脸识别后，系统会进入审核阶段，此过程可能需要一些时间来生成最终的认证结果。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig5_cntraveltime%E5%9B%BE5_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h4&gt;2.2.3 Step3：申请百度地图 API Key&lt;/h4&gt;
&lt;p&gt;开发者认证流程完成后，用户可以点击【应用管理】-【我的应用】-【创建应用】来申请新的百度地图 API 密钥供 &lt;code&gt;cngcode&lt;/code&gt; 使用 (见下图)。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig6_cntraveltime%E5%9B%BE6_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;点击【创建应用】后弹出的 API key 申请表中，【应用类型】默认为【服务端】选项。往下拉界面填写 IP 白名单中的电脑 IP 地址，以确保只有申请者自己才能使用这个 key。如果希望授权后任何 IP 地址的电脑都能使用这个 key，则可以在白名单中填写 0.0.0.0/0 (见下图)。申请 key 完成后，控制台相应页面会显示新的 API key，用户可以将该 key 复制到任何需要使用的地方。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig7_cntraveltime%E5%9B%BE7_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;最后，我们可以在控制台的【额度管理】-【我的额度】部分查看各应用每日调用服务次数上限。如下图所示，对于个人开发者用户而言，目前只有部分服务能够免费申请，额度为每日 5,000 次地理编码服务和 5,000 次路由服务，其他服务则需要根据实际需求购买。而对于企业用户，额度为每日 3,000,000 次地理编码服务和 300,000 次路线规划服务。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig8_cntraveltime%E5%9B%BE8_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 命令使用说明&lt;/h2&gt;
&lt;p&gt;在完成前期准备工作并成功获取百度地图 API Key (如：CH8eakl6UTlEb1OakeWYvofh，此密钥仅为示例用途) 后，我们可以开始使用 &lt;code&gt;cngcode&lt;/code&gt; 和 &lt;code&gt;cnaddress&lt;/code&gt; 了。&lt;/p&gt;
&lt;p&gt;需要再次说明的是，由于百度地图网站的源代码是 UTF-8 编码的，因此 &lt;code&gt;cngcode&lt;/code&gt; 和 &lt;code&gt;cnaddress&lt;/code&gt; 需要 Stata 14 或更高版本。使用 &lt;code&gt;cngcode&lt;/code&gt; 将中文地址转换为经纬度定义的位置时，用户可以通过两种方式指定地址：离散模式或完整地址模式。在离散模式下，地址信息被分解为多个变量，包括省、市、区、街道名称和编号。在完整地址模式下，只有一个字符串变量，其中包含上述所有信息。&lt;/p&gt;
&lt;p&gt;有时，我们既有离散地址，又有完整地址。在这种情况下，用户可以同时指定两者，即组合模式。但是，当同时使用两者但只有一个地址能返回有意义的位置时，&lt;code&gt;cngcode&lt;/code&gt; 将选择有效的那个。如果两个地址都有效但返回的位置略有不同，则 &lt;code&gt;cngcode&lt;/code&gt; 的默认选择是使用离散地址产生的位置。用户可以通过使用 &lt;code&gt;ffirst&lt;/code&gt; 选项更改此优先级，这样在完整地址和离散地址的位置不同时，它将返回完整地址的位置。&lt;/p&gt;
&lt;p&gt;当使用 &lt;code&gt;cnaddress&lt;/code&gt; 时，用户将获得以下信息：省份、城市、区、街道、完整地址以及由经度和纬度定义的位置的语义描述。&lt;/p&gt;
&lt;p&gt;最后，命令的准确性依赖于百度地图的准确性，而百度地图的准确性又取决于指定地址的方式。如果地址不够具体 (例如，我们指定某所大学的名称，而该大学在不同城市或省份有多个校区)，百度地图可能仅返回其中一个校区的位置，这可能不是用户所关心的校区。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. 语法格式&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;* 借助百度地图 API 提取中文地址的经纬度
cngcode, baidukey(string) [options]

* cnaddress 是 cngcode 的逆命令。使用百度地图 API 将位置（经度和纬度对）转换为相应的中文地址
cnaddress, baidukey(string) lat(varname) long(varname) [options]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;我们先介绍 &lt;code&gt;cngcode&lt;/code&gt; 的选项：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;baidukey(string)&lt;/code&gt;：为百度地图 API Key，为&lt;strong&gt;必填项&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;province(varname)&lt;/code&gt;：指定包含省份名称的字符串变量。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;city(varname)&lt;/code&gt;：指定包含城市名称的字符串变量。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;district(varname)&lt;/code&gt;：指定包含地区名称的字符串变量。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;address(varname)&lt;/code&gt;：指定包含地址的字符串变量。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fulladdress(varname)&lt;/code&gt;：指定包含完整地址的字符串变量。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;latitude(newvar)&lt;/code&gt;：当用户想要输出包含纬度的变量时，此项是必需的。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;longitude(newvar)&lt;/code&gt;：当用户想要输出包含经度的变量时，此项是必需的。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;coordtype(string)&lt;/code&gt;：当用户想要指定输出的坐标类型时，此项是必需的：
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;gcj02ll&lt;/code&gt;：表示获得 GCJ-02 经度和纬度。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bd09ll&lt;/code&gt;：表示获得 BD-09 经度和纬度。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bd09mc&lt;/code&gt;：表示获得 BD-09 公制坐标。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ffirst&lt;/code&gt; 如果组合地址产生的位置与完整地址返回的位置不同，则 &lt;code&gt;ffirst&lt;/code&gt; 指定完整地址的位置为第一优先级。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. cngcode 示例&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. net get dm0104, from(http://www.stata-journal.com/software/sj20-4) replace
. use example.dta, clear 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;根据前文，&lt;code&gt;cngcode&lt;/code&gt; 有三种方式获取地址：&lt;/p&gt;
&lt;p&gt;基于离散的地址变量&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. * 基于离散的地址变量
. cngcode, baidukey(CH8eakl6UTlEb1OakeWYvofh) province(Prov) city(City) ///
&amp;gt;          district(Dis) address(Address) longitude(lon1) latitude(lat1)
. list lon1 lat1

    +-----------------------+
    |      lon1        lat1 |
    |-----------------------|
 1. | 114.39979   30.482972 |
 2. | 114.42592   30.519116 |
 3. | 114.36235   30.558535 |
 4. |         .           . |
    +-----------------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. * 基于完整的地址变量
. cngcode, baidukey(CH8eakl6UTlEb1OakeWYvofh) fulladdress(FullA) ///
&amp;gt;          longitude(lon2) latitude(lat2)

    +-----------------------------------------------+
    |      lon1        lat1        lon2        lat2 |
    |-----------------------------------------------|
 1. | 114.39979   30.482972   114.39979   30.482972 |
 2. | 114.42592   30.519116   114.42016   30.515342 |
 3. | 114.36235   30.558535           .           . |
 4. |         .           .   114.36371    30.48178 |
    +-----------------------------------------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. * 将 1 和 2 组合在一行命令中
. cngcode, baidukey(CH8eakl6UTlEb1OakeWYvofh) province(Prov)            ///
&amp;gt;          city(City) district(Dis) address(Address) fulladdress(FullA) ///
&amp;gt;          longitude(lon3) latitude(lat3)
. list lon1 - lat3

    +-----------------------------------------------------------------------+
    |      lon1        lat1        lon2        lat2        lon3        lat3 |
    |-----------------------------------------------------------------------|
 1. | 114.39979   30.482972   114.39979   30.482972   114.39979   30.482972 |
 2. | 114.42592   30.519116   114.42016   30.515342   114.42592   30.519116 |
 3. | 114.36235   30.558535           .           .   114.36235   30.558535 |
 4. |         .           .   114.36371    30.48178   114.36371    30.48178 |
     +-----------------------------------------------------------------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;在组合地址模式下，&lt;code&gt;cngcode&lt;/code&gt; 将尝试为离散地址和完整地址计算两个位置。如果其中一个地址没有产生有意义的位置，它将被自动忽略。然而，如果两个地址都产生有意义的位置，则默认选择是报告从离散地址生成的位置。此外，我们可以使用选项 &lt;code&gt;ffirst&lt;/code&gt; 来报告组合模式下完整地址生成的位置。命令指定如下：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. cngcode, baidukey(CH8eakl6UTlEb1OakeWYvofh) province(Prov) city(City) ///
&amp;gt;          district(Dis) address(Address) fulladdress(FullA) ffirst ///
&amp;gt;          longitude(lon4) latitude(lat4)
. list lon1 - lat2 lon4 lat4

    +-----------------------------------------------------------------------+
    |      lon1        lat1        lon2        lat2        lon4        lat4 |
    |-----------------------------------------------------------------------|
 1. | 114.39979   30.482972   114.39979   30.482972   114.39979   30.482972 |
 2. | 114.42592   30.519116   114.42016   30.515342   114.42016   30.515342 |
 3. | 114.36235   30.558535           .           .   114.36235   30.558535 |
 4. |         .           .   114.36371    30.48178   114.36371    30.48178 |
    +-----------------------------------------------------------------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;6. cnaddress 示例&lt;/h2&gt;
&lt;p&gt;相对于 &lt;code&gt;cngcode&lt;/code&gt; 的语法，&lt;code&gt;cnaddress&lt;/code&gt; 的语法更直观。这里我们使用前面得到的两个变量 &lt;strong&gt;lat4&lt;/strong&gt; 和 &lt;strong&gt;lon4&lt;/strong&gt;，它们表示位置的经纬度。获取相应中文地址的简单命令如下：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. cnaddress, baidukey(CH8eakl6UTlEb1OakeWYvofh) latitude(lat4) longitude(lon4)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;上述命令输出的是离散的地址类型，包括省名、城市、区、街道和完整的一体化地址。不同类型的坐标 (例如 WGS-84、GCJ-02 和 BD-09) 到给定位置的纬度和经度有所不同。我们可以在选项 &lt;code&gt;coordtype()&lt;/code&gt; 中指定坐标类型，默认情况下为 &lt;code&gt;bd09ll&lt;/code&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. cnaddress, baidukey(CH8eakl6UTlEb1OakeWYvofh) latitude(lat4) longitude(lon4) coordtype(wgs84ll)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;7. 总结&lt;/h2&gt;
&lt;p&gt;在 &lt;code&gt;cngcode&lt;/code&gt; 和 &lt;code&gt;cnaddress&lt;/code&gt; 命令发布之前，中国的 Stata 用户很难处理中国的地理信息，这两个命令填补了这一空白。为了使用命令，本文介绍了 BD09II 坐标系和百度地图 API，以方便读者使用。这些信息对交通、教育、环境和经济领域的研究人员很有用。此外，未来还有很多工作要做。我们希望看到更多的研究人员投入时间和精力到这个领域，以促进使用 Stata 软件在某些领域进行更深入的研究。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;8. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh 地图, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;Stata绘图&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;万莉, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/560.html&quot;&gt;Stata绘图：世行可视化案例-条形图-密度函数图-地图-断点回归图-散点图&lt;/a&gt;, 连享会 No.560.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/43.html&quot;&gt;Stata命令&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;万莉, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/401.html&quot;&gt;Stata：空间计量之用-spmap-绘制地图&lt;/a&gt;, 连享会 No.401.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/29.html&quot;&gt;空间计量-网络分析&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;冷萱, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/509.html&quot;&gt;Stata：我和她离多远？基于百度地图API的地理距离计算&lt;/a&gt;, 连享会 No.509.&lt;/li&gt;
&lt;li&gt;张弛, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1401.html&quot;&gt;Stata 绘图：用 geoplot 绘制中国地图&lt;/a&gt;, 连享会 No.1401.&lt;/li&gt;
&lt;li&gt;彭显耿, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/475.html&quot;&gt;GIS地图制作栅格计算器的应用&lt;/a&gt;, 连享会 No.475.&lt;/li&gt;
&lt;li&gt;浦进博, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1527.html&quot;&gt;Stata地图：geoboundary-轻松获取全球地图数据&lt;/a&gt;, 连享会 No.1527.&lt;/li&gt;
&lt;li&gt;浦进博, 邓铨雄, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1383.html&quot;&gt;Stata绘图：地图神器geoplot&lt;/a&gt;, 连享会 No.1383.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/37.html&quot;&gt;Python-R-Matlab&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;王卓, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/922.html&quot;&gt;Python：绘制动态地图-pyecharts&lt;/a&gt;, 连享会 No.922.&lt;/li&gt;
&lt;li&gt;王卓, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1428.html&quot;&gt;Stata绘图：政治关联可视化&lt;/a&gt;, 连享会 No.1428.&lt;/li&gt;
&lt;li&gt;王卓, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1427.html&quot;&gt;Stata绘图：政治关联可视化-B612&lt;/a&gt;, 连享会 No.1427.&lt;/li&gt;
&lt;li&gt;肖蕊, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/925.html&quot;&gt;Stata：地图绘制命令介绍-maptile&lt;/a&gt;, 连享会 No.925.&lt;/li&gt;
&lt;li&gt;谢嘉伟, 2025, &lt;a href=&quot;https://www.lianxh.cn/details/1539.html&quot;&gt;Stata 地图：cntraveltime-助你足不出户丈量中国&lt;/a&gt;, 连享会 No.1539.&lt;/li&gt;
&lt;li&gt;陈卓然, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/984.html&quot;&gt;Stata绘图：绘制二维地图和中国地图-geo2xy&lt;/a&gt;, 连享会 No.984.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1549.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1549.html</guid><pubDate>Mon, 17 Mar 2025 16:00:00 GMT</pubDate><author>谢嘉伟</author></item><item><title>Big-Bad-Bank并不稳健：DID元老级文献的脆弱</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：高君 (西安财经大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:gaojun@petalmail.com&quot;&gt;gaojun@petalmail.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;：本文主要整理自下文，特此感谢！&lt;br&gt;
&lt;strong&gt;Source&lt;/strong&gt;：Baker, A. C., Larcker, D. F., &amp;amp; Wang, C. C. Y. (2022). How much should we trust staggered difference-in-differences estimates? Journal of Financial Economics, 144(2), 370–395. &lt;a href=&quot;https://gitee.com/link?target=https%3A%2F%2Fdoi.org%2F10.1016%2Fj.jfineco.2022.01.004&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;https://gitee.com/link?target=https%3A%2F%2Fgregoryeady.com%2FResearchMethodsCourse%2Fassets%2Freadings%2FBaker%2C%20Andrew%20C.%20et%20al.%20-%202022%20-%20How%20Much%20Should%20We%20Trust%20Staggered%20Difference-in-differences%20Estimates.pdf&quot;&gt;-PDF-&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Title：Big-Bad-Bank并不稳健：DID元老级文献的脆弱&lt;/li&gt;
&lt;li&gt;Keywords：交错DID；CS估计；堆叠回归；稳健性&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;近年来，在因果识别研究中，双向固定效应 (TWFE) 交错双重差分 (DID) 方法的可信性受到了广泛关注。针对其在政策效应评估中的稳健性，Baker 等 (2022) 以 DID 经典文献 &lt;em&gt;Big Bad Bank?&lt;/em&gt; (BLL) 为例，复现了部分核心结果，并进一步检验了新兴 DID 方法的稳健性。这些新方法旨在修正因处理时点差异和处理效应异质性所导致的偏差。&lt;/p&gt;
&lt;p&gt;本文重点关注 Callaway 和 Sant’Anna &lt;a href=&quot;https://www.sciencedirect.com/science/article/pii/S0304407620303948&quot;&gt;(2021)&lt;/a&gt; 提出的 CS 估计量，以及 Gormley 和 Matsa &lt;a href=&quot;https://academic.oup.com/rfs/article-abstract/24/8/2781/1572102?redirectedFrom=fulltext&quot;&gt;(2011)&lt;/a&gt; 提出的堆叠回归方法，以探讨改进 DID 估计的可行性。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 经典文献的稳健性&lt;/h2&gt;
&lt;h3&gt;1.1 BLL 事件研究图&lt;/h3&gt;
&lt;p&gt;首先，我们分析 BLL 论文中的事件研究图。从 图 A 可以看出，放松银行管制对收入不平等产生了负面影响。政策实施前，相对时间虚拟变量的系数围绕零值波动，表明不存在显著的前期趋势，这与平行趋势假设相一致。&lt;/p&gt;
&lt;p&gt;为了进一步检验事件研究法的稳健性，对 BLL 采用的模型设定进行了三项调整：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;直接绘制未调整实施前期系数均值的回归系数 (图 B)；&lt;/li&gt;
&lt;li&gt;取消分组操作，改为完整的相对时间估计 (图 C)；&lt;/li&gt;
&lt;li&gt;剔除1997年前已实施放松管制的州，并排除1999年之后的观测值 (图 D)。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;调整后的结果显示，图 B 采用的修正方法使整个事件研究图整体上移，但趋势未发生显著变化，且政策实施后的大部分置信区间覆盖零值。相比之下，图 C 和图 D 的结果呈现出收入不平等上升的趋势。这表明，不同的模型设定选择会影响政策效应的估计结果，从而影响结论的稳健性。&lt;/p&gt;
&lt;p&gt;那么，究竟是什么导致了结果的不稳健呢？如何修正才能确保估计的稳健性？&lt;/p&gt;
&lt;p&gt;Sun 和 Abraham &lt;a href=&quot;https://www.sciencedirect.com/science/article/pii/S030440762030378X&quot;&gt;(2021)&lt;/a&gt; 在理论分析中指出，当处理效应存在异质性时，对相对时间进行分组可能会导致 TWFE 交错 DID 方法的动态效应估计产生偏误。针对这一问题，Callaway 和 Sant’Anna (2021) 提出了 CS 估计量，而 Gormley 和 Matsa (2011) 提出了堆叠回归方法，以修正因处理效应异质性所导致的偏误。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Big-Bad-Bank%E5%B9%B6%E4%B8%8D%E7%A8%B3%E5%81%A5DID%E5%85%83%E8%80%81%E7%BA%A7%E6%96%87%E7%8C%AE%E7%9A%84%E8%84%86%E5%BC%B1_%E9%AB%98%E5%90%9B_fig01.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;1.2 CS 估计与堆叠回归的验证&lt;/h3&gt;
&lt;p&gt;首先，采用 CS 估计法检验银行放松管制对收入不平等的影响。具体而言，本文采用两种方式进行 CS 估计：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;以&lt;strong&gt;最后解除管制的州&lt;/strong&gt;作为有效对照组；&lt;/li&gt;
&lt;li&gt;以&lt;strong&gt;较晚解除管制的州&lt;/strong&gt;作为有效对照组。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;随后，按照相对时间对不同分组时间的处理效应进行汇总分析。&lt;/p&gt;
&lt;p&gt;从 (i) 图 A 和图 B 可见，政策实施前的系数在 0 附近波动，表明平行趋势假设得以满足。然而，在政策实施后，CS 的估计结果并未显示银行业放松管制导致收入不平等下降的趋势。这一发现与 BLL 论文的结论有所不同，暗示原研究在估计方法上可能存在一定的偏差。&lt;/p&gt;
&lt;p&gt;进一步，使用&lt;strong&gt;堆叠回归&lt;/strong&gt;进行检验。依据 (ii) 图 A 和图 B，本文构建了覆盖特定年份解除管制的州 (处理组) 及 10 年内解除管制各州 (有效控制组) 的队列特定数据集，并对样本进行堆叠处理。同时，仅保留政策实施年份前后 5 至 10 年的州-年份数据，以避免远期数据的干扰。在堆叠数据中，采用数据集特定时间固定效应和州固定效应设定，以估计事件研究。&lt;/p&gt;
&lt;p&gt;结果显示，与 CS 一致，堆叠回归同样未能发现银行业放宽监管会显著降低收入不平等的证据。这进一步表明，BLL 论文的结论可能受到方法设定的影响，而非稳健的因果推断所得。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Big-Bad-Bank%E5%B9%B6%E4%B8%8D%E7%A8%B3%E5%81%A5DID%E5%85%83%E8%80%81%E7%BA%A7%E6%96%87%E7%8C%AE%E7%9A%84%E8%84%86%E5%BC%B1_%E9%AB%98%E5%90%9B_fig02.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;1.3 经典文献的稳健性存疑&lt;/h3&gt;
&lt;p&gt;调整修改设定问题后的 BLL 事件研究图结果，以及 CS 估计与堆叠回归结果，与 BLL 中的 A 图存在显著差异。无论是替代估计值的静态分析还是动态分析，均未能提供有力证据证明银行放松管制对收入水平的影响。这一结果使人对该政策是否真正影响收入不平等产生质疑，也表明估计结果存在一定的不稳健性，难以得出政策实施带来显著影响的结论。&lt;/p&gt;
&lt;p&gt;那么，当你读到这里，是否该反思一下，自己所做的 DID 估计是否真的可靠？是否存在因处理效应异质性或方法设定问题而导致的偏误？稳健的因果推断，或许比你想象的更复杂。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 代码复现&lt;/h2&gt;
&lt;p&gt;接下来对上述所展示的图形，进行复现。首先对 BLL 事件研究图以及更改方法设定之后的图形进行复现，具体代码如下所示。&lt;/p&gt;
&lt;p&gt;数据和代码，详见 &lt;a href=&quot;https://dataverse.nl/dataset.xhtml?persistentId=hdl:10411/15996&quot;&gt;https://dataverse.nl/dataset.xhtml?persistentId=hdl:10411/15996&lt;/a&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt; *-------Fig.9--A图
use &quot;macro_workfile.dta&quot;, clear

*----变量生成
gen y=log(gini)
gen treat=_intra
gen rel_year=wrkyr-branch_reform

*----生成虚拟变量
foreach t of numlist -10/-1{
    local t_clean = subinstr(&quot;`t&#39;&quot;,&quot;-&quot;,&quot;n&quot;,1)
    gen rel_year_`t_clean&#39; = (rel_year==`t&#39;)
replace rel_year_`t_clean&#39; = 0  ///
if missing(rel_year_`t_clean&#39;)
}

foreach t of numlist 1/15{
    gen rel_year_`t&#39; = (rel_year==`t&#39;)
replace rel_year_`t&#39; = 0  ///
if missing(rel_year_`t&#39;)
}

*----端点分箱处理
replace rel_year_n10 = (rel_year &amp;lt;= -10)
replace rel_year_15 = (rel_year &amp;gt;= 15)

*----固定效应回归 (需要先安装reghdfe) 
reghdfe y rel_year_*, absorb(wrkyr statefip) cluster(statefip)

*----提取回归结果
parmest, norestore 

*----处理时序变量
gen h = real(substr(parm,10,.))
replace h = -10 if parm == &quot;rel_year_n10&quot;
replace h = -9 if parm == &quot;rel_year_n9&quot;
replace h = -8 if parm == &quot;rel_year_n8&quot;
replace h = -7 if parm == &quot;rel_year_n7&quot;
replace h = -6 if parm == &quot;rel_year_n6&quot;
replace h = -5 if parm == &quot;rel_year_n5&quot;
replace h = -4 if parm == &quot;rel_year_n4&quot;
replace h = -3 if parm == &quot;rel_year_n3&quot;
replace h = -2 if parm == &quot;rel_year_n2&quot;
replace h = -1 if parm == &quot;rel_year_n1&quot;
drop if missing(h)

*----计算处理前均值
sum estimate if inrange(h,-10,-1)
local premean = r(mean)

*----调整估计值和置信区间
gen adj_est = estimate - `premean&#39;
gen adj_low = min95 - `premean&#39;
gen adj_high = max95 - `premean&#39;

*----添加基准期 (t=0) 
set obs `=_N+1&#39;
replace h = 0 in `=_N&#39;
replace adj_est = 0 in `=_N&#39;
replace adj_low = 0 in `=_N&#39;
replace adj_high = 0 in `=_N&#39;
sort h

*----创建分组变量
gen group = 1 if h &amp;lt; 0
replace group = 2 if h &amp;gt;= 0

gen adj_est1=adj_est*100
gen adj_low1=adj_low*100
gen adj_high1=adj_high*100

* 正确使用调整后的数据
twoway ///
(scatter adj_est1 h if h &amp;lt; 0,  ///
mcolor(black)   ///
msymbol(Oh)) ///
(scatter adj_est1 h if h &amp;gt;= 0, mcolor(black) msymbol(Oh)) ///
(line adj_est1 h if h&amp;lt;=0, lcolor(black)) ///
(line adj_est1 h if h&amp;gt;=0, lcolor(black)) ///
(rcap adj_high1 adj_low1 h, lcolor(black) lpattern(dash)), ///
xline(-0.5,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
yline(0,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
xtitle(&quot;Years Relative to Deregulation&quot;,size(*0.9)) ///
ytitle(&quot;Percent&quot;&quot;Change&quot;,size(*0.9) orientation(horizontal)) ///
xlabel(-10(5)15,glcolor(gs14) labsize(small) ) ///
ylabel(-6(2)4,format(%2.0f) labsize(small) angle(0) glpattern(dot) glcolor(black) labgap(*3) ) ///
text(-6 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(-4 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(-2 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(0 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(2 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(4 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
graphregion(margin(l=5 r=5 t=3 b=3)   ///
color(white))  ///
legend(off)   ///
aspect(0.6)   
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Big-Bad-Bank%E5%B9%B6%E4%B8%8D%E7%A8%B3%E5%81%A5DID%E5%85%83%E8%80%81%E7%BA%A7%E6%96%87%E7%8C%AE%E7%9A%84%E8%84%86%E5%BC%B1_%E9%AB%98%E5%90%9B_fig03.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;*------Fig.9---B图
use &quot;macro_workfile.dta&quot;, clear

*----变量生成
gen y=log(gini)
gen treat=_intra
gen rel_year=wrkyr-branch_reform

*----生成虚拟变量
foreach t of numlist -10/-1{
    local t_clean = subinstr(&quot;`t&#39;&quot;,&quot;-&quot;,&quot;n&quot;,1)
    gen rel_year_`t_clean&#39; = (rel_year==`t&#39;)
replace rel_year_`t_clean&#39; = 0  ///
if missing(rel_year_`t_clean&#39;)
}

foreach t of numlist 1/15{
    gen rel_year_`t&#39; = (rel_year==`t&#39;)
replace rel_year_`t&#39; = 0  ///
if missing(rel_year_`t&#39;)
}

*----端点分箱处理
replace rel_year_n10 = (rel_year &amp;lt;= -10)
replace rel_year_15 = (rel_year &amp;gt;= 15)

*----固定效应回归 (需要先安装reghdfe) 
reghdfe y rel_year_*, absorb(wrkyr statefip) cluster(statefip)

*----提取回归结果
parmest, norestore 

*----处理时序变量
gen h = real(substr(parm,10,.))
replace h = -10 if parm == &quot;rel_year_n10&quot;
replace h = -9 if parm == &quot;rel_year_n9&quot;
replace h = -8 if parm == &quot;rel_year_n8&quot;
replace h = -7 if parm == &quot;rel_year_n7&quot;
replace h = -6 if parm == &quot;rel_year_n6&quot;
replace h = -5 if parm == &quot;rel_year_n5&quot;
replace h = -4 if parm == &quot;rel_year_n4&quot;
replace h = -3 if parm == &quot;rel_year_n3&quot;
replace h = -2 if parm == &quot;rel_year_n2&quot;
replace h = -1 if parm == &quot;rel_year_n1&quot;
drop if missing(h)

*----添加基准期 (t=0) 
set obs `=_N+1&#39;
replace h = 0 in `=_N&#39;
replace estimate = 0 in `=_N&#39;
replace min95 = 0 in `=_N&#39;
replace max95 = 0 in `=_N&#39;
sort h

*----创建分组变量
gen group = 1 if h &amp;lt; 0
replace group = 2 if h &amp;gt;= 0

gen estimate1=estimate*100
gen min951=min95*100
gen max951=max95*100

*----正确使用调整后的数据
twoway ///
(scatter estimate1 h if h &amp;lt; 0,  ///
mcolor(black)   ///
msymbol(Oh)) ///
(scatter estimate1 h if h &amp;gt;= 0, mcolor(black) msymbol(Oh)) ///
(line estimate1 h if h&amp;lt;=0, lcolor(black)) ///
(line estimate1 h if h&amp;gt;=0, lcolor(black)) ///
(rcap max951 min951 h, lcolor(black) lpattern(dash)), ///
xline(-0.5,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
yline(0,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
xtitle(&quot;Years Relative to Deregulation&quot;,size(*0.9)) ///
ytitle(&quot;Percent&quot;&quot;Change&quot;,size(*0.9) orientation(horizontal)) ///
xlabel(-10(5)15,glcolor(gs14) labsize(small) ) ///
ylabel(-6(2)4,format(%2.0f) labsize(small) angle(0) glpattern(dot) glcolor(black) labgap(*3) ) ///
text(-6 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(-4 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(-2 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(0 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(2 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(4 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
graphregion(margin(l=5 r=5 t=3)   ///
color(white))  ///
legend(off)   ///
aspect(0.6)   
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Big-Bad-Bank%E5%B9%B6%E4%B8%8D%E7%A8%B3%E5%81%A5DID%E5%85%83%E8%80%81%E7%BA%A7%E6%96%87%E7%8C%AE%E7%9A%84%E8%84%86%E5%BC%B1_%E9%AB%98%E5%90%9B_fig04.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;*------Fig.9---C图----
use &quot;macro_workfile.dta&quot;, clear

*----变量生成
gen y=log(gini)
gen treat=_intra
gen rel_year=wrkyr-branch_reform

*----生成完整虚拟变量
gen rel_year_str = &quot;rel_year_&quot; + subinstr(string(rel_year), &quot;-&quot;, &quot;n&quot;, .)

levelsof rel_year, local(years)
foreach year in `years&#39; {
local year_clean = subinstr(&quot;`year&#39;&quot;, &quot;-&quot;, &quot;n&quot;, .)  // 替换负号
gen rel_year_`year_clean&#39; = (rel_year == `year&#39;) if !missing(rel_year)
replace rel_year_`year_clean&#39; = 0 if missing(rel_year)  // 对应R中的replace_na(0)
}

sum rel_year, meanonly
local min_year = r(min)
local min_year_clean = subinstr(&quot;`min_year&#39;&quot;, &quot;-&quot;, &quot;n&quot;, .)
drop rel_year_`min_year_clean&#39;

* ----删除rel_year=0对应变量
cap drop rel_year_0 

drop rel_year_str

*----固定效应回归 (需要先安装reghdfe) 
reghdfe y rel_year_*, absorb(wrkyr statefip) vce(cluster statefip)

*----提取系数
parmest, norestore
keep if strpos(parm, &quot;rel_year_&quot;)

*----从变量名中解析原始数值
gen t_str = subinstr(parm, &quot;rel_year_&quot;, &quot;&quot;, .)  // 移除前缀
gen h = real(subinstr(t_str, &quot;n&quot;, &quot;-&quot;, .))      // 还原负号

*----限制显示范围为[-10,15]
keep if inrange(h, -10, 15)

*----添加基准点 (t=0) 
set obs `=_N+1&#39;
replace h = 0 in L
replace estimate = 0 in L
replace min95 = 0 in L
replace max95 = 0 in L
sort h

gen estimate1=estimate*100
gen min951=min95*100
gen max951=max95*100

*----正确使用调整后的数据
twoway ///
(scatter estimate1 h if h &amp;lt; 0,  ///
mcolor(black)   ///
msymbol(Oh)) ///
(scatter estimate1 h if h &amp;gt;= 0, mcolor(black) msymbol(Oh)) ///
(line estimate1 h if h&amp;lt;=0, lcolor(black)) ///
(line estimate1 h if h&amp;gt;=0, lcolor(black)) ///
(rcap max951 min951 h, lcolor(black) lpattern(dash)), ///
xline(-0.5,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
yline(0,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
xtitle(&quot;Years Relative to Deregulation&quot;,size(*0.9)) ///
ytitle(&quot;Percent&quot;&quot;Change&quot;,size(*0.9) orientation(horizontal)) ///
xlabel(-10(5)15,glcolor(gs14) labsize(small) ) ///
ylabel(-6(2)6,format(%2.0f) labsize(small) angle(0) glpattern(dot) glcolor(black) labgap(*3) ) ///
text(-6 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(-4 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(-2 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(0 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(2 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(4 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(6 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
graphregion(margin(l=5 r=5 t=3)   ///
color(white))  ///
legend(off)   ///
aspect(0.6)   
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Big-Bad-Bank%E5%B9%B6%E4%B8%8D%E7%A8%B3%E5%81%A5DID%E5%85%83%E8%80%81%E7%BA%A7%E6%96%87%E7%8C%AE%E7%9A%84%E8%84%86%E5%BC%B1_%E9%AB%98%E5%90%9B_fig05.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;*------Fig.9---D图----
use &quot;macro_workfile.dta&quot;, clear

*----变量生成以及数据处理
gen y=log(gini)
gen treat=_intra
gen rel_year=wrkyr-branch_reform

keep if branch_reform&amp;gt;=1977 

keep if wrkyr&amp;lt;=1998

egen max_reform=max(branch_reform)
replace rel_year=. if branch_reform ==max_reform

*----生成完整虚拟变量
gen rel_year_str = &quot;rel_year_&quot; + subinstr(string(rel_year), &quot;-&quot;, &quot;n&quot;, .)

levelsof rel_year, local(years)
foreach year in `years&#39; {
local year_clean = subinstr(&quot;`year&#39;&quot;, &quot;-&quot;, &quot;n&quot;, .)  // 替换负号
gen rel_year_`year_clean&#39; = (rel_year == `year&#39;) if !missing(rel_year)
replace rel_year_`year_clean&#39; = 0 if missing(rel_year)  // 对应R中的replace_na(0)
}

sum rel_year, meanonly
local min_year = r(min)
local min_year_clean = subinstr(&quot;`min_year&#39;&quot;, &quot;-&quot;, &quot;n&quot;, .)
drop rel_year_`min_year_clean&#39;

*----删除rel_year=0对应变量
cap drop rel_year_0 

drop rel_year_str

*----固定效应回归 (需要先安装reghdfe) 
reghdfe y rel_year_*, absorb(wrkyr statefip) vce(cluster statefip)

*----提取系数
parmest, norestore
keep if strpos(parm, &quot;rel_year_&quot;)

*----从变量名中解析原始数值
gen t_str = subinstr(parm, &quot;rel_year_&quot;, &quot;&quot;, .)  // 移除前缀
gen h = real(subinstr(t_str, &quot;n&quot;, &quot;-&quot;, .))      // 还原负号

*----限制显示范围为[-10,15]
keep if inrange(h, -10, 15)

*----添加基准点 (t=0) 
set obs `=_N+1&#39;
replace h = 0 in L
replace estimate = 0 in L
replace min95 = 0 in L
replace max95 = 0 in L
sort h

gen estimate1=estimate*100
gen min951=min95*100
gen max951=max95*100

*----正确使用调整后的数据
twoway ///
(scatter estimate1 h if h &amp;lt; 0,  ///
mcolor(black)   ///
msymbol(Oh)) ///
(scatter estimate1 h if h &amp;gt;= 0, mcolor(black) msymbol(Oh)) ///
(line estimate1 h if h&amp;lt;=0, lcolor(black)) ///
(line estimate1 h if h&amp;gt;=0, lcolor(black)) ///
(rcap max951 min951 h, lcolor(black) lpattern(dash)), ///
xline(-0.5,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
yline(0,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
xtitle(&quot;Years Relative to Deregulation&quot;,size(*0.9)) ///
ytitle(&quot;Percent&quot;&quot;Change&quot;,size(*0.9) orientation(horizontal)) ///
xlabel(-10(5)15,glcolor(gs14) labsize(small) ) ///
ylabel(-8(2)8,format(%2.0f) labsize(small) angle(0) glpattern(dot) glcolor(black) labgap(*3) ) ///
text(-6 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(-4 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(-2 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(0 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(2 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(4 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(6 -11.3 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
graphregion(margin(l=5 r=5 t=3)   ///
color(white))  ///
legend(off)   ///
aspect(0.6)   
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Big-Bad-Bank%E5%B9%B6%E4%B8%8D%E7%A8%B3%E5%81%A5DID%E5%85%83%E8%80%81%E7%BA%A7%E6%96%87%E7%8C%AE%E7%9A%84%E8%84%86%E5%BC%B1_%E9%AB%98%E5%90%9B_fig06.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;其次，对论文中提到的 CS 估计结果进行复现，这里需要提前安装 &lt;code&gt;csdid&lt;/code&gt; 包。同时通过对照组进行调整，检验结果的稳健性。具体实现代码如下。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;*-----CS--A图-----

*----导入数据 
use &quot;macro_workfile.dta&quot;, clear
gen y=log(gini)

*----数据预处理
keep if branch_reform &amp;gt;= 1977
keep if wrkyr &amp;lt;= 1998

replace branch_reform = 0 if branch_reform == 1999
keep y wrkyr statefip branch_reform  

xtset statefip wrkyr

   *----回归结果 (需要提前安装csdid) 
csdid y,                       ///
  ivar(statefip)           ///
  time(wrkyr)              ///
  gvar(branch_reform)      ///
  control(nevertreated)    ///
  agg(event)               ///
  vce (cluster statefip)        ///
  estore(amin_result)

*----提取系数
parmest, norestore
keep if strpos(parm, &quot;T&quot;)

*----从变量名中解析原始数值
gen t_str = subinstr(parm, &quot;T&quot;, &quot;&quot;, .)  // 移除前缀
gen h = real(subinstr(t_str, &quot;m&quot;, &quot;-&quot;, 1)) if substr(t_str,1,1)==&quot;m&quot;
replace h = real(subinstr(t_str, &quot;p&quot;, &quot;&quot;, 1)) if substr(t_str,1,1)==&quot;p&quot;


*----限制显示范围为[-5,10]
keep if inrange(h, -5, 10)

gen estimate1=estimate*100
gen min951=min95*100
gen max951=max95*100


*----正确使用调整后的数据
twoway ///
(scatter estimate1 h if h &amp;lt; 0,  ///
mcolor(black)   ///
msymbol(Oh)) ///
(scatter estimate1 h if h &amp;gt;= 0, mcolor(black) msymbol(Oh)) ///
(line estimate1 h if h&amp;lt;=0, lcolor(black)) ///
(line estimate1 h if h&amp;gt;=0, lcolor(black)) ///
(rcap max951 min951 h, lcolor(black) lpattern(dash)), ///
xline(-0.5,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
yline(0,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
xtitle(&quot;Years Relative to Deregulation&quot;,size(*0.9)) ///
ytitle(&quot;Percent&quot;&quot;Change&quot;,size(*0.9) orientation(horizontal)) ///
xlabel(-5(5)10,glcolor(gs14) labsize(small) ) ///
ylabel(-2(2)6,format(%2.0f) labsize(small) angle(0) glpattern(dot) glcolor(black) labgap(*3) ) ///
text(-2 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(0 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(2 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(4 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(6 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
graphregion(margin(l=5 r=5 t=3 b=5)   ///
color(white))  ///
legend(off)   ///
aspect(0.6)  
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Big-Bad-Bank%E5%B9%B6%E4%B8%8D%E7%A8%B3%E5%81%A5DID%E5%85%83%E8%80%81%E7%BA%A7%E6%96%87%E7%8C%AE%E7%9A%84%E8%84%86%E5%BC%B1_%E9%AB%98%E5%90%9B_fig07.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;*-----CS--B图-----

*----导入数据 
use &quot;macro_workfile.dta&quot;, clear
gen y=log(gini)

*----数据预处理
keep if branch_reform &amp;gt;= 1977
keep if wrkyr &amp;lt;= 1998

replace branch_reform = 0 if branch_reform == 1999
keep y wrkyr statefip branch_reform  

xtset statefip wrkyr

*----回归结果 (需要提前安装csdid) 
csdid y,                       ///
  ivar(statefip)           ///
  time(wrkyr)              ///
  gvar(branch_reform)      ///
  notyet                   ///
  control(nevertreated)    ///
  agg(event)               ///
  vce (cluster statefip)        ///
  estore(amin_result)

*----提取系数
parmest, norestore
keep if strpos(parm, &quot;T&quot;)

*----从变量名中解析原始数值
gen t_str = subinstr(parm, &quot;T&quot;, &quot;&quot;, .)  // 移除前缀
gen h = real(subinstr(t_str, &quot;m&quot;, &quot;-&quot;, 1)) if substr(t_str,1,1)==&quot;m&quot;
replace h = real(subinstr(t_str, &quot;p&quot;, &quot;&quot;, 1)) if substr(t_str,1,1)==&quot;p&quot;

*----限制显示范围为[-5,10]
keep if inrange(h, -5, 10)

gen estimate1=estimate*100
gen min951=min95*100
gen max951=max95*100

*----正确使用调整后的数据
twoway ///
(scatter estimate1 h if h &amp;lt; 0,  ///
mcolor(black)   ///
msymbol(Oh)) ///
(scatter estimate1 h if h &amp;gt;= 0, mcolor(black) msymbol(Oh)) ///
(line estimate1 h if h&amp;lt;=0, lcolor(black)) ///
(line estimate1 h if h&amp;gt;=0, lcolor(black)) ///
(rcap max951 min951 h, lcolor(black) lpattern(dash)), ///
xline(-0.5,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
yline(0,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
xtitle(&quot;Years Relative to Deregulation&quot;,size(*0.9)) ///
ytitle(&quot;Percent&quot;&quot;Change&quot;,size(*0.9) orientation(horizontal)) ///
xlabel(-5(5)10,glcolor(gs14) labsize(small) ) ///
ylabel(-2(2)6,format(%2.0f) labsize(small) angle(0) glpattern(dot) glcolor(black) labgap(*3) ) ///
text(-2 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(0 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(2 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(4 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(6 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
graphregion(margin(l=5 r=5 t=3 b=5)   ///
color(white))  ///
legend(off)   ///
aspect(0.6)   
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Big-Bad-Bank%E5%B9%B6%E4%B8%8D%E7%A8%B3%E5%81%A5DID%E5%85%83%E8%80%81%E7%BA%A7%E6%96%87%E7%8C%AE%E7%9A%84%E8%84%86%E5%BC%B1_%E9%AB%98%E5%90%9B_fig08.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;最后，通过设定队列特定数据集，对样本进行堆叠处理。具体堆叠回归代码如下所示。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;*-----SR--A图-----

*----导入数据 
use &quot;macro_workfile.dta&quot;, clear
gen y=log(gini)

*----确定有效处理年份 
summarize branch_reform, meanonly
local max_treat = r(max) - 1
levelsof branch_reform if inrange(branch_reform, 1977, `max_treat&#39;), local(treats)

*----保存原始数据为临时文件
tempfile main stacked
save `main&#39;, replace
save `stacked&#39;, emptyok replace

*----循环处理每个政策年份 
foreach tyr in `treats&#39; {
use `main&#39;, clear
    
keep if wrkyr &amp;lt; 1999
keep if branch_reform == `tyr&#39; | branch_reform &amp;gt; `tyr&#39; + 10
keep if inrange(wrkyr, `tyr&#39;-5, `tyr&#39;+10)

replace branch_reform = . if branch_reform != `tyr&#39;
gen rel_year = wrkyr - branch_reform

gen dt = string(`tyr&#39;)  

*----堆叠数据 
keep statefip wrkyr branch_reform rel_year y dt
append using `stacked&#39;
save `stacked&#39;, replace
}

use `stacked&#39;,clear

*----生成虚拟变量
forval i = -5/10 {
if `i&#39; == 0 continue
if `i&#39; &amp;lt; 0 {
local abs_i = abs(`i&#39;)
gen rel_year_m`abs_i&#39; = (rel_year == `i&#39;) if !missing(rel_year)  // 负数用n代替-
}
else {
gen rel_year_`i&#39; = (rel_year == `i&#39;) if !missing(rel_year)
}
}

ds rel_year_m* rel_year_*  // 匹配两种前缀的变量
foreach var in `r(varlist)&#39; {
replace `var&#39; = 0 if missing(rel_year)
}

*----构建公式
local vars &quot;&quot;
foreach i in 5 4 3 2 1 {  // 手动指定降序数值
local vars `vars&#39; rel_year_n`i&#39;  
}
forval i = 1/10 {
local vars `vars&#39; rel_year_`i&#39;
}


encode dt, gen(dt_num)
egen cluster = group(statefip dt_num)

*----回归模型
reghdfe y rel_year_*, ///
absorb(wrkyr#dt_num statefip#dt_num) ///
vce(cluster cluster) noempty

*----提取系数
parmest, norestore
keep if strpos(parm, &quot;rel_year_&quot;)

*----从变量名中解析原始数值
gen t_str = subinstr(parm, &quot;rel_year_&quot;, &quot;&quot;, .)  // 移除前缀
gen h = real(subinstr(t_str, &quot;m&quot;, &quot;-&quot;, .))      // 还原负号

*----限制显示范围为[-5,10]
keep if inrange(h, -5, 10)

*----添加基准点 (t=0) 
set obs `=_N+1&#39;
replace h = 0 in L
replace estimate = 0 in L
replace min95 = 0 in L
replace max95 = 0 in L
sort h

gen estimate1=estimate*100
gen min951=min95*100
gen max951=max95*100

*----正确使用调整后的数据
twoway ///
(scatter estimate1 h if h &amp;lt; 0,  ///
mcolor(black)   ///
msymbol(Oh)) ///
(scatter estimate1 h if h &amp;gt;= 0, mcolor(black) msymbol(Oh)) ///
(line estimate1 h if h&amp;lt;=0, lcolor(black)) ///
(line estimate1 h if h&amp;gt;=0, lcolor(black)) ///
(rcap max951 min951 h, lcolor(black) lpattern(dash)), ///
xline(-0.5,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
yline(0,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
xtitle(&quot;Years Relative to Deregulation&quot;,size(*0.9)) ///
ytitle(&quot;Percent&quot;&quot;Change&quot;,size(*0.9) orientation(horizontal)) ///
xlabel(-5(5)10,glcolor(gs14) labsize(small) ) ///
ylabel(-6(2)4,format(%2.0f) labsize(small) angle(0) glpattern(dot) glcolor(black) labgap(*3) ) ///
text(-6 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(-4 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(-2 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(0 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(2 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(4 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
graphregion(margin(l=5 r=5 t=3 b=5)   ///
color(white))  ///
legend(off)   ///
aspect(0.6)   
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Big-Bad-Bank%E5%B9%B6%E4%B8%8D%E7%A8%B3%E5%81%A5DID%E5%85%83%E8%80%81%E7%BA%A7%E6%96%87%E7%8C%AE%E7%9A%84%E8%84%86%E5%BC%B1_%E9%AB%98%E5%90%9B_fig09.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;*-----SR--B图-----

*----导入数据
use &quot;macro_workfile.dta&quot;, clear
gen y=log(gini)

*----确定有效处理年份
summarize branch_reform, meanonly
local max_treat = r(max) - 1
levelsof branch_reform if inrange(branch_reform, 1977, `max_treat&#39;), local(treats)

*----保存原始数据为临时文件
tempfile main stacked
save `main&#39;, replace
save `stacked&#39;, emptyok replace

*----循环处理每个政策年份
foreach tyr in `treats&#39; {
use `main&#39;, clear

keep if branch_reform == `tyr&#39; | (branch_reform &amp;gt; `tyr&#39; &amp;amp; wrkyr &amp;lt; branch_reform)
keep if inrange(wrkyr, `tyr&#39;-5, `tyr&#39;+10)

gen treat = (branch_reform == `tyr&#39;) &amp;amp;(wrkyr &amp;gt;=`tyr&#39;)

replace branch_reform = . if branch_reform != `tyr&#39;
gen rel_year = wrkyr - branch_reform

gen dt = string(`tyr&#39;)  // 明确转为字符串

*----堆叠数据
keep statefip wrkyr branch_reform rel_year y dt
append using `stacked&#39;
save `stacked&#39;, replace
}

use `stacked&#39;,clear

*----生成虚拟变量
forval i = -5/10 {
if `i&#39; == 0 continue
if `i&#39; &amp;lt; 0 {
local abs_i = abs(`i&#39;)
gen rel_year_m`abs_i&#39; = (rel_year == `i&#39;) if !missing(rel_year)  // 负数用n代替-
}
else {
gen rel_year_`i&#39; = (rel_year == `i&#39;) if !missing(rel_year)
}
}

ds rel_year_m* rel_year_*  // 匹配两种前缀的变量
foreach var in `r(varlist)&#39; {
replace `var&#39; = 0 if missing(rel_year)
}

*----构建公式 
local vars &quot;&quot;
foreach i in 5 4 3 2 1 {  // 手动指定降序数值
local vars `vars&#39; rel_year_n`i&#39;  
}
forval i = 1/10 {
local vars `vars&#39; rel_year_`i&#39;
}

encode dt, gen(dt_num)
egen cluster = group(statefip dt_num)

*----回归模型
reghdfe y rel_year_*, ///
absorb(wrkyr#dt_num statefip#dt_num) ///
vce(cluster cluster) noempty

*----提取系数
parmest, norestore
keep if strpos(parm, &quot;rel_year_&quot;)

*----从变量名中解析原始数值
gen t_str = subinstr(parm, &quot;rel_year_&quot;, &quot;&quot;, .)  // 移除前缀
gen h = real(subinstr(t_str, &quot;m&quot;, &quot;-&quot;, .))      // 还原负号

*----限制显示范围为[-5,10]
keep if inrange(h, -5, 10)

*----添加基准点 (t=0) 
set obs `=_N+1&#39;
replace h = 0 in L
replace estimate = 0 in L
replace min95 = 0 in L
replace max95 = 0 in L
sort h

gen estimate1=estimate*100
gen min951=min95*100
gen max951=max95*100

*----正确使用调整后的数据
twoway ///
(scatter estimate1 h if h &amp;lt; 0,  ///
mcolor(black)   ///
msymbol(Oh)) ///
(scatter estimate1 h if h &amp;gt;= 0, mcolor(black) msymbol(Oh)) ///
(line estimate1 h if h&amp;lt;=0, lcolor(black)) ///
(line estimate1 h if h&amp;gt;=0, lcolor(black)) ///
(rcap max951 min951 h, lcolor(black) lpattern(dash)), ///
xline(-0.5,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
yline(0,lwidth(vthin) lcolor(teal) lpattern(dash)) ///
xtitle(&quot;Years Relative to Deregulation&quot;,size(*0.9)) ///
ytitle(&quot;Percent&quot;&quot;Change&quot;,size(*0.9) orientation(horizontal)) ///
xlabel(-5(5)10,glcolor(gs14) labsize(small) ) ///
ylabel(-2(2)4,format(%2.0f) labsize(small) angle(0) glpattern(dot) glcolor(black) labgap(*3) ) ///
text(-2 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(0 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(2 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
text(4 -5.8 &quot;%&quot;, size(small) placement(east)) /// 左侧添加%符号
graphregion(margin(l=5 r=5 t=3 b=5)   ///
color(white))  ///
legend(off)   ///
aspect(0.6)  
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Big-Bad-Bank%E5%B9%B6%E4%B8%8D%E7%A8%B3%E5%81%A5DID%E5%85%83%E8%80%81%E7%BA%A7%E6%96%87%E7%8C%AE%E7%9A%84%E8%84%86%E5%BC%B1_%E9%AB%98%E5%90%9B_fig10.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh 多期did, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;倍分法DID&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;侯新烁, 2019, &lt;a href=&quot;https://www.lianxh.cn/details/112.html&quot;&gt;多期DID：平行趋势检验图示&lt;/a&gt;, 连享会 No.112.&lt;/li&gt;
&lt;li&gt;张梓瑶, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/829.html&quot;&gt;如何在R语言中实现多期DID&lt;/a&gt;, 连享会 No.829.&lt;/li&gt;
&lt;li&gt;彭晴, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1071.html&quot;&gt;DID新进展：异质性多期DID估计的新方法-csdid&lt;/a&gt;, 连享会 No.1071.&lt;/li&gt;
&lt;li&gt;朱学贵, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/259.html&quot;&gt;多期DID之安慰剂检验、平行趋势检验&lt;/a&gt;, 连享会 No.259.&lt;/li&gt;
&lt;li&gt;邹恬华, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/622.html&quot;&gt;多期DID文献解读：含铅汽油与死亡率和社会成本-L113&lt;/a&gt;, 连享会 No.622.&lt;/li&gt;
&lt;li&gt;高瑜, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1486.html&quot;&gt;eventbaseline：事件研究的估算与可视化&lt;/a&gt;, 连享会 No.1486.&lt;/li&gt;
&lt;li&gt;高瑜, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1507.html&quot;&gt;事件研究和多期DID可视化新命令&lt;/a&gt;, 连享会 No.1507.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/51.html&quot;&gt;论文重现&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;杨云帆, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1321.html&quot;&gt;论文复现：多期DID应用之地方选举的兴衰&lt;/a&gt;, 连享会 No.1321.&lt;/li&gt;
&lt;li&gt;笑花心, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/464.html&quot;&gt;tfdiff：多期DID的估计及图示&lt;/a&gt;, 连享会 No.464.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1548.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1548.html</guid><pubDate>Sun, 16 Mar 2025 16:00:00 GMT</pubDate><author>高君</author></item><item><title>如何获取 R 的帮助：从入门到进阶</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者：&lt;/strong&gt; 连小白 (连享会)&lt;br&gt;
&lt;strong&gt;邮箱：&lt;/strong&gt; &lt;a href=&quot;mailto:arlionn@163.com&quot;&gt;arlionn@163.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;: 如何获取 R 的帮助：从入门到进阶&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;: R语言, R帮助, R books, R 语言, R 软件&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;在使用 R 进行数据分析和编程时，遇到问题是常有的事。如何快速、有效地找到解决方案，是提高学习效率的重要环节。本文将系统介绍如何获取 R 的帮助，从基础命令到丰富的在线资源，帮助你在学习 R 的道路上少走弯路。&lt;/p&gt;
&lt;h2&gt;1. R 学习资源&lt;/h2&gt;
&lt;p&gt;R 作为一门灵活而强大的数据分析工具，拥有丰富的学习资源。以下资源对 R 初学者尤其友好，帮助你快速上手：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;RStudio 在线学习&lt;/strong&gt;：RStudio 官方的在线学习平台整合了多种学习资源，覆盖了 R 的基础知识、数据科学、可视化等主题。访问 &lt;a href=&quot;https://www.rstudio.com/online-learning/&quot;&gt;RStudio 在线学习&lt;/a&gt; 查看详细课程。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;《R for Data Science》&lt;/strong&gt;：由 Hadley Wickham 和 Garrett Grolemund 合著的一本经典入门书籍。书中系统讲解了数据导入、清洗、可视化和建模等关键步骤，语言通俗易懂，案例丰富。访问 &lt;a href=&quot;http://r4ds.had.co.nz/&quot;&gt;R for Data Science&lt;/a&gt; 阅读在线版。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;RStudio 快捷手册&lt;/strong&gt;：RStudio 提供了多份 &lt;a href=&quot;https://www.rstudio.com/resources/cheatsheets/&quot;&gt;快捷手册&lt;/a&gt;，涵盖了 ggplot2、dplyr、shiny 等热门 R 包，能够快速找到关键函数及其用法。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;R 风格指南&lt;/strong&gt;：写出简洁、规范且易于维护的代码是提高编程能力的关键。Hadley Wickham 编写的 &lt;a href=&quot;http://adv-r.had.co.nz/Style.html&quot;&gt;R 风格指南&lt;/a&gt; 提供了详细的编码风格建议，值得认真阅读和实践。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;2. 在 RStudio 中获取帮助&lt;/h2&gt;
&lt;p&gt;R 本身内置了完善的帮助系统，结合 RStudio，可以更高效地获取帮助。以下是一些常用命令及其使用方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;help()&lt;/code&gt;&lt;/strong&gt;：查看某个函数的帮助文档。例如：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;help(lm)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;?&lt;/code&gt;（快捷形式）&lt;/strong&gt;：与 &lt;code&gt;help()&lt;/code&gt; 等价，使用更简洁。例如：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;?lm
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;??&lt;/code&gt;（模糊搜索）&lt;/strong&gt;：当你不确定某个函数的完整名称时，&lt;code&gt;??&lt;/code&gt; 命令可以帮助你搜索可能的结果。例如：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;??regression
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;example()&lt;/code&gt;&lt;/strong&gt;：查看某个函数的示例代码，方便快速理解函数的实际用法。例如：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;example(lm)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;vignette()&lt;/code&gt;&lt;/strong&gt;：某些 R 包还会附带更系统的教程，称为 &lt;em&gt;vignette&lt;/em&gt;（小品文）。通过该命令可浏览这些文档。例如：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;vignette(&quot;dplyr&quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;browseVignettes()&lt;/code&gt;&lt;/strong&gt;：查看当前安装的所有 R 包的 vignette 列表，方便快速查找相关资料。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;browseVignettes()
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;help.start()&lt;/code&gt;&lt;/strong&gt;：启动 R 的帮助页面，包含内置手册、FAQ、NEWS 等丰富内容。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;help.start()
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这些命令的结合使用，能够帮助你快速找到答案，避免走弯路。&lt;/p&gt;
&lt;h2&gt;3. 如何有效提问&lt;/h2&gt;
&lt;p&gt;在学习 R 过程中，难免会遇到一些难以独立解决的问题。提出一个清晰、易于理解的问题，往往是获得帮助的关键。以下是提问时的一些建议：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;创建可重现的示例（reprex）&lt;/strong&gt;：在提出问题时，尽可能使用 &lt;code&gt;reprex&lt;/code&gt;（&lt;em&gt;reproducible example&lt;/em&gt;）包来构造最小化、可执行的代码示例。这不仅能帮助其他人更快理解你的问题，也有助于你在构造示例的过程中理清思路。关于 &lt;code&gt;reprex&lt;/code&gt; 的更多信息，可参考 &lt;a href=&quot;https://www.tidyverse.org/help/&quot;&gt;Tidyverse 的帮助页面&lt;/a&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;活跃的社区&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://community.rstudio.com/&quot;&gt;RStudio Community&lt;/a&gt;：讨论 R、Shiny 和 R 包开发的社区，适合各种技术水平的 R 用户。&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/&quot;&gt;Stack Overflow&lt;/a&gt;：专门讨论编程问题的网站，R 相关问题非常活跃。提问时务必使用 &quot;R&quot; 标签。&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/search?q=%23rstats&amp;amp;src=typd&quot;&gt;#rstats Twitter 社区&lt;/a&gt;：一个活跃的在线社区，许多 R 用户会在此分享经验、技巧和资源。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;4. 适合初学者的 Online Books&lt;/h2&gt;
&lt;p&gt;对于 R 初学者而言，选择合适的学习资源至关重要。以下几本书内容深入浅出，讲解清晰，且更贴近入门者的实际需求：&lt;/p&gt;
&lt;h3&gt;综合性入门书籍&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;《Big Book of R》&lt;/strong&gt;：&lt;a href=&quot;https://www.bigbookofr.com/&quot;&gt;Big Book of R&lt;/a&gt; 不是一本教材，而是一个庞大的「书单」。该书提供了大量 R 相关的在线书籍的链接，涵盖数据分析、机器学习、数据可视化、文本分析、时间序列等众多主题，尤其适合 R 初学者和进阶学习者。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;《R for Data Science》&lt;/strong&gt;：&lt;a href=&quot;http://r4ds.had.co.nz/&quot;&gt;R for Data Science&lt;/a&gt; 是 Hadley Wickham 和 Garrett Grolemund 合著的一本经典入门书籍，系统介绍了 R 语言在数据科学中的应用，涵盖数据清洗、可视化和模型等内容。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;《Hands-On Programming with R》&lt;/strong&gt;：&lt;a href=&quot;https://rstudio-education.github.io/hopr/&quot;&gt;Hands-On Programming with R&lt;/a&gt; 强调实践操作，通过丰富的示例代码和练习，帮助初学者快速掌握 R 语言的基本原理和编程技巧。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;专题性入门书籍&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;《R Graphics Cookbook》&lt;/strong&gt;：本书专注于 R 语言中的绘图功能，基于 &lt;code&gt;ggplot2&lt;/code&gt;，以实用的配方形式介绍数据可视化的核心技巧，适合 R 初学者和数据可视化爱好者。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;《Data Wrangling with R》&lt;/strong&gt;：这本书详细介绍了如何使用 &lt;code&gt;dplyr&lt;/code&gt;、&lt;code&gt;tidyr&lt;/code&gt; 等 tidyverse 包完成数据清洗、变换和整理，特别适合从事数据处理的初学者。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;《Introduction to Econometrics with R》&lt;/strong&gt;：&lt;a href=&quot;https://www.econometrics-with-r.org/&quot;&gt;Introduction to Econometrics with R&lt;/a&gt; 是一本专为计量经济学入门者设计的在线书籍，结合 R 代码，讲解了 OLS、回归诊断、时间序列等内容，适合经济学、金融学相关专业的学生和研究人员。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;《Causal Inference in R》&lt;/strong&gt;：本书聚焦于因果推断，采用 R 实现了 D-I-D、匹配、工具变量等常见的因果推断方法，适合社会科学、经济学、流行病学等领域的研究人员入门。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;其他推荐资源&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;《ModernDive》&lt;/strong&gt;：&lt;a href=&quot;https://moderndive.com/&quot;&gt;ModernDive&lt;/a&gt; 是一本面向本科生和数据科学入门者的教材，涵盖数据可视化、统计模型及推断，尤其注重将统计思想与 R 实现相结合。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;《Exploratory Data Analysis with R》&lt;/strong&gt;：本书基于 &lt;code&gt;ggplot2&lt;/code&gt;、&lt;code&gt;dplyr&lt;/code&gt; 等 tidyverse 包，强调探索性数据分析（EDA）在数据科学中的核心作用，案例丰富且贴近实际。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这些书籍各具特色，适合不同领域、不同需求的 R 初学者。推荐根据自身的兴趣和研究方向，选择最适合自己的读物。&lt;/p&gt;
&lt;h2&gt;5. 获取 R 资讯与动态&lt;/h2&gt;
&lt;p&gt;R 语言及其社区发展迅速，及时了解新特性、新包和最佳实践非常重要。以下网站是了解 R 最新动态的良好途径：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;RStudio 博客&lt;/strong&gt;：&lt;a href=&quot;http://blog.rstudio.org/&quot;&gt;RStudio 博客&lt;/a&gt; 定期发布关于 RStudio 及其相关软件包的动态，适合开发者和数据分析师关注。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;RViews 博客&lt;/strong&gt;：&lt;a href=&quot;https://www.rstudio.com/rviews/&quot;&gt;RViews 博客&lt;/a&gt; 侧重于 R 社区的动态、数据科学案例及实践技巧。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;R-bloggers&lt;/strong&gt;：&lt;a href=&quot;http://www.r-bloggers.com/&quot;&gt;R-bloggers&lt;/a&gt; 是一个聚合了众多 R 博客的网站，能够帮助你发现最新的 R 教程、工具和技巧。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;6. 其他实用工具&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;RSeek 搜索引擎&lt;/strong&gt;：&lt;a href=&quot;http://www.rseek.org/&quot;&gt;RSeek&lt;/a&gt; 是一个专为 R 设计的搜索引擎，能够有效整合 R 相关的文献、教程和解决方案。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;R-help 邮件列表&lt;/strong&gt;：&lt;a href=&quot;https://stat.ethz.ch/mailman/listinfo/r-help&quot;&gt;R-help&lt;/a&gt; 是一个活跃的 R 讨论组，适合讨论较为复杂或具体的 R 问题。在提问前，建议先搜索归档，避免重复提问。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;CrossValidated&lt;/strong&gt;：&lt;a href=&quot;http://stats.stackexchange.com/&quot;&gt;CrossValidated&lt;/a&gt; 是一个统计学问答社区，R 用户在该平台非常活跃，尤其适合统计模型、假设检验等主题的深入探讨。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;7. 结语&lt;/h2&gt;
&lt;p&gt;R 语言以其灵活性和强大的功能，成为数据分析和科学研究中不可或缺的工具。无论你是刚刚入门，还是已经具备一定经验，掌握获取帮助的技能都将使你事半功倍。希望本文的介绍能帮助你找到适合自己的学习路径，并在 R 的学习和应用中少走弯路。&lt;/p&gt;
&lt;h2&gt;8. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh R + 语言, nocat md&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;任建辉, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1083.html&quot;&gt;Stata与R语言等价命令&lt;/a&gt;, 连享会 No.1083.&lt;/li&gt;
&lt;li&gt;余坚, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1179.html&quot;&gt;中介效应：有序因果中介分析的半参数估计B-实操&lt;/a&gt;, 连享会 No.1179.&lt;/li&gt;
&lt;li&gt;刘晓飞, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1414.html&quot;&gt;R语言：基本的数据处理和统计分析实例&lt;/a&gt;, 连享会 No.1414.&lt;/li&gt;
&lt;li&gt;刘欣妍, 史柯, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/942.html&quot;&gt;Stata：双向固定效应模型中是否要控制公司年龄？&lt;/a&gt;, 连享会 No.942.&lt;/li&gt;
&lt;li&gt;刘潍嘉, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1273.html&quot;&gt;R语言：如何理解F检验&lt;/a&gt;, 连享会 No.1273.&lt;/li&gt;
&lt;li&gt;吴小齐, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1288.html&quot;&gt;R语言：L2 Boosting 在经济学中的应用&lt;/a&gt;, 连享会 No.1288.&lt;/li&gt;
&lt;li&gt;吴小齐, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1289.html&quot;&gt;R语言：将tikz图片转换为PNG&lt;/a&gt;, 连享会 No.1289.&lt;/li&gt;
&lt;li&gt;吴小齐, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1511.html&quot;&gt;R语言：政策效应外推及外部有效性-tpate&lt;/a&gt;, 连享会 No.1511.&lt;/li&gt;
&lt;li&gt;张梓瑶, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/829.html&quot;&gt;如何在R语言中实现多期DID&lt;/a&gt;, 连享会 No.829.&lt;/li&gt;
&lt;li&gt;张祖冲, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1514.html&quot;&gt;离群值稳健IV估计量及其在因果推断中应用-robustAR-R语言&lt;/a&gt;, 连享会 No.1514.&lt;/li&gt;
&lt;li&gt;李增杰, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1532.html&quot;&gt;R语言：IPW深度解读-离散变量和连续变量情形&lt;/a&gt;, 连享会 No.1532.&lt;/li&gt;
&lt;li&gt;李明来, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/773.html&quot;&gt;R和RStudio安装教程&lt;/a&gt;, 连享会 No.773.&lt;/li&gt;
&lt;li&gt;温世彬, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1014.html&quot;&gt;R：在几十种计量软件之间转换数据格式-rio&lt;/a&gt;, 连享会 No.1014.&lt;/li&gt;
&lt;li&gt;罗银燕, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1171.html&quot;&gt;如何在 R 中安装并使用 chatgpt 包？&lt;/a&gt;, 连享会 No.1171.&lt;/li&gt;
&lt;li&gt;范思妤, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1333.html&quot;&gt;R/RStudio下载安装指南&lt;/a&gt;, 连享会 No.1333.&lt;/li&gt;
&lt;li&gt;连享会, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1265.html&quot;&gt;Stata2R：针对 Stata 用户的 R 课程&lt;/a&gt;, 连享会 No.1265.&lt;/li&gt;
&lt;li&gt;连玉君, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1481.html&quot;&gt;RStudio常用的快捷键一览&lt;/a&gt;, 连享会 No.1481.&lt;/li&gt;
&lt;li&gt;连玉君, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1493.html&quot;&gt;R数据处理-多条件判断：ifelse() 和 case_when()&lt;/a&gt;, 连享会 No.1493.&lt;/li&gt;
&lt;li&gt;连玉君, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1478.html&quot;&gt;R语言如何实现Stata中的local功能？&lt;/a&gt;, 连享会 No.1478.&lt;/li&gt;
&lt;li&gt;连玉君, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1494.html&quot;&gt;Stata2R：那些 R 中的 _N 和 _n 替代技巧&lt;/a&gt;, 连享会 No.1494.&lt;/li&gt;
&lt;li&gt;连玉君, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1495.html&quot;&gt;从 Stata 到 R：如何使用 tag() 和 if_else() 标记分组中的首个观测&lt;/a&gt;, 连享会 No.1495.&lt;/li&gt;
&lt;li&gt;连玉君, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1270.html&quot;&gt;刺猬与狐狸：Stata与R语言常用命令等价对比&lt;/a&gt;, 连享会 No.1270.&lt;/li&gt;
&lt;li&gt;邱一崎, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1369.html&quot;&gt;R语言：因果推断中的混淆变量、交互项和线性回归&lt;/a&gt;, 连享会 No.1369.&lt;/li&gt;
&lt;li&gt;郑晓雪, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/953.html&quot;&gt;R语言绘制社会网络图&lt;/a&gt;, 连享会 No.953.&lt;/li&gt;
&lt;li&gt;郑晓雪, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/963.html&quot;&gt;R语言随机指数图分析-statnet&lt;/a&gt;, 连享会 No.963.&lt;/li&gt;
&lt;li&gt;郭盼亭, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1228.html&quot;&gt;R语言与Stata等价命令-statar&lt;/a&gt;, 连享会 No.1228.&lt;/li&gt;
&lt;li&gt;闫钊鹏, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1311.html&quot;&gt;R语言：gtExtras包-绘制漂亮的表格和图形&lt;/a&gt;, 连享会 No.1311.&lt;/li&gt;
&lt;li&gt;闫钊鹏, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1380.html&quot;&gt;因果推断必备：有向无环图DAG的解读和绘制-R 语言之ggdag包&lt;/a&gt;, 连享会 No.1380.&lt;/li&gt;
&lt;li&gt;陈卓然, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/970.html&quot;&gt;Stata+R：合成DID原理及实现-sdid&lt;/a&gt;, 连享会 No.970.&lt;/li&gt;
&lt;li&gt;陈点点, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1279.html&quot;&gt;R：如何使用逆概率加权和贝叶斯倾向得分&lt;/a&gt;, 连享会 No.1279.&lt;/li&gt;
&lt;li&gt;雷诺, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1323.html&quot;&gt;R语言：拆解因果推断中的后门法则&lt;/a&gt;, 连享会 No.1323.&lt;/li&gt;
&lt;li&gt;雷诺, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1324.html&quot;&gt;生存分析及R语言实现案例&lt;/a&gt;, 连享会 No.1324.&lt;/li&gt;
&lt;li&gt;颜国强, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1518.html&quot;&gt;R语言绘图：Tidyplots（二）-函数一览及实例&lt;/a&gt;, 连享会 No.1518.&lt;/li&gt;
&lt;li&gt;颜国强,连玉君, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1513.html&quot;&gt;tidyplots：跟 ggplot2 说再见吧！&lt;/a&gt;, 连享会 No.1513.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1547.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1547.html</guid><pubDate>Thu, 13 Mar 2025 16:00:00 GMT</pubDate><author>连小白</author></item><item><title>匹配使用指南：通过数据预处理降低模型依赖</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：肖志文 (北京大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:xiaozhiwen@pku.edu.cn&quot;&gt;xiaozhiwen@pku.edu.cn&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;：本文主要整理自下文，特此致谢！&lt;br&gt;
&lt;strong&gt;Source&lt;/strong&gt;：Ho D E, Imai K, King G, et al. Matching as nonparametric preprocessing for reducing model dependence in parametric causal inference[J]. Political analysis, 2007, 15(3): 199-236. &lt;a href=&quot;https://www.cambridge.org/core/services/aop-cambridge-core/content/view/4D7E6D07C9727F5A604E5C9FCCA2DD21/S1047198700006483a.pdf/matching-as-nonparametric-preprocessing-for-reducing-model-dependence-in-parametric-causal-inference.pdf&quot;&gt;-PDF-&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;: 匹配使用指南：通过数据预处理降低模型依赖&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;: 匹配，因果效应，模型形式，倾向得分，精确匹配，模糊匹配，参数估计&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 引言&lt;/h2&gt;
&lt;p&gt;在进行实证分析时，研究人员往往会探索多种模型形式的设置：包括添加不同的控制变量、交互项及二次项、变换模型函数形式、采用不同的模型假设、替换关键变量的测量方式以及改变样本等。在这一过程中，我们可能会产生成百上千个结果，但最终呈现的仅是这些回归分析中的少数几个。这就引发了一个重要问题：如何确保文章中展示的少数结果能够准确且具代表性地反映研究过程中尝试的大多数结果，而不是经过“精挑细选”以符合预设的研究假设？&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;匹配方法提供了一种解决这一长期存在的难题的途径。通过首先进行匹配作为数据预处理步骤，然后按照原定计划执行回归分析或其他统计方法，我们可以获得更加精确并且对模型形式依赖更小的因果效应估计。&lt;/strong&gt; 本文从“数据预处理”的角度探讨匹配，澄清以往文献对匹配的误解，并强调其最关键的作用——&lt;strong&gt;减少因模型设定带来的因果效应干扰&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;在深入具体介绍之前，有必要明确本文所基于的关键假设——&lt;strong&gt;可忽略性假设&lt;/strong&gt; (ignorability assumption, 或 no omitted variable bias assumption)。过去，许多文献对匹配持有过度乐观的态度，认为它可以解决几乎所有的问题。然而实际上，就像 OLS 回归一样，匹配也无法克服遗漏变量偏误的问题。&lt;/p&gt;
&lt;p&gt;本文不仅会突出匹配的优点，同时也会指出使用该方法时需要注意的前提条件和潜在问题。匹配的核心优势在于它能够通过不断组合与筛选，创建一个与处理组非常相似的控制组 (在几乎所有的控制变量上相似)。&lt;strong&gt;这样，在后续分析中，处理变量就变得与控制变量无关，因此无论我们如何调整参数设置或函数形式、甚至更换模型，都几乎不会影响因果效应的估计。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;想象一下，在理想情况下的精确 (exact) 匹配下，处理组和控制组之间的分配就像是随机实验一样，此时的因果效应仅仅表现为两组均值之差，完全独立于任何模型设定之外。此外，这种方法还能够降低估计量的方差并减少估计量的均方误差 (mean squared error)，从而真正保证了估计结果的稳健性。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 模型形式如何干扰因果效应的估计？&lt;/h2&gt;
&lt;p&gt;我们为何如此重视模型形式？它对因果效应的评估真的有如此重大的影响吗？通过以下图例可以说明：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E5%8C%B9%E9%85%8D%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E9%80%9A%E8%BF%87%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86%E9%99%8D%E4%BD%8E%E6%A8%A1%E5%9E%8B%E4%BE%9D%E8%B5%96_%E8%82%96%E5%BF%97%E6%96%87_Fig01.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;我们生成了一个数据集，其中的真实因果效应为 0，T 代表处理组的点，C 代表控制组。因果效应即两组线条的截距之差 (由于线条平行)。当假设 X 和 Y 之间存在线性关系时，估计出的因果效应为正；然而，采用非线性拟合方法时，估计出的因果效应则为负 (黑线减去灰线)。实际上，这两种估计都可能存在偏差。这展示了函数形式的选择如何引入误差。类似的，其他模型设定也可能导致显著不同的结果。那么，如何确保研究人员所呈现的结果是真实的而非特意“筛选”以符合预期的呢？&lt;strong&gt;匹配可以尽可能减少不同结果之间的差异&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 匹配：一种非参数的数据预处理方式&lt;/h2&gt;
&lt;h3&gt;3.1 匹配的目的：处理组和控制组的“天作之合”&lt;/h3&gt;
&lt;p&gt;匹配的最终目的就是在避免引入偏差的情况下，&lt;strong&gt;减少甚至消除处理变量与控制变量之间的联系&lt;/strong&gt;。换句话说，就是要&lt;strong&gt;让处理组和控制组在协变量上尽可能相同&lt;/strong&gt;，即 $\tilde{p}(X \mid T=1) = \tilde{p}(X \mid T=0)$。&lt;/p&gt;
&lt;p&gt;这里，$\tilde{p}(\cdot)$ 代表的是&lt;strong&gt;观测数据的经验概率&lt;/strong&gt; (而非总体概率)。如何实现这一点？一种设想是&lt;strong&gt;一对一精确匹配&lt;/strong&gt;，即每个处理组个体在控制组中找到一个与其在控制变量上完全相同的个体 (注意：这里的“一模一样”指的是在控制变量上的完全一致，并不意味着遗漏变量也完全相同；但在可忽略性假设下，可以暂时搁置遗漏变量的问题)。未能配对的个体将被排除出样本，这样样本中的处理组和控制组可以被视为“天作之合”，各个协变量分布一致。这一过程消除了函数形式、模型形式带来的影响。&lt;/p&gt;
&lt;p&gt;然而，在实际操作中，我们通常只需让&lt;strong&gt;处理组与控制组协变量的分布保持一致即可&lt;/strong&gt; (而不需要每个个体都找到与其在协变量上取值完全相同的匹配对象)。只要协变量分布一致，就能使处理变量 T 与控制变量 X 无关，因此无需进行一对一的精确匹配。特别是在控制变量众多且包含许多连续变量 (如收入) 的情况下，精确匹配难以实现，会导致大量有价值的信息丢失。&lt;/p&gt;
&lt;p&gt;因此，实践中更常用的是&lt;strong&gt;模糊匹配&lt;/strong&gt;。虽然模糊匹配在降低偏差方面可能不如精确匹配有效，但它能保留更多有用信息，从而降低估计量的标准误。此外，剩余未被消除的偏差可以在数据分析阶段通过控制变量和设定函数形式来进一步消除。&lt;strong&gt;在偏差与变异性的权衡中，我们更倾向于使用模糊匹配&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;值得注意的是，作为非参数的数据预处理方法，&lt;strong&gt;匹配本身并不是一种估计方法，它需要与其他参数方法结合使用才能发挥最大效用&lt;/strong&gt;。&lt;/p&gt;
&lt;h3&gt;3.2 匹配的作用：消除对模型形式的依赖&lt;/h3&gt;
&lt;p&gt;让我们回到之前的案例中，通过匹配的方法，我们可以排除那些过度外推的样本点 (即灰色的 C)，从而实现处理组与控制组之间的平衡。在此情况下，线性拟合与非线性拟合几乎产生了相同的因果效应 (约为 0.001，接近真实的因果效应)。这意味着，通过匹配对数据进行预处理，能够有效缓解因果效应对于函数形式的依赖性。无论采用何种模型设定，都能得出相似的结论。&lt;strong&gt;换言之，匹配不仅能够减少估计量的偏差，同时也降低了其方差，达到了均方误差的优化&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E5%8C%B9%E9%85%8D%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E9%80%9A%E8%BF%87%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86%E9%99%8D%E4%BD%8E%E6%A8%A1%E5%9E%8B%E4%BE%9D%E8%B5%96_%E8%82%96%E5%BF%97%E6%96%87_Fig02.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. 一部指南：如何利用匹配来“清理”数据？&lt;/h2&gt;
&lt;p&gt;本节为研究者提供了一个指南，介绍如何利用匹配方法清理数据，以实现控制组与处理组之间的平衡，并减少因果效应估计的偏差。本节将从&lt;strong&gt;匹配前 (如何选择匹配变量)、匹配中 (匹配的方法、样本权衡) 以及匹配后 (检查平衡性、进行参数分析)&lt;/strong&gt; 这几个方面展开讨论。&lt;/p&gt;
&lt;h3&gt;4.1 牵线搭桥：如何寻找匹配的依据？&lt;/h3&gt;
&lt;p&gt;选择哪些维度进行匹配？一个基本原则是，在我们预定的回归分析中，所有控制变量都应纳入匹配程序中，即我们的目标是实现处理组和控制组在所有控制变量上的平衡。当然，那些在干预发生之后才出现的变量不属于混淆变量，因此不应作为控制变量，也不应纳入匹配程序中。这样可以确保匹配过程的有效性和准确性。&lt;/p&gt;
&lt;p&gt;例如，当我们探讨随父母迁移到城市的儿童 (与留守儿童相比) 的学业表现变化时，“干预”即为&lt;strong&gt;随父母迁移到城市&lt;/strong&gt;。在回归分析中，我们需要控制诸如儿童性别、民族、父母教育程度及家庭背景等变量。因此，既然预期会控制这些变量，它们都应作为匹配的标准。同时，我们假设随父母迁移可能通过让儿童有机会在大城市接受高质量的课外补习资源 (设定为虚拟变量，参与大城市课外补习 = 1)，从而改善他们的学业成绩。然而，这一行为发生在迁移之后，故不应纳入匹配过程中。如果将此变量也作为匹配标准之一，则会导致控制组中的所有人在此变量上的值均为 0，无法与处理组个体成功匹配。这样一来，匹配过程的有效性和准确性将会受到严重影响。&lt;/p&gt;
&lt;p&gt;同时，在进行匹配时，我们应当谨慎处理那些与处理变量相关性较弱的协变量。假设我们是月老，在撮合两个人时，最关注的肯定是与情感相关的因素：感情基础、性格气质、外貌、家庭背景等。而对于那些关联性很弱的变量 (例如，用餐时使用左手还是右手)，则无需过多考虑。在匹配过程中也是如此，是否应将与处理变量弱相关的协变量纳入匹配标准，需依据具体的研究情境来决定：&lt;/p&gt;
&lt;p&gt;当控制组个体的数量远大于处理组样本量时，加入那些弱联系变量所带来的好处 (即&lt;strong&gt;降低偏误&lt;/strong&gt;) 要比其坏处 (即&lt;strong&gt;增加估计量方差&lt;/strong&gt;) 好得多 (&lt;a href=&quot;https://www.sci-hub.wf/10.1093/biomet/79.4.797&quot;&gt;Rubins and Thomas, 1996&lt;/a&gt;)。因此，在这种情况下，我们建议加入弱联系变量。然而，在其他情境下，则需要更加审慎地处理这个问题，并根据匹配后的平衡性来决定是否纳入这些变量。有关平衡性的详细讨论，请参见 4.3 节。&lt;/p&gt;
&lt;h3&gt;4.2 两相探看：匹配的方法&lt;/h3&gt;
&lt;h4&gt;4.2.1 精确匹配还是模糊匹配？&lt;/h4&gt;
&lt;p&gt;精确匹配虽然看似理想，但有时会导致大量样本的损失，这可能会得不偿失。过多的样本损失不仅会减少样本量并增加估计量方差，还会丢失有效信息，引入新的偏误。这种情况在控制变量较多且多为连续变量时尤为明显，我们称之为“&lt;strong&gt;维度的诅咒&lt;/strong&gt;” (curse of dimensionality)。&lt;/p&gt;
&lt;p&gt;倾向值匹配有效地解决了这一维度问题。它将所有相关信息汇总到一个单一变量——即&lt;strong&gt;倾向得分&lt;/strong&gt;中，该得分代表了在给定 X 的情况下个体接受干预的真实概率：$\mathrm{e}(X_i)=p(T_i=1 \mid X_i)$。&lt;/p&gt;
&lt;p&gt;然而，只有&lt;strong&gt;真实的倾向得分&lt;/strong&gt;才能有效平衡控制组和处理组。这里我们面临一个困境：为了消除分析中模型形式设定对因果效应的影响，我们选择了倾向得分作为辅助工具；但在估计这个辅助工具时，我们又依赖了一种特定的函数形式。实际上，我们永远无法确切知道真实的倾向得分；那么，估计出的倾向得分是否依然有效呢？&lt;/p&gt;
&lt;p&gt;答案是&lt;strong&gt;会&lt;/strong&gt;。当我们观察到使用倾向得分确实实现了两组之间的平衡时，这意味着估计的倾向得分是对真实倾向得分的一致估计。这是一个自我验证的过程。&lt;strong&gt;简而言之，无需过度关注倾向得分是否绝对真实，只要最终目标得以实现，倾向得分便具有实际效用&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;因此，在估计倾向得分时，我们需要不断调整函数形式，添加各种高次项和交互项，直到样本达到平衡。也就是说，我们在进行稳健性检验时所付出的努力，应该提前一步应用到数据预处理过程中。这样可以确保我们的分析更加可靠和有效。&lt;/p&gt;
&lt;h4&gt;4.2.2 仔细观察样本&lt;/h4&gt;
&lt;p&gt;在进行匹配时，我们需要对样本数量和平衡性有清晰的理解。以下是作者提出的几条注意事项：&lt;/p&gt;
&lt;p&gt;第一，当控制组数量较少时，应采用替代策略，允许一个控制组个体与多个处理组个体进行匹配，以确保有足够的样本量。&lt;/p&gt;
&lt;p&gt;第二，对于那些对结果变量有显著影响的变量，即便是微小的不平衡也可能导致因果效应出现严重的偏差。为了避免这种情况，建议使用&lt;strong&gt;两步法&lt;/strong&gt;：首先，在这些关键变量上应用精确匹配；然后，在经过精确匹配的样本中，对其他变量进行模糊匹配。&lt;/p&gt;
&lt;p&gt;第三，如果在保持样本平衡与保留足够样本量之间存在冲突，可以考虑&lt;strong&gt;对样本进行分类，并在每个类别内部进行匹配&lt;/strong&gt;。例如，在估计倾向得分之后，可以根据倾向得分将样本等分为 n 组，然后在每一组内部分别进行匹配。&lt;/p&gt;
&lt;h3&gt;4.3 门当户对：匹配的平衡性检验与后续分析&lt;/h3&gt;
&lt;h4&gt;4.3.1 检验平衡性&lt;/h4&gt;
&lt;p&gt;检验控制组和处理组的平衡性，主要是验证 $\tilde{p}(X \mid T=1)=\tilde{p}(X \mid T=0)$ 是否成立。常用的检验方法包括对比两组各变量的均值、标准差及分布情况是否相似。在此背景下，我们推荐使用“百分位-百分位图” (quantile-quantile plot, QQ plot) 来进行检验。&lt;/p&gt;
&lt;p&gt;在 QQ plot 中，每个样本点代表一个个体在处理组与控制组中的倾向得分百分位排名。具体来说，取一个样本点 A，首先将其放入所有处理组个体中排队，确定其在处理组中的倾向得分百分位值 (即排序)，这决定了横坐标；接着，将该样本点放入所有控制组个体中排队，确定其在控制组中的百分位值 (即排序)，这决定了纵坐标。如果样本是平衡的，意味着&lt;strong&gt;两组的倾向得分分布应该完全一致&lt;/strong&gt;，那么 A 在处理组的排位如果是 50%，在控制组的排位也应该是 50%。因此，&lt;strong&gt;横纵坐标应该一致&lt;/strong&gt;，且&lt;strong&gt;所有点的连线应形成一条过原点且倾斜角为 45° 的直线&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;从下图可以看出，原始数据显然不平衡；而经过匹配后的数据几乎达到了完全平衡的状态。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E5%8C%B9%E9%85%8D%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E9%80%9A%E8%BF%87%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86%E9%99%8D%E4%BD%8E%E6%A8%A1%E5%9E%8B%E4%BE%9D%E8%B5%96_%E8%82%96%E5%BF%97%E6%96%87_Fig03.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h4&gt;4.3.2 照常进行参数分析&lt;/h4&gt;
&lt;p&gt;在完成匹配之后，我们应尽量避免直接作差来估计因果效应。因为很多时候，匹配难以实现完全的精确平衡。最佳的做法是&lt;strong&gt;一切照常&lt;/strong&gt;，即按照原定的回归模型、变量、交互项和二次项形式进行分析。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. 匹配预处理后的效果&lt;/h2&gt;
&lt;p&gt;作者采用了一套数据集来检验匹配预处理后的优势。在模型中共包含 18 个控制变量，通过对这些变量进行随机排列组合，共生成了 23 万余种不同的函数形式 (每种形式包含不同数量的控制变量、交互项及交互变量)。使用原始数据和匹配后的数据分别对这 23 万个回归模型进行估计，从而得到 23 万个因果效应值。这些因果效应值的分布如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E5%8C%B9%E9%85%8D%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E9%80%9A%E8%BF%87%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86%E9%99%8D%E4%BD%8E%E6%A8%A1%E5%9E%8B%E4%BE%9D%E8%B5%96_%E8%82%96%E5%BF%97%E6%96%87_Fig04.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;可以观察到，&lt;strong&gt;匹配后数据的因果效应更加集中，并且趋于正态分布；相比之下，原始数据的因果效应不仅方差极大，而且呈现双峰分布，导致统计推断存在很大的不确定性&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;简而言之，将匹配作为一种数据预处理方法，可以帮助我们有效克服模型设定中的犹豫不决，从而确保估计量的稳健性。我们必须牢记，匹配的主要目的是为了实现平衡 (在尽可能保留更多样本的前提下)。因此，为了达到这一目标，我们可以采取各种合理的方法。当然，这并不意味着进行 p-hacking，因为在这一阶段我们并不涉及任何参数设定和因果效应估计，仅仅是在对数据进行合理的预处理。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;6. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh 匹配, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/41.html&quot;&gt;PSM-Matching&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;丁海, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/370.html&quot;&gt;Stata：psestimate-倾向得分匹配(PSM)中协变量的筛选&lt;/a&gt;, 连享会 No.370.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/43.html&quot;&gt;Stata命令&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;冯超楠, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1061.html&quot;&gt;Stata数据处理：模糊匹配-reclink2-matchit-strgroup&lt;/a&gt;, 连享会 No.1061.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;刘欣妍, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/461.html&quot;&gt;Stata：数据合并与匹配-merge-reclink&lt;/a&gt;, 连享会 No.461.&lt;/li&gt;
&lt;li&gt;占云, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/173.html&quot;&gt;Stata+PSM：倾向得分匹配分析简介&lt;/a&gt;, 连享会 No.173.&lt;/li&gt;
&lt;li&gt;周小强, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/872.html&quot;&gt;CFPS数据处理：少儿代答库与成人库匹配&lt;/a&gt;, 连享会 No.872.&lt;/li&gt;
&lt;li&gt;唐继凤, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/150.html&quot;&gt;Stata：模糊匹配之matchit&lt;/a&gt;, 连享会 No.150.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/36.html&quot;&gt;文本分析-爬虫&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;孙晓艺, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1350.html&quot;&gt;文本分析：正则表达式之位置匹配&lt;/a&gt;, 连享会 No.1350.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;倍分法DID&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;展一帆, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/592.html&quot;&gt;面板PSM+DID如何做匹配？&lt;/a&gt;, 连享会 No.592.&lt;/li&gt;
&lt;li&gt;徐云娇, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/216.html&quot;&gt;Stata-从匹配到回归：精确匹配、模糊匹配和PSM&lt;/a&gt;, 连享会 No.216.&lt;/li&gt;
&lt;li&gt;汪京, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1409.html&quot;&gt;Stata：好用的正则匹配和正则替换命令-jregex&lt;/a&gt;, 连享会 No.1409.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/16.html&quot;&gt;Stata入门&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;汪京, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1487.html&quot;&gt;jregex：用正则表达式快速实现匹配和替换&lt;/a&gt;, 连享会 No.1487.&lt;/li&gt;
&lt;li&gt;涂漫漫, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/787.html&quot;&gt;Stata：模糊匹配-matchit-reclink&lt;/a&gt;, 连享会 No.787.&lt;/li&gt;
&lt;li&gt;王乔, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/588.html&quot;&gt;Stata：iematch-近邻贪婪匹配&lt;/a&gt;, 连享会 No.588.&lt;/li&gt;
&lt;li&gt;王瀚洋, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/385.html&quot;&gt;Stata：广义精确匹配-Coarsened-Exact-Matching-(CEM)&lt;/a&gt;, 连享会 No.385.&lt;/li&gt;
&lt;li&gt;王硕, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1233.html&quot;&gt;Stata：轻量匹配命令-addinby&lt;/a&gt;, 连享会 No.1233.&lt;/li&gt;
&lt;li&gt;秦利宾, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/178.html&quot;&gt;Stata：PSM-倾向得分匹配分析的误区&lt;/a&gt;, 连享会 No.178.&lt;/li&gt;
&lt;li&gt;经菠, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/599.html&quot;&gt;Stata-Matching：肾脏交换匹配问题&lt;/a&gt;, 连享会 No.599.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;内生性-因果推断&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;肖志文, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1392.html&quot;&gt;如何通过数据预处理来降低对模型依赖？&lt;/a&gt;, 连享会 No.1392.&lt;/li&gt;
&lt;li&gt;连享会, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/230.html&quot;&gt;Stata：psestimate-倾向得分匹配(PSM)中匹配变量的筛选&lt;/a&gt;, 连享会 No.230.&lt;/li&gt;
&lt;li&gt;连享会, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/285.html&quot;&gt;伍德里奇先生的问题：PSM-分析中的配对——小蝌蚪找妈妈&lt;/a&gt;, 连享会 No.285.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/35.html&quot;&gt;Stata资源&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;连享会, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/449.html&quot;&gt;连享会主页-推文列表-按时间&lt;/a&gt;, 连享会 No.449.&lt;/li&gt;
&lt;li&gt;连享会, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/448.html&quot;&gt;连享会主页-推文列表-按类别&lt;/a&gt;, 连享会 No.448.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;连玉君, 2025, &lt;a href=&quot;https://www.lianxh.cn/details/1533.html&quot;&gt;Stata：回归分析中的权重问题-aweight-fweight&lt;/a&gt;, 连享会 No.1533.&lt;/li&gt;
&lt;li&gt;连玉君, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1283.html&quot;&gt;字符函数ustrregexm()：文字变量匹配中的英文字母大小写问题&lt;/a&gt;, 连享会 No.1283.&lt;/li&gt;
&lt;li&gt;连玉君, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1418.html&quot;&gt;执行PSM匹配后观察值会减少吗？&lt;/a&gt;, 连享会 No.1418.&lt;/li&gt;
&lt;li&gt;陈佳慧, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/820.html&quot;&gt;Stata：高维倾向得分法-hdps&lt;/a&gt;, 连享会 No.820.&lt;/li&gt;
&lt;li&gt;陈广宇, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1128.html&quot;&gt;Stata：双层优化匹配估计量-blopmatch&lt;/a&gt;, 连享会 No.1128.&lt;/li&gt;
&lt;li&gt;黄俊凯, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/460.html&quot;&gt;Stata 手动：各类匹配方法大全 A——理论篇&lt;/a&gt;, 连享会 No.460.&lt;/li&gt;
&lt;li&gt;黄俊凯, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/249.html&quot;&gt;Stata：终极匹配 ultimatch&lt;/a&gt;, 连享会 No.249.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1546.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1546.html</guid><pubDate>Wed, 12 Mar 2025 16:00:00 GMT</pubDate><author>肖志文</author></item><item><title>Stata：考虑衡量偏误的生产函数估计-robustpf</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：杜静玄 (东北财经大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:dujingxuan6@gmail.com&quot;&gt;dujingxuan6@gmail.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;：本文主要整理自下文，特此致谢！&lt;br&gt;
&lt;strong&gt;Source&lt;/strong&gt;：Yingyao Hua, Guofang Huangb, Yuya Sasakic. Estimating productionfunctions with robustness against errors in the proxy variables. Journal of Econometrics 215 (2020) 375–398. &lt;a href=&quot;https://www.sciencedirect.com/science/article/pii/S0304407619302027&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;https://www.researchgate.net/profile/Guofang-Huang/publication/228312431_Estimating_Production_Functions_with_Robustness_Against_Errors_in_the_Proxy_Variables/links/5c6b2290a6fdcc404ebad3be/Estimating-Production-Functions-with-Robustness-Against-Errors-in-the-Proxy-Variables.pdf&quot;&gt;-PDF-&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;：Stata：考虑衡量偏误的生产函数估计-robustpf&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;：生产函数估计，代理变量误差，广义矩估计器 GMM，robustpf&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 简介&lt;/h2&gt;
&lt;p&gt;本文提出了一种新的方法来识别和估计生产函数。作者放宽了对代理变量标量不可观察的假设，并采用 GMM 方法来解决生产函数估计中的问题。该方法在智利食品行业的案例研究中得到了验证，并取得了可行的结果。该程序可通过 Stata 的 &lt;code&gt;robustpf&lt;/code&gt; 命令运行。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 背景&lt;/h2&gt;
&lt;p&gt;过去估计生产函数的方法存在标量不可观察的假设，忽视了代理变量可能受到其他未观察因素影响的问题。本文从这些方法的不足出发，提出了一种针对代理变量误差的稳健估计方法，弥补了现有方法的缺陷，从而提高了生产函数估计的准确性和可靠性。&lt;/p&gt;
&lt;p&gt;具体而言，本文提出通过使用两个条件独立的代理变量来估计生产函数，减弱了关于代理变量标量不可观测性的假设。该方法基于广义矩估计器 (GMM)，利用两个代理变量表示潜在的生产率，可视为 IV 方法 (Blundell 和 Bond, 2000) 的扩展。与传统方法不同的是，本文并未假设生产率转移过程为线性 AR(1) 过程。&lt;/p&gt;
&lt;p&gt;随后，作者通过对智利食品生产行业中企业对生产力冲击的响应进行实证分析，展示了该方法的应用。计算结果表明，选择适当的生产力代理变量对经济分析的估计结果具有重要影响，其中材料对生产力估计的影响尤为显著。同时，材料与电力等不同生产力代理的选择，也会导致生产函数参数和规模收益估计的差异。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 理论与识别&lt;/h2&gt;
&lt;h3&gt;3.1 理论模型&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;生产函数设定&lt;/strong&gt;：采用 Cobb-Douglas 总产出生产函数，即：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
y_{t}=\beta_{l}l_{t}+\beta_{k}k_{t}+\beta_{m}m_{t}+\beta_{u}u_{t}+\omega_{t}+\eta_{t}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，$y_{t}$ 表示产出和各投入要素的对数，$\omega_{t}$ 是潜在生产率的对数，$\eta_{t}$ 是残差项，并且满足 $\mathbb{E}(\eta_{t} | l_{t}, k_{t}, m_{t}, u_{t}, \omega_{t}) = 0$。该函数形式便于展示，且所得的识别结果也适用于其他常见的生产函数形式。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;投入决策模型&lt;/strong&gt;：假设在时期 $t$，投入决策 $l_{t}$、$m_{t}$ 和 $u_{t}$ 在观察到 $\omega_{t}$ 和 $k_{t}$ 后同时做出，其中 $k_{t}$ 在时期 $t - 1$ 已经确定，且未观察到时期 $t$ 的生产率创新 $\xi_{t}$。通过利润最大化问题，可以得出线性的投入选择规则。同时，允许观察到的静态投入受到其他因素的影响，即：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
x_{t}=\alpha_{x 0}+\alpha_{x k}k_{t}+\alpha_{x \omega}\omega_{t}+\epsilon_{x t}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中 $\epsilon_{x t}$ 放松了以往文献的标量不可观测假设。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;投资与资本积累模型&lt;/strong&gt;：投资 $I_{t}$ 被建模为审查变量，表示为 $I_{t}^{&lt;em&gt;} = \iota_{t}(\omega_{t}, k_{t}, \zeta_{t})$，其中 $I_{t} = I_{t}^{&lt;/em&gt;} \times \mathbb{1}(I_{t}^{*} \geq 0)$。资本积累方程为 $r_{t} = \kappa(K_{t - 1}, I_{t - 1}, v_{t - 1})$，这一方程打破了 $K_{t}$ 与 $(K_{t - 1}, I_{t - 1})$ 之间的确定性线性关系，使得 $I_{t}$ 能够作为 $\omega_{t}$ 的代理变量之一，更加贴合实际情况。&lt;/p&gt;
&lt;h3&gt;3.2 模型识别&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;识别条件&lt;/strong&gt;：基于三个内生变量 $(y_{t}, m_{t + 1}, I_{t})$ 以及控制变量向量 $W_{t}≡(l_{t}, k_{t}, m_{t}, u_{t}, k_{t + 1})$，可以提出以下四个关键条件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;条件1：条件独立性，即在给定 $\omega_{t}$ 和其他控制变量的情况下，$m_{t + 1}$与$I_{t}$对$y_{t}$ 的信息提供没有额外作用，且这两个代理变量相互独立。&lt;/li&gt;
&lt;li&gt;条件2：单射性，要求包括 $\eta_{t}$、$(\alpha_{m \omega}\xi_{t + 1} + \epsilon_{m t + 1})$ 与 $\omega_{t}$ 的独立性，$\rho(\omega_{t})$ 具有严格的单调性，且相关的特征函数不为零等。&lt;/li&gt;
&lt;li&gt;条件3：不同特征值条件，要求企业生产率的变化能够导致投资决策分布发生变化。&lt;/li&gt;
&lt;li&gt;条件4：标准化条件，即 $\mathbb{E}(\eta_{t} | \omega_{t}, l_{t}, k_{t}, m_{t}, u_{t}) = 0$。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;识别过程&lt;/strong&gt;：在上述条件下，基于 Hu 和 Schennach (2008) 的识别结果，通过对相关积分算子的推导与分析，证明了潜在密度 $f(y_{t} | \omega_{t}, l_{t}, k_{t}, m_{t}, u_{t})$、$g(I_{t} | \omega_{t}, W_{t})$ 和 $h(\omega_{t} | m_{t + 1}, W_{t})$ 的可识别性。进而，得出生产函数中的结构参数 $(\beta_{l}, \beta_{k}, \beta_{m}, \beta_{u})$ 以及 $\eta_{t}$ 的条件密度也具备可识别性。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;识别结果拓展&lt;/strong&gt;：若允许 $\omega_{t}$ 为内生变量，并假设其遵循受控一阶马尔可夫过程且控制变量（如研发支出 $r_{t}$）可观测，那么在 $m_{t + 1}$ 方程中，将 $\mathbb{E}(\omega_{t + 1} | \omega_{t}, r_{t})$ 替代 $\mathbb{E}(\omega_{t + 1} | \omega_{t})$，上述识别论证依然成立。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. 实操代码&lt;/h2&gt;
&lt;p&gt;在 Stata 中，&lt;code&gt;robustpf&lt;/code&gt; 命令可用于实现生产函数的估计。其输入变量包括产出变量 (depvar)、状态变量 (资本) 和劳动力变量 (自由)。此外，为了估算总产出生产函数，用户可以通过选项 &lt;code&gt;m()&lt;/code&gt; 设置中间投入变量。此外，用户必须通过调用 &lt;code&gt;proxy()&lt;/code&gt; 选项来设置代理变量，该选项通常涉及使用一个中间投入变量或一个投资变量。显示的结果包括规模收益和每个投入变量的系数。&lt;/p&gt;
&lt;h3&gt;4.1 命令安装&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;ssc install robustpf, replace 
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;4.2 命令语法&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;robustpf depvar [if] [in] [, 
         capital(varname) free(varlist) m(varlist) proxy(varname) 
         onestep dfp bfgs init_capital(real) init_free(real) init_m(real) ]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;以下是您内容的润色版本，优化了语句流畅性和逻辑关系，但保持原意不变：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;depvar&lt;/code&gt;: 产出结果，被解释变量；&lt;/li&gt;
&lt;li&gt;&lt;code&gt;capital&lt;/code&gt;: 资本，状态变量；&lt;/li&gt;
&lt;li&gt;&lt;code&gt;free&lt;/code&gt;: 自由变量，主要包含劳动力等；&lt;/li&gt;
&lt;li&gt;&lt;code&gt;m()&lt;/code&gt;: 用于设置中间投入变量，以估计总产出生产函数。如果未调用此选项，命令将估计净产出生产函数。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;proxy(varname)&lt;/code&gt;: 用于设置估计生产函数时使用的代理变量。如果没有为此选项提供输入，命令将不会生成估计结果。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;onestep&lt;/code&gt;: 用于实现 GMM 估计的单步操作。如果未调用此选项，则默认进行两步高效 GMM 估计。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dfp&lt;/code&gt;: 用于实施 Davidon–Fletcher–Powell 优化方法。如果未调用此选项或其他方法选项，则默认使用 Newton–Raphson 方法。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bfgs&lt;/code&gt;: 用于实施 Broyden–Fletcher–Goldfarb–Shanno 优化方法。如果未调用此选项或其他方法选项，则默认使用 Newton–Raphson 方法。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;init_capital(real)&lt;/code&gt;: 设置 GMM 估计优化过程中资本系数的初始值。默认值为 &lt;code&gt;init_capital(0.1)&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;init_free(real)&lt;/code&gt;: 设置 GMM 估计优化过程中劳动系数的初始值。默认值为 &lt;code&gt;init_free(0.1)&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;init_m(real)&lt;/code&gt;: 设置 GMM 估计优化过程中中间投入系数的初始值。默认值为 &lt;code&gt;init_m(0.3)&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;由于 GMM 估计的矩函数是非线性的，因此建议尝试多个初始值，以增加获得全局最优解的可能性。在执行 &lt;code&gt;命令&lt;/code&gt; 后，目标函数的值将被存储在 &lt;code&gt;e(objective)&lt;/code&gt; 中。&lt;/p&gt;
&lt;h3&gt;4.3 具体案例&lt;/h3&gt;
&lt;p&gt;为了说明 &lt;code&gt;robustpf&lt;/code&gt; 的功能，作者以智利的企业数据集为例，利用材料作为代理变量来估计净产出生产函数。涉及的变量包括：id，年份，产出 (y)，资本 (k)，高技能劳动力 (ls)，低技能劳动力 (lu)，材料 (m)，电力 (e)，汽油 (u)。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. net get robustpf, from(http://fmwww.bc.edu/RePEc/bocode/r)
. use &quot;example_Chile.dta&quot;, clear 
. xtset id year
. robustpf y, capital(k) free(ls lu) proxy(m)

Executing robustPF.
  GMM: 1st Step Estimation
  GMM: 2nd Step Estimation
convergence not achieved
------------------------------------------------------------------------------
Unbalanced panel:                                          observations=  2427
Number of cross-sectional observations in the subsample:              N=   906
Number of time periods in the subsample:                              T=     3
                                                                   minT=  1981
                                                                   maxT=  1983
------------------------------------------------------------------------------
Returns to Scale (Std. Err.) = 1.11786277 (.1392937)
------------------------------------------------------------------------------
             | Coefficient  Std. err.      z    P&amp;gt;|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
           k |      0.242      0.061     3.95   0.000        0.122       0.362
          ls |      0.399      0.043     9.36   0.000        0.316       0.483
          lu |      0.477      0.042    11.24   0.000        0.394       0.560
------------------------------------------------------------------------------
  *  robustPF is based on Hu, Y., Huang, G., &amp;amp; Sasaki, Y. (2020): Estimating
  Production Functions with Robustness Against Errors in the Proxy Variables.
  Journal of Econometrics 215 (2), pp. 375-398.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;若估计的是总产出生产函数，则对代码最后一行稍作修改即可：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. robustpf y, capital(k) free(ls lu) m(m e) proxy(m)

Executing robustPF.
  GMM: 1st Step Estimation
  GMM: 2nd Step Estimation

------------------------------------------------------------------------------
Unbalanced panel:                                          observations=  2427
Number of cross-sectional observations in the subsample:              N=   906
Number of time periods in the subsample:                              T=     3
                                                                   minT=  1981
                                                                   maxT=  1983
------------------------------------------------------------------------------
Returns to Scale (Std. Err.) = 1.26849975 (.095054155)
------------------------------------------------------------------------------
             | Coefficient  Std. err.      z    P&amp;gt;|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
           k |     -0.283      0.019   -14.79   0.000       -0.320      -0.245
          ls |      1.382      0.011   126.22   0.000        1.361       1.404
          lu |     -0.506      0.010   -49.00   0.000       -0.526      -0.486
           m |      0.466      0.040    11.60   0.000        0.387       0.545
           e |      0.209      0.041     5.04   0.000        0.128       0.290
------------------------------------------------------------------------------
  *  robustPF is based on Hu, Y., Huang, G., &amp;amp; Sasaki, Y. (2020): Estimating
  Production Functions with Robustness Against Errors in the Proxy Variables.
  Journal of Econometrics 215 (2), pp. 375-398.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;在文中，作者将新方法的结果与传统的 OLS、OP 以及 Wooldridge (2009) 的结果进行了比较。结果表明，如果未控制企业生产率，可能会出现以下情况：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;变化最大的投入要素 (most-variable inputs) 的估计系数可能被高估；&lt;/li&gt;
&lt;li&gt;变化最小的投入要素 (least-variable inputs) 的估计系数可能被低估 (前提是这些投入要素之间存在正相关)。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;因此，为了更好地理解不同方法得出的估计值差异，需要明确不同投入要素的变异程度及其对最新生产率冲击的调整速度。&lt;/p&gt;
&lt;p&gt;尽管企业通常根据其生产率来决定投入水平，但它们会迅速调整物质投入以应对生产率的变化。然而，劳动投入的调整较慢，雇佣和解雇成本可能阻碍企业迅速调整劳动投入以应对生产率冲击。与此同时，资本投入的调整速度也较慢。基于这些发现，作者认为，旨在减少劳动力市场摩擦的政策有潜力提高行业效率。读者可以根据具体需求，选择合适的生产函数估计方法。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh tfp 效率, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/49.html&quot;&gt;SFA-DEA-效率分析&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;刘帅, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/13.html&quot;&gt;Stata：各类全要素生产率 TFP 估算方法-prodest&lt;/a&gt;, 连享会 No.13.&lt;/li&gt;
&lt;li&gt;陈巧雯,杜克锐, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1440.html&quot;&gt;SFA-xtsfsp：空间随机前沿模型的 Stata 实现&lt;/a&gt;, 连享会 No.1440.&lt;/li&gt;
&lt;li&gt;陈巧雯,杜克锐, 2024, [SFA-xtsfsp：空间随机前沿模型的 Stata 实现（三）](https://www.lianxh.cn/details/146 6.html), 连享会 No.1466.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/43.html&quot;&gt;Stata命令&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;刘淑云, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1115.html&quot;&gt;Stata：计算绿色全要素生产率-gtfpch&lt;/a&gt;, 连享会 No.1115.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;内生性-因果推断&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;安超, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1464.html&quot;&gt;论文推介：考虑样本自选择偏误的内生性随机前沿分析模型&lt;/a&gt;, 连享会 No.1464.&lt;/li&gt;
&lt;li&gt;彭甲超, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/703.html&quot;&gt;Stata效率分析：Simar-Wilson两阶段半参数DEA-T303&lt;/a&gt;, 连享会 No.703.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;黄晨晨, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1374.html&quot;&gt;Lasso-SFA：基于自适应Lasso的面板固定效应随机边界分析&lt;/a&gt;, 连享会 No.1374.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1545.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1545.html</guid><pubDate>Tue, 11 Mar 2025 16:00:00 GMT</pubDate><author>杜静玄</author></item><item><title>✅ 结构模型 · 2025 · 现场班</title><description>&lt;h1&gt;结构模型 · 2025 现场班&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://file.lianxh.cn/KC/lianxh_smodel.pdf&quot;&gt;PDF 课纲&lt;/a&gt;  |  &lt;a href=&quot;https://www.lianxh.cn/&quot;&gt;课程主页&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;1. 课程概览&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;时间：&lt;/strong&gt; 2025 年 6 月 7-8 日 (每天 6 小时 + 30 分钟答疑)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;地点：&lt;/strong&gt; 天津大学 (卫津路校区西门)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;嘉宾：&lt;/strong&gt; 谭用 (南京财经大学，教授)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;软件：&lt;/strong&gt; Matlab R2023a/R2024a&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主页：&lt;/strong&gt; &lt;a href=&quot;https://www.lianxh.cn/smodel.html&quot;&gt;https://www.lianxh.cn/smodel.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;资料：&lt;/strong&gt; &lt;a href=&quot;https://file.lianxh.cn/KC/lianxh_smodel.pdf&quot;&gt;PDF 课程大纲&lt;/a&gt;；&lt;a href=&quot;https://www.jianguoyun.com/p/DeXEUNUQtKiFCBjxzPkFIAA&quot;&gt;参考文献&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;报名链接：&lt;/strong&gt; &lt;a href=&quot;https://www.wjx.top/vm/QfdWOa3.aspx#&quot;&gt;https://www.wjx.top/vm/QfdWOa3.aspx#&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;助教招聘：&lt;/strong&gt; &lt;a href=&quot;https://www.wjx.top/vm/OlWbUuM.aspx#&quot;&gt;https://www.wjx.top/vm/OlWbUuM.aspx#&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;2. 嘉宾简介&lt;/h2&gt;
&lt;img style=&quot;width: 200px&quot; src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Tanyong-photo-01-180.png&quot; referrerpolicy=&quot;no-referrer&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://gmxy.nufe.edu.cn/info/1019/4525.htm&quot;&gt;谭用&lt;/a&gt;，南京财经大学教授，江苏省第六期 333 高层次人才工程中青年学术带头人，亚洲太平洋地区国际贸易研讨会（APTS）成员。论文发表于 &lt;em&gt;Review of Economics and Statistics&lt;/em&gt;, &lt;em&gt;International Economic Review&lt;/em&gt;, &lt;em&gt;European Economic Review&lt;/em&gt;, &lt;em&gt;Journal of Economic Behavior and Organization&lt;/em&gt;, 《经济研究》、《世界经济》、《经济学（季刊）》、《统计研究》等国内外权威期刊。主持国家自然科学基金项目、参与国家社科重大项目（子课题负责人）。&lt;/p&gt;
&lt;h2&gt;3. 课程缘起&lt;/h2&gt;
&lt;p&gt;近年来，计量方法和统计软件不断更新，越来越多的期刊开始提供规范的复现数据和代码，做实证研究的难度似乎在不断降低。然而，我们却感觉到发表越来越难了。对于青年学者和博士研究生而言，这种内卷带来的焦虑和压力让人很是彷徨。出路在哪里？&lt;/p&gt;
&lt;p&gt;我和不少人讨论过这个问题，总结下来有三点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;实证分析的内卷困境&lt;/strong&gt;。如今，借助顶刊提供的复现文档，辅以 ChatGPT、DeepSeek 等 AI 工具，刚入门的博士研究生也能很快理解和复现新近提出的计量模型和方法。这就导致采用简约式估计的研究，在发表时陷入了 “拼手速” 的怪圈，研究的同质化现象越来越严重。一旦陷入 “拼手速”，研究者就很难有足够时间和精力去深入思考研究内容。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;简约式实证分析的固有局限&lt;/strong&gt;。大多数计量模型的设定都属于简约式 (reduced form)，重点关注「$x\to y$」的因果识别。挑战在于，仅仅依赖 IV 估计，断点回归等计量方法，很难把机制理清楚。很多时候我们只能依赖传统机制：从融资约束、生产效率、研发强度、所有权性质等方面入手，轮番测试。这使得文章很难做出能让人眼前一亮的新意。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;研究的可行性和时效性难题&lt;/strong&gt;。许多简约式实证研究都面临「巧妇难为无米之炊」的困境：虽然某些政策或事件具有重要研究价值，但相关数据难以获取，研究难以推进。同时，我们往往需要「让子弹飞一会儿」——对于新出台的政策，通常要等待 2-3 年甚至更长时间，才能进行评估。例如，国内学者仍主要依赖 1998-2007 年的工业企业数据库和 2000-2015 年的海关数据库，基于这些数据的简约式估计，其现实适用性值得商榷。此外，这种研究模式也难以开展反事实分析，例如，我们难以评估如果中美贸易战未发生或关税进一步上调，社会福利将如何变化，从而影响政策建议的精准性。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;本课程旨在解决简约式研究方法所面临的上述痛点，这得益于结构模型估计的几个核心特征：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;强调理论模型构建与现实契合。&lt;/strong&gt; 在进行结构估计之前，首先需要建立合适的一般均衡或局部均衡模型，并确保其能够有效契合现实观察到的特征事实。模型的建立基于宏观或微观经济学的基本原理，使得模型中内生变量的变化能够清晰地刻画经济机制，避免仅停留在统计相关性的层面。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;结构模型估计能够更灵活地识别关键参数。&lt;/strong&gt; 结构模型估计有个独特的方法，就是把内循环和外循环结合起来，在模型框架下直接识别关键参数。好处在于，这种设定不依赖于线性假设，能够有效降低潜在的非线性关系导致的估计偏差。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;结构模型支持基于参数估计的反事实分析。&lt;/strong&gt; 结构模型的一个核心优势是能够进行 &lt;strong&gt;“What if”&lt;/strong&gt; 类型的反事实分析，即模拟尚未发生的冲击对经济系统的影响。例如，在面对尚未落地的政策变动或外部冲击时，可以借助冲击前数据识别模型参数，然后基于这些参数模拟冲击发生后或预测经济核心变量的变化趋势，并据此提出前瞻性的政策建议。这种能力弥补了简约式估计在政策分析上的局限性。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;4. 课程目标&lt;/h2&gt;
&lt;p&gt;我们希望通过本课程，使学员掌握结构建模的基本思路，能够独立构建并求解动态优化问题，并运用结构估计方法分析实际经济问题。此外，课程还将帮助学员理解反事实分析的应用，为政策评估和前沿研究提供工具支持。具体说明如下：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;G1. 结构化模型研究框架&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;讲解如何基于经济学基本原理（如消费者偏好、生产者生产函数、调整成本等），以及现有统计结果和经验证据来构建静态和动态结构模型。模型构建的关键在于，如何引入一些新的核心参数或机制，以便通过简洁的模型设定来解释看起来很复杂的经济现象。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;理解结构模型论文的标准写作框架：特征事实提炼 → 均衡模型构建（一般均衡/局部均衡）→ 数值模拟与反事实分析&lt;/li&gt;
&lt;li&gt;掌握静态和动态模型的构建：Bellman 方程的经济学设定与均衡解存在性验证方法&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;G2. 参数校准技术和结构估计方法&lt;/strong&gt;&lt;br&gt;
并不是所有的模型都能够对数线性化，本课程将详细讲解在无法直接使用线性回归的情况下，如何构建合理的矩条件并通过内外循环迭代方法来估计关键参数。具体包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;实现内循环（局部参数）与外循环（全局参数）的协同校准&lt;/li&gt;
&lt;li&gt;构建并选择用于识别模型参数的矩条件，以及在参数估计后评估其拟合优度&lt;/li&gt;
&lt;li&gt;运用 Newton-Raphson 法、Nelder-Mead迭代、贝叶斯 MCMC 等迭代算法&lt;/li&gt;
&lt;li&gt;掌握基于网格搜索 (grid-search) 的参数空间优化策略&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;G3. 开展有价值的反事实研究&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;反事实研究最关键的点在于，什么样的反事实分析才是具备研究价值和政策含义的？如何层层递进的开展反事实分析？可以归结为三个问题：选什么问题有价值？怎么做参数调整？如何解释结果？本专题将通过 2-3 篇论文的讲解，帮助大家理解并掌握上述要点。&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;温馨提示：课前准备&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;相较于简约式估计，结构估计在经济学建模、均衡推导以及 MATLAB（或类似软件）的编程方面要求更高。为了更好地理解和应用课程内容，建议学员具备一定的相关基础。&lt;/p&gt;
&lt;p&gt;推荐的前序课程包括：高级微观经济学、高级宏观经济学、数理经济学和微观计量经济学。如果对其中部分内容不太熟悉，请务必在开课前补充与本课程相关的基础知识，以便更好的跟进课程。&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;5. 专题详情&lt;/h2&gt;
&lt;h3&gt;T1. 动态离散结构模型&lt;/h3&gt;
&lt;p&gt;动态离散结构模型广泛应用于经济决策分析，本讲主要介绍动态离散结构模型的建模、求解与估计。以 &lt;a href=&quot;https://doi.org/10.2307/1911259&quot;&gt;Rust&lt;/a&gt; (&lt;a href=&quot;http://sci-hub.ren/10.2307/1911259&quot;&gt;1987&lt;/a&gt;, Econometrica) 为例，通过分析公交车是否更换引擎的决策，深入理解个体（企业）的动态最优决策过程。所谓“离散”指的是决策变量的取值&lt;strong&gt;不连续&lt;/strong&gt;，以 0/1 变量为主。这一模型在诸多领域都有应用场景。在企业决策方面，可用于分析企业是否开展研发（RD）活动，以及选择进入本土市场还是出口市场；在个人教育决策上，能帮助分析本科毕业生是否继续攻读研究生；在劳动力市场研究中，可探讨已婚妇女的生育决策等。&lt;/p&gt;
&lt;p&gt;主要内容如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;结构模型的构建方法&lt;/strong&gt;：如何根据具体经济问题确定状态变量、决策变量及约束条件；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bellman 方程的建立&lt;/strong&gt;：讲解动态最优决策的数学框架，并推导最优决策规则；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;不动点解的存在性与唯一性&lt;/strong&gt;：分析保证模型稳定性和可解性的数学条件；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;结构估计与数值求解&lt;/strong&gt;：介绍 NM 迭代方法（Newton-Raphson）与多项式拟合相结合的数值校准过程，并比较不同估计方法的适用性与优劣；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;编程实现&lt;/strong&gt;：结合 MATLAB 代码演示动态模型的数值求解，帮助学员掌握理论模型的实际应用。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;相关论文&lt;/strong&gt;：&lt;a href=&quot;https://doi.org/10.1111/1756-2171.12181&quot;&gt;Peters&lt;/a&gt; et al. (&lt;a href=&quot;http://sci-hub.ren/10.1111/1756-2171.12181&quot;&gt;2017&lt;/a&gt;, RAND)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;T2. 动态连续结构模型&lt;/h3&gt;
&lt;p&gt;动态连续结构模型广泛用于分析企业和个体在面对调整成本、动态最优路径选择等问题时的决策行为。本专题以 &lt;a href=&quot;https://doi.org/10.1257/aer.20171438&quot;&gt;Asker&lt;/a&gt; et al. (&lt;a href=&quot;http://sci-hub.ren/10.1257/aer.20171438&quot;&gt;2014&lt;/a&gt;, JPE) 为例，讲解当企业面临资本存量调整成本时，如何动态优化投资决策。与离散决策不同，企业的投资、定价、研发等变量通常是连续变量，其最优调整路径受固定和可变调整成本的约束。例如，当资本存量偏离最优水平时，企业并不总是立即调整投资，而是权衡成本与收益，选择最优的动态调整策略。这一模型在多个领域均有重要应用，包括：企业如何在不同市场周期调整产品价格；企业如何动态优化 R&amp;amp;D 投入以提升长期竞争力等。&lt;/p&gt;
&lt;p&gt;主要内容如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;连续动态结构模型的设定&lt;/strong&gt;：基于经济学理论构建包含 &lt;strong&gt;状态变量、决策变量&lt;/strong&gt; 和 &lt;strong&gt;约束条件&lt;/strong&gt; 的动态优化问题；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bellman 方程的建立&lt;/strong&gt;：如何构造最优价值函数，并推导连续状态下的最优决策路径；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;数值求解方法&lt;/strong&gt;：由于连续决策变量使得穷举法不可行，本讲重点介绍 &lt;strong&gt;格点优化 (grid optimization)&lt;/strong&gt; 方法，即将连续状态变量离散化以近似求解最优路径；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;结构估计方法及 MATLAB 实现&lt;/strong&gt;：如何利用非参数方法近似价值函数，并结合数值优化算法进行结构式估计；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;相关论文&lt;/strong&gt;：&lt;a href=&quot;https://doi.org/10.1093/qje/qjx024&quot;&gt;Gopinath&lt;/a&gt; et al. (&lt;a href=&quot;http://pinguet.free.fr/gopinath17.pdf&quot;&gt;2017&lt;/a&gt;, &lt;em&gt;QJE&lt;/em&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;T3. 存在企业间博弈条件下的动态模型&lt;/h3&gt;
&lt;p&gt;在市场竞争中，企业的决策往往受到竞争对手的行为影响，形成复杂的动态博弈。本专题以 &lt;a href=&quot;https://doi.org/10.1111/coep.12391&quot;&gt;Tan&lt;/a&gt; (&lt;a href=&quot;http://sci-hub.ren/10.1111/coep.12391&quot;&gt;2019&lt;/a&gt;) 为例，分析寡头市场中企业的动态进入决策。以美国处方药市场为例，当某类药品专利保护到期后，仿制药企业的进入决策不仅取决于自身的成本收益计算，还需评估潜在竞争者的进入节奏——过早进入可能面临高额诉讼风险，而过晚进入则可能错失市场份额。这种相互制约的竞争格局，使得市场均衡呈现「序贯进入」特征，即先行者的布局影响后发者的预期利润函数，而潜在竞争压力又反向影响企业的进入时机选择。&lt;/p&gt;
&lt;p&gt;该模型在现实商业场景中有广泛应用。例如，在新兴技术市场（如 AI 芯片、5G 设备）中，企业的进入决策和研发行为都需要考虑竞争对手的行为。又如，Costco 和 Sam’s Club 同时进入中国市场，它们应该如何选择动态进入不同的城市。此外，该模型还适用于企业在资本投资与并购中的战略规划，以及共享经济平台在新市场中的扩张决策等。&lt;/p&gt;
&lt;p&gt;本讲介绍企业间存在战略互动的离散选择动态模型的构建与求解，重点讨论企业如何在博弈环境中优化进入时机与市场布局，涵盖以下核心内容：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;寡头竞争下的动态进入模型&lt;/strong&gt;：构建包含市场进入决策、竞争者预期反应及市场结构演进的动态优化框架。不同于前两讲中假设企业利润与其他企业决策无关的设定，本讲的模型着重刻画企业间战略互动 (Strategic Correlation)，分析个体决策如何影响市场结构，并进一步影响竞争对手的最优策略。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;多重均衡 (Multiple Equilibria) 的识别与求解&lt;/strong&gt;：由于企业竞争可能导致多个市场均衡，本专讲将重点介绍如何处理均衡选择问题，避免计算过程中的不确定性。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;结构估计方法及 MATLAB 实现&lt;/strong&gt;：结合 MATLAB 代码，演示如何进行数值求解，并探讨不同均衡下的市场动态演化。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;相关论文&lt;/strong&gt;：&lt;a href=&quot;https://doi.org/10.1287/mnsc.2016.2648&quot;&gt;Ronald Gallant&lt;/a&gt; et al. (&lt;a href=&quot;http://sci-hub.ren/10.1287/mnsc.2016.2648&quot;&gt;2018&lt;/a&gt;, &lt;em&gt;Management Science&lt;/em&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;T4. 一般均衡结构模型&lt;/h3&gt;
&lt;p&gt;本讲以 &lt;a href=&quot;https://kns.cnki.net/kcms2/article/abstract?v=6h6U53PWxNRxsMibzXTXoZbjU0yyW_utAnxRffhsPfbnBVcwLWYZOzrnYNnY0Od_pZTRCQTM8iBczbxa5pPDd4ZarZJBs5aigkO0nEhVKS5I0DQuCNf5tdgDxzebFwWjYKPWTNBvsOPoCSivAhVnsFgb--pASn7RVZ6Ah0fsCDU=&amp;amp;uniplatform=NZKPT&quot;&gt;谭用等&lt;/a&gt; (&lt;a href=&quot;https://file-lianxh.oss-cn-shenzhen.aliyuncs.com/Refs/smodel/%E8%B0%AD%E7%94%A8-2024-JJYJ-%E4%B8%AD%E5%9B%BD%E5%88%9B%E6%96%B0%E6%A8%A1%E5%BC%8F%E9%80%89%E6%8B%A9-%E8%87%AA%E4%B8%BB%E5%88%9B%E6%96%B0%E6%8A%91%E6%88%96%E6%8A%80%E6%9C%AF%E5%BC%95%E8%BF%9B.pdf&quot;&gt;2024&lt;/a&gt;, 经济研究) 为例，讲解在企业面临不同研发模式选择的异质性影响时，如何通过「序贯决策」优化研发投入、定价策略和市场进入选择。具体而言，企业需要依次决策：研发模式选择 → 研发投入规模 → 最优定价策略 → 是否出口 → 出口市场定价，且各阶段的决策相互影响，形成一个动态最优选择过程。&lt;/p&gt;
&lt;p&gt;这一模型可以应用于诸多场景，特别是当企业或个体需要做出一系列相关决策时，如何合理设置序贯决策的时间节点，以实现最优策略。例如：企业在决定研发模式后，如何优化后续的研发投入、市场定价和国际市场布局？个体如何在选择受教育年限、工作单位和日均工时的动态决策过程中，实现长期最优收益？&lt;/p&gt;
&lt;p&gt;技术层面的核心内容包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;动态序贯决策建模&lt;/strong&gt;：如何构建多阶段决策框架，使得早期决策能够影响后续优化路径，并最终实现均衡解；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;内循环均衡求解&lt;/strong&gt;：介绍如何通过迭代算法计算企业在不同决策节点上的最优策略，并确保模型均衡解的存在性和唯一性；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;外循环矩条件估计&lt;/strong&gt;：如何基于实际数据构建合理的矩条件，以识别模型中的关键参数；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;模型拟合优度检验&lt;/strong&gt;：如何利用未使用的矩条件来评估模型的拟合优度，并判断其对真实经济现象的解释能力。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;相关论文&lt;/strong&gt;：&lt;a href=&quot;https://kns.cnki.net/kcms2/article/abstract?v=6h6U53PWxNRxsMibzXTXoZbjU0yyW_utAnxRffhsPfbnBVcwLWYZOzrnYNnY0Od_pZTRCQTM8iBczbxa5pPDd4ZarZJBs5aigkO0nEhVKS5I0DQuCNf5tdgDxzebFwWjYKPWTNBvsOPoCSivAhVnsFgb--pASn7RVZ6Ah0fsCDU=&amp;amp;uniplatform=NZKPT&quot;&gt;谭用等&lt;/a&gt; (&lt;a href=&quot;https://file-lianxh.oss-cn-shenzhen.aliyuncs.com/Refs/smodel/%E8%B0%AD%E7%94%A8-2024-JK-%E4%B8%8D%E7%A1%AE%E5%AE%9A%E6%80%A7%E4%B8%8E%E4%B8%AD%E5%9B%BD%E7%B2%AE%E9%A3%9F%E5%88%86%E6%95%A3%E8%BF%9B%E5%8F%A3-%E7%BB%93%E6%9E%84%E4%BC%B0%E8%AE%A1%E4%B8%8E%E5%8F%8D%E4%BA%8B%E5%AE%9E%E7%A0%94%E7%A9%B6.pdf&quot;&gt;2024&lt;/a&gt;, &lt;em&gt;经济学季刊&lt;/em&gt;）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;6. 参考文献&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.jianguoyun.com/p/DeXEUNUQtKiFCBjxzPkFIAA&quot;&gt;打包下载&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Asker, J., Collard-Wexler, A., &amp;amp; De Loecker, J. (2014). Dynamic Inputs and Resource (Mis)allocation. Journal of Political Economy, 122(5): 1013-1063. &lt;a href=&quot;https://doi.org/10.1086/677072&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://www.sci-hub.se/10.1086/677072&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=(Mis)Allocation,+market+power,+and+global+oil+extraction&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Ronald Gallant, A., Hong, H., &amp;amp; Khwaja, A. (2018). The Dynamic Spillovers of Entry: An Application to the Generic Drug Industry. Management Science, 64(3), 1189–1211. &lt;a href=&quot;https://doi.org/10.1287/mnsc.2016.2648&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://pubsonline.informs.org/doi/suppl/10.1287/mnsc.2016.2648/suppl_file/mnsc.2016.2648-sm.pdf&quot;&gt;-Appendix-&lt;/a&gt;, &lt;a href=&quot;http://sci-hub.ren/10.1287/mnsc.2016.2648&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=The%20Dynamic%20Spillovers%20of%20Entry:%20An%20Application%20to%20the%20Generic%20Drug%20Industry&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Gopinath, G., Kalemli-Özcan., Karabarbounis, L., &amp;amp; Villegas-Sanchez, C. (2017). Capital Allocation and Productivity in South Europe. &lt;em&gt;The Quarterly Journal of Economics&lt;/em&gt;, 132(4), 1915–1967. &lt;a href=&quot;https://doi.org/10.1093/qje/qjx024&quot;&gt;Link&lt;/a&gt; (rep), &lt;a href=&quot;http://pinguet.free.fr/gopinath17.pdf&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Capital%20Allocation%20and%20Productivity%20in%20South%20Europe*&quot;&gt;Google&lt;/a&gt;, &lt;a href=&quot;https://doi.org/10.7910/DVN/FGRWIG&quot;&gt;-Replication-&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Rust, J. (1987). Optimal replacement of GMC bus engines: An empirical model of Harold Zurcher. &lt;em&gt;Econometrica, 55&lt;/em&gt;(5), 999–1033. &lt;a href=&quot;https://doi.org/10.2307/1911259&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;http://sci-hub.ren/10.2307/1911259&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Optimal+replacement+of+GMC+bus+engines:+An+empirical+model+of+Harold+Zurcher&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Peters, B., Roberts, M. J., Vuong, V. A., &amp;amp; Fryges, H. (2017). Estimating dynamic R&amp;amp;D choice: an analysis of costs and long‐run benefits. The RAND Journal of Economics, 48(2), 409–437. Portico. &lt;a href=&quot;https://doi.org/10.1111/1756-2171.12181&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;http://sci-hub.ren/10.1111/1756-2171.12181&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Estimating%20dynamic%20R&amp;amp;D%20choice:%20an%20analysis%20of%20costs%20and%20long%E2%80%90run%20benefits.%20The%20RAND%20Journal%20of%20Economics,%2048(2),%20409%E2%80%93437&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Tan, Y. (2019). Dynamic entry with demand and supply side spillovers. &lt;em&gt;Contemporary Economic Policy, 37&lt;/em&gt;(1), 86–101. &lt;a href=&quot;https://doi.org/10.1111/coep.12391&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;http://sci-hub.ren/10.1111/coep.12391&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Dynamic+Entry+with+Demand+and+Supply+Side+Spillovers&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;谭用, 邱斌, 叶迪, 綦建红. (2024). 中国创新模式选择：自主创新抑或技术引进？ &lt;em&gt;经济研究&lt;/em&gt;, 59(04), 113-132. &lt;a href=&quot;https://kns.cnki.net/kcms2/article/abstract?v=6h6U53PWxNRxsMibzXTXoZbjU0yyW_utAnxRffhsPfbnBVcwLWYZOzrnYNnY0Od_pZTRCQTM8iBczbxa5pPDd4ZarZJBs5aigkO0nEhVKS5I0DQuCNf5tdgDxzebFwWjYKPWTNBvsOPoCSivAhVnsFgb--pASn7RVZ6Ah0fsCDU=&amp;amp;uniplatform=NZKPT&quot;&gt;-Link-&lt;/a&gt;, &lt;a href=&quot;https://file-lianxh.oss-cn-shenzhen.aliyuncs.com/Refs/smodel/%E8%B0%AD%E7%94%A8-2024-JJYJ-%E4%B8%AD%E5%9B%BD%E5%88%9B%E6%96%B0%E6%A8%A1%E5%BC%8F%E9%80%89%E6%8B%A9-%E8%87%AA%E4%B8%BB%E5%88%9B%E6%96%B0%E6%8A%91%E6%88%96%E6%8A%80%E6%9C%AF%E5%BC%95%E8%BF%9B.pdf&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;谭用, 周洺竹, 綦建红. (2024). 不确定性与中国粮食分散进口：结构估计与反事实研究. &lt;em&gt;经济学(季刊)&lt;/em&gt;, 24(2), 570-587. &lt;a href=&quot;https://kns.cnki.net/kcms2/article/abstract?v=6h6U53PWxNTFPfYnRAVpDVvu3E0HbSjn8gdSNkzMTUIMKAYSQpBYV82_A966ozlnfF8MtKAuSuVVyUWx_JDzomM6_YnEgKrWXKZ7N95rqDlHJPUvfu1gKkHP4XFQn7DFMQgUWqczIURg0q8aEuc57wga6rJp-6n9_LuxTnM5eds=&amp;amp;uniplatform=NZKPT&quot;&gt;-Link-&lt;/a&gt;, &lt;a href=&quot;https://file-lianxh.oss-cn-shenzhen.aliyuncs.com/Refs/smodel/%E8%B0%AD%E7%94%A8-2024-JK-%E4%B8%8D%E7%A1%AE%E5%AE%9A%E6%80%A7%E4%B8%8E%E4%B8%AD%E5%9B%BD%E7%B2%AE%E9%A3%9F%E5%88%86%E6%95%A3%E8%BF%9B%E5%8F%A3-%E7%BB%93%E6%9E%84%E4%BC%B0%E8%AE%A1%E4%B8%8E%E5%8F%8D%E4%BA%8B%E5%AE%9E%E7%A0%94%E7%A9%B6.pdf&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;7. 报名信息&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;主办方：&lt;/strong&gt; 太原君泉教育咨询有限公司&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;标准费用&lt;/strong&gt; (含报名费、材料费)，差旅及食宿费自理：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;全价&lt;/strong&gt;：2000 元/人&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;优惠方案&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;专题课/现场班老学员&lt;/strong&gt;：9 折，1800 元/人&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;学生 (需提供学生证/卡照片)&lt;/strong&gt;：9 折，1800 元/人&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;连享会会员：&lt;/strong&gt; 8.5 折，1700 元/人&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;温馨提示：&lt;/strong&gt; 以上各项优惠不能叠加使用，&lt;strong&gt;现场座位根据报名缴费顺序确定&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;联系方式：&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;邮箱：&lt;a href=&quot;https://www.lianxh.cn/details/wjx004@sina.com&quot;&gt;wjx004@sina.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;王老师：18903405450 (微信同号)&lt;/li&gt;
&lt;li&gt;李老师：18636102467 (微信同号)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;报名链接：&lt;/strong&gt; &lt;a href=&quot;https://www.wjx.top/vm/QfdWOa3.aspx#&quot;&gt;https://www.wjx.top/vm/QfdWOa3.aspx#&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;长按/扫描二维码报名：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined%E6%8A%A5%E5%90%8D-2025%E7%BB%93%E6%9E%84%E6%A8%A1%E5%9E%8B.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;缴费方式&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;方式 1：对公转账&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;户名：太原君泉教育咨询有限公司&lt;/li&gt;
&lt;li&gt;账号：35117530000023891 (晋商银行股份有限公司太原南中环支行)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;温馨提示：&lt;/strong&gt; 对公转账时，请务必提供「&lt;strong&gt;汇款人姓名-单位&lt;/strong&gt;」信息，以便确认。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;方式 2：扫码支付&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E5%90%9B%E6%B3%89%E6%94%B6%E6%AC%BE%E7%A0%81.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;温馨提示：&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;扫码支付后，请将「&lt;strong&gt;付款记录&lt;/strong&gt;」截屏发给王老师-18903405450（微信同号）&lt;/li&gt;
&lt;/ul&gt;
&lt;div style=&quot;page-break-after: always;&quot;&gt;&lt;/div&gt;
&lt;h2&gt;8. 助教招聘&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;名额：&lt;/strong&gt; 10 名&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;任务：&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;A. 课前准备&lt;/strong&gt;：完成 2 篇推文，风格参见连享会主页 &lt;a href=&quot;https://www.lianxh.cn/&quot;&gt;www.lianxh.cn&lt;/a&gt;；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;B. 开课前答疑&lt;/strong&gt;：协助学员安装软件和使用课件，在微信群中回答一些常见问题；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;C. 上课期间答疑&lt;/strong&gt;：针对前一天学习的内容，在微信群中答疑 (8:00-9:00，19:00-22:00)；&lt;/li&gt;
&lt;li&gt;Note: 下午 5:30-6:00 的课后答疑由主讲教师负责。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;要求：&lt;/strong&gt; 热心、尽职，熟悉 MATLAB 的基本语法和常用命令，能对常见问题进行解答和记录&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;特别说明：&lt;/strong&gt; 往期按期完成任务的助教可以直接联系连老师直录。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;截止时间：&lt;/strong&gt; 2025 年 5 月 7 日 (将于 5 月 9 日公布遴选结果于 &lt;a href=&quot;https://gitee.com/arlionn/&quot;&gt;课程主页&lt;/a&gt;，及连享会主页 &lt;a href=&quot;https://www.lianxh.cn/&quot;&gt;lianxh.cn&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;申请链接：&lt;/strong&gt; &lt;a href=&quot;https://www.wjx.top/vm/OlWbUuM.aspx#&quot;&gt;https://www.wjx.top/vm/OlWbUuM.aspx#&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined%E5%8A%A9%E6%95%99%EF%BC%9A2025%E7%BB%93%E6%9E%84%E6%A8%A1%E5%9E%8B.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;9. 交通和住宿&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;校内宾馆&lt;/strong&gt;：天津大学四十二斋&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;地址&lt;/strong&gt;：天津市南开区卫津路 92 号，天津大学卫津路校区西门&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;预订电话&lt;/strong&gt;：林女士-13512035569&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;温馨提示：&lt;/strong&gt; 预定时请以「&lt;strong&gt;&lt;font color=&quot;green&quot;&gt;连享会会议参会人员&lt;/font&gt;&lt;/strong&gt;」身份报名，以便享受协议价。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;center&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt; || &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/center&gt;
</description><link>https://www.lianxh.cn/details/1543.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1543.html</guid><pubDate>Fri, 07 Mar 2025 16:00:00 GMT</pubDate><author>连享会</author></item><item><title>✅ 结构模型专题课程-现场班</title><description>&lt;h1&gt;结构模型 · 2025 现场班&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://file.lianxh.cn/KC/lianxh_smodel.pdf&quot;&gt;PDF 课纲&lt;/a&gt;  |  &lt;a href=&quot;https://www.lianxh.cn/&quot;&gt;课程主页&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;1. 课程概览&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;时间：&lt;/strong&gt; 2025 年 6 月 7-8 日 (每天 6 小时 + 30 分钟答疑)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;地点：&lt;/strong&gt; 天津大学 (卫津路校区西门)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;嘉宾：&lt;/strong&gt; 谭用 (南京财经大学，教授)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;软件：&lt;/strong&gt; Matlab R2023a/R2024a&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主页：&lt;/strong&gt; &lt;a href=&quot;https://www.lianxh.cn/smodel.html&quot;&gt;https://www.lianxh.cn/smodel.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;资料：&lt;/strong&gt; &lt;a href=&quot;https://file.lianxh.cn/KC/lianxh_smodel.pdf&quot;&gt;PDF 课程大纲&lt;/a&gt;；&lt;a href=&quot;https://www.jianguoyun.com/p/DeXEUNUQtKiFCBjxzPkFIAA&quot;&gt;参考文献&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;报名链接：&lt;/strong&gt; &lt;a href=&quot;https://www.wjx.top/vm/QfdWOa3.aspx#&quot;&gt;https://www.wjx.top/vm/QfdWOa3.aspx#&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;助教招聘：&lt;/strong&gt; &lt;a href=&quot;https://www.wjx.top/vm/OlWbUuM.aspx#&quot;&gt;https://www.wjx.top/vm/OlWbUuM.aspx#&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;2. 嘉宾简介&lt;/h2&gt;
&lt;img style=&quot;width: 200px&quot; src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Tanyong-photo-01-180.png&quot; referrerpolicy=&quot;no-referrer&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://gmxy.nufe.edu.cn/info/1019/4525.htm&quot;&gt;谭用&lt;/a&gt;，南京财经大学教授，江苏省第六期 333 高层次人才工程中青年学术带头人，亚洲太平洋地区国际贸易研讨会（APTS）成员。论文发表于 &lt;em&gt;Review of Economics and Statistics&lt;/em&gt;, &lt;em&gt;International Economic Review&lt;/em&gt;, &lt;em&gt;European Economic Review&lt;/em&gt;, &lt;em&gt;Journal of Economic Behavior and Organization&lt;/em&gt;, 《经济研究》、《世界经济》、《经济学（季刊）》、《统计研究》等国内外权威期刊。主持国家自然科学基金项目、参与国家社科重大项目（子课题负责人）。&lt;/p&gt;
&lt;h2&gt;3. 课程缘起&lt;/h2&gt;
&lt;p&gt;近年来，计量方法和统计软件不断更新，越来越多的期刊开始提供规范的复现数据和代码，做实证研究的难度似乎在不断降低。然而，我们却感觉到发表越来越难了。对于青年学者和博士研究生而言，这种内卷带来的焦虑和压力让人很是彷徨。出路在哪里？&lt;/p&gt;
&lt;p&gt;我和不少人讨论过这个问题，总结下来有三点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;实证分析的内卷困境&lt;/strong&gt;。如今，借助顶刊提供的复现文档，辅以 ChatGPT、DeepSeek 等 AI 工具，刚入门的博士研究生也能很快理解和复现新近提出的计量模型和方法。这就导致采用简约式估计的研究，在发表时陷入了 “拼手速” 的怪圈，研究的同质化现象越来越严重。一旦陷入 “拼手速”，研究者就很难有足够时间和精力去深入思考研究内容。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;简约式实证分析的固有局限&lt;/strong&gt;。大多数计量模型的设定都属于简约式 (reduced form)，重点关注「$x\to y$」的因果识别。挑战在于，仅仅依赖 IV 估计，断点回归等计量方法，很难把机制理清楚。很多时候我们只能依赖传统机制：从融资约束、生产效率、研发强度、所有权性质等方面入手，轮番测试。这使得文章很难做出能让人眼前一亮的新意。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;研究的可行性和时效性难题&lt;/strong&gt;。许多简约式实证研究都面临「巧妇难为无米之炊」的困境：虽然某些政策或事件具有重要研究价值，但相关数据难以获取，研究难以推进。同时，我们往往需要「让子弹飞一会儿」——对于新出台的政策，通常要等待 2-3 年甚至更长时间，才能进行评估。例如，国内学者仍主要依赖 1998-2007 年的工业企业数据库和 2000-2015 年的海关数据库，基于这些数据的简约式估计，其现实适用性值得商榷。此外，这种研究模式也难以开展反事实分析，例如，我们难以评估如果中美贸易战未发生或关税进一步上调，社会福利将如何变化，从而影响政策建议的精准性。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;本课程旨在解决简约式研究方法所面临的上述痛点，这得益于结构模型估计的几个核心特征：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;强调理论模型构建与现实契合。&lt;/strong&gt; 在进行结构估计之前，首先需要建立合适的一般均衡或局部均衡模型，并确保其能够有效契合现实观察到的特征事实。模型的建立基于宏观或微观经济学的基本原理，使得模型中内生变量的变化能够清晰地刻画经济机制，避免仅停留在统计相关性的层面。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;结构模型估计能够更灵活地识别关键参数。&lt;/strong&gt; 结构模型估计有个独特的方法，就是把内循环和外循环结合起来，在模型框架下直接识别关键参数。好处在于，这种设定不依赖于线性假设，能够有效降低潜在的非线性关系导致的估计偏差。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;结构模型支持基于参数估计的反事实分析。&lt;/strong&gt; 结构模型的一个核心优势是能够进行 &lt;strong&gt;“What if”&lt;/strong&gt; 类型的反事实分析，即模拟尚未发生的冲击对经济系统的影响。例如，在面对尚未落地的政策变动或外部冲击时，可以借助冲击前数据识别模型参数，然后基于这些参数模拟冲击发生后或预测经济核心变量的变化趋势，并据此提出前瞻性的政策建议。这种能力弥补了简约式估计在政策分析上的局限性。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;4. 课程目标&lt;/h2&gt;
&lt;p&gt;我们希望通过本课程，使学员掌握结构建模的基本思路，能够独立构建并求解动态优化问题，并运用结构估计方法分析实际经济问题。此外，课程还将帮助学员理解反事实分析的应用，为政策评估和前沿研究提供工具支持。具体说明如下：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;G1. 结构化模型研究框架&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;讲解如何基于经济学基本原理（如消费者偏好、生产者生产函数、调整成本等），以及现有统计结果和经验证据来构建静态和动态结构模型。模型构建的关键在于，如何引入一些新的核心参数或机制，以便通过简洁的模型设定来解释看起来很复杂的经济现象。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;理解结构模型论文的标准写作框架：特征事实提炼 → 均衡模型构建（一般均衡/局部均衡）→ 数值模拟与反事实分析&lt;/li&gt;
&lt;li&gt;掌握静态和动态模型的构建：Bellman 方程的经济学设定与均衡解存在性验证方法&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;G2. 参数校准技术和结构估计方法&lt;/strong&gt;&lt;br&gt;
并不是所有的模型都能够对数线性化，本课程将详细讲解在无法直接使用线性回归的情况下，如何构建合理的矩条件并通过内外循环迭代方法来估计关键参数。具体包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;实现内循环（局部参数）与外循环（全局参数）的协同校准&lt;/li&gt;
&lt;li&gt;构建并选择用于识别模型参数的矩条件，以及在参数估计后评估其拟合优度&lt;/li&gt;
&lt;li&gt;运用 Newton-Raphson 法、Nelder-Mead迭代、贝叶斯 MCMC 等迭代算法&lt;/li&gt;
&lt;li&gt;掌握基于网格搜索 (grid-search) 的参数空间优化策略&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;G3. 开展有价值的反事实研究&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;反事实研究最关键的点在于，什么样的反事实分析才是具备研究价值和政策含义的？如何层层递进的开展反事实分析？可以归结为三个问题：选什么问题有价值？怎么做参数调整？如何解释结果？本专题将通过 2-3 篇论文的讲解，帮助大家理解并掌握上述要点。&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;温馨提示：课前准备&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;相较于简约式估计，结构估计在经济学建模、均衡推导以及 MATLAB（或类似软件）的编程方面要求更高。为了更好地理解和应用课程内容，建议学员具备一定的相关基础。&lt;/p&gt;
&lt;p&gt;推荐的前序课程包括：高级微观经济学、高级宏观经济学、数理经济学和微观计量经济学。如果对其中部分内容不太熟悉，请务必在开课前补充与本课程相关的基础知识，以便更好的跟进课程。&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;5. 专题详情&lt;/h2&gt;
&lt;h3&gt;T1. 动态离散结构模型&lt;/h3&gt;
&lt;p&gt;动态离散结构模型广泛应用于经济决策分析，本讲主要介绍动态离散结构模型的建模、求解与估计。以 &lt;a href=&quot;https://doi.org/10.2307/1911259&quot;&gt;Rust&lt;/a&gt; (&lt;a href=&quot;http://sci-hub.ren/10.2307/1911259&quot;&gt;1987&lt;/a&gt;, Econometrica) 为例，通过分析公交车是否更换引擎的决策，深入理解个体（企业）的动态最优决策过程。所谓“离散”指的是决策变量的取值&lt;strong&gt;不连续&lt;/strong&gt;，以 0/1 变量为主。这一模型在诸多领域都有应用场景。在企业决策方面，可用于分析企业是否开展研发（RD）活动，以及选择进入本土市场还是出口市场；在个人教育决策上，能帮助分析本科毕业生是否继续攻读研究生；在劳动力市场研究中，可探讨已婚妇女的生育决策等。&lt;/p&gt;
&lt;p&gt;主要内容如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;结构模型的构建方法&lt;/strong&gt;：如何根据具体经济问题确定状态变量、决策变量及约束条件；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bellman 方程的建立&lt;/strong&gt;：讲解动态最优决策的数学框架，并推导最优决策规则；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;不动点解的存在性与唯一性&lt;/strong&gt;：分析保证模型稳定性和可解性的数学条件；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;结构估计与数值求解&lt;/strong&gt;：介绍 NM 迭代方法（Newton-Raphson）与多项式拟合相结合的数值校准过程，并比较不同估计方法的适用性与优劣；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;编程实现&lt;/strong&gt;：结合 MATLAB 代码演示动态模型的数值求解，帮助学员掌握理论模型的实际应用。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;相关论文&lt;/strong&gt;：&lt;a href=&quot;https://doi.org/10.1111/1756-2171.12181&quot;&gt;Peters&lt;/a&gt; et al. (&lt;a href=&quot;http://sci-hub.ren/10.1111/1756-2171.12181&quot;&gt;2017&lt;/a&gt;, RAND)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;T2. 动态连续结构模型&lt;/h3&gt;
&lt;p&gt;动态连续结构模型广泛用于分析企业和个体在面对调整成本、动态最优路径选择等问题时的决策行为。本专题以 &lt;a href=&quot;https://doi.org/10.1257/aer.20171438&quot;&gt;Asker&lt;/a&gt; et al. (&lt;a href=&quot;http://sci-hub.ren/10.1257/aer.20171438&quot;&gt;2014&lt;/a&gt;, JPE) 为例，讲解当企业面临资本存量调整成本时，如何动态优化投资决策。与离散决策不同，企业的投资、定价、研发等变量通常是连续变量，其最优调整路径受固定和可变调整成本的约束。例如，当资本存量偏离最优水平时，企业并不总是立即调整投资，而是权衡成本与收益，选择最优的动态调整策略。这一模型在多个领域均有重要应用，包括：企业如何在不同市场周期调整产品价格；企业如何动态优化 R&amp;amp;D 投入以提升长期竞争力等。&lt;/p&gt;
&lt;p&gt;主要内容如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;连续动态结构模型的设定&lt;/strong&gt;：基于经济学理论构建包含 &lt;strong&gt;状态变量、决策变量&lt;/strong&gt; 和 &lt;strong&gt;约束条件&lt;/strong&gt; 的动态优化问题；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bellman 方程的建立&lt;/strong&gt;：如何构造最优价值函数，并推导连续状态下的最优决策路径；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;数值求解方法&lt;/strong&gt;：由于连续决策变量使得穷举法不可行，本讲重点介绍 &lt;strong&gt;格点优化 (grid optimization)&lt;/strong&gt; 方法，即将连续状态变量离散化以近似求解最优路径；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;结构估计方法及 MATLAB 实现&lt;/strong&gt;：如何利用非参数方法近似价值函数，并结合数值优化算法进行结构式估计；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;相关论文&lt;/strong&gt;：&lt;a href=&quot;https://doi.org/10.1093/qje/qjx024&quot;&gt;Gopinath&lt;/a&gt; et al. (&lt;a href=&quot;http://pinguet.free.fr/gopinath17.pdf&quot;&gt;2017&lt;/a&gt;, &lt;em&gt;QJE&lt;/em&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;T3. 存在企业间博弈条件下的动态模型&lt;/h3&gt;
&lt;p&gt;在市场竞争中，企业的决策往往受到竞争对手的行为影响，形成复杂的动态博弈。本专题以 &lt;a href=&quot;https://doi.org/10.1111/coep.12391&quot;&gt;Tan&lt;/a&gt; (&lt;a href=&quot;http://sci-hub.ren/10.1111/coep.12391&quot;&gt;2019&lt;/a&gt;) 为例，分析寡头市场中企业的动态进入决策。以美国处方药市场为例，当某类药品专利保护到期后，仿制药企业的进入决策不仅取决于自身的成本收益计算，还需评估潜在竞争者的进入节奏——过早进入可能面临高额诉讼风险，而过晚进入则可能错失市场份额。这种相互制约的竞争格局，使得市场均衡呈现「序贯进入」特征，即先行者的布局影响后发者的预期利润函数，而潜在竞争压力又反向影响企业的进入时机选择。&lt;/p&gt;
&lt;p&gt;该模型在现实商业场景中有广泛应用。例如，在新兴技术市场（如 AI 芯片、5G 设备）中，企业的进入决策和研发行为都需要考虑竞争对手的行为。又如，Costco 和 Sam’s Club 同时进入中国市场，它们应该如何选择动态进入不同的城市。此外，该模型还适用于企业在资本投资与并购中的战略规划，以及共享经济平台在新市场中的扩张决策等。&lt;/p&gt;
&lt;p&gt;本讲介绍企业间存在战略互动的离散选择动态模型的构建与求解，重点讨论企业如何在博弈环境中优化进入时机与市场布局，涵盖以下核心内容：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;寡头竞争下的动态进入模型&lt;/strong&gt;：构建包含市场进入决策、竞争者预期反应及市场结构演进的动态优化框架。不同于前两讲中假设企业利润与其他企业决策无关的设定，本讲的模型着重刻画企业间战略互动 (Strategic Correlation)，分析个体决策如何影响市场结构，并进一步影响竞争对手的最优策略。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;多重均衡 (Multiple Equilibria) 的识别与求解&lt;/strong&gt;：由于企业竞争可能导致多个市场均衡，本专讲将重点介绍如何处理均衡选择问题，避免计算过程中的不确定性。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;结构估计方法及 MATLAB 实现&lt;/strong&gt;：结合 MATLAB 代码，演示如何进行数值求解，并探讨不同均衡下的市场动态演化。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;相关论文&lt;/strong&gt;：&lt;a href=&quot;https://doi.org/10.1287/mnsc.2016.2648&quot;&gt;Ronald Gallant&lt;/a&gt; et al. (&lt;a href=&quot;http://sci-hub.ren/10.1287/mnsc.2016.2648&quot;&gt;2018&lt;/a&gt;, &lt;em&gt;Management Science&lt;/em&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;T4. 一般均衡结构模型&lt;/h3&gt;
&lt;p&gt;本讲以 &lt;a href=&quot;https://kns.cnki.net/kcms2/article/abstract?v=6h6U53PWxNRxsMibzXTXoZbjU0yyW_utAnxRffhsPfbnBVcwLWYZOzrnYNnY0Od_pZTRCQTM8iBczbxa5pPDd4ZarZJBs5aigkO0nEhVKS5I0DQuCNf5tdgDxzebFwWjYKPWTNBvsOPoCSivAhVnsFgb--pASn7RVZ6Ah0fsCDU=&amp;amp;uniplatform=NZKPT&quot;&gt;谭用等&lt;/a&gt; (&lt;a href=&quot;https://file-lianxh.oss-cn-shenzhen.aliyuncs.com/Refs/smodel/%E8%B0%AD%E7%94%A8-2024-JJYJ-%E4%B8%AD%E5%9B%BD%E5%88%9B%E6%96%B0%E6%A8%A1%E5%BC%8F%E9%80%89%E6%8B%A9-%E8%87%AA%E4%B8%BB%E5%88%9B%E6%96%B0%E6%8A%91%E6%88%96%E6%8A%80%E6%9C%AF%E5%BC%95%E8%BF%9B.pdf&quot;&gt;2024&lt;/a&gt;, 经济研究) 为例，讲解在企业面临不同研发模式选择的异质性影响时，如何通过「序贯决策」优化研发投入、定价策略和市场进入选择。具体而言，企业需要依次决策：研发模式选择 → 研发投入规模 → 最优定价策略 → 是否出口 → 出口市场定价，且各阶段的决策相互影响，形成一个动态最优选择过程。&lt;/p&gt;
&lt;p&gt;这一模型可以应用于诸多场景，特别是当企业或个体需要做出一系列相关决策时，如何合理设置序贯决策的时间节点，以实现最优策略。例如：企业在决定研发模式后，如何优化后续的研发投入、市场定价和国际市场布局？个体如何在选择受教育年限、工作单位和日均工时的动态决策过程中，实现长期最优收益？&lt;/p&gt;
&lt;p&gt;技术层面的核心内容包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;动态序贯决策建模&lt;/strong&gt;：如何构建多阶段决策框架，使得早期决策能够影响后续优化路径，并最终实现均衡解；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;内循环均衡求解&lt;/strong&gt;：介绍如何通过迭代算法计算企业在不同决策节点上的最优策略，并确保模型均衡解的存在性和唯一性；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;外循环矩条件估计&lt;/strong&gt;：如何基于实际数据构建合理的矩条件，以识别模型中的关键参数；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;模型拟合优度检验&lt;/strong&gt;：如何利用未使用的矩条件来评估模型的拟合优度，并判断其对真实经济现象的解释能力。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;相关论文&lt;/strong&gt;：&lt;a href=&quot;https://kns.cnki.net/kcms2/article/abstract?v=6h6U53PWxNRxsMibzXTXoZbjU0yyW_utAnxRffhsPfbnBVcwLWYZOzrnYNnY0Od_pZTRCQTM8iBczbxa5pPDd4ZarZJBs5aigkO0nEhVKS5I0DQuCNf5tdgDxzebFwWjYKPWTNBvsOPoCSivAhVnsFgb--pASn7RVZ6Ah0fsCDU=&amp;amp;uniplatform=NZKPT&quot;&gt;谭用等&lt;/a&gt; (&lt;a href=&quot;https://file-lianxh.oss-cn-shenzhen.aliyuncs.com/Refs/smodel/%E8%B0%AD%E7%94%A8-2024-JK-%E4%B8%8D%E7%A1%AE%E5%AE%9A%E6%80%A7%E4%B8%8E%E4%B8%AD%E5%9B%BD%E7%B2%AE%E9%A3%9F%E5%88%86%E6%95%A3%E8%BF%9B%E5%8F%A3-%E7%BB%93%E6%9E%84%E4%BC%B0%E8%AE%A1%E4%B8%8E%E5%8F%8D%E4%BA%8B%E5%AE%9E%E7%A0%94%E7%A9%B6.pdf&quot;&gt;2024&lt;/a&gt;, &lt;em&gt;经济学季刊&lt;/em&gt;）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;6. 参考文献&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.jianguoyun.com/p/DeXEUNUQtKiFCBjxzPkFIAA&quot;&gt;打包下载&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Asker, J., Collard-Wexler, A., &amp;amp; De Loecker, J. (2014). Dynamic Inputs and Resource (Mis)allocation. Journal of Political Economy, 122(5): 1013-1063. &lt;a href=&quot;https://doi.org/10.1086/677072&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://www.sci-hub.se/10.1086/677072&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=(Mis)Allocation,+market+power,+and+global+oil+extraction&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Ronald Gallant, A., Hong, H., &amp;amp; Khwaja, A. (2018). The Dynamic Spillovers of Entry: An Application to the Generic Drug Industry. Management Science, 64(3), 1189–1211. &lt;a href=&quot;https://doi.org/10.1287/mnsc.2016.2648&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://pubsonline.informs.org/doi/suppl/10.1287/mnsc.2016.2648/suppl_file/mnsc.2016.2648-sm.pdf&quot;&gt;-Appendix-&lt;/a&gt;, &lt;a href=&quot;http://sci-hub.ren/10.1287/mnsc.2016.2648&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=The%20Dynamic%20Spillovers%20of%20Entry:%20An%20Application%20to%20the%20Generic%20Drug%20Industry&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Gopinath, G., Kalemli-Özcan., Karabarbounis, L., &amp;amp; Villegas-Sanchez, C. (2017). Capital Allocation and Productivity in South Europe. &lt;em&gt;The Quarterly Journal of Economics&lt;/em&gt;, 132(4), 1915–1967. &lt;a href=&quot;https://doi.org/10.1093/qje/qjx024&quot;&gt;Link&lt;/a&gt; (rep), &lt;a href=&quot;http://pinguet.free.fr/gopinath17.pdf&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Capital%20Allocation%20and%20Productivity%20in%20South%20Europe*&quot;&gt;Google&lt;/a&gt;, &lt;a href=&quot;https://doi.org/10.7910/DVN/FGRWIG&quot;&gt;-Replication-&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Rust, J. (1987). Optimal replacement of GMC bus engines: An empirical model of Harold Zurcher. &lt;em&gt;Econometrica, 55&lt;/em&gt;(5), 999–1033. &lt;a href=&quot;https://doi.org/10.2307/1911259&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;http://sci-hub.ren/10.2307/1911259&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Optimal+replacement+of+GMC+bus+engines:+An+empirical+model+of+Harold+Zurcher&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Peters, B., Roberts, M. J., Vuong, V. A., &amp;amp; Fryges, H. (2017). Estimating dynamic R&amp;amp;D choice: an analysis of costs and long‐run benefits. The RAND Journal of Economics, 48(2), 409–437. Portico. &lt;a href=&quot;https://doi.org/10.1111/1756-2171.12181&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;http://sci-hub.ren/10.1111/1756-2171.12181&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Estimating%20dynamic%20R&amp;amp;D%20choice:%20an%20analysis%20of%20costs%20and%20long%E2%80%90run%20benefits.%20The%20RAND%20Journal%20of%20Economics,%2048(2),%20409%E2%80%93437&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Tan, Y. (2019). Dynamic entry with demand and supply side spillovers. &lt;em&gt;Contemporary Economic Policy, 37&lt;/em&gt;(1), 86–101. &lt;a href=&quot;https://doi.org/10.1111/coep.12391&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;http://sci-hub.ren/10.1111/coep.12391&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Dynamic+Entry+with+Demand+and+Supply+Side+Spillovers&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;谭用, 邱斌, 叶迪, 綦建红. (2024). 中国创新模式选择：自主创新抑或技术引进？ &lt;em&gt;经济研究&lt;/em&gt;, 59(04), 113-132. &lt;a href=&quot;https://kns.cnki.net/kcms2/article/abstract?v=6h6U53PWxNRxsMibzXTXoZbjU0yyW_utAnxRffhsPfbnBVcwLWYZOzrnYNnY0Od_pZTRCQTM8iBczbxa5pPDd4ZarZJBs5aigkO0nEhVKS5I0DQuCNf5tdgDxzebFwWjYKPWTNBvsOPoCSivAhVnsFgb--pASn7RVZ6Ah0fsCDU=&amp;amp;uniplatform=NZKPT&quot;&gt;-Link-&lt;/a&gt;, &lt;a href=&quot;https://file-lianxh.oss-cn-shenzhen.aliyuncs.com/Refs/smodel/%E8%B0%AD%E7%94%A8-2024-JJYJ-%E4%B8%AD%E5%9B%BD%E5%88%9B%E6%96%B0%E6%A8%A1%E5%BC%8F%E9%80%89%E6%8B%A9-%E8%87%AA%E4%B8%BB%E5%88%9B%E6%96%B0%E6%8A%91%E6%88%96%E6%8A%80%E6%9C%AF%E5%BC%95%E8%BF%9B.pdf&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;谭用, 周洺竹, 綦建红. (2024). 不确定性与中国粮食分散进口：结构估计与反事实研究. &lt;em&gt;经济学(季刊)&lt;/em&gt;, 24(2), 570-587. &lt;a href=&quot;https://kns.cnki.net/kcms2/article/abstract?v=6h6U53PWxNTFPfYnRAVpDVvu3E0HbSjn8gdSNkzMTUIMKAYSQpBYV82_A966ozlnfF8MtKAuSuVVyUWx_JDzomM6_YnEgKrWXKZ7N95rqDlHJPUvfu1gKkHP4XFQn7DFMQgUWqczIURg0q8aEuc57wga6rJp-6n9_LuxTnM5eds=&amp;amp;uniplatform=NZKPT&quot;&gt;-Link-&lt;/a&gt;, &lt;a href=&quot;https://file-lianxh.oss-cn-shenzhen.aliyuncs.com/Refs/smodel/%E8%B0%AD%E7%94%A8-2024-JK-%E4%B8%8D%E7%A1%AE%E5%AE%9A%E6%80%A7%E4%B8%8E%E4%B8%AD%E5%9B%BD%E7%B2%AE%E9%A3%9F%E5%88%86%E6%95%A3%E8%BF%9B%E5%8F%A3-%E7%BB%93%E6%9E%84%E4%BC%B0%E8%AE%A1%E4%B8%8E%E5%8F%8D%E4%BA%8B%E5%AE%9E%E7%A0%94%E7%A9%B6.pdf&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;7. 报名信息&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;主办方：&lt;/strong&gt; 太原君泉教育咨询有限公司&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;标准费用&lt;/strong&gt; (含报名费、材料费)，差旅及食宿费自理：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;全价&lt;/strong&gt;：2000 元/班/人&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;优惠方案&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;专题课/现场班老学员&lt;/strong&gt;：9 折，1800 元/人&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;学生 (需提供学生证/卡照片)&lt;/strong&gt;：9 折，1800 元/人&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;连享会会员：&lt;/strong&gt; 8.5 折，1700 元/人&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;温馨提示：&lt;/strong&gt; 以上各项优惠不能叠加使用，&lt;strong&gt;现场座位根据报名缴费顺序确定&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;联系方式：&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;邮箱：&lt;a href=&quot;https://www.lianxh.cn/details/wjx004@sina.com&quot;&gt;wjx004@sina.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;王老师：18903405450 (微信同号)&lt;/li&gt;
&lt;li&gt;李老师：18636102467 (微信同号)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;报名链接：&lt;/strong&gt; &lt;a href=&quot;https://www.wjx.top/vm/QfdWOa3.aspx#&quot;&gt;https://www.wjx.top/vm/QfdWOa3.aspx#&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;长按/扫描二维码报名：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined%E6%8A%A5%E5%90%8D-2025%E7%BB%93%E6%9E%84%E6%A8%A1%E5%9E%8B.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;缴费方式&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;方式 1：对公转账&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;户名：太原君泉教育咨询有限公司&lt;/li&gt;
&lt;li&gt;账号：35117530000023891 (晋商银行股份有限公司太原南中环支行)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;温馨提示：&lt;/strong&gt; 对公转账时，请务必提供「&lt;strong&gt;汇款人姓名-单位&lt;/strong&gt;」信息，以便确认。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;方式 2：扫码支付&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E5%90%9B%E6%B3%89%E6%94%B6%E6%AC%BE%E7%A0%81.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;温馨提示：&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;扫码支付后，请将「&lt;strong&gt;付款记录&lt;/strong&gt;」截屏发给王老师-18903405450（微信同号）&lt;/li&gt;
&lt;/ul&gt;
&lt;div style=&quot;page-break-after: always;&quot;&gt;&lt;/div&gt;
&lt;h2&gt;8. 助教招聘&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;名额：&lt;/strong&gt; 10 名&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;任务：&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;A. 课前准备&lt;/strong&gt;：完成 2 篇推文，风格参见连享会主页 &lt;a href=&quot;https://www.lianxh.cn/&quot;&gt;www.lianxh.cn&lt;/a&gt;；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;B. 开课前答疑&lt;/strong&gt;：协助学员安装软件和使用课件，在微信群中回答一些常见问题；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;C. 上课期间答疑&lt;/strong&gt;：针对前一天学习的内容，在微信群中答疑 (8:00-9:00，19:00-22:00)；&lt;/li&gt;
&lt;li&gt;Note: 下午 5:30-6:00 的课后答疑由主讲教师负责。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;要求：&lt;/strong&gt; 热心、尽职，熟悉 MATLAB 的基本语法和常用命令，能对常见问题进行解答和记录&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;特别说明：&lt;/strong&gt; 往期按期完成任务的助教可以直接联系连老师直录。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;截止时间：&lt;/strong&gt; 2025 年 5 月 7 日 (将于 5 月 9 日公布遴选结果于 &lt;a href=&quot;https://gitee.com/arlionn/&quot;&gt;课程主页&lt;/a&gt;，及连享会主页 &lt;a href=&quot;https://www.lianxh.cn/&quot;&gt;lianxh.cn&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;申请链接：&lt;/strong&gt; &lt;a href=&quot;https://www.wjx.top/vm/OlWbUuM.aspx#&quot;&gt;https://www.wjx.top/vm/OlWbUuM.aspx#&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined%E5%8A%A9%E6%95%99%EF%BC%9A2025%E7%BB%93%E6%9E%84%E6%A8%A1%E5%9E%8B.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;9. 交通和住宿&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;校内宾馆&lt;/strong&gt;：天津大学四十二斋&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;地址&lt;/strong&gt;：天津市南开区卫津路 92 号，天津大学卫津路校区西门&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;预订电话&lt;/strong&gt;：林女士-13512035569&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;温馨提示：&lt;/strong&gt; 预定时请以「&lt;strong&gt;&lt;font color=&quot;green&quot;&gt;连享会会议参会人员&lt;/font&gt;&lt;/strong&gt;」身份报名，以便享受协议价。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;小知士&lt;/strong&gt;：位于天津大学西门，上课、用餐以及午休方便快捷。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;center&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt; || &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/center&gt;
&lt;p&gt; &lt;/p&gt;
&lt;center&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt; || &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/center&gt;
</description><link>https://www.lianxh.cn/details/1544.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1544.html</guid><pubDate>Fri, 07 Mar 2025 16:00:00 GMT</pubDate><author>连享会</author></item><item><title>论文复现：气候变化对美国农业产出的影响</title><description>&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：王美甜 (东北财经大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:1146804766@qq.com&quot;&gt;1146804766@qq.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;：本文主要整理自下文，特此致谢！&lt;br&gt;
&lt;strong&gt;Source&lt;/strong&gt;：Keane, Michael, and Timothy Neal. 2020. “Climate change and US agriculture: Accounting for multidimensional slope heterogeneity in panel data.” &lt;strong&gt;Quantitative Economics&lt;/strong&gt; 11 (4): 1391-1429. &lt;a href=&quot;https://onlinelibrary.wiley.com/doi/full/10.3982/QE1319&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;https://onlinelibrary.wiley.com/doi/epdf/10.3982/QE1319&quot;&gt;-PDF-&lt;/a&gt; &lt;a href=&quot;https://onlinelibrary.wiley.com/action/downloadSupplement?doi=10.3982%2FQE1319&amp;amp;file=quan200109-sup-0001-onlineappendix.pdf&quot;&gt;-Appendix-&lt;/a&gt; &lt;a href=&quot;https://onlinelibrary.wiley.com/action/downloadSupplement?doi=10.3982%2FQE1319&amp;amp;file=quan200109-sup-0002-dataandprograms.zip&quot;&gt;-Replication-&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;：论文复现：气候变化对美国农业产出的影响&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;：气候变化，农业，MO-OLS，FE-OLS&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 文章思路简介&lt;/h2&gt;
&lt;p&gt;Keana and Neal (2020) 探讨了未来气候变化对美国农业生产力的影响。为分析生产力对不同天气条件的适应性 (Adaptation)，实证研究强调了天气与作物产量在空间和时间上变动的重要性。农作物产量受气候变化影响的程度，取决于农民的适应能力，如使用耐热杂交种子、增强田间保水性、实施灌溉或优化播种密度等。历史数据表明，这种适应性在生产中呈现显著的空间和时间异质性。为此，作者通过生产函数的截距与斜率捕捉这种异质性，以更准确描述适应能力对农业生产力的影响。&lt;/p&gt;
&lt;p&gt;为此，他们提出了一种新的面板数据估计方法——Mean Observation OLS (MO-OLS)，用于估算 1950-2015 年间美国县级玉米产量。该方法允许所有回归参数 (截距和斜率) 在截面和时间维度上均具有异质性 (参数为 $\hat{\beta}&lt;em&gt;{it}$，而非仅限于 $\hat{\beta}&lt;/em&gt;{i}$ 和 $\hat{\beta}_{t}$)。结果显示，高温对产量的影响存在显著异质性，且随着高温天气的普遍化，这种异质性逐渐减弱。这为历史上温暖县与凉爽县之间适应性差异提供了有力证据。此外，研究还发现，传统固定效应模型因限制斜率的异质性，导致对高温影响的估计出现偏差，并显著降低了模型的拟合效果。&lt;/p&gt;
&lt;p&gt;作者利用 19 种气候模型、3 条排放增长路径和 4 种计量模型，生成截至 2100 年的县级玉米产量综合预测，结果显示气候模型预测存在较大不确定性。如果仅依赖农业技术进步和对温度的适应性而未实施减排政策，玉米产量增长将远低于人口增长；而在农业技术进步的基础上，结合减排政策和适应性措施，玉米产量增长则有望与人口增长保持基本一致。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. MO-OLS 模型原理&lt;/h2&gt;
&lt;p&gt;本小节介绍平均观测值最小二乘回归 (Mean Observation OLS/MO-OLS) 的估计原理。这是一种首个在空间和时间维度上允许斜率固定效应异质性的可行面板数据估计方法。以下为包含固定效应的斜率和截距的一般模型：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
y_{it} = \boldsymbol{\beta}&#39;&lt;em&gt;{it} \boldsymbol{x}&lt;/em&gt;{it} + u_{it}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$i=1,\ldots,N$，$t=1,\ldots,T$;&lt;/li&gt;
&lt;li&gt;$\boldsymbol{x}&lt;em&gt;{it}=(1,x&lt;/em&gt;{1it},\ldots,x_{Kit})&#39;$ 是 $(K+1) \times 1$ 维的解释变量的向量；&lt;/li&gt;
&lt;li&gt;$\boldsymbol{\beta}&lt;em&gt;{it}=(\beta&lt;/em&gt;{0it},\beta_{1it},\ldots,\beta_{Kit})$ 是 $(K+1) \times 1$ 维的系数向量，随个体与时间而变化；&lt;/li&gt;
&lt;li&gt;$u_{it}$ 是扰动项；&lt;/li&gt;
&lt;li&gt;$\boldsymbol{x}&lt;em&gt;{it}$ 包含常数项，这意味着模型的截距上包含个体与时间的异质性，$\boldsymbol{x}&lt;/em&gt;{it}$ 也可以包含被解释变量的滞后项或者是其他我们需要的解释变量。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;2.1 模型假设&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Assumption 1：$u_{it}$ 是独立同分布的。&lt;/li&gt;
&lt;li&gt;Assumption 2：解释变量是弱外生的，即 $E(x_{kis} u_{it}) = 0$，对 $\forall k, s \geq t$。&lt;/li&gt;
&lt;li&gt;Assumption 3：$E(u^2_{it}|x_{kit}) &amp;lt; \infty, \forall k$。&lt;/li&gt;
&lt;li&gt;Assumption 4：异质性系数具有加性分解形式，即 $\boldsymbol{\beta}&lt;em&gt;{it} = \boldsymbol{\beta} + \boldsymbol{\lambda}&lt;/em&gt;{i} + \boldsymbol{\theta}&lt;em&gt;{t}$，其中 $\boldsymbol{\beta}$ 表示所有观测值的常量效应，$\boldsymbol{\lambda}&lt;/em&gt;{i} = (\lambda_{0i}, \lambda_{1i}, \ldots, \lambda_{Ki})&#39;$ 为随 $i$ 变化的个体效应，$\boldsymbol{\theta}&lt;em&gt;{t} = (\theta&lt;/em&gt;{0t}, \theta_{1t}, \ldots, \theta_{Kt})&#39;$ 为随 $t$ 变化的时间效应。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;2.2 模型估计&lt;/h3&gt;
&lt;p&gt;一种直接估计该模型的方法是通过包含以下变量的 OLS：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;每个 $i$ 和 $t$ 的虚拟变量 (捕捉截距的个体/时间固定效应)；&lt;/li&gt;
&lt;li&gt;每个解释变量与 $i$ 和 $t$ 的虚拟变量交互项 (用于捕捉截距的个体和时间固定效应)。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;对于大型面板数据，这在计算上是不可行的，因为它包含了 $(N+T)(K+1)$ 个解释变量，使得求 $X&#39;X$ 的逆或者求解线性方程组 $(X&#39;X)\beta = X&#39;Y$ 是不可行的。&lt;/p&gt;
&lt;p&gt;为了解决上述问题，MO-OLS 通过运行一系列可行的回归构建了 $\boldsymbol{\beta}_{it}$ 的一致估计量，然后通过误差修正项修正偏差 (bias)。MO-OLS 通过结合混合回归 (pooled OLS)、个体 $i$ 层面 ($i$-specific) 的回归以及时间 $t$ 层面 ($t$-specific) 的回归来做到这一点。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;首先&lt;/strong&gt;，将模型重新写为：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{align*}&lt;br&gt;
y_{it} &amp;amp;= \boldsymbol{x}&#39;&lt;em&gt;{it} \boldsymbol{\beta} + v&lt;/em&gt;{it},\&lt;br&gt;
v_{it} &amp;amp;= \boldsymbol{x}&#39;_{it} \boldsymbol{\lambda}&lt;em&gt;i + \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\theta}&lt;em&gt;t + u&lt;/em&gt;{it}&lt;br&gt;
\end{align*}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;通过混合回归 OLS 估计 $\boldsymbol{\beta}$：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{align*}&lt;br&gt;
\hat{\boldsymbol{\beta}} = \left( \frac{1}{NT} \sum_{i=1}^{N} \sum_{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \right)^{-1} \left( \frac{1}{NT} \sum_{i=1}^{N} \sum_{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} y&lt;/em&gt;{it} \right)&lt;br&gt;
\end{align*}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;将 $y_{it}$ 代入上式可以得到：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{align*}&lt;br&gt;
\hat{\boldsymbol{\beta}} = &amp;amp; \boldsymbol{\beta} + \boldsymbol{Q}&lt;em&gt;{xx,NT}^{-1} \left( \frac{1}{NT} \sum&lt;/em&gt;{i=1}^{N} \sum_{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\lambda}&lt;em&gt;i \right)\&lt;br&gt;
&amp;amp;+ \boldsymbol{Q}&lt;/em&gt;{xx,NT}^{-1} \left( \frac{1}{NT} \sum_{i=1}^{N} \sum_{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\theta}&lt;em&gt;t \right) + \boldsymbol{Q}&lt;/em&gt;{xx,NT}^{-1} \left( \frac{1}{NT} \sum_{i=1}^{N} \sum_{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} u&lt;/em&gt;{it} \right)&lt;br&gt;
\end{align*}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，$\boldsymbol{Q}&lt;em&gt;{xx,NT}^{-1} = (\frac{1}{NT} \sum&lt;/em&gt;{i=1}^N \sum_{t=1}^T \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} )^{-1}$。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;其次&lt;/strong&gt;，我们进行个体层面的回归：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{align*}&lt;br&gt;
y_{it} &amp;amp;= \boldsymbol{x}&#39;&lt;em&gt;{it} ( \boldsymbol{\beta} + \boldsymbol{\lambda}&lt;em&gt;i ) + v&lt;/em&gt;{it},\&lt;br&gt;
v&lt;/em&gt;{it} &amp;amp;= \boldsymbol{x}&#39;_{it} \boldsymbol{\theta}&lt;em&gt;t + u&lt;/em&gt;{it}.&lt;br&gt;
\end{align*}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;同样，我们使用 OLS 构建 $\boldsymbol{\beta}_i$ 的估计量：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{align*}&lt;br&gt;
\hat{\boldsymbol{\beta}}&lt;em&gt;i = \left( \frac{1}{T} \sum&lt;/em&gt;{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \right)^{-1} \left( \frac{1}{T} \sum_{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} y&lt;/em&gt;{it} \right).&lt;br&gt;
\end{align*}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;将 $y_{it}$ 代入上式可以得到：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{align*}&lt;br&gt;
\hat{\boldsymbol{\beta}}&lt;em&gt;i = \boldsymbol{\beta} + \boldsymbol{\lambda}&lt;em&gt;i + \boldsymbol{Q}&lt;/em&gt;{xx,T}^{-1} \left( \frac{1}{T} \sum&lt;/em&gt;{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\theta}&lt;em&gt;t \right) + \boldsymbol{Q}&lt;/em&gt;{xx,T}^{-1} \left( \frac{1}{T} \sum_{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} u&lt;/em&gt;{it} \right),&lt;br&gt;
\end{align*}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，$\boldsymbol{Q}&lt;em&gt;{xx,T}^{-1} = (\frac{1}{T} \sum&lt;/em&gt;{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it})^{-1}$。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;最后&lt;/strong&gt;，我们进行时间层面的回归：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{align*}&lt;br&gt;
y_{it} &amp;amp;= \boldsymbol{x}&#39;&lt;em&gt;{it} ( \boldsymbol{\beta} + \boldsymbol{\theta}&lt;em&gt;t ) + v&lt;/em&gt;{it},\&lt;br&gt;
v&lt;/em&gt;{it} &amp;amp;= \boldsymbol{x}&#39;_{it} \boldsymbol{\lambda}&lt;em&gt;i + u&lt;/em&gt;{it}.&lt;br&gt;
\end{align*}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;同理，时间层面的 OLS 估计量可以推导得到：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{align*}&lt;br&gt;
\hat{\boldsymbol{\beta}}&lt;em&gt;t = \boldsymbol{\beta} + \boldsymbol{\theta}&lt;em&gt;t + \boldsymbol{Q}&lt;/em&gt;{xx,N}^{-1} \left( \frac{1}{N} \sum&lt;/em&gt;{i=1}^{N} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\lambda}&lt;em&gt;i \right) + \boldsymbol{Q}&lt;/em&gt;{xx,N}^{-1} \left( \frac{1}{N} \sum_{i=1}^{N} \boldsymbol{x}&lt;em&gt;{it} u&lt;/em&gt;{it} \right)&lt;br&gt;
\end{align*}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，$\boldsymbol{Q}&lt;em&gt;{xx,T}^{-1} = (\frac{1}{N} \sum&lt;/em&gt;{i=1}^{N} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} )^{-1}$。&lt;/p&gt;
&lt;p&gt;结合混合回归 (pooled OLS) 、个体 $i$ 层面 ($i$-specific) 的回归以及时间 $t$ 层面 ($t$-specific) 的回归结果，我们可以构建 $\boldsymbol{\beta}_{it}$ 的初步的估计量：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{align*}&lt;br&gt;
\hat{\boldsymbol{\beta}}_{it}^{Prel} = \hat{\boldsymbol{\beta}}_i + \hat{\boldsymbol{\beta}}_t - \hat{\boldsymbol{\beta}}&lt;br&gt;
\end{align*}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;需要注意的是，初步估计量是有偏的，我们可以将估计量展开来理解偏差的性质：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{align*}&lt;br&gt;
\hat{\boldsymbol{\beta}}&lt;em&gt;{it}^{Prel} =&amp;amp; \hat{\boldsymbol{\beta}}&lt;em&gt;i + \hat{\boldsymbol{\beta}}&lt;em&gt;t - \hat{\boldsymbol{\beta}}\&lt;br&gt;
=&amp;amp; \boldsymbol{\beta} + \boldsymbol{\lambda}&lt;em&gt;i + \boldsymbol{Q}&lt;/em&gt;{xx,T}^{-1} \left( \frac{1}{T} \sum&lt;/em&gt;{t=1}^{T} \boldsymbol{x}&lt;/em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\theta}&lt;em&gt;t \right) + \boldsymbol{Q}&lt;/em&gt;{xx,T}^{-1} \left( \frac{1}{T} \sum_{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} u&lt;/em&gt;{it} \right)\&lt;br&gt;
&amp;amp;+ \boldsymbol{\beta} + \boldsymbol{\theta}&lt;em&gt;t + \boldsymbol{Q}&lt;/em&gt;{xx,N}^{-1} \left( \frac{1}{N} \sum_{i=1}^{N} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\lambda}&lt;em&gt;i \right) + \boldsymbol{Q}&lt;/em&gt;{xx,N}^{-1} \left( \frac{1}{N} \sum_{i=1}^{N} \boldsymbol{x}&lt;em&gt;{it} u&lt;/em&gt;{it} \right)\&lt;br&gt;
&amp;amp;- \boldsymbol{\beta} - \boldsymbol{Q}&lt;em&gt;{xx,NT}^{-1} \left( \frac{1}{NT} \sum&lt;/em&gt;{i=1}^{N} \sum_{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\lambda}&lt;em&gt;i \right)\&lt;br&gt;
&amp;amp;- \boldsymbol{Q}&lt;/em&gt;{xx,NT}^{-1} \left( \frac{1}{NT} \sum_{i=1}^{N} \sum_{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\theta}&lt;em&gt;t \right) - \boldsymbol{Q}&lt;/em&gt;{xx,NT}^{-1} \left( \frac{1}{NT} \sum_{i=1}^{N} \sum_{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} u&lt;/em&gt;{it} \right)&lt;br&gt;
\end{align*}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;我们将上式简写为：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{align*}&lt;br&gt;
\hat{\boldsymbol{\beta}}&lt;em&gt;{it}^{Prel} = \boldsymbol{\beta} + \boldsymbol{\lambda}&lt;/em&gt;{i} + \boldsymbol{\theta}&lt;em&gt;{t} + (\boldsymbol{R}&lt;em&gt;N - \boldsymbol{R}&lt;/em&gt;{i,NT}) + (\boldsymbol{R}&lt;em&gt;T - \boldsymbol{R}&lt;/em&gt;{t,NT}) + (\boldsymbol{Q}&lt;/em&gt;{xu,N} + \boldsymbol{Q}&lt;em&gt;{xu,T} - \boldsymbol{Q}&lt;/em&gt;{xu,NT})  \quad (1)&lt;br&gt;
\end{align*}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，$\boldsymbol{R}&lt;em&gt;{N} \equiv \boldsymbol{Q}&lt;/em&gt;{xx,N}^{-1} \left( \frac{1}{N} \sum_{i=1}^{N} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\lambda}&lt;em&gt;i \right), \boldsymbol{R}&lt;/em&gt;{t,NT} \equiv \boldsymbol{Q}&lt;em&gt;{xx,NT}^{-1} \left( \frac{1}{NT} \sum&lt;/em&gt;{i=1}^{N} \sum_{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\theta}&lt;em&gt;t \right)$ 以及 $\boldsymbol{Q}&lt;/em&gt;{xu,N} \equiv \boldsymbol{Q}&lt;em&gt;{xx,N}^{-1} \left( \frac{1}{N} \sum&lt;/em&gt;{i=1}^{N} \boldsymbol{x}&lt;em&gt;{it} u&lt;/em&gt;{it} \right)$，$\boldsymbol{R}&lt;em&gt;{T}, \boldsymbol{R}&lt;/em&gt;{i,NT}, \boldsymbol{Q}&lt;em&gt;{xu,T}$ 以及 $\boldsymbol{Q}&lt;/em&gt;{xu,NT}$ 的定义是类似的。&lt;/p&gt;
&lt;p&gt;(1) 式可以被分解为三个部分：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一，观测值 $(i,t)$ 水平的真实的系数 $\boldsymbol{\beta} + \boldsymbol{\lambda}&lt;em&gt;{i} + \boldsymbol{\theta}&lt;/em&gt;{t}$；&lt;/li&gt;
&lt;li&gt;第二，源于解释变量和异质性之间的相关性的偏差 (bias)；&lt;/li&gt;
&lt;li&gt;第三，$\boldsymbol{Q}&lt;em&gt;{xu,N} + \boldsymbol{Q}&lt;/em&gt;{xu,T} - \boldsymbol{Q}_{xu,NT} )$ 导致的误差 (errors) 。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在给定 $\boldsymbol{x}&lt;em&gt;{it}$ 和 $\boldsymbol{u}&lt;/em&gt;{it}$ 的假设的情况下，误差 (errors) 渐进消失。&lt;/p&gt;
&lt;p&gt;关键之处在于，偏差项 $(\boldsymbol{R}&lt;em&gt;N - \boldsymbol{R}&lt;/em&gt;{i,NT}) + (\boldsymbol{R}&lt;em&gt;T - \boldsymbol{R}&lt;/em&gt;{t,NT})$ 可以根据 (1) 式精准计算并消除，进而构建 $\boldsymbol{\beta}&lt;em&gt;{it}$ 的一致估计量。我们进一步的解释估计步骤：MO-OLS 第一步在 $(\boldsymbol{R}&lt;em&gt;N - \boldsymbol{R}&lt;/em&gt;{i,NT})$ 中用 $\hat{\boldsymbol{\beta}}&lt;em&gt;i$ 来近似估计 $\boldsymbol{\lambda}&lt;em&gt;i$ 来得到 $\hat{\boldsymbol{R}}&lt;/em&gt;{N}$ 和 $\hat{\boldsymbol{R}}&lt;/em&gt;{i,NT}$，并且在 $(\boldsymbol{R}&lt;/em&gt;{T} - \boldsymbol{R}&lt;em&gt;{t,NT})$ 中用 $\hat{\boldsymbol{\beta}}&lt;/em&gt;{t}$ 来近似估计 $\boldsymbol{\theta}&lt;em&gt;{t}$ 来得到 $\hat{\boldsymbol{R}}&lt;/em&gt;{T}$ 和 $\hat{\boldsymbol{R}}_{t,NT}$。将 $\hat{\boldsymbol{\beta}}&lt;em&gt;i$ 和 $\hat{\boldsymbol{\beta}}&lt;/em&gt;{t}$ 的定义代入到偏差项中，可以得到：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{align*}&lt;br&gt;
&amp;amp; (\hat{\boldsymbol{R}}&lt;em&gt;{N} - \hat{\boldsymbol{R}}&lt;/em&gt;{i,NT}) + (\hat{\boldsymbol{R}}&lt;em&gt;{T} - \hat{\boldsymbol{R}}&lt;/em&gt;{t,NT}) \&lt;br&gt;
=&amp;amp; (\boldsymbol{R}&lt;em&gt;N - \boldsymbol{R}&lt;/em&gt;{i,NT}) + (\boldsymbol{R}&lt;em&gt;T - \boldsymbol{R}&lt;/em&gt;{t,NT})\&lt;br&gt;
&amp;amp;+ \boldsymbol{Q}&lt;em&gt;{xx,N}^{-1} \frac{1}{N} \sum&lt;/em&gt;{i=1}^N (\boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{R}&lt;em&gt;{T} + \boldsymbol{x}&lt;/em&gt;{it} \boldsymbol{x}&#39;&lt;em&gt;{it} \boldsymbol{Q}&lt;/em&gt;{xu,N})\&lt;br&gt;
&amp;amp;+ \boldsymbol{Q}&lt;em&gt;{xx,T}^{-1} \frac{1}{T} \sum&lt;/em&gt;{t=1}^T (\boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{R}&lt;em&gt;{N} + \boldsymbol{x}&lt;/em&gt;{it} \boldsymbol{x}&#39;&lt;em&gt;{it} \boldsymbol{Q}&lt;/em&gt;{xu,T})\&lt;br&gt;
&amp;amp;- \boldsymbol{Q}&lt;em&gt;{xx,NT}^{-1} \frac{1}{NT} \sum&lt;/em&gt;{i=1}^{N} \sum_{t=1}^{T} (\boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{R}&lt;em&gt;{T} + \boldsymbol{x}&lt;/em&gt;{it} \boldsymbol{x}&#39;&lt;em&gt;{it} \boldsymbol{R}&lt;/em&gt;{N} + \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{Q}&lt;em&gt;{xu,N} + \boldsymbol{x}&lt;/em&gt;{it} \boldsymbol{x}&#39;&lt;em&gt;{it} \boldsymbol{Q}&lt;/em&gt;{xu,T})  \quad (2)&lt;br&gt;
\end{align*}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;这个表达式 (2) 相当于原本的偏差 $(\boldsymbol{R}&lt;em&gt;N - \boldsymbol{R}&lt;/em&gt;{i,NT}) + (\boldsymbol{R}&lt;em&gt;T - \boldsymbol{R}&lt;/em&gt;{t,NT})$ 加上一个与 $\boldsymbol{Q}_{xu}$ 和斜率异质性相关的偏差。用 (1) 式减去 (2) 式，我们可以消除原本的偏差，但是却引入了一个新的偏差。重要的是，新的偏差必须比原本的偏差要小 (这一点在文献附录中得到了证明)。&lt;/p&gt;
&lt;p&gt;我们可以重复这个过程，再次用 $\hat{\boldsymbol{R}}&lt;em&gt;{N},\hat{\boldsymbol{R}}&lt;/em&gt;{i,NT},\hat{\boldsymbol{R}}&lt;em&gt;{T}$ 和 $\hat{\boldsymbol{R}}&lt;/em&gt;{t,NT}$ 来近似估计 (2) 式中新的偏差项。此时，和前面类似，产生了一个新的更小的偏差项。因此，可以重复迭代这个过程 $L$ 次，使得偏差任意小，消除偏差的估计量为：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{align*}&lt;br&gt;
\hat{\boldsymbol{\beta}}&lt;em&gt;{it} =&amp;amp; \hat{\boldsymbol{\beta}}&lt;/em&gt;{i} + \hat{\boldsymbol{\beta}}&lt;em&gt;{t} - \hat{\boldsymbol{\beta}} + \sum&lt;/em&gt;{\ell=0}^{L} (-1)^{\ell+1} \left( \boldsymbol{Q}&lt;em&gt;{xx,N}^{-1} \frac{1}{N} \sum&lt;/em&gt;{i=1}^N \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\Gamma}&lt;em&gt;{1,\ell} + \boldsymbol{Q}&lt;/em&gt;{xx,T}^{-1} \frac{1}{T} \sum_{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\Gamma}&lt;em&gt;{2,\ell} \right.\&lt;br&gt;
&amp;amp;-  \left. \boldsymbol{Q}&lt;/em&gt;{xx,NT}^{-1} \frac{1}{NT} \sum_{i=1}^{N} \sum_{t=1}^{T} (\boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\Gamma}&lt;em&gt;{1,\ell} + \boldsymbol{x}&lt;/em&gt;{it} \boldsymbol{x}&#39;&lt;em&gt;{it} \boldsymbol{\Gamma}&lt;/em&gt;{2,\ell}) \right) \quad (3)&lt;br&gt;
\end{align*}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，当 $\ell&amp;gt;0$ 时，$\boldsymbol{\Gamma}&lt;em&gt;{1,\ell} = \boldsymbol{Q}&lt;/em&gt;{xx,T}^{-1} (\frac{1}{T} \sum_{t=1}^{T} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\Gamma}&lt;em&gt;{2,\ell-1})$，$\boldsymbol{\Gamma}&lt;/em&gt;{2,\ell} = \boldsymbol{Q}&lt;em&gt;{xx,N}^{-1} (\frac{1}{N} \sum&lt;/em&gt;{i=1}^{N} \boldsymbol{x}&lt;em&gt;{it} \boldsymbol{x}&#39;&lt;/em&gt;{it} \boldsymbol{\Gamma}&lt;em&gt;{1,\ell-1})$，且 $\boldsymbol{\Gamma}&lt;/em&gt;{1,0} = \hat{\boldsymbol{\beta}}&lt;em&gt;{i}, \boldsymbol{\Gamma}&lt;/em&gt;{2,0} = \hat{\boldsymbol{\beta}}&lt;em&gt;{t}$。他们是一个柯西列 (Cauchy sequence) ，因此选择合适的 $L$ 可以使序列在收敛到合适的容差是终止。实践上，一个较小的 $L$ 通常就够了。 (3) 式是一个容易构建的估计量，因为它只与初始估计值 $(\hat{\boldsymbol{\beta}}&lt;/em&gt;{i},\hat{\boldsymbol{\beta}}&lt;em&gt;{t},\hat{\boldsymbol{\beta}})$ 以及协变量 $\boldsymbol{x}&lt;/em&gt;{it}$ 有关。&lt;/p&gt;
&lt;h3&gt;2.3 MO-OLS 的一致性和渐进正态性&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;定理 1&lt;/strong&gt; 说明了当 $L$ 趋向无穷，$N$ 和 $L$ 联合趋向无穷时，MO-OLS 对观测值水平的系数 $\boldsymbol{\beta}_{it}$ 的估计是一致的。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Theorem 1 (Consistency of $\hat{\boldsymbol{\beta}}&lt;em&gt;{it}$)：MO-OLS 模型在假设 1-4 下，如果 $L \rightarrow \infty$ 且子序列 $(N,T) \rightarrow&lt;/em&gt;{j} \infty$，那么&lt;br&gt;
$$\hat{\boldsymbol{\beta}}&lt;em&gt;{it} - \boldsymbol{\beta}&lt;/em&gt;{it} \rightarrow_{p} 0$$&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Remark&lt;/strong&gt;：假设 4 提出 $\boldsymbol{\beta}&lt;em&gt;{it} = \boldsymbol{\beta} + \boldsymbol{\lambda}&lt;/em&gt;{i} + \boldsymbol{\theta}&lt;em&gt;{t}$，单独讨论每一个分量 $(\boldsymbol{\beta}, \boldsymbol{\lambda}&lt;/em&gt;{i}, \boldsymbol{\theta}_{t})$ 的一致性是没有意义的，因为他们仅仅在对应观测值处被识别。&lt;/p&gt;
&lt;p&gt;给定 $\boldsymbol{\beta}&lt;em&gt;{it} = \boldsymbol{\beta} + \boldsymbol{\lambda}&lt;/em&gt;{i} + \boldsymbol{\theta}&lt;em&gt;{t}$ 的一致估计，研究人员可以根据事后需要进行研究。有些情况，研究人员可能对系数向量的均值 $\bar{\boldsymbol{\beta}} = \boldsymbol{\beta} + E(\boldsymbol{\lambda}&lt;/em&gt;{i}) + E(\boldsymbol{\theta}_{t})$ 感兴趣，在观测值水平系数估计一致的情况下，平均系数向量可以通过简单平均来估计：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{align*}&lt;br&gt;
\hat{\boldsymbol{\beta}}&lt;em&gt;{MO} = \frac{1}{NT} \sum&lt;/em&gt;{i=1}^{N} \sum_{t=1}^{T} \hat{\boldsymbol{\beta}}_{it}.&lt;br&gt;
\end{align*}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;我们将此称为平均观测 OLS (MO-OLS)估计，因为它对观测级系数进行了平均。下面的定理将说明平均系数估计量是一致的且渐进正态的。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Theorem 2 (Consistency of $\hat{\boldsymbol{\beta}}&lt;em&gt;{MO}$)：MO-OLS 模型在假设 1-4 下，如果 $L \rightarrow \infty$ 且子序列 $(N,T) \rightarrow&lt;/em&gt;{j} \infty$，那么&lt;br&gt;
$$\hat{\boldsymbol{\beta}}&lt;em&gt;{MO} - \bar{\boldsymbol{\beta}} \rightarrow&lt;/em&gt;{p} 0$$&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Theorem 3 (Asymptotic Normality of $\hat{\boldsymbol{\beta}}&lt;em&gt;{MO}$)：MO-OLS 模型在假设 1-4 下，如果 $L \rightarrow \infty$ 且子序列 $(N,T) \rightarrow&lt;/em&gt;{j} \infty$，使得 $N/T \rightarrow \chi$ 且 $0&amp;lt;\chi&amp;lt;\infty$，那么&lt;/p&gt;
&lt;p&gt;$$\sqrt{NT} (\hat{\boldsymbol{\beta}}&lt;em&gt;{MO} - \bar{\boldsymbol{\beta}}) \rightarrow&lt;/em&gt;{d} N(0,\boldsymbol{\Sigma}_{MO})$$&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;其中，$\boldsymbol{\Sigma}&lt;em&gt;{MO} = Var(\boldsymbol{\lambda}&lt;/em&gt;{i}) + Var(\boldsymbol{\theta}_{t})$。渐近方差可以用非参数一致估计：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{align*}&lt;br&gt;
\hat{\boldsymbol{\Sigma}}&lt;em&gt;{MO} = \frac{1}{NT-1} \sum&lt;/em&gt;{i=1}^{N} \sum_{t=1}^{T} \left( (\hat{\boldsymbol{\beta}}&lt;em&gt;{it} - \hat{\boldsymbol{\beta}}&lt;/em&gt;{\bar{t}}) (\hat{\boldsymbol{\beta}}&lt;em&gt;{it} - \hat{\boldsymbol{\beta}}&lt;/em&gt;{\bar{t}})&#39; + (\hat{\boldsymbol{\beta}}&lt;em&gt;{it} - \hat{\boldsymbol{\beta}}&lt;/em&gt;{\bar{i}}) (\hat{\boldsymbol{\beta}}&lt;em&gt;{it} - \hat{\boldsymbol{\beta}}&lt;/em&gt;{\bar{i}})&#39; \right)&lt;br&gt;
\end{align*}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，$\hat{\boldsymbol{\beta}}&lt;em&gt;{\bar{i}} = \frac{1}{T} \sum&lt;/em&gt;{t=1}^{T} \hat{\boldsymbol{\beta}}&lt;em&gt;{it}$，$\hat{\boldsymbol{\beta}}&lt;/em&gt;{\bar{t}} = \frac{1}{N} \sum_{i=1}^{N} \hat{\boldsymbol{\beta}}_{it}$。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Remark&lt;/strong&gt;：MO-OLS 通过在存在时间固定效应的情况下提供了平均效应 $\bar{\boldsymbol{\beta}}$ 的一致估计，扩展了 Pesaran and Smith (1995) 提出的 mean group regression (MG-OLS)。时间固定效应会使得 MG-OLS 的估计不一致。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 模型设定&lt;/h2&gt;
&lt;p&gt;作者关注的并非天气对玉米产量的平均影响，而是基于个体水平的影响 $\hat{\beta}_{i t}$。为了检验 MO-OLS 估计的准确性，作者首先使用传统的固定效应回归模型 (FE-OLS) 进行估计，并将 FE-OLS 和 MO-OLS 两种模型估计结果对比，发现当模型中存在与回归变量相关的多维斜率异质性时，MO-OLS 能够对系数做出有效且一致的估计，而传统固定效应模型则会产生有偏估计。&lt;/p&gt;
&lt;h3&gt;3.1 FE-OLS 模型设定&lt;/h3&gt;
&lt;p&gt;首先，作者利用传统固定效应回归模型 (FE-OLS) 构建模型 (4)：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
y_{i t}=c_{i}+\tau_{t}+\beta_{1} \mathrm{GDD}&lt;em&gt;{i t}+\beta&lt;/em&gt;{2} \mathrm{KDD}&lt;em&gt;{i t}+\beta&lt;/em&gt;{3} \mathrm{PREC}&lt;em&gt;{i t}+\beta&lt;/em&gt;{4} \mathrm{PREC}&lt;em&gt;{i t}^{2}+\epsilon&lt;/em&gt;{i t}   \quad  (4)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，$y_{it}$ 表示国家 $i$ 在第 $t$ 年的玉米产量对数，$GDD_{it}$ (Growing Degree Days) 表示作物处于适宜生长温度下的总小时数，$KDD_{it}$ (Killing Degree Days) 表示作物处于有害高温下的总小时数，$PREC_{it}$ 表示生长季的总降水量，$c_{i}$ 和 $\tau_{t}$ 分别代表个体和时间固定效应。作者认为，在考虑适应性时，高温对作物的影响可以被建模为 $KDD_{it}$ 的对数线性函数，因此公式改写为模型 (5)：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{aligned}&lt;br&gt;
y_{i t}=&amp;amp; c_{i}+\tau_{t}+\beta_{1} \mathrm{GDD}&lt;em&gt;{i t}+\beta&lt;/em&gt;{20} \mathrm{KDD}&lt;em&gt;{i t}+\beta&lt;/em&gt;{21}\left(\ln \left(\mathrm{KDD}&lt;em&gt;{i t}\right) * \mathrm{KDD}&lt;/em&gt;{i t}-\mathrm{KDD}&lt;em&gt;{i t}\right) \&lt;br&gt;
&amp;amp;+\beta&lt;/em&gt;{3} \mathrm{PREC}&lt;em&gt;{i t}+\beta&lt;/em&gt;{4} \mathrm{PREC}&lt;em&gt;{i t}^{2}+\epsilon&lt;/em&gt;{i t}&lt;br&gt;
\end{aligned}  \quad (5)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;${KDD}&lt;em&gt;{i t}$ 对 $y&lt;/em&gt;{i t}$ 的边际影响如下：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\frac{\partial y_{i t}}{\partial \mathrm{KDD}&lt;em&gt;{i t}}=\hat{\beta}&lt;/em&gt;{20}+\hat{\beta}&lt;em&gt;{21} \ln \left(\mathrm{KDD}&lt;/em&gt;{i t}\right)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h3&gt;3.2 MO-OLS 模型设定&lt;/h3&gt;
&lt;p&gt;相比于传统的 FE-OLS，作者提出了一种更灵活的新方法 (MO-OLS)，用于估计同时具有空间和时间异质性的 $\beta_{it}$，详见模型 (6)，具体推导过程详见第 2 小节。与固定效应回归相比，MO-OLS 更加灵活，无需预设 $KDD_{it}$ 系数的特定形式；相反，该方法允许回归系数与回归变量相关 (本文中，$\beta_{2it}$ 与 $\mathrm{KDD}_{it}$ 相关)。此外，MO-OLS 在一定程度上缓解了大型面板数据中估计异质回归系数的难题，因为直接使用 OLS 可能会耗尽所有自由度。&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
y_{i t}=c_{i}+\tau_{t}+\beta_{1 i t} \mathrm{GDD}&lt;em&gt;{i t}+\beta&lt;/em&gt;{2 i t} \mathrm{KDD}&lt;em&gt;{i t}+\beta&lt;/em&gt;{3 i t} \mathrm{PREC}&lt;em&gt;{i t}+\beta&lt;/em&gt;{4 i t} \mathrm{PREC}&lt;em&gt;{i t}^{2}+\epsilon&lt;/em&gt;{i t} \quad (6)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，$\beta_{k i t}$ 可拆解为下式：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\beta_{k i t}=\beta_{k}+\lambda_{k i}+\theta_{k t}, \quad k=1, \ldots, 4&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. 数据和变量构建&lt;/h2&gt;
&lt;h3&gt;4.1 数据来源&lt;/h3&gt;
&lt;p&gt;本文数据来源分为两部分：1950-2015 年的县级农作物产量数据来自美国农业部国家农业统计局；温度和降雨量数据则来自 &lt;a href=&quot;https://www.pnas.org/doi/full/10.1073/pnas.0906865106&quot;&gt;Schlenker and Roberts (2009)&lt;/a&gt;。温度和降雨量数据包括 1950-2015 年美国县级每日最高温、最低温及降雨量信息。&lt;/p&gt;
&lt;h3&gt;4.2 变量构建&lt;/h3&gt;
&lt;p&gt;通过以下正弦函数可大致估计出农作物每天暴露在某一温度区间的小时数：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E5%AF%B9%E7%BE%8E%E5%9B%BD%E5%86%9C%E4%B8%9A%E7%9A%84%E5%BD%B1%E5%93%8D_Fig200_KDD%E7%B3%BB%E6%95%B0%E6%97%B6%E9%97%B4%E5%88%86%E5%B8%83_%E7%8E%8B%E7%BE%8E%E7%94%9C.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;其中 $C$ 为摄氏度，$T_{\max }$ 和 $T_{\min }$ 为每天最高/低温度，$T_{\mathrm{avg}}=\frac{T_{\max }+T_{\min }}{2}$ 且 $S=\cos ^{-1}\left(\frac{2 C-T_{\max }-T_{\min }}{T_{\max }-T_{\min }}\right)$。&lt;/p&gt;
&lt;p&gt;将 0-29 摄氏度作为利于谷物生长的温度，29 摄氏度以上作为不利于谷物生长温度，则城市 $i$ 在第 $d$ 天的 $GDD$ 和 $KDD$ 分别表示为：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\mathrm{GDD}&lt;em&gt;{i d}=\mathrm{DD}&lt;/em&gt;{0}-\mathrm{DD}_{29}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\mathrm{KDD}&lt;em&gt;{i d}=\mathrm{DD}&lt;/em&gt;{29}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;作者假设每年谷物生长季节为 5 月 1 号至 9 月 30 号，把谷物在生长季节的 $\mathrm{GDD}&lt;em&gt;{i d}$ 和 $\mathrm{KDD}&lt;/em&gt;{i d}$ 加总求和即可得到模型中 $\mathrm{GDD}&lt;em&gt;{i t}$ 和 $\mathrm{KDD}&lt;/em&gt;{i t}$ ，即谷物每年经历的有利温度小时数和有害温度小时数。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. 实证结果&lt;/h2&gt;
&lt;h3&gt;5.1 FE-OLS 估计结果&lt;/h3&gt;
&lt;p&gt;FE-OLS 估计结果如下表所示，该回归包含了个体和时间固定效应，但没有考虑异质斜率系数。第 (1) 列和第 (2) 列为没有引入适应行为时模型估计结果。第 (1) 列中模型控制了县域固定效应和时间固定效应，KDD 系数为-0.0052，表明高于高温每增加一个小时，将导致谷物产量减少 0.52%。第 (2) 列将时间效应限制为二次型，估计结果与第 (1) 列差别很小。&lt;/p&gt;
&lt;p&gt;第 (3) 列是考虑适应性后的模型估计结果，作者通过在模型引入 KDD 的对数线性函数表示对高温的适应性。新加入的回归项回归系数显著为正，说明随着 KDD 的增加，KDD 对作物产量的负面边际效应变小，这可能是由于农民和自然的对天气的适应性。从第 (3) 列可以看出 KDD 的平均边际效应为-0.0082，要比第 (1) 列和第 (2) 列显示的负向效应更大，说明忽略适应性的标准 FE-OLS 模型会导致有偏估计。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E5%AF%B9%E7%BE%8E%E5%9B%BD%E5%86%9C%E4%B8%9A%E7%9A%84%E5%BD%B1%E5%93%8D_Fig1_FE-OLS%E5%9B%9E%E5%BD%92%E7%BB%93%E6%9E%9C_%E7%8E%8B%E7%BE%8E%E7%94%9C.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;5.2 MO-OLS 估计结果&lt;/h3&gt;
&lt;p&gt;下表是 MO-OLS 估计结果，表格显示了 KDD 的未加权平均悉数、加权平均系数、中值系数等数据。KDD 的未加权平均系数为 -0.0096，这意味着高温天气每增加一个小时，将导致谷物产量平均下降 0.96%。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E5%AF%B9%E7%BE%8E%E5%9B%BD%E5%86%9C%E4%B8%9A%E7%9A%84%E5%BD%B1%E5%93%8D_Fig2_MO-OLS%E5%9B%9E%E5%BD%92%E7%BB%93%E6%9E%9C_%E7%8E%8B%E7%BE%8E%E7%94%9C.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;5.3 KDD 系数相关性质分析&lt;/h3&gt;
&lt;h4&gt;5.3.1 各个县在不同时期的 KDD 系数分布&lt;/h4&gt;
&lt;p&gt;下图为各个县在不同时期的 KDD 系数分布图。可以看出各县之间 KDD 系数存在显著的异质性，且 10$\sim$25 百分位数的范围(即较低的浅灰色区域)比 75 $\sim$ 90 分位数的范围宽得多，说明该分布呈现左肥尾。从图中还可看出中值 KDD 数随着时间的推移呈现出明显的趋势，从 1950 年一直增长到 80 年代末，随后稳定基本不变。由此可见系数异质性是存在意义的，如果使用 FE-OLS 则会忽略了系数异质性的重要性。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E5%AF%B9%E7%BE%8E%E5%9B%BD%E5%86%9C%E4%B8%9A%E7%9A%84%E5%BD%B1%E5%93%8D_Fig3_KDD%E7%B3%BB%E6%95%B0%E6%97%B6%E9%97%B4%E5%88%86%E5%B8%83_%E7%8E%8B%E7%BE%8E%E7%94%9C.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;另外，作者还对每年的中位数系数进行了线性时间趋势回归，并检验了结构趋势的断裂，结果如表所示。分析表明，1988 年之前 KDD 系数呈正趋势，表明产量的热敏感性降低，支持适应性假设。然而，1989 年发生了一次重大突破，同时1988-89 年美国中西部经历了一场极端干旱。此后，KDD 系数的时间变化趋势变得微弱且不显著。2015 年的 KDD 系数中位数与上世纪 70 年代相似，表明在过去 40 年中，农产品在适应高温方面缺乏持续性进展。总体来看，KDD 系数在样本的前半段表现出强劲的上升趋势，表明美国玉米产量适应了 20 世纪 50 年代至 80 年代的高温。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E5%AF%B9%E7%BE%8E%E5%9B%BD%E5%86%9C%E4%B8%9A%E7%9A%84%E5%BD%B1%E5%93%8D_Fig11_%E7%BB%93%E6%9E%84%E8%B6%8B%E5%8A%BF%E6%96%AD%E8%A3%82%E6%A3%80%E9%AA%8C_%E7%8E%8B%E7%BE%8E%E7%94%9C.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h4&gt;5.3.2. KDD 系数平均值的分布情况&lt;/h4&gt;
&lt;p&gt;作者考察了玉米产量对热敏感性的地理格局，下图展示了样本中各县 KDD 系数平均值的分布情况。结果显示，敏感性最高的地区主要集中在北达科他州、南达科他州、明尼苏达州及美国东北部。玉米带大部分地区和东南部的敏感性范围在 -0.010 到 -0.005 之间，而敏感性较低的县则主要位于德克萨斯州、俄克拉荷马州和堪萨斯州。这表明，不同地区的热敏感性存在系统性差异：在温度较低的北部地区，谷物对高温的敏感性更强，而在温度较高的南部地区，谷物对高温的敏感性较弱，原因在于南部地区的农户和自然环境对高温的适应能力较强。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E5%AF%B9%E7%BE%8E%E5%9B%BD%E5%86%9C%E4%B8%9A%E7%9A%84%E5%BD%B1%E5%93%8D_Fig4__KDD%E6%96%9C%E7%8E%87%E7%B3%BB%E6%95%B0%E5%8E%BF%E5%9F%9F%E5%88%86%E5%B8%83_%E7%8E%8B%E7%BE%8E%E7%94%9C.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h4&gt;5.3.3. KDD 系数与 KDD 相关关系&lt;/h4&gt;
&lt;p&gt;下图展示了 $\hat{\beta}&lt;em&gt;{2it}$ 和 $KDD&lt;/em&gt;{it}$ 的散点图，以及 $\hat{\beta}&lt;em&gt;{2it}$ 在 $log(KDD&lt;/em&gt;{it})$ 上的回归近似对数线性关系的最佳拟合曲线。结果显示，随着 KDD 的增加，$\hat{\beta}_{2it}$ 逐渐下降，表明玉米对高温的敏感性降低。这是因为在更高的 KDD 水平下，农户有更多动力提升适应性，从而降低玉米对高温的敏感性。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E5%AF%B9%E7%BE%8E%E5%9B%BD%E5%86%9C%E4%B8%9A%E7%9A%84%E5%BD%B1%E5%93%8D_Fig5_KDD%E4%B8%8E%E7%B3%BB%E6%95%B0%E5%85%B3%E7%B3%BB_%E7%8E%8B%E7%BE%8E%E7%94%9C.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h4&gt;5.3.4. FE-OLS 与 MO-OLS 估计结果比较&lt;/h4&gt;
&lt;p&gt;下图比较了 FE-OLS 和 MO-OLS 两种估计模型中 KDD 与系数 $\hat{\beta}&lt;em&gt;{2it}$ 之间的关系。结果显示，MO-OLS 估计出的 $\hat{\beta}&lt;/em&gt;{2it}$ 绝对值较大，表明高温对谷物产量的负向影响更显著。然而，MO-OLS 估计曲线仍在 FE-OLS 估计曲线的 95% 置信区间内。&lt;/p&gt;
&lt;p&gt;从 $\hat{\beta}_{2it}$ 和 KDD 的关系来看，KDD 从 0 增加到 100 的过程中，适应性发挥了重要作用。然而，在更高的 KDD 水平上，曲线逐渐变平，适应性效应减弱。这表明，如果未来适应行为没有显著进步，并保持与过去一致，当 $KDD &amp;gt; 100$ 时，适应性对减轻高温对谷物损害的作用将非常有限。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E5%AF%B9%E7%BE%8E%E5%9B%BD%E5%86%9C%E4%B8%9A%E7%9A%84%E5%BD%B1%E5%93%8D_Fig6_FE%E4%B8%8EMO%E4%BC%B0%E8%AE%A1%E7%BB%93%E6%9E%9C%E6%AF%94%E8%BE%83_%E7%8E%8B%E7%BE%8E%E7%94%9C.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;6. 预测&lt;/h2&gt;
&lt;h3&gt;6.1 预测方法&lt;/h3&gt;
&lt;p&gt;首先，作者通过 19 种气候模型和三条排放增长路径 (RCP85/RCP45/RCP26) 预测未来天气情景，包括各县每日最低/最高温度和降雨量。基于这些数据，计算得出 $\mathrm{GDD}&lt;em&gt;{itr m}$、$\mathrm{KDD}&lt;/em&gt;{itr m}$ 和 $\mathrm{PREC}&lt;em&gt;{itr m}$，并求均值得到 $\tilde{GDD}&lt;/em&gt;{itr m}$、$\tilde{KDD}&lt;em&gt;{itr m}$ 和 $\tilde{PREC}&lt;/em&gt;{itr m}$，其中 $r$ 代表排放情景，$m$ 代表气候模型。&lt;/p&gt;
&lt;p&gt;接着，利用以下 4 种计量模型预测未来玉米产量：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;模型(7)&lt;/strong&gt; 为不包含适应性的 FE-OLS 模型：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{aligned}&lt;br&gt;
\hat{y}&lt;em&gt;{1 i t r m}=&amp;amp; 2.6755+\hat{c}&lt;/em&gt;{i}+1.3486+0.0002\left(\tilde{GDD}&lt;em&gt;{i t r m}\right)-0.0052\left(\tilde{KDD}&lt;/em&gt;{i t r m}\right) \&lt;br&gt;
&amp;amp;+0.0007\left(\tilde{PREC}&lt;em&gt;{i t r m}\right)-0.00000091\left(\tilde{PREC}&lt;/em&gt;{i t r m}^{2}\right)&lt;br&gt;
\end{aligned}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;模型(8)&lt;/strong&gt; 为包含适应性的 FE-OLS 模型：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{aligned}&lt;br&gt;
\hat{y}&lt;em&gt;{2 i t r m}=&amp;amp; 2.1977+\hat{c}&lt;/em&gt;{i}+1.3574+0.0004\left(\tilde{GDD}&lt;em&gt;{i t r m}\right)-0.0158\left(\tilde{KDD}&lt;/em&gt;{i t r m}\right) \&lt;br&gt;
&amp;amp;+0.0022\left(\ln \left(\tilde{KDD}&lt;em&gt;{i t r m}\right) * \tilde{KDD}&lt;/em&gt;{i t r m}-\tilde{KDD}&lt;em&gt;{i t r m}\right) \&lt;br&gt;
&amp;amp;+0.0007\left(\tilde{PREC}&lt;/em&gt;{i t r m}\right)-0.00000063\left(\tilde{PREC}_{i t r m}^{2}\right)&lt;br&gt;
\end{aligned}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;模型(9)&lt;/strong&gt; 为不包含适应性的 MO-OLS 模型：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\hat{y}&lt;em&gt;{3 i t r m}=\hat{c}&lt;/em&gt;{i}+\overline{\hat{\tau}}&lt;em&gt;{t}+\overline{\hat{\beta}}&lt;/em&gt;{1 i} \tilde{GDD}&lt;em&gt;{i t r m}+\overline{\hat{\beta}}&lt;/em&gt;{2 i} \tilde{KDD}&lt;em&gt;{i t r m}+\overline{\hat{\beta}}&lt;/em&gt;{3 i} \tilde{PREC}&lt;em&gt;{i t r m}+\overline{\hat{\beta}}&lt;/em&gt;{4 i} \tilde{PREC}_{i t r m}^{2}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;模型(10)&lt;/strong&gt; 为包含适应性的 MO-OLS 模型：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\begin{aligned}&lt;br&gt;
\hat{y}&lt;em&gt;{4 i t r m}=&amp;amp; \hat{c}&lt;/em&gt;{i}+\overline{\hat{\tau}}&lt;em&gt;{t}+\overline{\hat{\beta}}&lt;/em&gt;{1 i} \tilde{GDD}&lt;em&gt;{i t r m}+\left(\log \left(\tilde{KDD}&lt;/em&gt;{i t r m}\right) * 0.0025-0.0183\right) \tilde{KDD}&lt;em&gt;{i t r m} \&lt;br&gt;
&amp;amp;+\overline{\hat{\beta}}&lt;/em&gt;{3 i} \tilde{P R E C}&lt;em&gt;{i t r m}+\overline{\hat{\beta}}&lt;/em&gt;{4 i} \tilde{PREC}_{i t r m}^{2}&lt;br&gt;
\end{aligned}&lt;br&gt;
$$&lt;/p&gt;
&lt;h3&gt;6.2 玉米产量的预测值&lt;/h3&gt;
&lt;p&gt;下表为利用以上 4 种计量模型预测的未来玉米产量，括号内为 80% 的预测区间。&lt;/p&gt;
&lt;p&gt;横向来看，1、2 列为不包含适应性的 FE-OLS 和 MO-OLS 估计结果。在 RCP85 的排放情景下，MO-OLS 估计结果显示截至 2100 年玉米平均产量将减少 70%，FE-OLS 结果显示截至 2100 年玉米平均产量减少将 62% 。这与前文提及的传统 FE-OLS 导致结果的低估相一致。第 3、4 列为包含适应行为的模型估计结果，与 1、2 列对比可以看出，适应性能够缓解气候变化对产量的负向影响。&lt;/p&gt;
&lt;p&gt;纵向来看，随着温室气体排放量的减少 (RCP85-RCP45-RCP26)，KDD 的系数绝对值逐渐减小，适应性作用也随之减弱。以第二列和第四列为例，在 RCP85 排放路径下，到 2100 年，适应行为可减少 34% 的产量损失；在 RCP45 路径下，减少 10%；而在 RCP26 路径下，仅减少 2%。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E5%AF%B9%E7%BE%8E%E5%9B%BD%E5%86%9C%E4%B8%9A%E7%9A%84%E5%BD%B1%E5%93%8D_Fig7_%E4%BA%A7%E9%87%8F%E9%A2%84%E6%B5%8B%E8%A1%A8_%E7%8E%8B%E7%BE%8E%E7%94%9C.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;下图显示了在不同排放增长路径下产量下降幅度，结论与上表相同。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E5%AF%B9%E7%BE%8E%E5%9B%BD%E5%86%9C%E4%B8%9A%E7%9A%84%E5%BD%B1%E5%93%8D_Fig8_%E4%BA%A7%E9%87%8F%E9%A2%84%E6%B5%8B%E5%9B%BE_%E7%8E%8B%E7%BE%8E%E7%94%9C.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;6.3 产量损失的预测值&lt;/h3&gt;
&lt;p&gt;作者通过以下公式计算未来玉米产量的总损失，其中 $r$ 为 RCP 排放增长路径，$ad$ 表示是否采取适应行为，若采取则 $ad$ = 1，若不采取则 $ad$ = 0。&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\operatorname{Loss}&lt;em&gt;{r, \mathrm{ad}}=M^{-1} \sum&lt;/em&gt;{m=1}^{M} \sum_{t=2020}^{2100}\left(\hat{y}&lt;em&gt;{t r m, \mathrm{ad}}-\bar{y}&lt;/em&gt;{m}\right)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;相较于 RCP=85 且无适应性的基准情况，不同的排放增长路径和适应性组合可减少的产量损失份额为：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
1-\frac{\operatorname{Loss}&lt;em&gt;{\mathrm{RCPn}, \mathrm{ad}=k}}{\operatorname{Loss}&lt;/em&gt;{\mathrm{RCP} 85, \mathrm{ad}=0}}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;下表为 4 种不同的情形可减少的产量损失情况。从表中可以看出仅实行适应行为并不能大幅减少损失，为避免未来产量大幅下降，必须实行减排政策。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E5%AF%B9%E7%BE%8E%E5%9B%BD%E5%86%9C%E4%B8%9A%E7%9A%84%E5%BD%B1%E5%93%8D_Fig9_%E6%8D%9F%E5%A4%B1%E5%87%8F%E7%BC%93%E4%BC%B0%E8%AE%A1_%E7%8E%8B%E7%BE%8E%E7%94%9C.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;6.4 产量损失分析&lt;/h3&gt;
&lt;p&gt;下图显示以上 4 种情形下，正在经历产量损失的县占所有县的百分比。在 RCP85 且无适应性时，2100 年几乎所有的县都会经历损失。在 RCP26 且有适应性时，2040 年以后约有 60% 的县会经历产量损失，即 40% 的县产量不减反增，说明实行减排政策并辅以适应性可以减缓高温对谷物产量的负面影响。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E5%AF%B9%E7%BE%8E%E5%9B%BD%E5%86%9C%E4%B8%9A%E7%9A%84%E5%BD%B1%E5%93%8D_Fig10_%E6%8D%9F%E5%A4%B1%E5%9C%A8%E5%90%84%E5%8E%BF%E7%9A%84%E5%88%86%E5%B8%83_%E7%8E%8B%E7%BE%8E%E7%94%9C.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;6.5 拓展与延伸&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;A.考虑农业技术进步&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;以上分析假定未来农业技术水平不变。作者在此部分预测了在农业技术进步的情况下未来谷物产量的变化。如果仅有农业技术进步和适应性而未实施减排政策，则玉米产量的增长将显著落后于人口增长；若同时存在农业技术进步并实施减排政策配合适应行为，则玉米产量的增长可以与人口增长大致保持一致。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;B.将大豆作为代表性谷物&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;以上分析以玉米作为代表性谷物，作者在本部分选取大豆作为研究对象，探讨气候变化对产量的影响。由于大豆对高温的敏感性较低，KDD 系数的异质性较小，且与 KDD 之间的相关性较弱，适应性对大豆的影响较小。但减排政策仍能发挥显著作用。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;7. 结论&lt;/h2&gt;
&lt;h3&gt;7.1 模型估计结论&lt;/h3&gt;
&lt;p&gt;作者创新性地提出了 MO-OLS 模型，以估计 1950-2015 年间气候变化对美国农业产出的影响，该方法允许所有回归参数（截距和斜率）在截面和时间上具有异质性。为检验该方法的准确性，作者将 MO-OLS 估计结果与 FE-OLS 估计结果进行了比较，发现两种方法均表明高温对谷物产量产生负面影响。然而，FE-OLS 忽略了斜率异质性，导致模型结果存在偏差。MO-OLS 模型的估计是一致的，且 KDD 的系数 $\hat{\beta}_{2 it}$ 显示出空间和时间上的异质性，证明了农民和自然对高温的适应性。&lt;/p&gt;
&lt;h3&gt;7.2 预测结论&lt;/h3&gt;
&lt;p&gt;作者利用四种计量模型预测未来气候变化对玉米产量的影响，结果显示：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;若缺乏减排政策和适应性，到 2100 年玉米平均产量将下降 70%，气候变化将造成严重危害。&lt;/li&gt;
&lt;li&gt;几乎所有种植谷物的县都会受到气候变化的不利影响，因此将谷物生产转移至温度较低地区的可行性较低。&lt;/li&gt;
&lt;li&gt;在未实行减排的情况下，仅依靠适应性可将未来谷物损失减少 36%，这表明适应行为重要但效果有限。&lt;/li&gt;
&lt;li&gt;减排政策对减少未来产量损失至关重要。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;8. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;变系数 时变 异质性, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;倍分法DID&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;严安冬, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1399.html&quot;&gt;Stata：异质性DID代码详解&lt;/a&gt;, 连享会 No.1399.&lt;/li&gt;
&lt;li&gt;彭晴, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1071.html&quot;&gt;DID新进展：异质性多期DID估计的新方法-csdid&lt;/a&gt;, 连享会 No.1071.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;吕可夫, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/827.html&quot;&gt;Stata：如何估计包含非时变变量的动态面板模型-xtseqreg&lt;/a&gt;, 连享会 No.827.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/28.html&quot;&gt;时间序列&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;吕媛, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/582.html&quot;&gt;Stata：时变 Granger 因果检验&lt;/a&gt;, 连享会 No.582.&lt;/li&gt;
&lt;li&gt;吕政, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/146.html&quot;&gt;TVP-VAR：时变参数向量自回归模型&lt;/a&gt;, 连享会 No.146.&lt;/li&gt;
&lt;li&gt;唐雪梅, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1218.html&quot;&gt;Stata：面板变斜率检验-xthst&lt;/a&gt;, 连享会 No.1218.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/51.html&quot;&gt;论文重现&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;孙晓艺, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1371.html&quot;&gt;论文复现：面板变系数模型及其在工资溢价和教育回报中的应用&lt;/a&gt;, 连享会 No.1371.&lt;/li&gt;
&lt;li&gt;康希, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1347.html&quot;&gt;Stata-DID：异质性多期估计方法-Bacon分解&lt;/a&gt;, 连享会 No.1347.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/29.html&quot;&gt;空间计量-网络分析&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;李祉豪, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/781.html&quot;&gt;Stata：异质性空间自回归模型 (HSAR)-hetsar&lt;/a&gt;, 连享会 No.781.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/43.html&quot;&gt;Stata命令&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;李雪, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1280.html&quot;&gt;Stata：当处理效应为异质性的时候OLS估计值的解释-hettreatreg&lt;/a&gt;, 连享会 No.1280.&lt;/li&gt;
&lt;li&gt;杜静玄, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/846.html&quot;&gt;DID最新进展：异质性处理条件下的双向固定效应DID估计量 (TWFEDD)&lt;/a&gt;, 连享会 No.846.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;内生性-因果推断&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;林旭姿, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/902.html&quot;&gt;Stata因果推断：hettreatreg-用OLS估计异质性处理效应&lt;/a&gt;, 连享会 No.902.&lt;/li&gt;
&lt;li&gt;梁淑珍, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/823.html&quot;&gt;Stata：异质性稳健DID估计量方法汇总&lt;/a&gt;, 连享会 No.823.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;王本丞, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1087.html&quot;&gt;聚类异质性：使用summclust进行统计推断&lt;/a&gt;, 连享会 No.1087.&lt;/li&gt;
&lt;li&gt;苗妙, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/486.html&quot;&gt;面板变系数模型：每家公司都有一个斜率&lt;/a&gt;, 连享会 No.486.&lt;/li&gt;
&lt;li&gt;许曼曼, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/587.html&quot;&gt;异质性分析：系数平滑可变模型&lt;/a&gt;, 连享会 No.587.&lt;/li&gt;
&lt;li&gt;连享会, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/408.html&quot;&gt;Stata：面板中如何合理控制不可观测的异质性特征&lt;/a&gt;, 连享会 No.408.&lt;/li&gt;
&lt;li&gt;金钊, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/916.html&quot;&gt;Stata：时变参数的网络分析-nwxtregress&lt;/a&gt;, 连享会 No.916.&lt;/li&gt;
&lt;li&gt;陈波, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1202.html&quot;&gt;异质性分析！异质性分析！&lt;/a&gt;, 连享会 No.1202.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description><link>https://www.lianxh.cn/details/1542.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1542.html</guid><pubDate>Thu, 06 Feb 2025 16:00:00 GMT</pubDate><author>王美甜</author></item><item><title>美国生命末期健康照护预测建模</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：罗宇恒 (北京协和医学院)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:wuhanyuhengluo@163.com&quot;&gt;wuhanyuhengluo@163.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;：本文主要整理自下文，特此致谢！&lt;br&gt;
&lt;strong&gt;Source&lt;/strong&gt;：Einav, L., Finkelstein, A., Mullainathan, S., &amp;amp; Obermeyer, Z. (2018). Predictive modeling of U.S. health care spending in late life. Science, 360(6396), 1462–1465. &lt;a href=&quot;https://doi.org/10.1126/science.aar5045&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;http://sci-hub.ren/10.1126/science.aar5045&quot;&gt;-PDF-&lt;/a&gt; &lt;a href=&quot;https://scholar.google.com/scholar?q=Predictive%20modeling%20of%20U.S.%20health%20care%20spending%20in%20late%20life&quot;&gt;-Google-&lt;/a&gt; &lt;a href=&quot;https://www.science.org/doi/suppl/10.1126/science.aar5045/suppl_file/aar5045_einav_sm.pdf&quot;&gt;-Appendix-&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;: 美国生命末期健康照护预测建模&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;keywords&lt;/strong&gt;: 机器学习模型，医疗保健支出，医保，死亡风险预测，machine learning，随机森林，梯度提升回归树， LASSO，集成学习&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 引言&lt;/h2&gt;
&lt;p&gt;“临终关怀”并不是一种浪费。&lt;/p&gt;
&lt;p&gt;在美国，四分之一的医疗支出发生在生命的最后 12 个月，这笔支出常被视为浪费。然而，这一观点的前提是能够准确预测哪些人会死亡及其去世时间，而这一前提并不总是成立。因此，本研究基于医疗保险报销数据 (Medicare claims) 建立了机器学习模型，以预测个体的年死亡风险，并分析预测死亡率对支出的影响。研究发现，死亡具有高度的不确定性，因此以往的评估方式并不一定能被视作“浪费”。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 研究背景&lt;/h2&gt;
&lt;p&gt;在美国，医疗保健支出的分配问题一直以来是人们关注的热点话题。以往的研究表明，尽管每年美国仅 5% 的医保受益人离世，然而高达四分之一医疗资源用于患者寿命终止前的最后 12 个月，此现象常被视为医疗资源严重浪费及管理效率低下。如《纽约客》所言，“大多数人生病到最后阶段，如癌症末期、逐渐衰竭的器官或老年病患...都会面临死亡，但确切何时仍是未知数。” 类似地，《纽约时报》质疑，老年人在生命最后一年占据四分之一的医保支出是否合理？尤其是在某些几乎可以肯定将在短期内死去的病例中，大部分医疗费是否被大量投入，而仅仅换来了短期的经济效益？&lt;/p&gt;
&lt;p&gt;但此类观点存在统计学上的谬误，其混淆了实际死亡 (end up dying) 和预估死亡 (sure to die)。事后看来，支出看上去集中在最终死亡的人身上，仅仅因为我们在那些病得更严重因而死亡率更高的病人身上花费更多 (哪怕假设我们不在那些注定会在一年内死亡的病人身上花钱)。这一事实表明应该用预测死亡率 (predicted mortality) 而非事后死亡率 (ex post mortality) 来评估临终支出是更为合理的方式。&lt;/p&gt;
&lt;p&gt;根据实践经验，建议采用预估死亡率而非事后死亡率作为临终支出的评估标准。因此，本研究从事前角度对临终支出进行了分析。为更准确地评估临终医疗支出，研究采用了一种基于机器学习的方法，通过对近六百万医保参保者的随机抽样样本进行分析，预测每个个体在未来 12 个月内的死亡概率，进而分别研究支出与预测死亡率及事后死亡的关系。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 数据&lt;/h2&gt;
&lt;h3&gt;3.1  数据来源&lt;/h3&gt;
&lt;p&gt;本研究主要使用医疗保险报销数据中随机抽样的 20% 参保者的报销记录，重点分析在 2008 年 1 月 1 日健在，且在 2007 年全年及 2008 年持续交纳医保的人群。核心变量包括年龄、性别、种族、医疗补助覆盖范围（作为社会经济地位的替代指标、所有住院护理、门诊护理及医师服务，以及所有记录的疾病诊断结果。&lt;/p&gt;
&lt;p&gt;数据来源包括以下三个部分：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;医疗保险和医疗补助服务中心 (Centers for Medicare and Medicaid Services, CMS)：提供医保受益人中随机抽样 20% 的报销申请记录，本研究的基本分析使用 2007 年和 2008 年的数据。&lt;/li&gt;
&lt;li&gt;主要受益人档案 (Master Beneficiary Summary File, MBSF)：作为所有医保受益人的基础，利用住院病人、门诊病人和医疗服务提供者的档案构建医疗保健使用、支出和健康状况的详细指标。&lt;/li&gt;
&lt;li&gt;慢性病档案 (Chronic Conditions File, CCF)：用于判断医保受益人在年度结束时被诊断的慢性病，本研究使用了 2007 年和 2008 年的慢性病档案。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;文中的初始样本为 2008 年所有美国联邦医疗保险 (Medicare，针对 65 岁以上人士及残障人士) 受益人，约 950 万人。作者按照以下标准进行了样本筛选：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;剔除 2007 年或 2008 年参加医疗保险优势计划 (Medicare Advantage, MA) 的受益人，因为未找到此类样本的医保申请记录，约 280 万人被剔除。&lt;/li&gt;
&lt;li&gt;剔除在 2007 年和 2008 年期间未加入联邦医疗保险 A 和 B (Medicare Parts A and B) 的患者，约 110 万人被剔除。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;分析样本如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基本样本包括约 &lt;strong&gt;560 万医保受益人&lt;/strong&gt;，这些受益人在 2008 年 1 月 1 日仍然健在，并且在 2007 年及其存活的 2008 年期间连续参加了 Medicare Parts A 和 B。本研究测量的是 2008 年 1 月 1 日后的人群死亡率，而 2007 年的数据用于预测 2008 年 1 月 1 日的死亡率。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;3.2 变量选择&lt;/h3&gt;
&lt;p&gt;所有的时变变量都是相对于 2008 年 1 月 1 日的。主要使用的变量分为以下 5 个方面：&lt;/p&gt;
&lt;h4&gt;3.2.1 死亡&lt;/h4&gt;
&lt;p&gt;本研究根据患者 MBSF 档案中的死亡日期，建立与 2008 年 1 月 1 日后各时段的死亡率。通过划分为两大类别——死亡及存活，本研究对数据进行分类分析。具体而言，将 2008 年 1 月 1 日后 1 年内死亡者视为死亡类别；而那些在此时间段内存活者，则归属于存活类别。&lt;/p&gt;
&lt;h4&gt;3.2.2 医保支出&lt;/h4&gt;
&lt;p&gt;定义：根据 Hogan et al. (2001) 和 Research Data Assistance Center (2015) 的衡量标准，医保支出被定义为在住院病人、门诊病人和医疗服务提供者档案中支付的费用总和。这一支出不包括某些类别 (如家庭医疗服务和 Medicare Part D 的处方药支出)，以及养老院费用等非医保支出。&lt;/p&gt;
&lt;p&gt;为了构建预测算法，支出来源进一步细分为以下三类：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;住院支出&lt;/strong&gt;：住院期间的所有费用 (从入院到出院)；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;门诊支出&lt;/strong&gt;：住院之外的所有费用；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;自付支出及其分项数据&lt;/strong&gt;：包括总自负额和住院、门诊各自的自负额，主要指患者需自行承担的部分，来源于个人支付、补充保险或未偿还的医疗债务等；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;代为支付费用&lt;/strong&gt;：包括非医疗保险主要付款人代为支付的医疗保险受益人费用。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在分析 2008 年 1 月 1 日之后的医保支出时，本研究对存活者和死者采用了不同的衡量标准。对于存活者，研究衡量的是 2008 年 1 月 1 日之后 12 个月内的支出；而对于死者，则使用 backfilled 支出计算方法，按照 Hogan et al. (2001) 的描述，计算死亡前 12 个月内的支出。&lt;/p&gt;
&lt;p&gt;本研究采用 unadjusted 死者支出计算方法，以 2008 年 1 月 1 日至逝世之日间的消费为基准，衡量死者的 unadjusted 支出。这一参照标准与存活者的方法类似，但在个体去世后，该计算方式的结果为 0。&lt;/p&gt;
&lt;h4&gt;3.2.3 卫生保健利用率&lt;/h4&gt;
&lt;p&gt;本研究对卫生保健利用率的评估主要采用以下六项指标：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;住院患者就诊次数&lt;/strong&gt;：通过住院患者的入院与出院日期定义其住院时长，以入院日期作为时间划分标准。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;住院天数&lt;/strong&gt;：计算每位患者在医院的累计就诊天数，以得出平均住院时间。具体方法为：住院天数等于出院日期减去入院日期再加一天。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;住院患者手术次数&lt;/strong&gt;：根据住院病人档案，每份报销单 (相当于一次住院就诊) 最多包含六个手术代码，本研究将每个可查询的手术代码视为一次手术。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;住院患者急诊次数&lt;/strong&gt;：根据住院病人档案，定义至少向急诊室收取过一次费用的住院患者就诊次数。本研究参考 Silva et al. (2006) 使用收入中心代码 0450-0459 和 0981 来识别相关费用。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;门诊患者急诊次数&lt;/strong&gt;：利用门诊病人档案，定义急诊室门诊就诊人次。急诊就诊的标准为门诊报销单中至少有一项费用向急诊室收取。与住院急诊就诊相同，本研究也参考 Silva et al. (2006) 的收入中心代码，并允许每天最多有一次急诊室门诊。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;医生出诊次数&lt;/strong&gt;：根据医疗服务提供者档案中的理赔申请，定义为初级保健与专科保健出诊次数的总和。每位患者每日最大接受一次初级保健和一次专科就诊，依据与前述门诊急诊就诊相同的理由。本研究遵循 Research Data Assistance Center (2015) 的标准，但不包括某些医保支出类别 (如家庭医疗服务和医保 D 部分的处方药支出)，也不考虑养老院等非医保支出 (参见 Tabak et al. (2014) 的方法)。全科医生和专科医生的定义依据《达特茅斯地图集》(Dartmouth Atlas)，并与 CMS 数据中的专科代码列表进行比对。&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;3.2.4 健康状况&lt;/h4&gt;
&lt;p&gt;本研究对健康状况的评估主要采用以下四项指标：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;加涅病症示性变量&lt;/strong&gt;：本研究依据 Gagne et al. (2011) 提出的基于 ICD 编码的数据处理方法，使用超过 30 种指标预测老年患者的死亡风险，涵盖 Covid-19、呼吸系统疾病等严重疾病，并纳入如酗酒、心脏病等合并症的老年人。研究借鉴了“合并症指数”（Charlson 和 Elixhauser）的理论框架，同时利用 ICD 编码方法对缺血性中风进行研究，以获取更全面的结果。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;其他诊断指标示性变量&lt;/strong&gt;：本研究将约 15,000 个 ICD-9 诊断代码与 3,000 多个临床诊断 (如肺炎、背痛、跌倒) 进行映射，主要基于 AHRQ 的临床分类软件 (Avati et al. (2017)) 的初步分类，并由一位具有丰富临床经验的医学博士 (ZO) 进一步梳理，以提升数据分类效率。同时，我们建立了更细致的类别体系，以区分肺栓塞与其他肺心病及一些难以明确界定为“病症”的症状 (如呼吸急促、恶心、虚弱等)。详细信息见 Makar et al. (2015)。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;慢性病指标&lt;/strong&gt;：本研究使用 2007 年 MBSF 文件的数据，以判断患者在 2007 年末是否存在 27 种慢性病。这些病症的分类参考 CMS (医疗保险和医疗补助中心) 的标准，根据过去 1 至 3 年的确诊编码进行判别，包括后天性甲状腺功能减退、急性心肌梗死、贫血等，具体可参见 Finkelstein et al. (2016)。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HCC 分数&lt;/strong&gt;：HCC 分数由医疗保险和医疗补助服务中心 (CMS) 定义，用于预测医保支付。该分数基于人口统计数据 (包括年龄、性别和医疗补助资格) 以及 2008 年 1 月 1 日之前 12 个月内的住院、门诊和医疗服务提供者索赔数据中的诊断编码。研究中的 HCC 分数推导参考了 Song et al. (2010)。&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;3.2.5 人口学统计指标&lt;/h4&gt;
&lt;p&gt;本研究使用 MBSF 文件构建以下人口统计学变量：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;年龄&lt;/strong&gt;：截至 2008 年 1 月 1 日的患者年龄；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;种族&lt;/strong&gt;：是否为白人；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;性别&lt;/strong&gt;：是否为男性；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;地理位置&lt;/strong&gt;：基于 2007 年的邮政编码信息，将每位患者映射到其医院转诊区域（RR），详见 Pirracchio et al. (2015) 和 Genevès &amp;amp; Calmant (2017)；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;医疗补助享用&lt;/strong&gt;：确定个人是否在 2008 年 1 月 1 日之前的 12 个月内享受过医疗补助。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. 机器学习模型构建策略&lt;/h2&gt;
&lt;h3&gt;4.1 建模框架&lt;/h3&gt;
&lt;p&gt;如下示意图展示了整个模型构建的流程：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E7%BE%8E%E5%9B%BD%E7%94%9F%E5%91%BD%E6%9C%AB%E6%9C%9F%E5%81%A5%E5%BA%B7%E7%85%A7%E6%8A%A4%E9%A2%84%E6%B5%8B%E5%BB%BA%E6%A8%A1%E4%B8%AD%E6%96%87%E7%B2%BE%E8%A6%81_Fig1_%E6%A8%A1%E5%9E%8B%E6%9E%84%E5%BB%BA%E7%9A%84%E6%B5%81%E7%A8%8B_%E7%BD%97%E5%AE%87%E6%81%92.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;本研究采用随机森林、梯度提升回归树和 LASSO 构建集成预测模型，并利用贝叶斯准则进行校正，以解决预设样本与测试样本比例不均衡的问题。以下为具体步骤：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;步骤一：训练集与测试集划分&lt;/strong&gt;&lt;br&gt;
本研究将 2/3 的样本作为训练集，其中 90% 用于模型训练，2.5% 用于计算模型集成权重，7.5% 用于模型校准。剩余的 1/3 样本作为测试集，以防止模型过拟合。开发和优化预测算法后，模型应用于测试集以预测死亡率，主要结果基于这组测试样本得出。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;步骤二：数据增强&lt;/strong&gt;&lt;br&gt;
由于样本中死亡率较低 (2008 年仅 5% 的医保受益人死亡)，本研究在“平衡样本”上训练预测算法。随机选择一部分存活者，仅抽取约 1/19 (即 5/95) 的存活者，以确保最终平衡样本中死者和存活者人数相等。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;步骤三：模型训练与调参&lt;/strong&gt;&lt;br&gt;
本研究将最终平衡样本随机分为 5 折 (每折约 68,000 名受益人)，进行交叉验证以优化预测算法。最终得到的预测模型为随机森林、梯度提升回归树和 LASSO 的集成模型。考虑到模型是基于平衡样本拟合的，本研究进一步利用贝叶斯法则对集成模型进行校准，并将其应用于测试集。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;4.2 潜在预测因子和特征选择&lt;/h3&gt;
&lt;p&gt;本研究构建的潜在预测因子主要分为以下三类：人口统计学信息、以往医疗保健使用情况的衡量指标和健康状况指标。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;人口统计学信息&lt;/strong&gt;：本研究纳入的变量包括年龄 (以年为单位)、性别、种族 (是否为白人)、医疗补助状况以及居住地 (使用 306 个医院转诊区域 (Hospital Referral Region, HRR) 指标)。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;医疗保健使用情况&lt;/strong&gt;：本研究使用受益人在 2008 年 1 月 1 日之前 12 个月的医疗保健使用信息，详细记录受益人的医疗保健使用情况及其时间轨迹，从而捕捉潜在预测因素的水平和趋势。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;健康状况指标&lt;/strong&gt;：本研究纳入了约 3,000 个诊断编码，构建了一套丰富的健康指标体系。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.3 模型参数调优&lt;/h3&gt;
&lt;p&gt;为获取准确的预测，本研究采用了广泛认可的机器学习技术，主要包括 &lt;strong&gt;随机森林、梯度提升回归树和 LASSO&lt;/strong&gt;。在调优每种算法时，本研究使用了五折交叉验证。在每次调参过程中，舍弃一折样本作为测试集，以计算最优参数的性能。评价标准为受试者工作特征曲线下的面积 (AUC)。&lt;/p&gt;
&lt;h4&gt;4.3.1 随机森林调整的参数&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;随机森林中的预测树平均数量；&lt;/li&gt;
&lt;li&gt;每棵树生成预测所用的重抽样样本中的观测值数量；&lt;/li&gt;
&lt;li&gt;每次拆分时考虑的不同变量数量；&lt;/li&gt;
&lt;li&gt;节点中观测值 (受益者) 的最小数量。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其中，树的数量和重抽样样本大小对模型效果影响不大，因此调参主要集中在后两个参数上。当每次拆分时考虑的不同变量数量为 500，节点中观测值 (受益者) 的最小数量为 50 时，AUC 达到最大值。&lt;/p&gt;
&lt;h4&gt;4.3.2 梯度提升回归树调整的参数&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;梯度提升过程中使用的树的数量；&lt;/li&gt;
&lt;li&gt;每棵树的深度；&lt;/li&gt;
&lt;li&gt;树之间用于更新的学习率。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;梯度提升回归树的参数调优使用的是 &lt;strong&gt;xgboost&lt;/strong&gt;。当梯度提升过程中使用的树的数量为 100，每棵树的深度为 4 以及学习率为 0.1 的时候 AUC 最大。&lt;/p&gt;
&lt;h4&gt;4.3.4 Lasso 算法调整的参数&lt;/h4&gt;
&lt;p&gt;惩罚项系数 $\lambda$。当 $\lambda=0.00047$ 时，AUC 最大。&lt;/p&gt;
&lt;h3&gt;4.4 集成模型构建&lt;/h3&gt;
&lt;p&gt;为了计算集成模型中不同模型的权重系数，本研究使用 2.5% 的训练样本进行权重计算，集成模型公式如下：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\hat{p}&lt;em&gt;{ens} = \hat{\beta}&lt;/em&gt;{rf}\hat{p}&lt;em&gt;{rf} + \hat{\beta}&lt;/em&gt;{gb}\hat{p}&lt;em&gt;{gb} + \hat{\beta}&lt;/em&gt;{lasso}\hat{p}_{lasso} \quad (1)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，$\hat{p}&lt;em&gt;{x}$ 代表算法 $x$ 的预测值，$\hat{\beta}&lt;/em&gt;{x}$ 代表该算法的预测权重。&lt;/p&gt;
&lt;p&gt;首先，本研究在完整的平衡训练样本上计算每个单独模型 (随机森林、梯度提升回归树和 LASSO) 的预测。随后，基于上述模型对独立样本的预估死亡风险进行计算，未调整模型的参数。最后，通过对每种算法预测的死亡率进行 OLS 回归，计算集合预测器的权重，最终得到梯度提升回归树的权重为 0.807，随机森林的权重为 0.127，LASSO 的权重为 0.066。&lt;/p&gt;
&lt;h3&gt;4.5 不平衡训练数据集处理&lt;/h3&gt;
&lt;p&gt;当样本中死亡者与存活者数量大致相同时，机器学习算法更易于训练，但这可能导致模型在原始不平衡数据中预测的死亡率偏高。因此，模型需要对原始不平衡样本进行调整。本研究依据 E. B. French 和 J. McCauley (2017) 的方法，使用贝叶斯法则纠正估计概率的偏差。具体方法如下：&lt;/p&gt;
&lt;p&gt;记 $D$ 为死亡事件的示性变量，$S$ 为存活事件的示性变量，$B$ 为样本被纳入平衡样本的示性变量。设 $\frac1R$ 为死亡者人数相对于存活者的比率，由贝叶斯公式可以得到：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
Prob(D|B)=\frac{Prob(B|D)Prob(D)}{Prob(B|D)Prob(D)+Prob(B|S)Prob(S)} \quad (2)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;注意上面得到的仅仅是平衡样本中的 $Prob(D|B)$ 的预测估计量，为了得到 $Prob(D)$，本研究令 $Prob(B|D)=1$ 且 $Prob(B|S)=\frac1R$，经过调整后最后可以得到：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
Prob(D)=\frac{\frac1RProb(D|B)}{1-(1-\frac1RProb(D|B))} \quad (3)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;文章附录图中假设了 $R=19$ (和基本样本中的真实 $R$ 是相近的)，绘制了如下图展示这一关系。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E7%BE%8E%E5%9B%BD%E7%94%9F%E5%91%BD%E6%9C%AB%E6%9C%9F%E5%81%A5%E5%BA%B7%E7%85%A7%E6%8A%A4%E9%A2%84%E6%B5%8B%E5%BB%BA%E6%A8%A1%E4%B8%AD%E6%96%87%E7%B2%BE%E8%A6%81_Fig2_%E6%A8%A1%E6%8B%9F%E6%9B%B2%E7%BA%BF_%E7%BD%97%E5%AE%87%E6%81%92.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;在分析过程中，贝叶斯法则可能不适用于实际数据。因此，本研究采用了 7.5% 的平衡样本作为校准样本进行调整，以确保预测结果与实际情况相符。针对校准样本，本研究从经验出发，映射平衡样本中的预测死亡率与测试样本中的预测死亡率，最终拟合了一条三次函数曲线以描述预测死亡率与实际死亡率之间的关系。最终，本研究的预测模型在测试样本中的 AUC 达到了 0.867。&lt;/p&gt;
&lt;p&gt;文章中的表 S2 展示了测试样本的年死亡率预测分布情况：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E7%BE%8E%E5%9B%BD%E7%94%9F%E5%91%BD%E6%9C%AB%E6%9C%9F%E5%81%A5%E5%BA%B7%E7%85%A7%E6%8A%A4%E9%A2%84%E6%B5%8B%E5%BB%BA%E6%A8%A1%E4%B8%AD%E6%96%87%E7%B2%BE%E8%A6%81_Tab1_%E6%B5%8B%E8%AF%95%E6%A0%B7%E6%9C%AC%E7%9A%84%E5%B9%B4%E6%AD%BB%E4%BA%A1%E7%8E%87%E9%A2%84%E6%B5%8B%E5%88%86%E5%B8%83_%E7%BD%97%E5%AE%87%E6%81%92.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;该表展示了测试样本中不同分组的预测死亡率汇总统计。可以看出，预测结果与已知风险因素 (如年龄或癌症诊断) 之间的差异符合预期。每行数据包括医保受益人数、年死亡率及年死亡预测概率，同时提供了预测死亡率分布的第 75、95 和 99 百分位数，以及在未来 12 个月内死亡且年死亡预测率超过 50% 的医保受益者比例。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4.  结果及分析&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E7%BE%8E%E5%9B%BD%E7%94%9F%E5%91%BD%E6%9C%AB%E6%9C%9F%E5%81%A5%E5%BA%B7%E7%85%A7%E6%8A%A4%E9%A2%84%E6%B5%8B%E5%BB%BA%E6%A8%A1%E4%B8%AD%E6%96%87%E7%B2%BE%E8%A6%81_Fig3_%E4%BA%8B%E5%90%8E%E6%AD%BB%E4%BA%A1%E8%80%85%E7%9A%84%E9%9B%86%E4%B8%AD%E6%94%AF%E5%87%BA%E5%88%86%E6%9E%90_%E7%BD%97%E5%AE%87%E6%81%92.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;事后死亡者的支出分析图&lt;/strong&gt;。图中展示了 2008 年 1 月 1 日后特定时段内的死亡人数及医保支出情况，数据来源于基本样本 (n=5,631,168)。存活者的支出基于 2008 年 1 月 1 日后的时间段。对于死亡者，支出测量采用两种方式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;回填法 (backfilled)，测量从死亡日期往前推的相关时间段支出，例如，1 年的测量对应死亡前12个月的支出；&lt;/li&gt;
&lt;li&gt;未调整法 (unadjusted)，计算自 2008 年 1 月 1 日起的相关时间段的支出。使用这种方法，本研究发现死亡的 5% 的医疗保险受益人的支出占医疗保险支出的 21%，与先前估计相符。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E7%BE%8E%E5%9B%BD%E7%94%9F%E5%91%BD%E6%9C%AB%E6%9C%9F%E5%81%A5%E5%BA%B7%E7%85%A7%E6%8A%A4%E9%A2%84%E6%B5%8B%E5%BB%BA%E6%A8%A1%E4%B8%AD%E6%96%87%E7%B2%BE%E8%A6%81_Fig4_%E9%A2%84%E6%B5%8B%E6%AD%BB%E4%BA%A1%E7%8E%87%E7%9A%84%E5%88%86%E5%B8%83_%E7%BD%97%E5%AE%87%E6%81%92.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;预测死亡率的分布图&lt;/strong&gt;。图中显示了自 2008 年 1 月 1 日起每年预测死亡率的分布情况，数据来自测试子样本 (n = 1,877,168)。可以看出，较大部分人群在一年内无法明确面临死亡，预测年死亡率的最高值仅占 25%。而在实际一年内去世者中，年死亡率超过 50% 的个体不足 10%。这表明大量支出用于有恢复机会的患者，而非真正临终的患者。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E7%BE%8E%E5%9B%BD%E7%94%9F%E5%91%BD%E6%9C%AB%E6%9C%9F%E5%81%A5%E5%BA%B7%E7%85%A7%E6%8A%A4%E9%A2%84%E6%B5%8B%E5%BB%BA%E6%A8%A1%E4%B8%AD%E6%96%87%E7%B2%BE%E8%A6%81_Fig5_%C2%A0%E6%8C%89%E4%BA%8B%E5%89%8D%E6%AD%BB%E4%BA%A1%E7%8E%87%E7%9A%84%E6%94%AF%E5%87%BA%E5%8D%A0%E6%AF%94_%E7%BD%97%E5%AE%87%E6%81%92.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;按事前 (预测) 死亡率的支出占比&lt;/strong&gt;：横轴代表每个年份的预测死亡率水平，纵轴显示预测死亡率高于该值的个体医保支出占年医保总支出的比例。每个条形图将死者 (黑色) 和存活者 (灰色) 的比例叠加在一起，其高度表示预测死亡率大于等于年份预测死亡率的个体 (包括死者和存活者) 所占的年医疗保险支出总额。&lt;/p&gt;
&lt;p&gt;可以看出，仅有少部分医疗服务和支出集中于高死亡概率患者。预测死亡率最高的 1% 群体，即预测死亡率超过 46% 的个体，其医疗支出占医保总支出的不到 5%。&lt;/p&gt;
&lt;p&gt;在最极端的情况下，预计死亡率高于 46% 的个体，其诊疗投入仅占整体总支出的 5%。值得注意的是，这些个体中仍有 45% 为存活者。因此，要确保死者群体的支出占比达到至少 5%，预测死亡率的临界值需要设定为 39% 或更高。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E7%BE%8E%E5%9B%BD%E7%94%9F%E5%91%BD%E6%9C%AB%E6%9C%9F%E5%81%A5%E5%BA%B7%E7%85%A7%E6%8A%A4%E9%A2%84%E6%B5%8B%E5%BB%BA%E6%A8%A1%E4%B8%AD%E6%96%87%E7%B2%BE%E8%A6%81_Fig6_%C2%A0%E6%8C%89%E9%A2%84%E6%B5%8B%E6%AD%BB%E4%BA%A1%E7%8E%87%E8%AE%A1%E7%AE%97%E7%9A%84%E6%94%AF%E5%87%BA1_%E7%BD%97%E5%AE%87%E6%81%92.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;按预测死亡率计算的支出&lt;/strong&gt;。本图展示了2008年医保总支出与预测年死亡率的核密度曲线，反映了不同预测死亡率下支出的总额分布情况。图中揭示了一个重要现象：生命末期的支出大部分集中在对病人的医疗照护上。随着预测死亡率的增加，支出也相应增加，这表明死亡者的预测死亡率高于存活者。这一观察解释了个体死亡后支出集中现象的原因。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E7%BE%8E%E5%9B%BD%E7%94%9F%E5%91%BD%E6%9C%AB%E6%9C%9F%E5%81%A5%E5%BA%B7%E7%85%A7%E6%8A%A4%E9%A2%84%E6%B5%8B%E5%BB%BA%E6%A8%A1%E4%B8%AD%E6%96%87%E7%B2%BE%E8%A6%81_Fig7_%C2%A0%E6%8C%89%E9%A2%84%E6%B5%8B%E6%AD%BB%E4%BA%A1%E7%8E%87%E8%AE%A1%E7%AE%97%E7%9A%84%E6%94%AF%E5%87%BA2_%E7%BD%97%E5%AE%87%E6%81%92.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;按预测死亡率计算的支出&lt;/strong&gt;。本图展示了存活者和死亡者的医保支出的核密度曲线。分析显示，从死亡者的预测死亡率分布中随机抽取的存活者在医疗保健方面的支出约为随机抽取的存活者的两倍。因此，仅需考虑死亡率较高者的支出较高，就可以解释集中在死者身上的支出相较于存活者高出 30% 至 50% (具体取决于使用的 unadjusted 衡量标准或 backfilled 衡量标准)。此外，即使在预测死亡概率相同的情况下，即将死亡的个体支出也更高，尤其是预测死亡率最低的人。这可能是由于本研究目前的预测算法未考虑患者个体间的差异，或与患者的死亡过程及其基本机制相关。仍需进一步研究，以深入理解为何死亡相关支出如此之高。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. 结论&lt;/h2&gt;
&lt;p&gt;这项研究的核心结果揭示了一个重要事实：&lt;strong&gt;尽管医疗支出通常集中在生命的最后阶段，但大部分死亡事件实际上是难以预测的。这意味着许多患者在生命最后一年接受的医疗干预效果往往不可预见。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;因此，我们需要重新审视当前的医疗资源分配模式，以确保医疗政策更好地反映死亡风险的动态特性，而不仅仅依赖历史支出模式。例如，可以引入更为精细的风险预测工具，帮助政策制定者更全面地了解患者健康状况和死亡风险，从而制定更合理的医疗资源分配策略。&lt;/p&gt;
&lt;p&gt;这一结果为未来医疗政策提供了新的视角，也为更好地理解和应对医疗资源分配问题带来了重要启示。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;6.  参考文献&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Einav, L., Finkelstein, A., Mullainathan, S., &amp;amp; Obermeyer, Z. (2018). Predictive modeling of U.S. health care spending in late life. Science, 360(6396), 1462–1465. &lt;a href=&quot;https://doi.org/10.1126/science.aar5045&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;http://sci-hub.ren/10.1126/science.aar5045&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Tibshirani, R. (1996). Regression Shrinkage and Selection Via the Lasso. Journal of the Royal Statistical Society Series B: Statistical Methodology, 58(1), 267–288. &lt;a href=&quot;https://doi.org/10.1111/J.2517-6161.1996.TB02080.X&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;http://sci-hub.ren/10.1111/J.2517-6161.1996.TB02080.X&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Friedman, J. H. (2001). Greedy function approximation: A gradient boosting machine. The Annals of Statistics, 29(5). &lt;a href=&quot;https://doi.org/10.1214/AOS/1013203451&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;http://sci-hub.ren/10.1214/AOS/1013203451&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Breiman, L. (2001).Random forests. Machine Learning, 45(1), 5–32. &lt;a href=&quot;https://doi.org/10.1023/A:1010933404324&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;http://sci-hub.ren/10.1023/A:1010933404324&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Pirracchio, R., Petersen, M. L., Carone, M., Rigon, M. R., Chevret, S., &amp;amp; Van Der Laan, M. J. (2015). Mortality prediction in intensive care units with the Super ICU Learner Algorithm (SICULA): a population-based study. The Lancet Respiratory Medicine, 3(1), 42–52. &lt;a href=&quot;https://doi.org/10.1016/S2213-2600(14)70239-5&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;http://sci-hub.ren/10.1016/S2213-2600(14)70239-5&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;7. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh 论文复现, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/51.html&quot;&gt;论文重现&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;刘依云, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1190.html&quot;&gt;论文复现：土豆对人口与城市化的贡献-连续DID应用&lt;/a&gt;, 连享会 No.1190.&lt;/li&gt;
&lt;li&gt;刘峒杉, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1459.html&quot;&gt;110篇经济学政治学论文复现代码、数据和复现报告&lt;/a&gt;, 连享会 No.1459.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/31.html&quot;&gt;论文写作&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;刘帅, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/831.html&quot;&gt;Stata论文复现：女性领导人当选是否有助于更多女性从政-RD&lt;/a&gt;, 连享会 No.831.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;倍分法DID&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;刘梦蝶, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1363.html&quot;&gt;DID大餐：49 篇 QJE 论文汇总（2018-2022）&lt;/a&gt;, 连享会 No.1363.&lt;/li&gt;
&lt;li&gt;刘淑云, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1197.html&quot;&gt;论文复现：低碳转型冲击就业吗？&lt;/a&gt;, 连享会 No.1197.&lt;/li&gt;
&lt;li&gt;匡宇驰, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1454.html&quot;&gt;经济学家知错必改吗？AER复现类论文的影响&lt;/a&gt;, 连享会 No.1454.&lt;/li&gt;
&lt;li&gt;吕卓阳, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/730.html&quot;&gt;Stata 论文复现：Temperature Shocks and Economic Growth&lt;/a&gt;, 连享会 No.730.&lt;/li&gt;
&lt;li&gt;吕卓阳, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/726.html&quot;&gt;Stata 论文复现：儿童权利公约对儿童健康的影响&lt;/a&gt;, 连享会 No.726.&lt;/li&gt;
&lt;li&gt;吕大兴, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1145.html&quot;&gt;论文复现：基于组级纵向数据评估政策的试验模拟方法&lt;/a&gt;, 连享会 No.1145.&lt;/li&gt;
&lt;li&gt;吴奕玮, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1316.html&quot;&gt;论文复现：引入注意力的考虑集模型-alogit&lt;/a&gt;, 连享会 No.1316.&lt;/li&gt;
&lt;li&gt;姚永健, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1185.html&quot;&gt;论文复现： 家庭财富冲击会影响生产力吗？&lt;/a&gt;, 连享会 No.1185.&lt;/li&gt;
&lt;li&gt;孙晓艺, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1371.html&quot;&gt;论文复现：面板变系数模型及其在工资溢价和教育回报中的应用&lt;/a&gt;, 连享会 No.1371.&lt;/li&gt;
&lt;li&gt;张蛟蛟, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/911.html&quot;&gt;Stata论文复现：社科领域Top5期刊复现资料&lt;/a&gt;, 连享会 No.911.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1541.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1541.html</guid><pubDate>Wed, 05 Feb 2025 16:00:00 GMT</pubDate><author>罗宇恒</author></item><item><title>AI助手系列：napkin.ai-文字转换为图片和表格</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者：&lt;/strong&gt; 连小白 (连享会)&lt;br&gt;
&lt;strong&gt;邮箱：&lt;/strong&gt; &lt;a href=&quot;mailto:arlionn@163.com&quot;&gt;arlionn@163.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;: AI助手系列：napkin.ai-文字转换为图片和表格&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;: 幻灯片插图, text to image, Slides, AI工具, PPT插图, 流程图, 逻辑图&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;在撰写博客、制作幻灯片或进行学术报告时，插图的设计往往是一个耗时且令人头疼的环节。如何快速生成高质量的插图，同时保持风格的一致性？今天要介绍的 &lt;a href=&quot;https://app.napkin.ai/&quot;&gt;napkin.ai&lt;/a&gt; 或许能成为你的得力助手。&lt;/p&gt;
&lt;h2&gt;1. 什么是 napkin.ai？&lt;/h2&gt;
&lt;p&gt;napkin.ai 是一款基于 AI 的图形生成工具，能够根据用户提供的文字脚本，快速生成适合幻灯片或博文的插图。无论是学术流程图、数据分析图示，还是概念解释图，napkin.ai 都能通过简单的文本输入，自动生成高质量的图形。&lt;/p&gt;
&lt;h2&gt;2. 如何使用 napkin.ai？&lt;/h2&gt;
&lt;p&gt;使用 napkin.ai 非常简单，只需以下几个步骤：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;输入脚本&lt;/strong&gt;：在 napkin.ai 的编辑页面中，输入你希望生成图形的文字描述。例如，你可以描述一个实证分析的流程，或者解释某个工具（如 Stata）在数据分析中的作用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;生成图形&lt;/strong&gt;：AI 会根据你的脚本自动生成相应的图形。你可以选择不同的风格、配色和布局，确保图形与你的内容完美契合。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;调整与优化&lt;/strong&gt;：napkin.ai 提供了丰富的编辑功能，包括调整对象的位置和大小、修改画布尺寸、优化留白等。你还可以根据需求调整字体、配色和整体风格，让图形更符合你的审美。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;导出与使用&lt;/strong&gt;：完成设计后，你可以直接将图形插入到幻灯片、博文或其他文档中，轻松提升内容的视觉效果。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;你可以将上述文字直接贴入 napkin.ai，它会自动多个备选图形。图 1 是我从中挑选的一个：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/napkin-ai-%E5%9B%BE%E5%83%8F%E5%88%9B%E4%BD%9C%E6%B5%81%E7%A8%8B-01.png&quot; alt=&quot;napkin-ai-图像创作流程-01&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;图 1：napkin.ai 的工作流程 (由 napkin.ai 自动生成)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;生成图 1 后，你可以把提示词保存下来，以备后用：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;# 生成图 1 的最终提示词

输入文本
AI 处理文本
生成初始图像
酌情修改图像
导出图像
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;3. 案例 1：Stata 的角色和作用&lt;/h2&gt;
&lt;p&gt;我最近写了一篇文章：&lt;a href=&quot;https://file.lianxh.cn/KC/01_Stata101.html&quot;&gt;连玉君 - Stata 101&lt;/a&gt;，我想为它添加一些图片，以提高可读性。于是，我在 &lt;a href=&quot;https://app.napkin.ai/&quot;&gt;app.napkin.ai&lt;/a&gt; 中开启了一个新的对话，并从我的文章中摘取了如下文本贴入 &lt;a href=&quot;https://app.napkin.ai/&quot;&gt;napkin.ai&lt;/a&gt; 的对话框：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;0.0 实证分析的流程
[1] 一个想法：研究假设
[2] 模型设定
[3] 变量界定
[4] 收集数据、数据清洗、生成变量
[5] 统计和回归分析
支持 → [6]
不支持 → [1]-[5]
[6] 解释结果、结论

讨论：在上述过程中，Stata 的角色和作用是什么？
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;napkin.ai 迅速生成了多种风格的流程图，这里列举我比较喜欢的两个：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20250111142159.png&quot; alt=&quot;风格1&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;图 2：Stata 在实证分析中的角色和作用 (由 &lt;a href=&quot;https://app.napkin.ai/page/CgoiCHByb2Qtb25lEiwKBFBhZ2UaJDQ5ZmVlZmY2LTM1NGItNGU3NC1iMGYyLTM1N2VmYzJiMjcwMg?s=1&quot;&gt;napkin.ai&lt;/a&gt; 自动生成)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20250111142309.png&quot; alt=&quot;风格2&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;图 3：Stata 在实证分析中的角色和作用 (由 &lt;a href=&quot;https://app.napkin.ai/page/CgoiCHByb2Qtb25lEiwKBFBhZ2UaJDQ5ZmVlZmY2LTM1NGItNGU3NC1iMGYyLTM1N2VmYzJiMjcwMg?s=1&quot;&gt;napkin.ai&lt;/a&gt; 自动生成)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;你可以根据自己的需求选择最合适的风格，并通过简单的拖拽调整图形细节。&lt;/p&gt;
&lt;h2&gt;4. 小技巧：让图形更出彩&lt;/h2&gt;
&lt;p&gt;如果你对 napkin.ai 生成的图形不满意，可以借助它提供的编辑功能对图形进行优化。以下是一些实用的小技巧。&lt;/p&gt;
&lt;h4&gt;4.1 美化设计：配色、字体与风格&lt;/h4&gt;
&lt;p&gt;napkin.ai 支持自定义配色方案、字体样式和整体风格。你可以根据内容的主题选择合适的视觉风格，比如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;学术风格&lt;/strong&gt;：使用简洁的配色（如蓝白灰）和清晰的字体，突出逻辑性和专业性。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;创意风格&lt;/strong&gt;：尝试鲜艳的配色和手绘风格，适合轻松活泼的主题。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;商务风格&lt;/strong&gt;：选择沉稳的配色（如深蓝、深灰）和现代感强的字体，适合商业报告。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通过调整这些细节，你可以让图形更贴合内容的调性，提升整体视觉效果。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20250111142825.png&quot; alt=&quot;美化设计示例&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;4.2 调整对象的位置和大小&lt;/h3&gt;
&lt;p&gt;有时候，自动生成的图形可能存在标题与正文间距过大、元素排列不够紧凑等问题。我们可以通过拖拽的方式调整每个对象的位置和大小。例如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果流程图的某个步骤描述过长，导致图形显得松散，你可以缩小文本框的宽度，或者调整箭头的位置，使整体布局更加紧凑。&lt;/li&gt;
&lt;li&gt;对于多元素图形，你可以通过拖拽调整每个元素的位置，确保逻辑关系清晰可见。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20250111224317.png&quot; alt=&quot;调整对象示例&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;4.3 优化画布尺寸与留白&lt;/h3&gt;
&lt;p&gt;napkin.ai 允许你自定义画布尺寸和留白，确保图形在插入文档时不会显得突兀。例如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果你的图形需要嵌入到窄栏的博客文章中，可以将画布调整为纵向布局，减少左右留白。&lt;/li&gt;
&lt;li&gt;如果图形用于宽屏幻灯片，可以适当增加画布宽度，充分利用空间展示更多细节。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通过调整画布尺寸和留白，你可以让图形更好地适应不同的使用场景，避免内容被裁剪或显得过于拥挤。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20250111224705.png&quot; alt=&quot;画布调整示例&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;4.4 快速切换风格&lt;/h3&gt;
&lt;p&gt;napkin.ai 提供了多种预设风格，你可以快速切换，查看不同风格的效果。例如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;从简约的线框图切换到色彩丰富的立体风格，只需点击一下即可完成。&lt;/li&gt;
&lt;li&gt;如果你对某种风格的部分细节不满意，还可以进一步微调，比如修改某个元素的颜色或字体。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这种灵活性让你能够在短时间内尝试多种设计方案，找到最符合需求的效果。&lt;/p&gt;
&lt;h2&gt;5. 图片导出与分享&lt;/h2&gt;
&lt;p&gt;完成设计后，napkin.ai 支持一键导出图形。你可以将图形保存为 PNG 或 SVG 格式，方便插入到幻灯片、博文或其他文档中。此外，napkin.ai 还提供了分享链接功能，你可以将设计好的图形直接分享给同事或合作伙伴，方便协作和反馈。&lt;/p&gt;
&lt;p&gt;下面分享一下本文主要图形的生成过程：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://app.napkin.ai/page/CgoiCHByb2Qtb25lEiwKBFBhZ2UaJDFkOWQ5MTg4LTk0MmYtNDk0NC05NmY5LWJjZWYzYzRjZDRhYg?s=1&quot;&gt;图 1 的生成过程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://app.napkin.ai/page/CgoiCHByb2Qtb25lEiwKBFBhZ2UaJDQ5ZmVlZmY2LTM1NGItNGU3NC1iMGYyLTM1N2VmYzJiMjcwMg?s=1&quot;&gt;图 2 和 图 3 的生成过程&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;自己提供脚本提示词&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://app.napkin.ai/page/CgoiCHByb2Qtb25lEiwKBFBhZ2UaJDk1NzJlYWQzLTk5MGYtNDMwYi1hZjBiLWQ5MjY1ZWE3M2E4NA?s=1&quot;&gt;实证分析的流程&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;让 AI 自动生成脚本；进而基于脚本生成图形&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;6. 总结&lt;/h2&gt;
&lt;p&gt;napkin.ai 是一款功能强大且易于使用的 AI 图形生成工具，特别适合需要快速制作高质量插图的用户。无论是学术研究、商业报告还是个人博客，napkin.ai 都能帮助你节省大量时间，同时提升内容的视觉效果。如果你还在为插图设计烦恼，不妨试试 &lt;a href=&quot;https://app.napkin.ai/&quot;&gt;napkin.ai&lt;/a&gt;，让你的创意更加生动直观！&lt;/p&gt;
&lt;h2&gt;7. 参考资料和相关推文&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.allaboutai.com/ai-how-to/use-napkin-ai-to-create-stunning-visuals/&quot;&gt;How to Use Napkin AI to Create Stunning Visuals in Seconds&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.allaboutai.com/best-ai-tools/&quot;&gt;Best AI Tools in 2025 – [Get My Top Picks!]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ChatGPT, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1433.html&quot;&gt;知乎热议：导师都是段子手&lt;/a&gt;, 连享会 No.1433.&lt;/li&gt;
&lt;li&gt;于凡, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1348.html&quot;&gt;AI可以编写Stata代码吗？&lt;/a&gt;, 连享会 No.1348.&lt;/li&gt;
&lt;li&gt;余坚, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1164.html&quot;&gt;Stata：ChatGPT你能帮我干点啥？&lt;/a&gt;, 连享会 No.1164.&lt;/li&gt;
&lt;li&gt;吴小齐, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1423.html&quot;&gt;强大的Kimi：中国版ChatGPT平替&lt;/a&gt;, 连享会 No.1423.&lt;/li&gt;
&lt;li&gt;罗银燕, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1171.html&quot;&gt;如何在 R 中安装并使用 chatgpt 包？&lt;/a&gt;, 连享会 No.1171.&lt;/li&gt;
&lt;li&gt;连享会, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1394.html&quot;&gt;AI编程助手大盘点：不止ChatGPT和Copilot&lt;/a&gt;, 连享会 No.1394.&lt;/li&gt;
&lt;li&gt;连玉君, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1390.html&quot;&gt;VScode：实用 Markdown 插件推荐&lt;/a&gt;, 连享会 No.1390.&lt;/li&gt;
&lt;li&gt;连玉君, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1489.html&quot;&gt;从基础到 AI 助手：Python 用户最爱的 VScode 插件清单&lt;/a&gt;, 连享会 No.1489.&lt;/li&gt;
&lt;li&gt;连玉君, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1393.html&quot;&gt;借助ChatGPT4o学习排序算法：AI代码助手好酸爽！&lt;/a&gt;, 连享会 No.1393.&lt;/li&gt;
&lt;li&gt;连玉君, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/899.html&quot;&gt;连玉君：我与ChatGPT聊了一个月&lt;/a&gt;, 连享会 No.899.&lt;/li&gt;
&lt;li&gt;邱一崎, 2025, &lt;a href=&quot;https://www.lianxh.cn/details/1534.html&quot;&gt;AITurk 平台论文复现&lt;/a&gt;, 连享会 No.1534.&lt;/li&gt;
&lt;li&gt;颜国强, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1421.html&quot;&gt;ChatGPT争议：学术研究的加速器or信任危机的催化剂？&lt;/a&gt;, 连享会 No.1421.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1540.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1540.html</guid><pubDate>Wed, 22 Jan 2025 16:00:00 GMT</pubDate><author>连小白</author></item><item><title>Stata 地图：cntraveltime-助你足不出户丈量中国</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：谢嘉伟 (赣南师范大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:1221249017@gnnu.edu.cn&quot;&gt;1221249017@gnnu.edu.cn&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;： 本推文所介绍命令由武汉大学张学人等开发，主要内容翻译自下文，略有改动和增减，特此致谢！另外，开发命令所需编程实现、测试验证以及错误修正和性能优化需要耗费开发者大量时间和精力。如使用此命令，请引用以表示对开发者工作的支持和尊重。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Source&lt;/strong&gt;：Zhang, X., Xue, Y., &amp;amp; Li, C. (2023). cntraveltime: Travel distance and travel time in China. The Stata Journal, 23(3), 730–753. &lt;a href=&quot;https://journals.sagepub.com/doi/10.1177/1536867X231196292&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://ageconsearch.umn.edu/record/340539/files/Zhang.pdf&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=cntraveltime:%20Travel%20distance%20and%20travel%20time%20in%20China&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;: Stata 地图：cntraveltime-助你足不出户丈量中国&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;: Sata 绘图, cntraveltime, 百度地图, 通行时间, 通行距离, 中国地理编码&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 简介&lt;/h2&gt;
&lt;p&gt;地理距离经常被用作经济学研究中的解释变量。距离基于大圆公式，称为&lt;strong&gt;大地距离&lt;/strong&gt;。一般来说，两个地点之间的大地距离越大，通信成本（可以指时间花费）越高。然而，大地距离不能准确地表示实际的&lt;strong&gt;行程距离&lt;/strong&gt;，因为两个地点之间的通行时间通常因受到地点内的山川河流、道路状况和气候等地理条件影响，大地距离难以有效衡量通行成本。因此，该领域的现有文献建议进一步研究更贴近现实的距离测量。&lt;/p&gt;
&lt;p&gt;现有关距离测量的命令或软件包有 &lt;code&gt;traveltime&lt;/code&gt;（&lt;a href=&quot;https://journals.sagepub.com/doi/abs/10.1177/1536867X1101100107&quot;&gt;Ozimek 和 Miles, 2011&lt;/a&gt;）、&lt;code&gt;mqtime&lt;/code&gt;（&lt;a href=&quot;https://journals.sagepub.com/doi/abs/10.1177/1536867X1501500316&quot;&gt;Voorheis, 2015&lt;/a&gt;）、&lt;code&gt;osrmtime&lt;/code&gt;（&lt;a href=&quot;https://journals.sagepub.com/doi/abs/10.1177/1536867X1601600209&quot;&gt;Huber 和 Rust, 2016&lt;/a&gt;）、和 &lt;code&gt;georoute&lt;/code&gt;（&lt;a href=&quot;https://journals.sagepub.com/doi/abs/10.1177/1536867X221083857&quot;&gt;Weber, Péclat 和 Warren, 2022&lt;/a&gt;） 等。然而在中国地图的应用中，以上命令的运行并不顺畅。例如，&lt;code&gt;traveltime&lt;/code&gt; 依赖于谷歌地图，而谷歌地图在中国大陆无法访问。虽然其他命令（例如 &lt;code&gt;mqtime&lt;/code&gt; 和 &lt;code&gt;georoute&lt;/code&gt;）在中国可以使用，但它们无法用中文或英文解析中国位置。&lt;/p&gt;
&lt;p&gt;中国拥有大量的 Stata 用户，有时候也会遇到有关中国地址以及相应地点间行程或距离的挑战。&lt;a href=&quot;https://journals.sagepub.com/doi/full/10.1177/1536867X20976313&quot;&gt;Xue 和 Li（2020）&lt;/a&gt;描述了如何在 Stata 中使用 &lt;code&gt;cngcode&lt;/code&gt; 将地址转换为由经度和纬度定义的地理坐标，并使用 &lt;code&gt;cnaddress&lt;/code&gt; 将地址转换为由经度和纬度定义的地理坐标。&lt;/p&gt;
&lt;p&gt;基于此，我们引入了一个新命令 &lt;code&gt;cntraveltime&lt;/code&gt;。该命令可以计算由地理坐标定义的两个地点之间的行程距离和行程时间。该命令向百度地图开放平台应用程序编程接口 (API) 提交查询，从而解决路线规划问题。根据国际数据公司在题为“High-Resolution Map Solutions Market Share”的文章中报告的最新调查结果 (&lt;a href=&quot;https://www.idc.com/getdoc.jsp?containerId=CHC47551021&amp;amp;pageType=PRINTFRIENDLY&quot;&gt;文档编号 CHC47551021&lt;/a&gt;)，百度地图平台是中国使用最多的导航服务。这表明计算结果是现实的且高度可靠的。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. cntraveltime 优势&lt;/h2&gt;
&lt;p&gt;我们认为，&lt;code&gt;cntraveltime&lt;/code&gt;不仅是目前唯一能够精准计算和分析中文地址行程距离和时间的命令，还具备区别于其他相关命令的独特优势。&lt;/p&gt;
&lt;h3&gt;2.1 出行模式选择多&lt;/h3&gt;
&lt;p&gt;首先，&lt;code&gt;cntraveltime&lt;/code&gt;支持三种不同的出行模式：汽车驾驶、公共交通和骑行。在这方面，该命令比只提供汽车驾驶模式的 &lt;code&gt;georoute&lt;/code&gt; 更有效率。在汽车驾驶模式下，&lt;code&gt;cntraveltime&lt;/code&gt; 允许用户使用特定选项规划路线，包括优先高速公路、避开高速公路、避开拥堵路段、避开收费站等。在公共交通模式下，&lt;code&gt;cntraveltime&lt;/code&gt; 可以找到一条公交较少、步行距离较短、没有地铁的路线，甚至是上述选项的组合。命令 &lt;code&gt;osrmtime&lt;/code&gt; 也允许用户使用上述三种交通方式规划路线，但使用起来相当复杂，必须满足一定先决条件。总而言之，&lt;code&gt;cntraveltime&lt;/code&gt; 提供了丰富的行程选择，帮助用户更准确地获得特定地点的行程距离和出行时间，方便比较不同行程方式之间的差异。&lt;/p&gt;
&lt;h3&gt;2.2 地理坐标更准确&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;cntraveltime&lt;/code&gt; 的第二个特点是准确性。要解析地址，用户需要先用 &lt;code&gt;cngcode&lt;/code&gt; 命令将中文地址转换成经纬度，然后输入到 &lt;code&gt;cntraveltime&lt;/code&gt; 命令中进行计算。虽然 &lt;code&gt;mqtime&lt;/code&gt; 和 &lt;code&gt;georoute&lt;/code&gt; 等命令都可以使用地点的经纬度作为输入选项，但是出于信息安全考虑，&lt;code&gt;cngcode&lt;/code&gt; 只能输出地点在 &lt;strong&gt;BD09II&lt;/strong&gt; 大地坐标系下的经纬度，而该经纬度是通过 &lt;strong&gt;WGS84&lt;/strong&gt; 大地坐标系加密变换得到的。（本事实来自&lt;a href=&quot;https://lbsyun.baidu.com/index.php?title=coordinate&quot;&gt;百度地图开放平台文档&lt;/a&gt;)。如果再用 &lt;code&gt;georoute&lt;/code&gt; 用 &lt;code&gt;cngcode&lt;/code&gt; 处理经纬度，结果并不准确。而 &lt;code&gt;cntraveltime&lt;/code&gt; 可以足够高效地运行该选项，因为该命令默认的大地坐标系已经是 &lt;strong&gt;BD09II&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;最后关于容量问题。&lt;code&gt;georoute&lt;/code&gt; 和 &lt;code&gt;mqtime&lt;/code&gt; 等命令可以检索位置之间的行程距离，但它们对路线计算的请求数量有限制。其所依赖的 &lt;strong&gt;HERE API&lt;/strong&gt; 每月为开发人员提供的请求不超过 250,000 个，包括地理编码和路线。虽然某些命令（例如 &lt;code&gt;osrmtime&lt;/code&gt;）可以使用离线地图进行无限制计算，但它们并不用户友好，因其要求用户执行许多复杂且耗时的任务，例如下载巨大的地图文件。&lt;/p&gt;
&lt;p&gt;对于百度地图而言，原文作者提到，&lt;code&gt;cntraveltime&lt;/code&gt; 每天有 30,000 次路线规划配额，并根据注册密钥的验证在坐标和实际地址之间进行 300,000 次转换。然而截止 2024 年末的实际情况是，个人用户每日仅有 5000 个地理编码服务和 5000 个路由服务，只有部分服务可以免费申请，而企业开发者用户才能拥有每日服务额度为 30 万个地理编码服务和 3 万个路线服务 &lt;a href=&quot;https://lbsyun.baidu.com/cashier/quota&quot;&gt;-Link-&lt;/a&gt;）。但总而言之，为中国用户量身定做的 &lt;code&gt;cntraveltime&lt;/code&gt; 命令还是能够满足大部分的用户需求。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 准备工作&lt;/h2&gt;
&lt;h3&gt;3.1 获取百度地图 API Key&lt;/h3&gt;
&lt;p&gt;本节来自原文附录。我们在使用 &lt;code&gt;cntraveltime&lt;/code&gt; 之前，用户必须获取百度地图 &lt;strong&gt;API Key&lt;/strong&gt;，该 API Key 和 &lt;code&gt;cngcode&lt;/code&gt;和&lt;code&gt;cnaddress&lt;/code&gt; 一样，在&lt;a href=&quot;http://lbsyun.baidu.com/&quot;&gt;百度地图开放平台&lt;/a&gt;上注册。以下是具体的申请 API Key 的详细流程。&lt;/p&gt;
&lt;h4&gt;Step1: 注册登录百度账号&lt;/h4&gt;
&lt;p&gt;首先，用户必须注册一个百度账号。这是百度为所有用户使用百度地图开放平台资源设定的前提条件。具体步骤如下：用户需要访问&lt;a href=&quot;https://www.baidu.com/&quot;&gt;百度主页&lt;/a&gt;，点击右上角的【登录】按钮，在空白处填写账号和密码（见图 1）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig1_cntraveltime%E5%9B%BE1_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;center&gt;
图 1
&lt;/center&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;若用户尚未拥有百度账号，可以点击图 1 主界面右上角的登录，并点击弹窗右下角的【立即注册】按钮，进入百度账号注册页面。在百度帐号注册页面，用户需要按照页面提示输入所需信息：用户名、手机号、密码和手机验证码等（见图 2）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig2_cntraveltime%E5%9B%BE2_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;center&gt;
图 2
&lt;/center&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;注册成功后，用户可以访问&lt;a href=&quot;https://lbsyun.baidu.com/index.php&quot;&gt;官方网站&lt;/a&gt;，右上角会自动显示登录信息，表示百度账号已注册成功，可以进行前期工作了（见图 3）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig3_cntraveltime%E5%9B%BE3_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;center&gt;
图 3
&lt;/center&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h4&gt;Step2: 开发者认证&lt;/h4&gt;
&lt;p&gt;要获得 API 额度，用户除了需要百度账号，还需要开发者身份注册。如上图 3 所示，用户首先点击右上角的【控制台】，进入开发者注册界面，然后如下图 4 所示，按照要求提供姓名、手机号码及验证码、企业名称和邮箱等相关信息，该注册方式能够获得更多 API 额度。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig4_cntraveltime%E5%9B%BE4_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;center&gt;
图 4
&lt;/center&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;若用户注册为个人开发者，则需点击图 4 下方【我不是企业员工】或者【我是学生】按钮进行注册。以学生身份注册为例，需提供姓名、手机号码、个人邮箱、学校名称、专业、毕业日期、身份证号、认证地址和学生证图片等认证信息，并须提交使用原因（使用场景）（见图 5）。填写信息完毕并通过人脸识别后，需要等待审核一段时间生成认证结果。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig5_cntraveltime%E5%9B%BE5_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;center&gt;
图 5
&lt;/center&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h4&gt;Step3: 申请百度地图 API Key&lt;/h4&gt;
&lt;p&gt;开发者认证流程完成后，可以通过点击【应用管理】-【我的应用】-【创建应用】来申请新的百度地图 API 密钥供 &lt;code&gt;cntraveltime&lt;/code&gt; 使用（见图 6）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig6_cntraveltime%E5%9B%BE6_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;center&gt;
图 6
&lt;/center&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;点击【创建应用】后弹出的 API key 申请表中【应用类型】默认为【服务端】选项，往下拉界面填写 IP 白名单中的电脑 IP 地址，确保只有申请者自己才能使用这个 key。但如果希望授权后任何 IP 地址的电脑都能使用这个 key，那么可以在白名单中填写 0.0.0.0/0，页面应该如图 7 所示。申请 key 完成后，控制台相应页面会显示新的 API key，可以将 key 复制到任何需要使用的地方。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig7_cntraveltime%E5%9B%BE7_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;center&gt;
图 7
&lt;/center&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;最后我们可在控制台的【额度管理】-【我的额度】部分查看各应用每日调用服务次数上限。如图 8 所示，对于个人开发者用户而言，目前只有部分服务能够免费申请，额度为每日的 5000 个地理编码服务和 5000 个路由服务，其他则需要根据实际需求购买。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig8_cntraveltime%E5%9B%BE8_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;center&gt;
图 8
&lt;/center&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. cntraveltime 语法&lt;/h2&gt;
&lt;p&gt;我们得到 API key 后，就可以开始进行数据操作了。需要注意的是，&lt;code&gt;cntraveltime&lt;/code&gt; 命令只接受经纬度作为输入信息的位置。所以中文地址必须先用 &lt;code&gt;cngcode&lt;/code&gt; 命令转换成经纬度。另外提醒读者，&lt;code&gt;cngcode&lt;/code&gt; 和 &lt;code&gt;cntraveltime&lt;/code&gt; 都需要百度地图开放平台 API 来发起操作，注册后生成的同一个 AK CODE 可以用于两个命令，因此可能不需要为 &lt;code&gt;cngcode&lt;/code&gt; 申请另一个 AK CODE （AK CODE 如图 9 所示，图中 CODE 仅为演示所用）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig9_cntraveltime%E5%9B%BE9_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;center&gt;
图 9
&lt;/center&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;code&gt;cntraveltime&lt;/code&gt; 的语法如下：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;cntraveltime, baidukey(string) ///
     startlat(varname)   ///
     startlng(varname)   ///
     endlat(varname)     ///
     endlong(varname)    ///
     detail mode(string) ///
     tactic(#)           ///
     intercitytype(#)    ///
     intercitytactic(#)
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;4.1 选项&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;baidukey(string)&lt;/code&gt; 表示用户的 API 密钥，是必需要填入的。典型的百度地图 API 密钥是字母数字字符串，用户必须明确指定它。如果用户已经拥有百度地图 API 密钥，例如 CH8eakl6UTlEb1OakeWYvofh，则必须将选项指定为 &lt;code&gt;baidukey(CH8eakl6UTlEb1OakeWYvofh)&lt;/code&gt;（此处使用的 API 密钥仅供说明之用，不可供使用）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;startlat(varname)&lt;/code&gt; 和 &lt;code&gt;startlng(varname)&lt;/code&gt; 指定出发地的经纬度，必需填入。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;endlat(varname)&lt;/code&gt; 和 &lt;code&gt;endlng(varname)&lt;/code&gt; 指定目的地的经纬度，必需填入。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;detail&lt;/code&gt; 提供有关 &lt;code&gt;cntraveltime&lt;/code&gt; 选择的路线的文本描述。默认情况下，不保存路线描述。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;mode(string)&lt;/code&gt; 指定出行方式，默认为 &lt;code&gt;mode(&quot;public&quot;)&lt;/code&gt;，可用的路线类型有&lt;code&gt;public&lt;/code&gt;、&lt;code&gt;car&lt;/code&gt;和 &lt;code&gt;bike&lt;/code&gt;。也即公共交通、汽车驾驶以及骑行。根据所选的交通方式计算两个指定地点之间的行驶距离和行驶时间，如果用户指定了上述以外的交通方式，例如地铁 &lt;code&gt;subway&lt;/code&gt;，则会出现报错。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;tactic(#)&lt;/code&gt; 指定当给定地点位于同一城市时的详细选择参数。需要注意的是，对于不同的交通方式，&lt;code&gt;tactic()&lt;/code&gt; 的有效范围和含义也不同。该选项接受一个数字作为参数，下表 1 显示用不同的数字代表不同选择如下：&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;表 1 &lt;code&gt;tactic()&lt;/code&gt;中的有效数字&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;mode()&lt;/th&gt;
&lt;th&gt;valid number in tactic()&lt;/th&gt;
&lt;th&gt;meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;pubic&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;默认&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pubic&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;少转车&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pubic&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;少走路&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pubic&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;不坐地铁&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pubic&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;尽可能快&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pubic&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;地铁&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;car&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;默认&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;car&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;避开高速&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;car&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;高速优先&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;car&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;避开拥堵&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;car&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;避开收费站&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;car&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;4 和 5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;car&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;3 和 4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;car&lt;/td&gt;
&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;4 和 6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;car&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;6 和 8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;car&lt;/td&gt;
&lt;td&gt;11&lt;/td&gt;
&lt;td&gt;3 和 6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;bike&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;默认&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;bike&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;电动车&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;intercitytype(#)&lt;/code&gt; 指定当给定位置位于不同城市时的具体偏好。请注意，此选项仅在选择 &lt;code&gt;mode(&quot;public&quot;)&lt;/code&gt; 选项且两个位置位于同一城市时有效。此选项接受 0、1 或 2 作为输入。这些数字对应以下偏好：0：默认、火车；1：飞机；2：公共汽车。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;intercitytactic(#)&lt;/code&gt; 指定跨城市公共交通的优先级要求。此选项接受 0、1 或 2 作为输入。这些数字对应以下偏好：0：默认，尽可能快；1：尽早出发；2：尽可能便宜。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;font color=&quot;red&quot;&gt;特别注意：&lt;/font&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;要注意的是，&lt;code&gt;cntraveltime&lt;/code&gt; 命令原文以及帮助文件 (&lt;code&gt;cntraveltime.sthlp&lt;/code&gt;) 中列出的选项名称与 &lt;strong&gt;ado&lt;/strong&gt; 文档中列出的选项名称不一致。想要正常运行，需要根据下表第二列的选项名称来写命令：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:left&quot;&gt;帮助文件中的选项名称&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;实际选项名称&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;code&gt;start_lat()&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;code&gt;startlat()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;code&gt;start_long()&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;code&gt;startlng()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;code&gt;end_lat()&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;code&gt;endlat()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;code&gt;end_long()&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;code&gt;endlng()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;code&gt;route_option&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;code&gt;tactic&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;code&gt;intercity_route_option&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;code&gt;intercitytactic&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;具体信息可以原始程序文件 &lt;strong&gt;cntraveltime.ado&lt;/strong&gt; 中查询，命令为：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;/*
ssc install cntraveltime, replace // 安装 cntraveltime 命令
ssc install adoedit, replace      // 安装 adoedit 命令
*/

adoedit cntraveltime  // 查看原始 ado 文档
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;4.2 示例&lt;/h3&gt;
&lt;p&gt;我们从一个小数据集开始，来说明如何使用 &lt;code&gt;cntraveltime&lt;/code&gt;。这个数据集有两个变量：&lt;code&gt;startaddress&lt;/code&gt; 和 &lt;code&gt;endaddress&lt;/code&gt;。两个地址变量中的样本包含了省名、城市名、区名和现存地址，且都嵌入在一个字符串中。例如，第一个起始地址为：“河南省开封市顺河区明伦街 85 号河南大学”。我们使用 &lt;code&gt;cngcode&lt;/code&gt; 命令将其转换为纬度和经度作为第一步。在继续之前，我们提醒读者，本文中所有经纬度的大地坐标系统都是 BD09II。由于 &lt;code&gt;cngcode&lt;/code&gt; 和 &lt;code&gt;cntraveltime&lt;/code&gt; 都默认使用此大地坐标系统，因此结果的计算不会出现偏差。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;需要注意的是&lt;/strong&gt;：由于百度地图的实时信息更新、修正或其他修改变动，下文演示结果可能随时更改，读者需自行验证数据的准确性及其对特定目的的适用性，并对因使用数据所造成的后果负责。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;* 设置 baidukey()
  global BaiduKey CH8eakl6UTlEb1OakeWYvofh

* 导入地址数据
  use &quot;https://cntraveltime.oss-cn-hangzhou.aliyuncs.com/data1.dta&quot;

* 使用 cngcode 获取坐标
cngcode, baidukey($BaiduKey) ///
         fulladdress(startaddress) ///
         lat(start_lat) long(start_lon)

cngcode, baidukey($BaiduKey) ///
         fulladdress(endaddress) ///
         lat(end_lat) long(end_lon)

* 坐标结果展示
list start_lon - end_lat
+-----------------------------------------------+
| start_lon   start_lat     end_lon     end_lat |
|-----------------------------------------------|
| 114.37568   34.817677   114.42592   30.519116 |
| 114.36877   30.550126   114.30759   30.588503 |
| 114.36877   30.550126   114.42592   30.519116 |
| 114.36877   30.550126   114.36371    30.48178 |
| 116.60956   40.083812   116.40396   39.915119 |
+-----------------------------------------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;现在我们可以使用 &lt;code&gt;cntraveltime&lt;/code&gt; 计算距离和通行时间。同时我们使用 &lt;code&gt;geodist&lt;/code&gt; 来获取大地距离以进行比较。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;* 使用 geodist 计算大地距离
. geodist start_lat start_lon end_lat end_lon, gen(geo_dist)

* 使用 cntraveltime 计算距离和通行时间
cntraveltime, baidukey($BaiduKey) ///
     startlat( start_lat) ///
     startlng( start_lon) ///
     endlat( end_lat)     ///
     endlng( end_lon)     ///
     mode(car) detail

* 结果展示
list geo_dist distance duration // duration 计数单位为秒

+---------------------------------+
|  geo_dist   distance   duration |
|---------------------------------|
|  476.7285     543549      21877 |
| 7.2493859       9184        943 |
| 6.4727832      10725       1277 |
| 7.5924936      11867       1502 |
| 25.672872      30386       2473 |
+---------------------------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;前四次观测的起始地址为原文作者工作地点，结束地址分别为作者工作地点附近的某所高校和著名景点武汉长江大桥。由于&lt;code&gt;cntraveltime&lt;/code&gt;只接受经纬度坐标作为两个地点的输入，因此需要通过 &lt;code&gt;cngcode&lt;/code&gt; 将地址转换为对应的坐标。同时，还需要通过 &lt;code&gt;geodist&lt;/code&gt; 计算给定数据的大地距离，该变量标记为 &lt;code&gt;geo_dist&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;之所以特意选择这几个地址，是因为两个地点之间的大地距离相对于行程距离会产生不同的结果。从以上观测结果可以看出，通过 &lt;code&gt;cntraveltime&lt;/code&gt; 命令获得的武汉大学与武汉长江大桥之间的实际行程，第二次观测为 9.184 公里，而第三次观测获得的武汉大学与华中科技大学之间的行程为 10.725 公里。另一方面，我们发现第二次观测的大地距离为 7.25 公里，第三次观测的大地距离为 6.47 公里。可以很明显看出两类距离有着较为明显的差异。&lt;/p&gt;
&lt;p&gt;为了说明行驶距离和大地距离之间的区别，我们选取第四个观测值并以图形方式进行说明，以便于理解。如图 10 所示，下图中的起点是北京首都国际机场，终点是天安门广场。直线表示（红色箭头）的距离是地理距离，多段折线表示的距离是实际行程距离。从地图上可以清楚地看出，人们从出发点到目的地的行进路线是曲折的，也更加现实。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata%E5%9C%B0%E5%9B%BE%EF%BC%9Acntraveltime-%E5%8A%A9%E4%BD%A0%E8%B6%B3%E4%B8%8D%E5%87%BA%E6%88%B7%E4%B8%88%E9%87%8F%E4%B8%AD%E5%9B%BD_fig10_cntraveltime%E5%9B%BE10_%E8%B0%A2%E5%98%89%E4%BC%9F.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;center&gt;
图 9 （来源：Google Maps）
&lt;/center&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;基于以上发现，我们可以自信地得出结论，在现实生活中，尤其是在大城市中，球面距离不能有效地测量两个地点之间的真实距离，而行驶距离和时间考虑了当地的交通环境，使结果更有意义。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. 小结&lt;/h2&gt;
&lt;p&gt;引用作者原话进行总结：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;本文介绍了 &lt;code&gt;cntraveltime&lt;/code&gt; 命令，它可以计算中国境内两个地点之间的旅行距离和时间。该命令功能强大，支持多种选项，处理速度快且准确性高，非常适合需要计算国内旅行距离和时间的用户。因此，它是一些用于计算中国地点的命令的理想补充。&lt;/p&gt;
&lt;p&gt;作为基于 API 的命令，&lt;code&gt;cntraveltime&lt;/code&gt; 占用的磁盘空间非常小，并且具有多种扩展功能。此外，我们也非常感谢服务提供商的稳定性，因此预计该命令在可预见的未来不会进行大幅修改。&lt;/p&gt;
&lt;p&gt;在接下来的工作中，我们计划进一步优化该命令，提升其执行效率，并排查计算失败的原因。我们希望我们的努力能为未来的 Stata 用户社区带来更多的帮助。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;6. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh 地图 map, md0 nocat&lt;/code&gt;&lt;br&gt;
安装最新版 lianxh 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E4%B8%87%E8%8E%89&quot;&gt;万莉&lt;/a&gt;, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/560.html&quot;&gt;Stata绘图：世行可视化案例-条形图-密度函数图-地图-断点回归图-散点图&lt;/a&gt;, 连享会 No.560.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E4%B8%87%E8%8E%89&quot;&gt;万莉&lt;/a&gt;, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/401.html&quot;&gt;Stata：空间计量之用-spmap-绘制地图&lt;/a&gt;, 连享会 No.401.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E5%86%B7%E8%90%B1&quot;&gt;冷萱&lt;/a&gt;, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/509.html&quot;&gt;Stata：我和她离多远？基于百度地图API的地理距离计算&lt;/a&gt;, 连享会 No.509.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E5%BC%A0%E5%BC%9B&quot;&gt;张弛&lt;/a&gt;, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1401.html&quot;&gt;Stata 绘图：用 geoplot 绘制中国地图&lt;/a&gt;, 连享会 No.1401.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E5%BD%AD%E6%98%BE%E8%80%BF&quot;&gt;彭显耿&lt;/a&gt;, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/475.html&quot;&gt;GIS地图制作栅格计算器的应用&lt;/a&gt;, 连享会 No.475.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E6%B5%A6%E8%BF%9B%E5%8D%9A&quot;&gt;浦进博&lt;/a&gt;, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1527.html&quot;&gt;Stata地图：geoboundary-轻松获取全球地图数据&lt;/a&gt;, 连享会 No.1527.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E6%B5%A6%E8%BF%9B%E5%8D%9A&quot;&gt;浦进博&lt;/a&gt;, &lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E9%82%93%E9%93%A8%E9%9B%84&quot;&gt;邓铨雄&lt;/a&gt;, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1383.html&quot;&gt;Stata绘图：地图神器geoplot&lt;/a&gt;, 连享会 No.1383.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E7%8E%8B%E5%8D%93&quot;&gt;王卓&lt;/a&gt;, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/922.html&quot;&gt;Python：绘制动态地图-pyecharts&lt;/a&gt;, 连享会 No.922.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E7%8E%8B%E5%8D%93&quot;&gt;王卓&lt;/a&gt;, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1428.html&quot;&gt;Stata绘图：政治关联可视化&lt;/a&gt;, 连享会 No.1428.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E7%8E%8B%E5%8D%93&quot;&gt;王卓&lt;/a&gt;, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1427.html&quot;&gt;Stata绘图：政治关联可视化-B612&lt;/a&gt;, 连享会 No.1427.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E8%82%96%E8%95%8A&quot;&gt;肖蕊&lt;/a&gt;, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/925.html&quot;&gt;Stata：地图绘制命令介绍-maptile&lt;/a&gt;, 连享会 No.925.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E9%99%88%E5%8D%93%E7%84%B6&quot;&gt;陈卓然&lt;/a&gt;, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/984.html&quot;&gt;Stata绘图：绘制二维地图和中国地图-geo2xy&lt;/a&gt;, 连享会 No.984.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E9%AB%98%E5%A8%9C%E5%A8%9C&quot;&gt;高娜娜&lt;/a&gt;, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/398.html&quot;&gt;Stata：用-mapch-命令绘制“事件链”&lt;/a&gt;, 连享会 No.398.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1539.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1539.html</guid><pubDate>Tue, 21 Jan 2025 16:00:00 GMT</pubDate><author>谢嘉伟</author></item><item><title>Stata：如何永久修改我的PERSONAL文件夹的位置？</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者：&lt;/strong&gt; 连玉君 (中山大学)&lt;br&gt;
&lt;strong&gt;邮箱：&lt;/strong&gt; &lt;a href=&quot;mailto:arlionn@163.com&quot;&gt;arlionn@163.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;: Stata：如何永久修改我的PERSONAL文件夹的位置？&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;: profile, 个人文件夹, Stata设定, profile.do&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Stata 寒假班的学员提出了一个问题：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;请问一下，我想要永久的更改“个人文件夹”路径至 &lt;strong&gt;D:\stata\personal&lt;/strong&gt;，我要如何设定？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;我把这个问题贴到了 &lt;a href=&quot;https://chat.deepseek.com/&quot;&gt;DeepSeek&lt;/a&gt; 中，它的 &lt;a href=&quot;https://chat.deepseek.com/a/chat/s/5d056233-b4da-471f-92fc-ef10530055b6&quot;&gt;回答&lt;/a&gt; 很全面，逻辑也很清晰。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;要永久更改 Stata 的“个人文件夹”路径至 &lt;code&gt;D:\stata\personal&lt;/code&gt;，请按以下步骤操作：&lt;/p&gt;
&lt;h2&gt;方法一：通过 Stata 命令&lt;/h2&gt;
&lt;p&gt;如果只是想临时更改 &lt;strong&gt;PERSONAL&lt;/strong&gt; 文件夹的路径设定，可以如下方式。需要注意的是，当你关闭 Stata 时，这些设定会自动失效。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在 Stata 命令窗口中输入：&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;sysdir set PERSONAL &quot;D:\stata\personal&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;验证路径&lt;/strong&gt;：&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;sysdir
&lt;/code&gt;&lt;/pre&gt;
确认 &lt;code&gt;PERSONAL&lt;/code&gt; 路径已更新为 &lt;code&gt;D:\stata\personal&lt;/code&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;方法二：手动修改配置文件&lt;/h2&gt;
&lt;p&gt;要想永久性设定 &lt;strong&gt;PERSONAL&lt;/strong&gt; 文件夹的路径，可以通过修改 &lt;strong&gt;profile.do&lt;/strong&gt; 文件来实现，参见 &lt;a href=&quot;https://www.lianxh.cn/details/77.html&quot;&gt;Stata：聊聊 profile.do 文件&lt;/a&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;原理&lt;/strong&gt;：Stata 启动时，会到安装目录下查找名为 &lt;code&gt;profile.do&lt;/code&gt; 的 dofile，若有则自动执行该文档中的所有命令 (即，&lt;code&gt;do profile.do&lt;/code&gt;)。因此，你可以把一些常规的设定都放在 &lt;code&gt;profile.do&lt;/code&gt; 中，比如，&lt;strong&gt;PERSONAL&lt;/strong&gt; 文件夹的默认路径，显示格式等。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;执行如下命令，直接打开 &lt;strong&gt;profile.do&lt;/strong&gt; 文档：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;doedit &quot;`c(sysdir_stata)&#39;profile.do&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在打开的 &lt;strong&gt;profile.do&lt;/strong&gt; 文件中，添加以下内容 (完成后，保存并关闭文件)：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;sysdir set PERSONAL &quot;D:\stata\personal&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;方法三：通过 Stata 界面&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;打开 Stata&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;进入设置&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;Windows: &lt;code&gt;Edit &amp;gt; Preferences &amp;gt; General Preferences&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;macOS: &lt;code&gt;Stata &amp;gt; Preferences &amp;gt; General Preferences&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;更改路径&lt;/strong&gt;：&lt;br&gt;
在 &lt;code&gt;General Preferences&lt;/code&gt; 中找到 &lt;code&gt;Personal folder&lt;/code&gt;，将其改为 &lt;code&gt;D:\stata\personal&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;保存设置&lt;/strong&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;补充说明：另一种打开 profile.do 文件的方法&lt;/h2&gt;
&lt;p&gt;输入 &lt;code&gt;sysdir&lt;/code&gt; 命令，以确认 Stata 的安装路径（因人而异）：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. sysdir

   STATA: D:/stata17           // Stata安装路径
   ……
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;执行如下命令打开 &lt;strong&gt;profile.do&lt;/strong&gt; 文件：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;doedit &quot;D:/stata17/profile.do&quot; // doedit &quot;Stata安装路径/profile.do&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh profile&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;汪京, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1377.html&quot;&gt;Stata代码规范指南&lt;/a&gt;, 连享会 No.1377.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/16.html&quot;&gt;Stata入门&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;游万海, 连玉君, 2019, &lt;a href=&quot;https://www.lianxh.cn/details/1.html&quot;&gt;Stata: 外部命令的搜索、安装与使用&lt;/a&gt;, 连享会 No.1.&lt;/li&gt;
&lt;li&gt;连玉君, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/77.html&quot;&gt;Stata：聊聊 profile.do 文件&lt;/a&gt;, 连享会 No.77.&lt;/li&gt;
&lt;li&gt;连玉君, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/672.html&quot;&gt;聊聊Stata中的profile文件-第二季&lt;/a&gt;, 连享会 No.672.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1538.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1538.html</guid><pubDate>Mon, 20 Jan 2025 16:00:00 GMT</pubDate><author>连玉君</author></item><item><title>Stata：处理大型数据的一些建议</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：毕英睿 (中央财经大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:judybi2017@163.com&quot;&gt;judybi2017@163.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;：本文主要整理自「&lt;a href=&quot;https://www.statalist.org/forums/forum/general-stata-discussion/general/1513412-faster-to-re-load-data-or-preserve-restore&quot;&gt;faster to re-load data or preserve/restore?&lt;/a&gt;」，特此致谢！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;：Stata：处理大型数据的一些建议&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;：Stata，大型数据，preserve，restore，compress，fast，gcollapse&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 处理需求&lt;/h2&gt;
&lt;p&gt;在频繁根据不同规范折叠数据并运行回归时，如果数据量较大，通常需要 15-30 秒完成一次操作。那么，是重复使用 &lt;code&gt;restore&lt;/code&gt;/&lt;code&gt;preserve&lt;/code&gt; 更高效，还是每次直接清除 (clear) 并重新加载 (reload) 数据集更节省计算成本？&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 解决办法&lt;/h2&gt;
&lt;h3&gt;2.1 恢复数据&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;preserve&lt;/code&gt; 命令用于保留当前数据，确保程序结束后数据可以恢复；&lt;code&gt;restore&lt;/code&gt; 命令则用于强制恢复之前的保存状态。例如，如果需要观察删除部分数据后的样本，可以先使用 &lt;code&gt;preserve&lt;/code&gt; 保存数据，删除部分数据后进行分析，再通过 &lt;code&gt;restore&lt;/code&gt; 恢复已删除的样本。为确保数据完整性，可通过 &lt;code&gt;preserve&lt;/code&gt;-&lt;code&gt;restore&lt;/code&gt; 搭配处理数据。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. use auto, clear
. preserve
. drop in 1/15 // 删除前15行数据
. des          // 此时有59个观察值
. restore
. des          // 此时恢复到74个观察值
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;set max preservemem&lt;/code&gt; 的默认值为 1GB。如果将 amt 设置为 0B，&lt;code&gt;preserve&lt;/code&gt; 会始终使用磁盘存储；如果设置为 &lt;code&gt;.&lt;/code&gt;，&lt;code&gt;preserve&lt;/code&gt; 会使用操作系统允许的最大内存量。为提高速度，Stata MP 优先将数据集保存在内存中，只有当内存使用达到 max preservemem 限制时，才会切换到使用磁盘存储。而 Stata SE 和 Stata BE 通常运行在内存较少的设备上，因此始终将数据集存储在磁盘上。&lt;/p&gt;
&lt;h3&gt;2.2 修剪数据&lt;/h3&gt;
&lt;p&gt;请尽量精简数据，仅保留必要的观测值和变量。&lt;/p&gt;
&lt;p&gt;尽量选择占用空间较小的数据类型。例如，double 类型比 string 类型占用的空间大 8 倍。使用 &lt;code&gt;describe&lt;/code&gt; 命令可查看数据类型，使用 &lt;code&gt;compress&lt;/code&gt; 命令可通过优化数据类型来压缩数据大小。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;原类型&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;压缩类型&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;doubles&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;longs, ints, bytes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;floats&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ints or bytes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;longs&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ints or bytes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ints&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;bytes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;str#s&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;shorter str#s&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;strLs&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;str#s&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. use auto.dta, clear
. des
. compress
  variable mpg was int now byte
  variable rep78 was int now byte
  variable trunk was int now byte
  variable turn was int now byte
  variable make was str18 now str17
  (370 bytes saved)
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;2.3 fast 命令&lt;/h3&gt;
&lt;p&gt;使用 &lt;code&gt;collapse&lt;/code&gt; 命令结合 &lt;code&gt;fast&lt;/code&gt; 选项。&lt;code&gt;collapse&lt;/code&gt; 用于分组统计并生成汇总数据集。添加&lt;code&gt;fast&lt;/code&gt;选项可提高效率，但若用户中断 (Break)，原始数据集将无法恢复。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. collapse price mpg, by(foreign)
. list //样本数据仅保留汇总数据集

     +------------------------------+
     |  foreign     price       mpg |
     |------------------------------|
  1. | Domestic   6,072.4   19.8269 |
  2. |  Foreign   6,384.7   24.7727 |
     +------------------------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;2.4 使用 gcollapse 命令&lt;/h3&gt;
&lt;p&gt;除了上述方法，还可以使用 &lt;code&gt;gcollapse&lt;/code&gt; 和 &lt;code&gt;fcollapse&lt;/code&gt; 命令。其中，&lt;code&gt;fcollapse&lt;/code&gt; 新增了 &lt;code&gt;append&lt;/code&gt; 选项，可将汇总数据附加到原始数据集末尾。&lt;/p&gt;
&lt;p&gt;更多内容，可以参考连享会推文：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/8f45dbd082989.html&quot;&gt;Stata：一组大幅提升运算速度的命令-gtools&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/5e43d7d1f05f3.html&quot;&gt;Stata新命令：超级强大的-gtools-命令组&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh 数据处理, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;丁晨, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/596.html&quot;&gt;Stata数据处理：通过API获取经济数据&lt;/a&gt;, 连享会 No.596.&lt;/li&gt;
&lt;li&gt;严子凯, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/139.html&quot;&gt;滚动吧统计量！Stata数据处理&lt;/a&gt;, 连享会 No.139.&lt;/li&gt;
&lt;li&gt;何庆红, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/1001.html&quot;&gt;Stata数据处理：纵横长宽转换-reshape命令一文读懂！（上）&lt;/a&gt;, 连享会 No.1001.&lt;/li&gt;
&lt;li&gt;侯新烁, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/324.html&quot;&gt;Stata数据处理：用-astile-快速创建分组&lt;/a&gt;, 连享会 No.324.&lt;/li&gt;
&lt;li&gt;侯新烁, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/325.html&quot;&gt;Stata数据处理：用-efolder-快速生成文件夹和子文件夹&lt;/a&gt;, 连享会 No.325.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/43.html&quot;&gt;Stata命令&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;冯超楠, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1061.html&quot;&gt;Stata数据处理：模糊匹配-reclink2-matchit-strgroup&lt;/a&gt;, 连享会 No.1061.&lt;/li&gt;
&lt;li&gt;刘亮, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/107.html&quot;&gt;Stata: 约翰霍普金斯大学 COVID-19 疫情数据处理及可视化&lt;/a&gt;, 连享会 No.107.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/37.html&quot;&gt;Python-R-Matlab&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;刘晓飞, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1414.html&quot;&gt;R语言：基本的数据处理和统计分析实例&lt;/a&gt;, 连享会 No.1414.&lt;/li&gt;
&lt;li&gt;刘梓茵, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1196.html&quot;&gt;Stata数据处理：缺失值类型及应对方法&lt;/a&gt;, 连享会 No.1196.&lt;/li&gt;
&lt;li&gt;刘欣妍, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/451.html&quot;&gt;Stata数据处理：各种求和方式一览&lt;/a&gt;, 连享会 No.451.&lt;/li&gt;
&lt;li&gt;刘欣妍, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/459.html&quot;&gt;Stata：如何保留时间连续的样本&lt;/a&gt;, 连享会 No.459.&lt;/li&gt;
&lt;li&gt;刘欣妍, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/461.html&quot;&gt;Stata：数据合并与匹配-merge-reclink&lt;/a&gt;, 连享会 No.461.&lt;/li&gt;
&lt;li&gt;初虹, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/923.html&quot;&gt;Stata数据处理：一文搞定CEIC数据库&lt;/a&gt;, 连享会 No.923.&lt;/li&gt;
&lt;li&gt;初虹, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/895.html&quot;&gt;Stata数据处理：快来更新你的Stata-Workflow&lt;/a&gt;, 连享会 No.895.&lt;/li&gt;
&lt;li&gt;初虹, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/889.html&quot;&gt;Stata数据处理：清洗中国城市建设统计年鉴&lt;/a&gt;, 连享会 No.889.&lt;/li&gt;
&lt;li&gt;华晨, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/1002.html&quot;&gt;Stata数据处理：纵横长宽转换-reshape的兄弟-gather和spread.md&lt;/a&gt;, 连享会 No.1002.&lt;/li&gt;
&lt;li&gt;史柯, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/941.html&quot;&gt;Stata：时间序列数据转换-tstransform&lt;/a&gt;, 连享会 No.941.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;吴雄, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/316.html&quot;&gt;Stata数据处理：xtbalance-非平衡面板之转换&lt;/a&gt;, 连享会 No.316.&lt;/li&gt;
&lt;li&gt;周小强, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/872.html&quot;&gt;CFPS数据处理：少儿代答库与成人库匹配&lt;/a&gt;, 连享会 No.872.&lt;/li&gt;
&lt;li&gt;周小强, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/936.html&quot;&gt;Stata数据处理：一月有几周？月度和周数据转换&lt;/a&gt;, 连享会 No.936.&lt;/li&gt;
&lt;li&gt;唐林, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1246.html&quot;&gt;Stata数据处理：清除命令介绍和对比-clear-drop-discard&lt;/a&gt;, 连享会 No.1246.&lt;/li&gt;
&lt;li&gt;夏书浩, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/607.html&quot;&gt;Stata：让缺失值一览无余&lt;/a&gt;, 连享会 No.607.&lt;/li&gt;
&lt;li&gt;孟佳音, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/693.html&quot;&gt;Stata数据处理：缺失值与多重补漏分析（一）&lt;/a&gt;, 连享会 No.693.&lt;/li&gt;
&lt;li&gt;孟佳音, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/695.html&quot;&gt;Stata数据处理：缺失值与多重补漏分析（三）&lt;/a&gt;, 连享会 No.695.&lt;/li&gt;
&lt;li&gt;孟佳音, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/694.html&quot;&gt;Stata数据处理：缺失值与多重补漏分析（二）&lt;/a&gt;, 连享会 No.694.&lt;/li&gt;
&lt;li&gt;宋森安, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/918.html&quot;&gt;CHARLS-中国健康与养老调查数据库清洗（二）&lt;/a&gt;, 连享会 No.918.&lt;/li&gt;
&lt;li&gt;宋森安, 李青塬, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/896.html&quot;&gt;CHARLS-中国健康与养老调查数据库清洗（一）&lt;/a&gt;, 连享会 No.896.&lt;/li&gt;
&lt;li&gt;展一帆, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/483.html&quot;&gt;Stata数据处理：条件函数知多少？&lt;/a&gt;, 连享会 No.483.&lt;/li&gt;
&lt;li&gt;展金永, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/281.html&quot;&gt;Stata新命令-tobalance：非平行面板转换为平行面板数据&lt;/a&gt;, 连享会 No.281.&lt;/li&gt;
&lt;li&gt;左祥太, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/767.html&quot;&gt;Stata数据处理：快速合并与编码-encodefrom&lt;/a&gt;, 连享会 No.767.&lt;/li&gt;
&lt;li&gt;巴宁, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/758.html&quot;&gt;Stata 数据处理：iefieldkit 命令介绍&lt;/a&gt;, 连享会 No.758.&lt;/li&gt;
&lt;li&gt;廖俊超, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/313.html&quot;&gt;Stata数据处理：FRED数据导入问题的解决方案&lt;/a&gt;, 连享会 No.313.&lt;/li&gt;
&lt;li&gt;张春雷, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1146.html&quot;&gt;多变量排序问题：以中国工业企业数据库为例&lt;/a&gt;, 连享会 No.1146.&lt;/li&gt;
&lt;li&gt;徐嘉树, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/755.html&quot;&gt;Stata：如何同时对多个数据框操作-frame&lt;/a&gt;, 连享会 No.755.&lt;/li&gt;
&lt;li&gt;朱红兵, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/322.html&quot;&gt;Stata数据处理：ascol-mtoq-日收益转周-月-季-年度数据&lt;/a&gt;, 连享会 No.322.&lt;/li&gt;
&lt;li&gt;朱菲菲, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1276.html&quot;&gt;Stata：导入年度、季度、月度等频数面板数据-xtimportu&lt;/a&gt;, 连享会 No.1276.&lt;/li&gt;
&lt;li&gt;李依, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/950.html&quot;&gt;Stata数据处理：将字符变量编码为数值变量-encoder&lt;/a&gt;, 连享会 No.950.&lt;/li&gt;
&lt;li&gt;李珊珊, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1212.html&quot;&gt;CGSS：中国综合社会调查数据清洗&lt;/a&gt;, 连享会 No.1212.&lt;/li&gt;
&lt;li&gt;李珍, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/326.html&quot;&gt;Stata数据处理：统计组内非重复值个数&lt;/a&gt;, 连享会 No.326.&lt;/li&gt;
&lt;li&gt;李祉豪, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1526.html&quot;&gt;Stata数据处理：跨国面板数据描述性统计分析-putexcel&lt;/a&gt;, 连享会 No.1526.&lt;/li&gt;
&lt;li&gt;杨子安, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1282.html&quot;&gt;Stata面板数据处理：经理人任期计算&lt;/a&gt;, 连享会 No.1282.&lt;/li&gt;
&lt;li&gt;杨涵慧, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1463.html&quot;&gt;令人相见恨晚的 Stata 命令&lt;/a&gt;, 连享会 No.1463.&lt;/li&gt;
&lt;li&gt;林佳辉, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/319.html&quot;&gt;Stata数据处理：字符型日期变量的转换&lt;/a&gt;, 连享会 No.319.&lt;/li&gt;
&lt;li&gt;梁淑珍, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1051.html&quot;&gt;Stata数据处理：批量重命名变量的技巧-rename&lt;/a&gt;, 连享会 No.1051.&lt;/li&gt;
&lt;li&gt;毕英睿, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1234.html&quot;&gt;取对数：如何应对零值和负数&lt;/a&gt;, 连享会 No.1234.&lt;/li&gt;
&lt;li&gt;涂冰倩, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/686.html&quot;&gt;Stata数据处理：一文读懂微观数据库清理（上）&lt;/a&gt;, 连享会 No.686.&lt;/li&gt;
&lt;li&gt;涂冰倩, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/687.html&quot;&gt;Stata数据处理：一文读懂微观数据库清理（下）&lt;/a&gt;, 连享会 No.687.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1537.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1537.html</guid><pubDate>Sun, 19 Jan 2025 16:00:00 GMT</pubDate><author>毕英睿</author></item><item><title>前沿班：政策评价新方法</title><description>&lt;center&gt;
&lt;h1&gt;连享会 · 2025 寒假班&lt;/h1&gt;
&lt;/center&gt;
&lt;h2&gt;✨ 前沿班&lt;/h2&gt;
&lt;h3&gt;1.课程概览&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;时间&lt;/strong&gt;：2025 年 1 月 21-24 日 (四天)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;方式&lt;/strong&gt;：网络直播 + 30 天回放&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;授课嘉宾&lt;/strong&gt;：杨海生 (中山大学)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;授课安排&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;授课方式&lt;/strong&gt;：提供全套 R + Stata 程序、数据和核心论文复现资料 (开课前一周发送)。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;授课时间&lt;/strong&gt;：上午 9:00-12:00，下午 14:30-17:30 (17:30-18:00 答疑)。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;全程答疑&lt;/strong&gt;：由 10 位经验丰富的同学组成的助教团队会在课程群中全程答疑，并对答疑接龙文档进行详细的记录和分类，公布于 &lt;a href=&quot;https://gitee.com/arlionn/PX/wikis&quot;&gt;课程主页&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;课程详情&lt;/strong&gt;：&lt;a href=&quot;https://www.lianxh.cn/PX.html&quot;&gt;https://www.lianxh.cn/PX.html&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;往期板书和答疑&lt;/strong&gt;：&lt;a href=&quot;https://gitee.com/arlionn/PX/wikis&quot;&gt;https://gitee.com/arlionn/PX/wikis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PDF 课纲&lt;/strong&gt;：&lt;a href=&quot;https://file.lianxh.cn/KC/lianxh_PX.pdf&quot;&gt;https://file.lianxh.cn/KC/lianxh_PX.pdf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;预读资料&lt;/strong&gt;：&lt;a href=&quot;https://www.jianguoyun.com/p/DexGNEQQtKiFCBiR0OsFIAA&quot;&gt;-点击下载参考文献-&lt;/a&gt; | &lt;a href=&quot;https://gitee.com/arlionn/stata/wikis/TextBooks/TextBooks.md&quot;&gt;Text Books&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;报名链接&lt;/strong&gt;：&lt;a href=&quot;https://www.wjx.top/vm/Ot5g7G4.aspx#&quot;&gt;https://www.wjx.top/vm/Ot5g7G4.aspx#&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;2.课程特色&lt;/h3&gt;
&lt;p&gt;本期课程为期 4 天，引入了多个政策评价的新方法和工具，如因果路径分析、调节变量自动筛选、政策强化学习和非参数因果推断等。这些方法不仅能够有效估计和检验政策效果，还能深入其作用机制，评估政策的公平性，及其在不同情境中的可迁移性。这些分析手段能够大幅扩展政策评价类研究的分析视角和研究深度。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20240527112737.png&quot; alt=&quot;20240527112737&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;3.主讲嘉宾&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined%E6%9D%A8%E6%B5%B7%E7%94%9F-%E5%B7%A5%E4%BD%9C%E7%85%A7-2022-180.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://lingnan.sysu.edu.cn/faculty/yanghaisheng&quot;&gt;杨海生&lt;/a&gt;，中山大学岭南学院经济学系副教授，主要研究领域为政策评估、AI 与资产定价、大数据与经济预测、系统性金融风险。在 ACM Computing Surveys, Expert Systems With Applications, Economic Geography, Pacific-Basin Finance Journal, Ecological Economics, Journal of International Financial Markets, Institutions &amp;amp; Money, Emerging Markets Review, Economic Modelling, Journal of Asian Economics, 《经济研究》, 《管理世界》, 《经济学（季刊）》, 《管理科学学报》, 《金融研究》, 《会计研究》, 《世界经济》, 《系统工程理论与实践》等国内外权威学术刊物上发表论文 40 余篇，主持和参与多项国家自然科学基金、广东省自然科学基金等课题研究。&lt;/p&gt;
&lt;h3&gt;4. 课程提要&lt;/h3&gt;
&lt;p&gt;本期课程引入了多个政策评价的新方法和工具。这些方法不仅能够有效估计和检验政策效果，还能深入其作用机制，评估政策的公平性，及其在不同情境中的可迁移性。这些分析手段能够大幅扩展政策评价类研究的分析视角和研究深度。核心内容如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;解锁政策影响的定量密码&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;遗漏变量检验 | 排他性检验&lt;/li&gt;
&lt;li&gt;安慰剂检验 | 平行趋势检验&lt;/li&gt;
&lt;li&gt;纽曼正交框架下的 DID | 匹配框架下的 DID | 多期 DID&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;揭示政策作用的内在机制&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;调节变量选择 | 调节效应检验 | 双重纠偏拉索估计&lt;/li&gt;
&lt;li&gt;有效中介识别 | 逐步检验法 | 两阶段工具变量法&lt;/li&gt;
&lt;li&gt;因果路径分析 | 连续型中介变量 | 多重中介检验&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;政策优化的智能革命&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;考虑时点与个体的政策学习：政策强化学习&lt;/li&gt;
&lt;li&gt;考虑网络的政策学习：溢出效应和同伴效应&lt;/li&gt;
&lt;li&gt;考虑市场均衡的政策优化 | 兼顾效率与公平的政策优化&lt;/li&gt;
&lt;li&gt;多臂 Qini 曲线 | 非参数因果推断&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;课程安排&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Day 1：&lt;/strong&gt; 遗漏变量检验 | 排他性检验 | 安慰剂检验 | 平行趋势检验&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Day 2：&lt;/strong&gt; 纽曼正交框架下的 DID | 匹配框架下的 DID | 多期 DID&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Day 3：&lt;/strong&gt; 影响机制检验 | 多重中介检验 | 因果路径分析&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Day 4：&lt;/strong&gt; 政策绩效评估 | 政策学习 | 政策优化&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;4.1 课程导引&lt;/h3&gt;
&lt;p&gt;近年来，政策评估领域的研究重心已发生深刻转变：研究者不再满足于回答「政策是否有效？」，而是更加关注「政策为何有效？」以及「如何进一步优化？」、「如何兼顾政策的公平性？」。然而，现有研究工具在应对复杂调节效应、解析政策作用机制，以及优化政策设计时，往往显得力不从心。本课程立足于最新的定量分析工具，旨在帮助学员突破传统研究的局限，深入剖析政策的影响机制，实现智能化的政策优化，为提升诸位的学术研究水平、发表高质量论文提供有力支持。&lt;/p&gt;
&lt;p&gt;本课程将系统深入地讲解&lt;strong&gt;政策影响的定量分析、政策作用机制的剖析，以及政策学习与优化&lt;/strong&gt;的前沿方法和工具。通过学习，学员可以更好地理解政策的深层次作用机理，并将这些方法运用到实际研究中，进一步推动政策设计和优化。&lt;/p&gt;
&lt;p&gt;我们将重点探讨以下 &lt;strong&gt;4 个关键问题&lt;/strong&gt;：&lt;/p&gt;
&lt;h3&gt;Q1. 如何避免在政策评估中遗漏关键变量，确保评估的准确性？&lt;/h3&gt;
&lt;p&gt;在政策评估中，尤其是「多期政策干预」或「多个处理变量并存」的场景中，我们经常面临遗漏关键变量问题。例如，多期 DID 模型中，不同阶段的政策可能相互影响，而遗漏关键变量会导致政策效果估计存在严重偏误。此时，借助「&lt;strong&gt;遗漏变量检验&lt;/strong&gt;」，我们可以识别那些未被观察到但可能对结果产生重要影响的因素；而「&lt;strong&gt;排他性检验&lt;/strong&gt;」则能够有效避免多个处理变量之间的“污染效应”（如补贴和税收政策的交叉影响），确保每个变量的独立影响被准确估计，如在多阶段政策干预时分离各阶段的政策效应。&lt;/p&gt;
&lt;h3&gt;Q2. 平行趋势检验与安慰剂检验到底有多关键？如果忽视这些检验，会带来哪些隐患？&lt;/h3&gt;
&lt;p&gt;平行趋势和安慰剂检验是确保 DID 估计有效的核心。然而，现有的平行趋势检验在应对复杂场景时存在诸多局限，尤其是在面对&lt;strong&gt;时间趋势变化&lt;/strong&gt;（如经济周期）、&lt;strong&gt;引入控制变量&lt;/strong&gt;（如个体特征和环境因素）以及&lt;strong&gt;多期政策干预&lt;/strong&gt;（如分阶段实施的政策）时，容易失效。原因在于，现有方法多以只能事后验证，无法在事前判断是否满足平性趋势假设，这可能导致政策效果估计出现偏误。本课程将引入一些新进提出的平行趋势和安慰剂检验方法，以便在&lt;strong&gt;复杂样本&lt;/strong&gt;（如多群体异质性）和&lt;strong&gt;多维数据场景&lt;/strong&gt;（如多个调节变量和交互效应）中，更精准地识别政策效应，实现更稳健的政策评估。&lt;/p&gt;
&lt;h3&gt;Q3. 在复杂政策环境下，如何识别有效渠道变量并评估其相对重要性？&lt;/h3&gt;
&lt;p&gt;在目前的多数研究中都只有一个调节变量，然而，在有些复杂的政策环境中，我们需要对比分析多个渠道变量（如收入水平、营商环境）对政策效果的调节作用。通过&lt;strong&gt;调节效应分析&lt;/strong&gt;和&lt;strong&gt;调节项选择工具&lt;/strong&gt;，我们可以在高维数据和异质性情境中（如多期政策或多群体差异）自动识别和筛选出显著的调节变量，并通过&lt;strong&gt;效应纠偏方法&lt;/strong&gt;确保估计的准确性。&lt;/p&gt;
&lt;p&gt;另一个重要的分析工具是：&lt;strong&gt;多重中介检验&lt;/strong&gt;。它可以分析处理变量通过多个中介机制影响结果的过程和路径。可以借助 Sequential G-estimation 方法估计不同中介变量对结果变量的直接和间接效应，以揭示不同机制之间的&lt;strong&gt;关联性 (协同效应) 及其相对重要性&lt;/strong&gt;。例如，我们可以借此评估「环境保护法」通过污染物减排、绿色创新、产业结构转型、排污权交易等多种机制对环境质量等影响，而重点在于分析这些机制的协同作用和相对重要性。&lt;/p&gt;
&lt;h3&gt;Q4. 如何利用政策学习在多变的政策环境中实现动态优化？&lt;/h3&gt;
&lt;p&gt;随着政策复杂度和环境动态性的增加，传统的静态优化方法已难以满足政策的实时调整需求。本课程将通过引入「&lt;strong&gt;政策强化学习&lt;/strong&gt;」，掌握如何在政策实施过程中，利用数据反馈进行动态优化，这在应对 &lt;strong&gt;个体异质性&lt;/strong&gt;、&lt;strong&gt;时间异质性&lt;/strong&gt; 和 &lt;strong&gt;网络效应&lt;/strong&gt; 等复杂情境中非常有用。这一方法能够最大化长期回报，并为我们提供一套在变化中作出最优决策的分析工具。此外，课程还将探索市场均衡状态下的政策效应及其优化策略，借助「&lt;strong&gt;多臂 Qini 曲线&lt;/strong&gt;」和「&lt;strong&gt;非参数因果推断&lt;/strong&gt;」来评估和比较不同政策的效果，从而设计出既能确保市场稳定性，又能最大化经济和社会效益的政策。&lt;/p&gt;
&lt;p&gt;本次课程内容的设置以回答上述问题为目标，紧贴政策研究中的现实挑战。我期望大家能学会利用这些最新的工具来提升自己的研究，解决在政策评估、机制分析和政策优化方面的困惑。课程中会使用一些顶刊的案例，通过复现和实操，帮助大家理解原理，并真正「&lt;strong&gt;用起来&lt;/strong&gt;」！&lt;/p&gt;
&lt;h2&gt;4.2 课程详情&lt;/h2&gt;
&lt;h3&gt;T1：政策效果的定量识别与评估（Day 1 + Day2）&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;遗漏变量检验
&lt;ul&gt;
&lt;li&gt;传统遗漏变量检验（Oyster，2019）&lt;/li&gt;
&lt;li&gt;不变因果预测（Invariant causal prediction）（Kook et al., 2024）&lt;/li&gt;
&lt;li&gt;双重有效/双重尖锐（Doubly-Valid/Doubly-Sharp）、敏感性分析（Dorn et al.，2024）&lt;/li&gt;
&lt;li&gt;基于模型辅助的敏感性分析（Tan，2024）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;排他性检验（Goldsmith et al.，2022）&lt;/li&gt;
&lt;li&gt;平行趋势检验
&lt;ul&gt;
&lt;li&gt;传统平行趋势检验&lt;/li&gt;
&lt;li&gt;Event Study（Freyaldenhoven et al.，2021；Roth，2022）&lt;/li&gt;
&lt;li&gt;Treeffuser（Beltran-Velezet al.，2024）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;安慰剂检验&lt;/li&gt;
&lt;li&gt;DID的新范式
&lt;ul&gt;
&lt;li&gt;TWFE与标准DID（Wooldridge, 2021）&lt;/li&gt;
&lt;li&gt;纽曼正交框架下的DID（包括TWFE，DRDID，DML，GRF, Npcausal）（Sant &amp;amp; Zhao，2020；Kennedy et al.，2023）&lt;/li&gt;
&lt;li&gt;匹配框架下的DID（包括：PSM-DID，SDID，WGAN）（Athey et al.，2021）&lt;/li&gt;
&lt;li&gt;多期DID（包括：CSDID，动态IPW，RIPW）（Arkhangelsky et al.，2021；Callaway &amp;amp; Sant，2021；Goodman-Bacon，2021；van den Berg &amp;amp; Gerard,2022）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;参考文献&lt;/strong&gt;：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;以下是处理后的完整引文信息：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Boileau, P., Leng, N., Hejazi, N. S., Van Der Laan, M., &amp;amp; Dudoit, S. (2024). A nonparametric framework for treatment effect modifier discovery in high dimensions. Journal of the Royal Statistical Society Series B: Statistical Methodology. &lt;a href=&quot;https://doi.org/10.1093/jrsssb/qkae084&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://arxiv.org/pdf/2304.05323&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=A%20nonparametric%20framework%20for%20treatment%20effect%20modifier%20discovery%20in%20high%20dimensions&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Beltran-Velez, N., Grande, A. A., Nazaret, A., Kucukelbir, A., &amp;amp; Blei, D. (2024). Treeffuser: Probabilistic Predictions via Conditional Diffusions with Gradient-Boosted Trees (Version 2). arXiv. &lt;a href=&quot;https://doi.org/10.48550/arXiv.2406.07658&quot;&gt;Link&lt;/a&gt; (rep), &lt;a href=&quot;https://arxiv.org/pdf/2406.07658.pdf&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Treeffuser:%20Probabilistic%20Predictions%20via%20Conditional%20Diffusions%20with%20Gradient-Boosted%20Trees%20(Version%202)&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Chang, H., Middleton, J. A., &amp;amp; Aronow, P. M. (2024). Exact Bias Correction for Linear Adjustment of Randomized Controlled Trials. Econometrica, 92(5), 1503–1519. &lt;a href=&quot;https://doi.org/10.3982/ECTA20289&quot;&gt;Link&lt;/a&gt; (rep), &lt;a href=&quot;http://sci-hub.ren/10.3982/ECTA20289&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Exact%20Bias%20Correction%20for%20Linear%20Adjustment%20of%20Randomized%20Controlled%20Trials&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Di Giuli, A., &amp;amp; Laux, P. A. (2022). The effect of media-linked directors on financing and external governance. Journal of Financial Economics, 145(2), 103–131. &lt;a href=&quot;https://doi.org/10.1016/j.jfineco.2021.07.017&quot;&gt;Link&lt;/a&gt; (rep), &lt;a href=&quot;http://sci-hub.ren/10.1016/j.jfineco.2021.07.017&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=The%20effect%20of%20media-linked%20directors%20on%20financing%20and%20external%20governance&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Dorn, J., Guo, K., &amp;amp; Kallus, N. (2024). Doubly-Valid/Doubly-Sharp Sensitivity Analysis for Causal Inference with Unmeasured Confounding. Journal of the American Statistical Association, 1–12. &lt;a href=&quot;https://doi.org/10.1080/01621459.2024.2335588&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://jacobdorn.info/files/DVDS.pdf&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Doubly-Valid/Doubly-Sharp%20Sensitivity%20Analysis%20for%20Causal%20Inference%20with%20Unmeasured%20Confounding&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Guo, X., Li, R., Liu, J., &amp;amp; Zeng, M., 2022. High-Dimensional Mediation Analysis for Selecting DNA Methylation Loci Mediating Childhood Trauma and Cortisol Stress Reactivity. &lt;em&gt;Journal of the American Statistical Association&lt;/em&gt;, 117(539), 1110-1121. &lt;a href=&quot;https://doi.org/10.1080/01621459.2022.2053136&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://file-lianxh.oss-cn-shenzhen.aliyuncs.com/Refs/Spring2024/Guo_2022_High-Dimensional_Mediation_Analysis.pdf&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=High-Dimensional%20Mediation%20Analysis%20for%20Selecting%20DNA%20Methylation%20Loci%20Mediating%20Childhood%20Trauma%20and%20Cortisol%20Stress%20Reactivity&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Guo, Z., Ćevid, D., &amp;amp; Bühlmann, P.,2022. Doubly debiased lasso: High-dimensional inference under hidden confounding. &lt;em&gt;Annals of Statistics&lt;/em&gt;, 50(3), 1320.&lt;a href=&quot;https://doi.org/10.1214/21-aos2152&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://arxiv.org/pdf/2004.03758&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Doubly%20debiased%20lasso:%20High-dimensional%20inference%20under%20hidden%20confounding&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Imai, K., Keele, L., &amp;amp; Yamamoto, T. (2010). Identification, inference and sensitivity analysis for causal mediation effects. &lt;em&gt;Statistical Science&lt;/em&gt;, 25(1), 51-71. &lt;a href=&quot;https://doi.org/10.1214/10-STS321&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://doi.org/10.1214/10-STS321&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Identification,+inference+and+sensitivity+analysis+for+causal+mediation+effects&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Kook, L., Saengkyongam, S., Lundborg, A. R., Hothorn, T., &amp;amp; Peters, J. (2024). Model-Based Causal Feature Selection for General Response Types. Journal of the American Statistical Association, 1–12. &lt;a href=&quot;https://doi.org/10.1080/01621459.2024.2395588&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://www.tandfonline.com/doi/epdf/10.1080/01621459.2024.2395588?needAccess=true&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;&quot;&gt;-PDF2-&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Model-Based%20Causal%20Feature%20Selection%20for%20General%20Response%20Types&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Lin, Y., Windmeijer, F., Song, X., &amp;amp; Fan, Q. (2024). On the instrumental variable estimation with many weak and invalid instruments. &lt;em&gt;Journal of the Royal Statistical Society Series B: Statistical Methodology&lt;/em&gt;, qkae025. &lt;a href=&quot;https://doi.org/10.1093/jrsssb/qkae025&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://doi.org/10.1093/jrssb/qkae025&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=On+the+instrumental+variable+estimation+with+many+weak+and+invalid+instruments&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ouyang, J., Tan, K. M., &amp;amp; Xu, G. (2023). High-dimensional inference for generalized linear models with hidden confounding. &lt;em&gt;The Journal of Machine Learning Research&lt;/em&gt;, 24(1), 14030-14090. &lt;a href=&quot;https://www.jmlr.org/papers/v24/22-0834.html&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://www.jmlr.org/papers/volume24/22-0834/22-0834.pdf&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=High-dimensional+inference+for+generalized+linear+models+with+hidden+confounding&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Zhou, X. (2022). Semiparametric Estimation for Causal Mediation Analysis with Multiple Causally Ordered Mediators. Journal of the Royal Statistical Society Series B: Statistical Methodology, 84(3), 794–821. &lt;a href=&quot;https://doi.org/10.1111/rssb.12487&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://scholar.harvard.edu/files/xzhou/files/zhou_pse.pdf&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Semiparametric%20Estimation%20for%20Causal%20Mediation%20Analysis%20with%20Multiple%20Causally%20Ordered%20Mediators&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Zhou, X., &amp;amp; Yamamoto, T., 2023. Tracing causal paths from experimental and observational data. &lt;em&gt;The Journal of Politics&lt;/em&gt;, 85(1), 250-265.&lt;a href=&quot;https://doi.org/10.1086/720310&quot;&gt;Link&lt;/a&gt; (rep), &lt;a href=&quot;https://dspace.mit.edu/bitstream/handle/1721.1/148683/720310.pdf?sequence=2&amp;amp;isAllowed=y&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://www.journals.uchicago.edu/doi/suppl/10.1086/720310&quot;&gt;Appendix&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Tracing%20Causal%20Paths%20from%20Experimental%20and%20Observational%20Data&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;遗漏变量是因果推断中的常见问题，若未能有效识别，可能会导致政策效果的偏差估计。本专题将介绍几种前沿的&lt;strong&gt;遗漏变量检验&lt;/strong&gt;方法，帮助研究者解决这一难题，并确保政策效果估计的准确性。&lt;/p&gt;
&lt;p&gt;首先，我们将讨论&lt;strong&gt;传统遗漏变量检验&lt;/strong&gt;（Oyster, 2019）以及它在处理因果关系复杂场景中的局限性。&lt;strong&gt;Q1.在复杂的政策环境中，如何识别未观测的关键变量？&lt;/strong&gt;（如教育政策在不同社会经济背景下的差异）。为应对这一挑战，&lt;strong&gt;不变因果预测（Invariant Causal Prediction）&lt;/strong&gt;（Kook et al., 2024）通过在多个环境下寻找因果关系的稳定性，帮助识别可能被忽略的关键变量，特别适用于跨区域政策分析（如跨城市的住房政策）。接着，&lt;strong&gt;双重有效/双重尖锐（Doubly-Valid/Doubly-Sharp）敏感性分析模型&lt;/strong&gt;（Dorn et al., 2024）通过构建双重稳健估计，即使部分模型假设失效，依然能准确估计政策效果。&lt;strong&gt;Q2.在模型设定偏差或高维数据中，如何确保估计结果的稳健性？&lt;/strong&gt;（如公共卫生政策在多个变量干扰下的效果评估）。同时，&lt;strong&gt;基于模型辅助的敏感性分析&lt;/strong&gt;（Tan, 2024）结合了倾向评分和结果均值回归模型，解决了未观测混杂因素带来的偏差问题，适合高维数据和复杂模型的因果推断&lt;/p&gt;
&lt;p&gt;此外，针对处理多个政策干预的情境，本专题还将介绍&lt;strong&gt;排他性检验&lt;/strong&gt;（Goldsmith et al., 2022），&lt;strong&gt;Q3.在存在多个政策干预时，如何避免变量间的相互污染？&lt;/strong&gt;（如同时进行的经济刺激政策和税收政策对经济增长的影响）。排他性检验确保多个处理变量独立，从而防止政策效果估计中的交叉干扰，特别适用于多期、多政策场景下的政策分析。&lt;/p&gt;
&lt;p&gt;通过本专题的第一天学习，学员将能够回答以下关键问题：如何应对高维数据中的遗漏变量问题？如何在复杂环境下提高因果推断的稳健性？如何确保多期政策干预的独立性？这些工具将帮助学员更好地理解和应用遗漏变量检验与排他性检验，为政策评估提供更为精准和全面的分析。&lt;/p&gt;
&lt;p&gt;双重差分（DID）方法是政策分析中的重要工具，但它的准确应用依赖于若干基本假设，特别是平行趋势假设。为了确保政策评估的准确性，我们需要提前判断研究对象和样本是否满足这些假设，尤其是平行趋势检验和安慰剂检验的应用条件。本专题将探讨各种前沿方法，帮助学员在复杂数据情境下提高政策评估的准确度和稳健性。&lt;/p&gt;
&lt;p&gt;首先，&lt;strong&gt;平行趋势假设&lt;/strong&gt;要求处理组和对照组在政策实施前必须有相同的趋势。&lt;strong&gt;Q1.如何做「事后的」平行趋势检验，并确保政策实施前的平行趋势假定成立？&lt;/strong&gt; 在传统的平行趋势检验中，这一假设通常只做事前检验，但在现实场景中，政策实施前的时间趋势可能具有复杂的动态结构。&lt;strong&gt;事件研究法（Event Study）&lt;/strong&gt;（Freyaldenhoven et al., 2021；Roth, 2022）通过多个时间窗口捕捉政策前后的动态趋势，能够灵活处理多期数据和复杂时间趋势问题。&lt;strong&gt;Q2.在存在时间趋势的情况下，平行趋势检验满足时是否就能得到ATT？&lt;/strong&gt; 事件研究法不仅可以检测不同时间窗口中的政策影响，还可以避免因非线性趋势或数据异质性导致的偏差，提供更精细的政策效果估计。&lt;/p&gt;
&lt;p&gt;进一步提升平行趋势检验能力的工具是&lt;strong&gt;Treeffuser模型&lt;/strong&gt;（Beltran-Velez et al., 2024），它通过决策树框架对政策前后的非线性趋势进行建模，特别适用于多维数据和复杂因果关系的场景。Treeffuser在处理多个政策变量时，能够捕捉到变量之间的交互效应并提供更灵活的检验方式，适用于复杂环境下的平行趋势检验。&lt;/p&gt;
&lt;p&gt;随后，我们将介绍安慰剂检验，用于评估政策效果的真实性。&lt;strong&gt;Q3.如何通过安慰剂检验验证政策效果不是由外部因素导致？&lt;/strong&gt;（如社会福利政策的效果验证）。安慰剂检验通过引入虚拟干预来验证结果的鲁棒性，确保外部冲击未对政策效果产生干扰。&lt;/p&gt;
&lt;p&gt;接下来，我们将深入介绍DID的新范式，并厘清TWFE与标准DID的关系（Wooldridge, 2021），特别是当数据结构复杂或模型形式未知时，如何应用更先进的技术准确估计政策效应。&lt;strong&gt;纽曼正交框架下&lt;/strong&gt;的双重稳健DID（DRDID）、双重机器学习（DML）、广义随机森林（GRF）和非参数因果推断（Npcausal）（Sant &amp;amp; Zhao, 2020；Kennedy et al., 2023）将通过先进的机器学习技术处理高维数据与复杂模型的因果推断问题。帮助我们解决&lt;strong&gt;Q4当处理组和对照组存在异质性时，如何提高DID的稳健性？&lt;/strong&gt;（如不同地区的经济政策对就业率的影响）。&lt;/p&gt;
&lt;p&gt;针对&lt;strong&gt;匹配框架下&lt;/strong&gt;的DID，我们将介绍PSM-DID、SDID和WGAN（Athey et al., 2021）。这些方法通过更加精确的匹配或合成控制组，有助于减少控制组中的偏差，从而提升政策效果估计的精确度。&lt;strong&gt;Q5.如何通过合成控制组和匹配框架提高DID的估计精度？&lt;/strong&gt;（如医疗政策对不同病患群体的影响）&lt;/p&gt;
&lt;p&gt;最后，我们将讨论&lt;strong&gt;多期DID&lt;/strong&gt;（包括CSDID、动态IPW、RIPW）在长期政策实施中的应用（Arkhangelsky et al., 2021；Callaway &amp;amp; Sant, 2021）。多期政策效果的估计常常面临处理组非随机分配和时间不一致性的问题，&lt;strong&gt;Q6.当政策实施时间彼此相关时，如何进行多期DID估计，并处理政策效应的异质性？&lt;/strong&gt;（如教育改革对不同年级学生的长期影响）。这些方法能够帮助研究者在处理多期数据和复杂政策效果时进行更加灵活和稳健的估计。&lt;/p&gt;
&lt;p&gt;通过第二天的学习，学员将深入掌握如何在不同情境下应用平行趋势检验、安慰剂检验和DID的新范式，确保政策效果的稳健评估与准确估计。&lt;/p&gt;
&lt;h3&gt;T2. 政策机制的深层解析与因果路径分析（Day3）&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;调节效应检验&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;调节变量筛选（Boileau et al.，2024）&lt;/li&gt;
&lt;li&gt;调节效应估计（Chang et al.，2024）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;中介效应检验&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;传统检验方法的可行性分析：逐步检验法、敏感性分析（Imai et al.，2010）、两阶段工具变量法（Di Giuli &amp;amp; Laux，2022）&lt;/li&gt;
&lt;li&gt;双重纠偏拉索估计：线性模型（Guo et al.，2022AoS），广义线性模型（Ouyang et al.，2023）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;多重中介检验&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;有效中介识别检验（Guo et al.，2022JASA）&lt;/li&gt;
&lt;li&gt;因果路径分析（Zhou，2022；Zhou &amp;amp; Yamamoto，2023）&lt;/li&gt;
&lt;li&gt;连续型处理变量下的中介效应分析（Lin et al.，2024）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;参考文献&lt;/strong&gt;：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Boileau, P., Leng, N., Hejazi,N. S., van der Laan, M., &amp;amp; Dudoit, S. 2024. A nonparametric framework fortreatment effect modifier discovery in high dimensions. &lt;em&gt;Journal of the RoyalStatistical Society Series B: Statistical Methodology&lt;/em&gt;, qkae084.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Chang, H., Middleton, J. A.,&amp;amp; Aronow, P. M. 2024. Exact bias correction for linear adjustment ofrandomized controlled trials. &lt;em&gt;Econometrica&lt;/em&gt;, 92(5), 1503-1519.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Di Giuli, A., &amp;amp; Laux, P. A., 2022. The effect of media-linked directors on financing and external governance. &lt;em&gt;Journal of Financial Economics&lt;/em&gt;, 145(2), 103-131.&lt;a href=&quot;https://doi.org/10.1016/j.jfineco.2021.07.017&quot;&gt;Link&lt;/a&gt; (rep), &lt;a href=&quot;http://sci-hub.ren/10.1016/j.jfineco.2021.07.017&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=The%20effect%20of%20media-linked%20directors%20on%20financing%20and%20external%20governance&quot;&gt;Google&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Guo, X., Li, R., Liu, J., &amp;amp; Zeng, M., 2022. High-Dimensional Mediation Analysis for Selecting DNA Methylation Loci Mediating Childhood Trauma and Cortisol Stress Reactivity. &lt;em&gt;Journal of the American Statistical Association&lt;/em&gt;, 117(539), 1110-1121. &lt;a href=&quot;https://doi.org/10.1080/01621459.2022.2053136&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://file-lianxh.oss-cn-shenzhen.aliyuncs.com/Refs/Spring2024/Guo_2022_High-Dimensional_Mediation_Analysis.pdf&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=High-Dimensional%20Mediation%20Analysis%20for%20Selecting%20DNA%20Methylation%20Loci%20Mediating%20Childhood%20Trauma%20and%20Cortisol%20Stress%20Reactivity&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Guo, Z., Ćevid, D., &amp;amp; Bühlmann, P.,2022. Doubly debiased lasso: High-dimensional inference under hidden confounding. &lt;em&gt;Annals of Statistics&lt;/em&gt;, 50(3), 1320.&lt;a href=&quot;https://doi.org/10.1214/21-aos2152&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://arxiv.org/pdf/2004.03758&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Doubly%20debiased%20lasso:%20High-dimensional%20inference%20under%20hidden%20confounding&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Imai, K., Keele, L., &amp;amp; Yamamoto, T. (2010). Identification, inference and sensitivity analysis for causal mediation effects. &lt;em&gt;Statistical Science&lt;/em&gt;, 25(1), 51-71. &lt;a href=&quot;https://doi.org/10.1214/10-STS321&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://doi.org/10.1214/10-STS321&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Identification,+inference+and+sensitivity+analysis+for+causal+mediation+effects&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Lin, Y., Windmeijer, F., Song, X., &amp;amp; Fan, Q. (2024). On the instrumental variable estimation with many weak and invalid instruments. &lt;em&gt;Journal of the Royal Statistical Society Series B: Statistical Methodology&lt;/em&gt;, qkae025. &lt;a href=&quot;https://doi.org/10.1093/jrsssb/qkae025&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://doi.org/10.1093/jrssb/qkae025&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=On+the+instrumental+variable+estimation+with+many+weak+and+invalid+instruments&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ouyang, J., Tan, K. M., &amp;amp; Xu, G. (2023). High-dimensional inference for generalized linear models with hidden confounding. &lt;em&gt;The Journal of Machine Learning Research&lt;/em&gt;, 24(1), 14030-14090. &lt;a href=&quot;https://www.jmlr.org/papers/v24/22-0834.html&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://www.jmlr.org/papers/volume24/22-0834/22-0834.pdf&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=High-dimensional+inference+for+generalized+linear+models+with+hidden+confounding&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Zhou, X. (2022). Semiparametric Estimation for Causal Mediation Analysis with Multiple Causally Ordered Mediators. Journal of the Royal Statistical Society Series B: Statistical Methodology, 84(3), 794–821. &lt;a href=&quot;https://doi.org/10.1111/rssb.12487&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://scholar.harvard.edu/files/xzhou/files/zhou_pse.pdf&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Semiparametric%20Estimation%20for%20Causal%20Mediation%20Analysis%20with%20Multiple%20Causally%20Ordered%20Mediators&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Zhou, X., &amp;amp; Yamamoto, T., 2023. Tracing causal paths from experimental and observational data. &lt;em&gt;The Journal of Politics&lt;/em&gt;, 85(1), 250-265.&lt;a href=&quot;https://doi.org/10.1086/720310&quot;&gt;Link&lt;/a&gt; (rep), &lt;a href=&quot;https://dspace.mit.edu/bitstream/handle/1721.1/148683/720310.pdf?sequence=2&amp;amp;isAllowed=y&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://www.journals.uchicago.edu/doi/suppl/10.1086/720310&quot;&gt;Appendix&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Tracing%20Causal%20Paths%20from%20Experimental%20and%20Observational%20Data&quot;&gt;Google&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在政策效果评估中，准确识别政策的传导机制及其调节因素，是揭示政策效果的核心挑战之一。本专题将围绕&lt;strong&gt;调节效应分析&lt;/strong&gt;和&lt;strong&gt;中介效应检验&lt;/strong&gt;，为学员提供系统的工具，帮助理解政策作用的复杂路径，并提供相应的实证方法。&lt;/p&gt;
&lt;p&gt;首先，我们将聚焦于&lt;strong&gt;调节效应检验&lt;/strong&gt;。政策效果往往受到不同群体或环境的调节，理解这些调节因素对于准确评估政策效应至关重要。&lt;strong&gt;Q1.如何在复杂的高维数据中自动识别出关键的调节变量？&lt;/strong&gt; 如借鉴Boileau et al.（2024），筛选合适调节变量，进而评估环境政策在不同污染水平下的效果。&lt;strong&gt;Q2.在不同调节因素存在时，如何估计其对政策效果的相对重要性？&lt;/strong&gt; （Chang et al., 2024）比如用于衡量教育政策在不同收入群体中的影响。这些工具将帮助学员在多期政策或多群体异质性背景下，精准评估政策效果的差异性与敏感性。&lt;/p&gt;
&lt;p&gt;其次，我们将深入探讨&lt;strong&gt;中介效应检验&lt;/strong&gt;，即分析政策通过哪些中介渠道发挥作用。学员将学习&lt;strong&gt;逐步检验法&lt;/strong&gt;、&lt;strong&gt;敏感性分析&lt;/strong&gt;（Imai et al., 2010）及&lt;strong&gt;两阶段工具变量法&lt;/strong&gt;（Di Giuli &amp;amp; Laux, 2022）等传统方法的优劣，并思考：&lt;strong&gt;Q3.如何应对中介变量内生性带来的估计偏差？&lt;/strong&gt; （如就业政策如何通过培训项目提升就业率，但受限于参与意愿的内生性问题）。为此，我们引入&lt;strong&gt;双重纠偏拉索（DDL）估计&lt;/strong&gt;（Guoet al., 2022AoS），该方法适用于线性模型和广义线性模型（Ouyanget al., 2023），并有效解决内生性问题。&lt;/p&gt;
&lt;p&gt;在应对&lt;strong&gt;多重中介检验&lt;/strong&gt;方面，学员将学习&lt;strong&gt;如何识别和评估多个中介变量之间的相互作用？&lt;strong&gt;Guoet al., 2022JASA）。通过&lt;/strong&gt;因果路径分析&lt;/strong&gt;（Zhou, 2022；Zhou &amp;amp; Yamamoto, 2023），我们将追踪不同机制对政策效果的影响，回答&lt;strong&gt;Q4.不同中介路径之间的关联性和相对重要性如何量化？&lt;/strong&gt;（如最低工资政策通过收入和工作满意度对就业的共同影响）。此外，连续型处理变量下的中介效应分析*Linet al., 2024）将拓展学员处理政策强度具有连续变化的情景（如税率变化对消费行为的渐进影响）的能力，进一步丰富中介效应的应用场景。&lt;/p&gt;
&lt;p&gt;通过本专题，学员将掌握如何在多维数据和复杂机制下，精确分析政策的调节与中介效应，全面理解政策的作用路径与影响深度，进而为优化和调整政策设计提供强有力的支持。&lt;/p&gt;
&lt;h3&gt;T3. 政策优化的智能化策略与动态决策方法（Day4）&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;政策学习
&lt;ul&gt;
&lt;li&gt;考虑个体异质性的政策学习（Athey &amp;amp; Wager，2021）&lt;/li&gt;
&lt;li&gt;考虑时点和个体异质性：强化学习（Bian et al.，2024）&lt;/li&gt;
&lt;li&gt;考虑网络下的溢出效应的政策学习（Viviano，2024）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;市场均衡状态政策效应（Munro et al.，2021）&lt;/li&gt;
&lt;li&gt;政策公平性评价（Fair Policy）（Viviano &amp;amp; Bradic，2023）&lt;/li&gt;
&lt;li&gt;多臂Qini曲线（Multi-Armed QiniCurve）（Sverdrup et al.，2023）&lt;/li&gt;
&lt;li&gt;连续Treatment（Kennedy et al., 2017；Colangelo &amp;amp; Lee,2023；Xu &amp;amp; Tan，2024）&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;参考文献：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;Athey, S., &amp;amp; Wager, S., 2021. Policy learning with observational data. &lt;em&gt;Econometrica&lt;/em&gt;, 89(1), 133-161.&lt;a href=&quot;https://doi.org/10.3982/ecta15732&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://arxiv.org/pdf/1702.02896&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Policy%20Learning%20With%20Observational%20Data&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Bian, Z., Shi, C., Qi, Z., &amp;amp; Wang, L. (2024). Off-Policy Evaluation in Doubly Inhomogeneous Environments. Journal of the American Statistical Association, 1–27. &lt;a href=&quot;https://doi.org/10.1080/01621459.2024.2395593&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://www.tandfonline.com/doi/epdf/10.1080/01621459.2024.2395593?needAccess=true&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://arxiv.org/pdf/2306.08719&quot;&gt;-PDF2-&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Off-Policy%20Evaluation%20in%20Doubly%20Inhomogeneous%20Environments&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Munro, E., Wager, S., &amp;amp; Xu, K., 2021. Treatment effects in market equilibrium. Working Paper, arXiv preprint arXiv:2109.11647.&lt;a href=&quot;https://arxiv.org/abs/2109.11647&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://arxiv.org/pdf/2109.11647&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Treatment%20effects%20in%20market%20equilibrium&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Sverdrup, E., Wu, H., Athey, S., &amp;amp; Wager, S., 2023. Qini Curves for Multi-Armed Treatment Rules. Working Paper, arXiv preprint arXiv:2306.11979.&lt;a href=&quot;https://arxiv.org/abs/2306.11979&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://arxiv.org/pdf/2306.11979&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Qini%20Curves%20for%20Multi-Armed%20Treatment%20Rules&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Viviano, D., &amp;amp; Bradic, J., 2023. Fair policy targeting. &lt;em&gt;Journal of the American Statistical Association&lt;/em&gt;, 1-14.&lt;a href=&quot;https://doi.org/10.1080/01621459.2022.2142591&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://dviviano.github.io/projects/Fair_Targeting.pdf&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Fair%20Policy%20Targeting&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Viviano, D. (2024). Policy Targeting under Network Interference. Review of Economic Studies. &lt;a href=&quot;https://doi.org/10.1093/restud/rdae041&quot;&gt;Link&lt;/a&gt; (rep), &lt;a href=&quot;https://www.restud.com/wp-content/uploads/2024/04/MS33103manuscript.pdf&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Policy%20Targeting%20under%20Network%20Interference&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Kyle Colangelo &amp;amp; Ying-Ying Lee,2023. Double Debiased Machine Learning Nonparametric Inference with Continuous Treatments. &lt;em&gt;Econometrics&lt;/em&gt;,&lt;a href=&quot;https://arxiv.org/abs/2004.03036&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://arxiv.org/pdf/2004.03036&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Double%20Debiased%20Machine%20Learning%20Nonparametric%20Inference%20with%20Continuous%20Treatments&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Xu, W., &amp;amp; Tan, Z. (2024). High-dimensional model-assisted inference for treatment effects with multi-valued treatments. Journal of Econometrics, 244(1), 105852. &lt;a href=&quot;https://doi.org/10.1016/j.jeconom.2024.105852&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;https://arxiv.org/pdf/2201.09192&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=High-dimensional%20model-assisted%20inference%20for%20treatment%20effects%20with%20multi-valued%20treatments&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在复杂、多变的政策环境下，如何实现动态和精准的政策优化，是当今研究者面临的关键挑战。传统的静态政策优化方法无法应对个体异质性、时间变化和网络溢出效应等现实问题。本专题将聚焦于&lt;strong&gt;政策学习&lt;/strong&gt;技术，帮助研究者通过动态调整政策决策实现最优效果。&lt;/p&gt;
&lt;p&gt;首先，Athey &amp;amp; Wager (2021)提出的&lt;strong&gt;基于个体异质性的政策学习&lt;/strong&gt;为我们提供了应对不同群体差异的工具。&lt;strong&gt;Q1.如何在政策影响不均的情况下找到最优的政策决策？&lt;/strong&gt; （例如，医疗补贴政策在不同收入群体中的效果差异）。通过政策学习，研究者能够根据不同个体的特征和反应，设计出更为精准的干预措施，确保资源的有效利用。&lt;/p&gt;
&lt;p&gt;接下来，Bian et al. (2024)的&lt;strong&gt;强化学习&lt;/strong&gt;方法是本专题的核心内容之一。强化学习通过不断的反馈和数据更新，帮助研究者在复杂的政策环境中做出&lt;strong&gt;动态优化&lt;/strong&gt;决策&lt;strong&gt;Q2.如何通过实时数据反馈动态优化政策？&lt;/strong&gt; （例如，医保政策随着病人健康状况变化而进行的自动调整）。与传统方法不同，强化学习不仅能够适应政策环境中的复杂性（如个体异质性和时间波动），还能够通过学习过程逐步改善政策效果，最大化长期收益。特别是在面对长期实施的政策（如养老金政策）时，强化学习能够根据历史数据实时优化决策，确保政策效果的持续改善。&lt;/p&gt;
&lt;p&gt;此外，Viviano (2024)的研究重点在于&lt;strong&gt;考虑网络溢出效应的政策学习&lt;/strong&gt;，解决了个体之间相互影响的问题。&lt;strong&gt;Q3.如何在存在溢出效应时准确评估政策效果？&lt;/strong&gt; （如住房政策对邻近区域房价的溢出效应）。通过网络政策学习，研究者可以更精准地识别和控制这些溢出效应，避免政策影响被高估或低估。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;市场均衡状态下的政策效应评估&lt;/strong&gt;（Munro et al., 2021）将探讨在存在溢出效应的复杂市场环境中，如何评估政策对个体和整体市场的影响。传统因果推断依赖SUTVA假设，但在现实场景中（如企业投资或地方政府政策）个体之间存在相互影响，无法满足这一假设。&lt;strong&gt;Q4.如何在政策影响下估计市场中的直接和间接效应？&lt;/strong&gt; （如环保政策对企业生产和市场价格的双重影响）。Munro et al. (2023) 提出的模型通过区分&lt;strong&gt;直接处理效应（ADE）&lt;strong&gt;和&lt;/strong&gt;间接处理效应（AIE）&lt;/strong&gt;，评估政策对个体自身和其他个体的传导效应，并提出了&lt;strong&gt;最优政策目标规则&lt;/strong&gt;，帮助研究者在保持市场均衡的前提下实现政策优化。本专题将通过实例展示如何在R中实现这一模型。&lt;/p&gt;
&lt;p&gt;同时，政策的公平是优化中的另一关键问题。Viviano &amp;amp; Bradic (2023)提出的&lt;strong&gt;政策公平性评价&lt;/strong&gt;模型，帮助研究者在优化政策效果的同时兼顾公平性。&lt;strong&gt;Q5.如何确保政策在不同群体间的公平分配？&lt;/strong&gt; （如税收政策在不同收入群体中的公平性问题）。此外，本专题还将介绍&lt;strong&gt;多臂Qini曲线&lt;/strong&gt;（Sverdrup et al., 2023），为评估和比较不同政策措施的边际效益提供了一种直观有效的工具。通过多臂Qini曲线，研究者可以识别出在特定时间节点或周期内表现最优的政策措施，最大化资源分配效益。&lt;/p&gt;
&lt;p&gt;最后，针对&lt;strong&gt;连续处理变量&lt;/strong&gt;（Kennedy et al., 2017；Colangelo &amp;amp; Lee, 2023；Xu &amp;amp; Tan, 2024）的政策优化，本专题将展示如何通过非参数因果推断方法，细化政策效果评估，尤其是在处理变量为连续变量的场景下（如碳税税率或补贴金额）。这些方法将帮助学者在更复杂的政策情境下实现灵活、精准的政策决策。&lt;/p&gt;
&lt;p&gt;通过本专题的学习，学员将掌握如何利用&lt;strong&gt;强化学习&lt;/strong&gt;等政策学习以及其他前沿工具，在面对复杂、多变的政策环境时，实现动态决策，最大化政策效果，并确保决策的公平性与资源的高效利用。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;最后的话&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;需要特别强调的是，自我提升从来都不是件轻松的事情。因此，在开课之前，大家务必认真研读每一篇论文，了解其研究背景、研究思路、计量方法和主要结论，带着问题听课。同时，也建议大家在开课前务必掌握文献的检索方法，学会使用&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E6%96%87%E7%8C%AE&quot;&gt;文献管理&lt;/a&gt;和&lt;a href=&quot;https://www.lianxh.cn/search.html?s=Markdown&quot;&gt;笔记&lt;/a&gt;工具，以便追踪每篇论文的后续进展，发掘新的研究主题。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20231114021011.png&quot; alt=&quot;20231114021011&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. 报名和缴费信息&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;主办方&lt;/strong&gt;：太原君泉教育咨询有限公司&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;标准费用&lt;/strong&gt; 4600 元/人&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;优惠方案&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;专题课老学员&lt;/strong&gt;：9 折，4140 元/人&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;学生（需提供学生证/卡照片）&lt;/strong&gt;：9 折，4140 元/人&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;会员&lt;/strong&gt;：85 折，3910 元/人&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;温馨提示&lt;/strong&gt;：以上各项优惠不能叠加使用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;联系方式：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;邮箱：&lt;a href=&quot;https://www.lianxh.cn/details/wjx004@sina.com&quot;&gt;wjx004@sina.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;王老师：18903405450 (微信同号)&lt;/li&gt;
&lt;li&gt;李老师：18636102467 (微信同号)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;报名链接：&lt;/strong&gt; &lt;a href=&quot;https://www.wjx.top/vm/Ot5g7G4.aspx#&quot;&gt;https://www.wjx.top/vm/Ot5g7G4.aspx#&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;⏩ 长按/扫描二维码报名：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined%E6%8A%A5%E5%90%8D%EF%BC%9A2025%E5%AF%92%E5%81%87%E7%8F%AD.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;缴费方式&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;方式 1：对公转账&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;户名：太原君泉教育咨询有限公司&lt;/li&gt;
&lt;li&gt;账号：35117530000023891 (山西省太原市晋商银行南中环支行)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;温馨提示：&lt;/strong&gt; 对公转账时，请务必提供「&lt;strong&gt;汇款人姓名-单位&lt;/strong&gt;」信息，以便确认。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;方式 2：扫码支付&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E5%90%9B%E6%B3%89%E6%94%B6%E6%AC%BE%E7%A0%81.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;温馨提示：&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;可以使用已经绑定公务卡的微信/支付宝/云闪付等扫码付款&lt;/li&gt;
&lt;li&gt;微信转账时，请务必在「添加备注」栏填写「&lt;strong&gt;汇款人姓名-单位&lt;/strong&gt;」信息。&lt;/li&gt;
&lt;li&gt;扫码支付后，请将「&lt;strong&gt;付款记录&lt;/strong&gt;」截屏发给王老师-18903405450（微信同号）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;6. 听课指南&lt;/h2&gt;
&lt;h3&gt;6.1 软件和课件&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;听课软件&lt;/strong&gt;：&lt;strong&gt;支持&lt;/strong&gt;手机，ipad ，平板以及 windows/Mac 系统的笔记本，&lt;strong&gt;但不支持台式机以及 Surface 平板式电脑&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;特别提示：&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;为保护讲师的知识产权和您的账户安全，系统会自动在您观看的视频中嵌入您的「用户名」信息。&lt;/li&gt;
&lt;li&gt;一个账号绑定一个设备，且听课电脑不能外接显示屏，请大家提前准备好自己的听课设备。&lt;/li&gt;
&lt;li&gt;本课程为虚拟产品，&lt;strong&gt;一经报名，不得退换&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;为保护知识产权，课程不允许以任何形式录屏及传播。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;6.2 实名制报名&lt;/h3&gt;
&lt;p&gt;本次课程实行实名参与，具体要求如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;高校老师/同学报名时需要向连享会课程负责人 &lt;strong&gt;提供真实姓名，并附教师证/学生证图片&lt;/strong&gt;；&lt;/li&gt;
&lt;li&gt;研究所及其他单位报名需提供 &lt;strong&gt;能够证明姓名以及工作单位的证明&lt;/strong&gt;；&lt;/li&gt;
&lt;li&gt;报名即默认同意「&lt;a href=&quot;https://www.lianxh.cn/details/879.html&quot;&gt;${\color{red}{连享会版权保护协议条款}}$&lt;/a&gt;」。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;课程详情：&lt;/strong&gt; &lt;a href=&quot;https://www.lianxh.cn/details/1536.html&quot;&gt;https://www.lianxh.cn/details/1536.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div style=&quot;page-break-after: always;&quot;&gt;&lt;/div&gt;
</description><link>https://www.lianxh.cn/details/1536.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1536.html</guid><pubDate>Sun, 12 Jan 2025 16:00:00 GMT</pubDate><author>连享会</author></item><item><title>论文推介：包含连续处理变量的 DID</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：李萌 (武汉大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:meng_li@whu.edu.cn&quot;&gt;meng_li@whu.edu.cn&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;：本文主要摘译自下文，特此致谢！&lt;br&gt;
&lt;strong&gt;Source&lt;/strong&gt;：Callaway, B., Goodman-Bacon, A., &amp;amp; Sant’anna, P. H. (2024). Difference-in-differences with a Continuous Treatment. National Bureau of Economic Research. &lt;a href=&quot;https://doi.org/10.3386/w32117&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;https://www.nber.org/system/files/working_papers/w32117/w32117.pdf&quot;&gt;-PDF-&lt;/a&gt; &lt;a href=&quot;https://scholar.google.com/scholar?q=Difference-in-differences%20with%20a%20Continuous%20Treatment&quot;&gt;-Google-&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;：论文推介：包含连续处理变量的 DID&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;：DID，倍分法，双重差分，连续处理效应，平行趋势，双向固定效应&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 引言&lt;/h2&gt;
&lt;p&gt;经典的双重差分 (DID) 研究设计通过比较处理组和对照组在处理前后的结果来评估处理效果。然而，在许多 DID 应用中，处理效应并非是二元的，即要么受处理，要么未受处理，而是具有“剂量”或以不同强度运行。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;连续处理效应&lt;/strong&gt;相较于二元处理效应，提供了更多的分析优势。通过观测结果和处理强度之间明确的“强度-反应”关系可以支持因果解释或检验理论预测。此外，研究者通常更关注处理强度变化带来的影响，如资金增加、污染减少或资格范围扩大，而不仅仅是处理措施存在与否的影响。&lt;/p&gt;
&lt;p&gt;尽管连续 DID 设计在理论和实践中都具有重要价值，但鲜有的计量经济学研究在如何应用和解释这类设计方面提供的帮助有限。对此，本文介绍了一套适用于具有连续处理变量的 DID 设定的新工具，有助于提高因果推断的准确性和可靠性。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 实证视角下连续DID设计的应用动机&lt;/h2&gt;
&lt;p&gt;为了更具体地阐释我们的理论成果，并为我们的分析提供更直观的理解，本文回顾了 Acemoglu 和 Finkelstein  (2008) (下文简称 AF) 有关价格管制对企业投入决策的影响研究。具体而言：&lt;/p&gt;
&lt;p&gt;1965 年，美国医疗保险开始实施时，医院根据医保受益人占患者总住院天数的比例 ($m_i$)，从联邦政府获得部分劳动力和资本支出的报销。此时，医院 $i$ 面临的劳动力投入价格为 $(1-s_Lm_i)w$，资本投入价格为 $(1-s_Km_i)r$。其中，$s_L$ 和 $s_K$分别为劳动力和资本的补贴率，$w$ 和 $r$分别为市场工资和租金率。&lt;/p&gt;
&lt;p&gt;1983年，美国医疗保险改革，转变为预期支付系统 (PPS)，用每次就诊/诊断的小额支付代替了以往的劳动力补贴。使得 $s_L=0$，而资本补贴保持不变。因此，某医院的劳动力价格从 $(1-s_Lm_i)w$ 上升到 $w$，扭曲了相对要素价格。&lt;/p&gt;
&lt;p&gt;在这一场景下，医院的医疗保险规模 $m_i$ 与其劳动力价格变化 $s_Lm_iw$ 之间的法定关系，促使 AF 采用了连续 DID 设计，以比较在 pre-PPS 时期拥有不同医保住院病人份额的医院在 1983 年前后的资本/劳动力比例变化。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;应用这种连续DID的动机主要包括以下三点&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第一，强度大小 (或暴露程度) 的变化使得评估那些对于二元 DID 设计而言不可行或不理想的处理效应成为可能。在 AF 的案例中，医院的医疗保险规模 $m_i$ 的均值为 0.45，标准差为 0.15，且相较于未受政策影响的医院，$m_i&amp;gt;0$ 的医院之间更具可比性。&lt;/li&gt;
&lt;li&gt;第二，暴露程度与结果之间的“强度-反应”关系可以支持因果解释或检验理论预测。AF 在其研究中提出了一个简单的理论框架，其中 PPS 的转变应当：(1) 提高资本/劳动力比率，(2) 对 PPS 前 $m_i$ 值较高的医院影响更大。AF 将连续性 DID 设计视为一种估计 PPS 整体因果效应并检验模型的理论预测的方法。&lt;/li&gt;
&lt;li&gt;第三，连续 DID 设计可以用来估计强度 (或暴露程度) 的较小变化所产生的平均因果效应。在许多经济模型中，价格和收入弹性决定了税率、税基、补贴和法规等的最优政策 (Hendren，2016)，这些连续概念只有通过连续变化才能得到准确估计。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 基准案例：两时期的新处理效应&lt;/h2&gt;
&lt;p&gt;我们首先通过两时期面板数据的设定来阐释主要观点，$t=1$ 和 $t=2$。在第二时期 ($t = 2$)，一些单元接受处理，记为 $D_i$，而其他单元则保持未受处理状态，$D$ 的支持表示为 $\mathcal{D}$。$D_i$ 可以是 (绝对) 连续的，也可以是多值离散的。我们将单元 $i$ 在时期 $t$ 的潜在结果定义为 $Y_{i,t}(d)$，即单元 $i$ 在时期 $t$ 接受处理强度 $d$ 时所经历的结果。在每个时期 $t$ 中，单元 $i$ 的观测结果为 $Y_{i,t} = Y_{i,t}(D_i)$。我们假设所有期望都是有限且定义明确的。为了简化符号，后文中我们将省略单元索引 $i$，并定义 $\Delta Y = Y_{t=2} - Y_{t=1}$。&lt;/p&gt;
&lt;h3&gt;3.1 连续处理效应下的关键参数&lt;/h3&gt;
&lt;p&gt;潜在结果 $Y_{t}(d)$ 表明处理效应可以有多种取值，因此每个单元可以经历多种类型的因果效应。给定单元在时期 $t$ 接受处理强度 ($d$) 的&lt;strong&gt;水平处理效应&lt;/strong&gt;为 $Y_{t}(d) - Y_{t}(0)$，即&lt;strong&gt;水平处理效应&lt;/strong&gt;衡量了在时期 $t$ 中处理强度由 $0$ 变为 $d$ 时的处理效应。这一概念是将二元处理效应直接扩展至连续处理效应函数或“强度-反应”函数。&lt;/p&gt;
&lt;p&gt;我们将单元在 $d$ 处的&lt;strong&gt;因果反应&lt;/strong&gt;定义为 $Y_t^{\prime}(d)$，即潜在结果关于强度 $d$ 的导数 (当处理效应连续时)，或者为 $Y_t(d_j) - Y_t(d_{j-1})$，即相邻强度之间的潜在结果差异 (当处理效应离散时)。&lt;strong&gt;因果反应&lt;/strong&gt;衡量了在时期 ($t$) 中处理强度为 ($d$) 时的边际增量的处理效应。&lt;/p&gt;
&lt;p&gt;我们关注的是在处理后期，即 $t=2$ 时，这两种因果效应的均值。此时，&lt;strong&gt;平均水平处理效应&lt;/strong&gt; (我们通常称之为平均处理效应) 由二元情况下拓展为：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
ATT(d|d&#39;)=\mathbb{E}[Y_{t=2}(d)-Y_{t=2}(0)|D=d&#39;]&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
ATE(d)=\mathbb{E}[Y_{t=2}(d)-Y_{t=2}(0)]&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，$ATT(d|d^{\prime})$ 为处理后期 $t=2$ 时，在处理条件 $D=d^{\prime}$ 下，处理强度 $d$ 相对于处理强度 $0$ 的平均效应。当 $d^{\prime}=d$ 时，这表示接受处理强度 $d$ 的单元的 $ATT$。$ATE(d)$ 为 $t=2$ 时，在所有单元中（不仅仅是实际接受处理的单元）接受处理强度 $d$ 的潜在结果相对于未接受处理的潜在结果的平均差异。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;当处理效应为绝对连续时，平均因果反应的参数定义为&lt;/strong&gt;：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$$&lt;br&gt;
ACRT(d|d&#39;)=\left.\frac{\partial ATT(l|d&#39;)}{\partial l}\right|&lt;em&gt;{l=d}=\left.\frac{\partial\mathbb{E}[Y&lt;/em&gt;{t=2}(l)|D=d&#39;]}{\partial l}\right|_{l=d}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
ACR(d)=\frac{\partial ATE(d)}{\partial d}=\frac{\partial \mathbb{E}[Y_{t=2}(d)]}{\partial d}&lt;br&gt;
$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;当处理效应为多值离散时，平均因果反应的参数定义为&lt;/strong&gt;：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$$&lt;br&gt;
ACRT(d_j|d_k)= \mathbb{E}[Y_{t=2}(d_j)-Y_{t=2}(d_{j-1})|D=d_k]&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
ACR(d_j)=\mathbb{E}[Y_{t=2}(d_j)-Y_{t=2}(d_{j-1})]&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E5%8C%85%E5%90%AB%E8%BF%9E%E7%BB%AD%E5%8F%98%E9%87%8F%E7%9A%84DID_Fig1_%E8%BF%9E%E7%BB%ADDID%E7%9A%84%E5%9B%A0%E6%9E%9C%E5%8F%82%E6%95%B0_%E6%9D%8E%E8%90%8C.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;上图直观展示了连续 DID 设计中的因果参数。图中凹线为 $ATT(\cdot|d)$，即实际接受处理强度为 $d$ 的单元，在各种处理强度下的平均处理效应函数。当考虑两种处理强度 $d$ 和 $d{\prime}$ 时，$ATT(d|d)$ 和 $ATT(d^{\prime}|d)$ 为曲线的高度，即平均处理效应。当处理效应为绝对连续时，$ACRT(d|d)$ 和 $ACRT(d^{\prime})$ 为曲线的切线斜率。当处理效应为多值离散时，$ACRT$ 参数为连接函数两点的线的斜率。&lt;/p&gt;
&lt;p&gt;上述函数参数的加总形式为：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
ATT^{o}=\mathbb{E}[ATT(D|D)|D&amp;gt;0] ;; 和 ;; ATE^{o}=\mathbb{E}[ATE(D)|D&amp;gt;0]$$&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
ACRT^{o}=\mathbb{E}[ACRT(D|D)|D&amp;gt;0] ;; 和 ;; ACR^{o}=\mathbb{E}[ACR(D)|D&amp;gt;0]&lt;br&gt;
$$&lt;/p&gt;
&lt;h3&gt;3.2 连续处理效应下的识别&lt;/h3&gt;
&lt;p&gt;为了讨论平均处理效应和平均因果反应参数的识别，我们提出如下假设。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;假设1 (随机抽样)&lt;/strong&gt;：观测到的数据由 ${Y_{i,t=2},Y_{i,t=1},D_i}_{i=1}^n$ 构成，且独立同分布。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;假设2 (连续或多值离散的处理效应)&lt;/strong&gt;：在 $t=1$ 期，没有单元接受处理，在 $t=2$ 期，处理强度 $D$ 的支持为 $\mathcal{D}={0}\cup\mathcal{D}_+$，且为连续或多值离散的。更准确来说，以下之一为真：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(a) $\mathcal{D}&lt;em&gt;+ = \mathcal{D}&lt;/em&gt;+^c$，其中 $\mathcal{D}&lt;em&gt;+^c = [d_L, d_U]$，且满足 $0 &amp;lt; d_L &amp;lt; d_U &amp;lt; \bar{d} &amp;lt; \infty$，对于某个 $\bar{d} \in \mathbb{R}$。此外，$\mathbb{P}(D=0) &amp;gt; 0$，$f&lt;/em&gt;{D|D&amp;gt;0}$ 是一个勒贝格密度，存在正常数 $a_f &amp;lt; \infty$，使得对于所有 $d \in \mathcal{D}&lt;em&gt;+^c$，满足 $a&lt;/em&gt;{f}^{-1} &amp;lt; f_{D|D&amp;gt;0}(d) &amp;lt; a_{f}$，且 $\mathbb{E}[\Delta Y|D=d]$ 在 $\mathcal{D}_+^c$ 上连续可微。&lt;/li&gt;
&lt;li&gt;(b) $\mathcal{D}&lt;em&gt;+ = \mathcal{D}&lt;/em&gt;+^{mv}$，其中 $\mathcal{D}_+^{mv} = {d_1, d_2, \ldots, d_J}$，且满足 $0 &amp;lt; d_1 &amp;lt; d_2 &amp;lt; \cdots &amp;lt; d_J &amp;lt; \bar{d} &amp;lt; \infty$，对于某个 $\bar{d} \in \mathbb{R}$。此外，对于所有 $d \in \mathcal{D}$，有 $\mathbb{P}(D=d) &amp;gt; 0$。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;假设3 (无预期和观测到的结果)&lt;/strong&gt;：对于所有单元和所有 $d\in\mathcal{D}$，&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
Y_{i,t=1}=Y_{i,t=1}(d)=Y_{i,t=1}(0)，Y_{i,t=2}=Y_{i,t=2}(D_i)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;假设 1 表示我们观察到两个时期的独立同分布面板数据。假设 2 规范化了在任意时期都未接受处理的单元，其余单元则接受连续形式的处理 (2a) 或离散形式的处理 (2b)。假设 3 表示任何单元均不存在预期的处理效应，因此在第一时期我们观察到所有单元的未受处理潜在结果，而在第二时期则观察到单元 $i$ 实际接受的处理强度的潜在结果。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;在连续 DID 设计中，平均水平处理效应的识别与二元处理效应 DID 的设定紧密相关，其结果依赖于对二元情况下平行趋势的拓展。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;假设4 (平行趋势)&lt;/strong&gt;：对于所有 $d\in\mathcal{D}$，&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\mathbb{E}[Y_{t=2}(0)-Y_{t=1}(0)|D=d]=\mathbb{E}[Y_{t=2}(0)-Y_{t=1}(0)|D=0]&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;假设 4 表示，接受处理强度 $d$ 的单元在未接受处理的情况下的平均结果趋势与未受处理的单元实际经历的结果趋势相同。简而言之，我们通常将假设4称之为平行趋势 (PT)。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;定理1&lt;/strong&gt;：在假设 1 至 4 下，$ATT(d|d)$ 对于所有 $d\in\mathcal{D}_+$ 是可识别的，表示为：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
ATT(d|d)=\mathbb{E}[\Delta Y|D=d]-\mathbb{E}[\Delta Y|D=0]&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;进一步地，&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
ATT^o=\mathbb{E}[\Delta Y|D&amp;gt;0]-\mathbb{E}[\Delta Y|D=0]&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;定理 1 中 $ATT(d|d)$ 的识别结果基本与二元处理效应的情况下相同，但假设 4 定义的平行趋势不足以保证 $ATE(d)$ 的识别，这一问题在二元处理效应的设定中也存在。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;定理2&lt;/strong&gt;：在假设 1 至 4 下，因果反应参数不可识别，具体而言：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(a) 在假设 2(a) 下，对于所有 $d\in\mathcal{D}_+^c$，&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$$&lt;br&gt;
\frac{\partial\mathbb{E}[\Delta Y |D=d]}{\partial d}=\frac{\partial ATT(d| d)}{\partial d}=ACRT(d|d)+\underbrace{\left.\frac{\partial ATT(d|l)}{\partial l}\right|&lt;em&gt;{l=d}}&lt;/em&gt;{\textit {selection bias}}&lt;br&gt;
$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(b) 对于 $(h,l)\in \mathcal{D}\times\mathcal{D}$，&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$$&lt;br&gt;
\mathbb{E}[\Delta Y|D=h]-\mathbb{E}[\Delta Y|D=l]=ATT(h|h)-ATT(l|l)\=\underbrace{\mathbb{E}[Y_{t=2}(h)-Y_{t=2}(l)|D=h]}&lt;em&gt;{\textit {causal response}}+\underbrace{(ATT(l|h)-ATT(l|l))}&lt;/em&gt;{\textit {selection bias}}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;当假设 2(b) 成立时，取 $h=d_j$ 和 $l=d_{j-1}$，则&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\mathbb{E}[\Delta Y|D=d_j]-\mathbb{E}[\Delta Y|D=d_{j-1}]=ACRT(d_j|d_j)+\underbrace{ATT(d_{j-1}|d_j)-ATT(d_{j-1}|d_{j-1})}_{\textit {selection bias}}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;定理 2 表明，即使在平行趋势假设下，未受处理的潜在结果以相同方式演变，实际观测到的不同处理强度组之间的结果差异也会来源于两个方面：一个是因果反应本身，来源于处理强度的差异 ($h$ 和 $l$)；另一个是选择偏误，来源于不同强度组接受相同强度的处理时平均处理效应的差异。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E5%8C%85%E5%90%AB%E8%BF%9E%E7%BB%AD%E5%8F%98%E9%87%8F%E7%9A%84DID_Fig2_%E5%BC%82%E8%B4%A8%E6%80%A7%E5%A4%84%E7%90%86%E6%95%88%E5%BA%94%E4%B8%8B%E7%9A%84%E5%9B%A0%E6%9E%9C%E5%8F%82%E6%95%B0_%E6%9D%8E%E8%90%8C.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;上图以两个组别和两个离散处理强度 ($d$ 和 $d^{\prime}$) 为例，展示了这些识别结果。我们可以看出，连接点 $(d, ATT(d|d))$ 和 $(d^{\prime}, ATT(d^{\prime}|d^{\prime}))$ 的直线斜率比我们关注的平均因果反应斜率 $ACRT(d^{\prime}|d^{\prime})$ 更陡。这是因为该直线在不同的 $ATT$ 函数之间存在跳跃，这种现象被选择偏误所影响，表现为在较低处理强度 $(d)$ 下处理效应的差异，即 $ATT(d|d^{\prime}) - ATT(d|d)$。在这种情况下，由于低强度组 $d$ 的观测结果不能有效地作为高强度组 $d^{\prime}$ 在低强度下的反事实结果，同时我们也无法观察到高强度组 $d^{\prime}$ 的结果 $Y_{t=2}(d)$，因此选择偏误无法被识别，导致因果解释面临困难。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;假设5 (强平行趋势)&lt;/strong&gt;：对于所有 $d\in\mathcal{D}$，&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\mathbb{E}[Y_{t=2}(d)-Y_{t=1}(0)]=\mathbb{E}[Y_{t=2}(d)-Y_{t=1}(0)|D=d]&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;假设 5 显著异于假设 4，因为它涉及了不同处理强度下的潜在结果 $Y_t(d)$，而不仅仅是未受处理的潜在结果 $Y_t(0)$&lt;/strong&gt;。需要说明的是，我们提出假设 5 的目的是为了说明连续 DID 的参数识别需要施加比假设4定义的平行趋势更强的假设，而非要求研究中在应用中采纳。事实上，在许多应用中，它可能是一个很强或者并不合理的假设。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;定理3&lt;/strong&gt;：若假设 1 至 3 和假设 5 成立，则&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(a) 对于所有 $d\in\mathcal{D}_+$，&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$$&lt;br&gt;
ATE(d)=\mathbb{E}[\Delta Y|D=d]-\mathbb{E}[\Delta Y|D=0]&lt;br&gt;
$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(b) 当假设 2(a) 成立时 (即处理效应是连续的)，对于所有 $d\in\mathcal{D}_+^c$，&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$$&lt;br&gt;
ACR(d)=\frac{\partial \mathbb{E}[\Delta Y|D=d]}{\partial d}=\frac{\partial ATE(d)}{\partial d}&lt;br&gt;
$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(c) 对于 $(h,l)\in \mathcal{D}\times\mathcal{D}$，&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$$&lt;br&gt;
ATE(h)-ATE(l)=\mathbb{E}[Y_{t=2}(h)-Y_{t=2}(l)]=\mathbb{E}[\Delta Y|D=h]-\mathbb{E}[\Delta Y|D=l]&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;当假设 2(b) 成立时 (即处理效应是离散的)，取 $h=d_j$ 和 $l=d_{j-1}$&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
ACR(d_j)=\mathbb{E}[\Delta Y|D=d_j]-\mathbb{E}[\Delta Y|D=d_{j-1}]&lt;br&gt;
$$&lt;/p&gt;
&lt;h3&gt;3.3 双向固定效应估计的参数&lt;/h3&gt;
&lt;p&gt;在实际应用中，研究者通常使用双向固定效应 (TWFE) 回归来估计连续 DID 的参数：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
Y_{i, t}=\theta_t+\eta_i+\beta^{twfe} D_i \cdot Post_t+v_{i, t}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，$\theta_t$ 和 $\eta_i$ 分别为时间固定效应和单元固定效应，$D_i$ 衡量了单元 $i$ 的处理强度，$Post_t$ 代表处理时期的虚拟变量。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;实证研究者通常以三种方式来解释参数 $\beta^{twfe}$&lt;/strong&gt;：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;直接解释为因果反应参数，即当处理强度增加 1 个单位，结果因此平均增加多少。&lt;/li&gt;
&lt;li&gt;选取一个代表性的 $d$ 值，汇报 $d \times \beta^{twfe}$，并将这个数值解释为 $ATT(d)$。在这种解释下，$\beta^{twfe}=ATT(d|d)/d$，即将 $\beta^{twfe}$ 与标准化的水平效应联系起来。&lt;/li&gt;
&lt;li&gt;选取两个不同的 $d_1$ 和 $d_2$ 值，通常为处理强度的上下四分位数，并将 $\beta^{twfe}$ 解释为处理强度由 $d_1$ 变为 $d_2$ 的平均因果反应，即为一个标准化的 $2 \times 2$ 效应。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E5%8C%85%E5%90%AB%E8%BF%9E%E7%BB%AD%E5%8F%98%E9%87%8F%E7%9A%84DID_Fig3_TWFE%E5%88%86%E8%A7%A3%E6%9D%83%E9%87%8D_%E6%9D%8E%E8%90%8C.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;在假设 4 (平行趋势) 和假设 5 (强平行趋势) 下，我们参考上表所示的 TWFE 权重对 $\beta^{twfe}$ 进行分解。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;定理4&lt;/strong&gt;：若假设 1，2(a)，3 和 4 成立，则&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(a) 因果反应分解：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$$&lt;br&gt;
\beta^{twfe}=\int_{d_L}^{d_U}w_1^{acr}(l)(ACRT(l|l)+\underbrace{\left.\frac{\partial ATT(l|h)}{\partial h}\right|&lt;em&gt;{h=l}}&lt;/em&gt;{\textit {selection bias}})dl+w_0^{acr} \frac{ATT\left(d_L|d_L\right)}{d_L}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，权重始终为正且积分为 1。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(b) 水平分解：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$$&lt;br&gt;
\beta^{twfe}=\int_{d_L}^{d_U}w_1^{lev}(l)ATT(l|l)dl&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，对于 $l\lessgtr\mathbb{E}[D]$ 有 $w_1^{lev}(l)\lessgtr0$，$\int_{d_L}^{d_U}w_1^{lev}(l)dl+w_0^{lev}(l)=0$。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(c) 标准化的水平分解：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$$&lt;br&gt;
\beta^{twfe}=\int_{d_L}^{d_U}w^{s}(l)\frac {ATT(l|l)}{l}dl&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，对于 $l\lessgtr\mathbb{E}[D]$ 有 $w^{s}(l)\lessgtr0$，$\int_{d_L}^{d_U}w^{s}(l)dl=1$。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(d) 标准化的 $2\times2$ 分解：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$$&lt;br&gt;
\beta^{twfe}=\int_{d_L}^{d_U}w_1^{2\times2}(l,h)(\underbrace{\frac{\mathbb{E}[Y_{t=2}(h)-Y_{t=2}(l)|D=h]}{h-l}}&lt;em&gt;{\textit{causal  response}}+\underbrace{\frac{ATT(l|h)-ATT(l|l)}{h-l}}&lt;/em&gt;{\textit {selection bias}})dh dl\&lt;br&gt;
+\int_{d_L}^{d_U}w_0^{2\times2}(h)\frac{ATT(l|l)}ldl&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，权重 $w_1^{2\times2}$ 和 $w_0^{2\times2}$ 始终为正且积分为 1。&lt;/p&gt;
&lt;p&gt;如果用假设 5 代替假设4，那么 (a) – (d) 中的选择偏误将为 0，且分解项的其他部分保持为真，同时(a)中的 $ACRT(l|l)$ 将替换为 $ACR(l)$，(b)、(c) 和 (d) 中的 $ATT(l|l)$ 将替换为 $ATE(l)$，将 (d) 中的 $\mathbb{E}[Y_{t=2}(h)-Y_{t=2}(l)|D=h]$ 替换为 $\mathbb{E}[Y_{t=2}(h)-Y_{t=2}(l)]$。&lt;/p&gt;
&lt;p&gt;定理 4(a) 表明，在假设 4 下，$\beta^{twfe}$ 等于 $ACRT(d|d)$ 和定理 2 中选择偏误的加权平均，权重始终为正且积分为1。定理 4(b) 表明，在平行趋势下，$\beta^{twfe}$ 等于 $ATT(d|d)$ 的加权积分，权重积分为 0，因此存在部分负权重。定理 4(c) 表明，在与 (b) 相同的条件下，$\beta^{twfe}$ 也存在负权重，即使权重积分为 1。定理 4(d) 表明，在平行趋势下，$\beta^{twfe}$ 的权重始终为正且积分为 1，但将因果效应和选择偏误混合在了一起。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;小结&lt;/strong&gt;：当参数为水平效应时 (如 (b) 和 (c))，$\beta^{twfe}$ 不会被选择偏误影响，但存在负权重。当参数涉及不同处理强度的比较时 (如 (a) 和 (d))，$\beta^{twfe}$ 不存在负权重，但会包含选择偏误。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. 能突出或总结异质性的DID估计量&lt;/h2&gt;
&lt;p&gt;为了克服 TWFE 估计的限制，我们提出了一个数据驱动的估计程序，这个程序适用于定义明确的因果参数，并且不受限于参数的函数形式。&lt;/p&gt;
&lt;h3&gt;4.1 平均因果函数的非参数估计&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;当处理效应为多值离散时&lt;/strong&gt;，处理效应的异质性相对简单，可以通过比较均值来实现。具体而言，只需要将未受处理的单元省略，对结果变化和一组饱和的处理强度指标进行回归：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\Delta Y_i=\beta_0+\sum_{j=1}^J1{D_i=d_j}\beta_j+\varepsilon_i&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;在平行趋势假设 (PT) 下，OLS 的回归系数 $\widehat{\beta}=(\widehat{\beta}_1,\ldots,\widehat{\beta}_J)^{\prime}$ 是 $ATT(d|d)$ 的估计量。在强平行趋势假设 (SPT) 下， $\widehat{\beta}_j$ 都是 $ATE(d_j)$ 的一致 (非参数) 估计量，且 $\widehat{\beta}&lt;em&gt;j-\widehat{\beta}&lt;/em&gt;{j-1}$ 是 $ACR(d_j)$ 的一致 (非参数) 估计量。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;当处理组很小或者处理效应绝对连续时&lt;/strong&gt;，上述处理方式就变得不太理想，尤其是当研究者不进行严格的函数形式假设时。具体而言，考虑以下回归识别方式：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\Delta Y_i=\sum_{k=1}^K\psi_{Kk}(D)\beta_{Kk}+\varepsilon_i&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，$\psi^K(d)=(\psi_{K1}(d),\psi_{K2}(d),\ldots,\psi_{KK}(d))^{\prime}$ 是对处理强度 $D$ (包括截距项) 进行灵活转换的 $K$ 维向量 (已知)，$\beta_K=(\beta_{K1},\beta_{K2},\ldots,\beta_{KK})^{\prime}$ 是有限维度参数的向量(未知)，$\varepsilon_i$ 是误差项。&lt;/p&gt;
&lt;p&gt;实现这种回归识别的主要挑战在于选择转换类型 ($\psi^K(d)$，基函数) 和项数 $K$。在缺乏关于函数形式的外部信息，尤其是对 $K$ 的了解时，我们很难证明这种选择是合理的。不当的调参可能导致估计量收敛速度过慢，置信区间的渐进覆盖率不准确；而包含过多的项数则可能导致过度拟合和不准确的估计，反之，项数过少则可能无法充分捕捉异质性，从而无法消除偏差。此外，“良好”的调参选择通常需要对模型结构有更深入的理解，但在实际操作中，这些信息往往是事先未知的。&lt;/p&gt;
&lt;p&gt;因此，我们基于 Chen, Christensen 和 Kankanala (2023) 的研究 (以下简称为 CCK) ，提出了一种非参数估计量，以适应这些未知模型的规律，生成具有统计保证的估计量和置信区间，并且操作简便。&lt;/p&gt;
&lt;p&gt;这种数据驱动的 DID 估计量的实现主要包括以下步骤：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;选择一组基函数 $\psi^K(d)$。&lt;/strong&gt; 我们将选择范围限定为二进制立方 B 样条 (一种特殊的B样条基函数，在非参数统计和机器学习领域中被广泛使用)，详细分析参见 CCK。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;计算数据驱动的筛子维度 $\widehat K$，并得出相应的 $ATE(d)$ 和 $ACR(d)$ 估计量。&lt;/strong&gt; 这一步的算法核心是在“偏差”和“方差”之间进行权衡：如果估计的 $ATE_K(d)$ 曲线没有统计上的显著差异，则在所有备选项中选择最简约的范式；如果提高 $K$ 会带来 $ATE_K(d)$ 估计在统计上的显著差异，则增加维度。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;计算 $ATE(\cdot)$ 和 $ACR(d)$ 的统一置信区间。&lt;/strong&gt; 这一步算法基本与传统计算统一置信区间的方式基本相同，只是“膨胀”了临界值以考虑可能与标准差成比例的潜在偏误。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;4.2 加总处理效应的非参数估计&lt;/h3&gt;
&lt;p&gt;当存在未受处理的单元时，&lt;strong&gt;$ATT(d|d)$&lt;/strong&gt; 和 &lt;strong&gt;$ATE(d)$&lt;/strong&gt; 估计量可以通过一种简单的方式得到：用接受处理的单元的平均结果变化减去未受处理的单元的平均结果变化。这种二元的 DID 估计量可以通过下面这种简单的线性回归得到：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\Delta Y_i=\beta_0^{bin}+D_i^{&amp;gt;0}\beta^{bin}+\epsilon_i&lt;br&gt;
$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;其中，$D_i^{&amp;gt;0}=1{D_i&amp;gt;0}$ 是一个处理强度是否大于 0 的虚拟变量，$\beta_0^{bin}$ 和$\beta^{bin}$ 是有限维度的参数 (未知)，$\epsilon_i$ 是误差项。&lt;/li&gt;
&lt;li&gt;在假设 1 至假设 4 下,只要满足一些较弱的标准正则条件，都有 $\beta^{bin}=ATT^o$。&lt;/li&gt;
&lt;li&gt;用假设 5 的 SPT 代替假设 4 的 PT，则有 $\beta^{bin}=ATE^o$。&lt;/li&gt;
&lt;li&gt;这种估计量以相同方式应用于连续或多值离散的处理效应中。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;加总的平均因果反应参数则可以通过使用处理强度的分布对估计的平均因果函数进行加权得到。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. 拓展分析&lt;/h2&gt;
&lt;h3&gt;5.1 放松强平行趋势假设&lt;/h3&gt;
&lt;p&gt;第一，研究者会假设他们了解选择偏误的方向。例如，假设对处理强度 $d$ 和任意强度组 $l&amp;lt;h$，$ATT(d|l)\le ATT(d|h)$，也就是说接受处理强度更大的组会经历更强的处理效应。这种假设能够在不依赖强平行趋势的前提下，为因果效应参数提供有参考价值的界限。&lt;/p&gt;
&lt;p&gt;第二，研究者可以定义一个子区域 $\mathcal{D_s} \subseteq \mathcal{D}$ 使强平行趋势在其中成立。这意味着可以识别局部性比 $ATE(d)$ 强、比 $ATT(d)$ 弱的参数。这种“局部 SPT”适用于处理强度有显著差异，并且研究者假设相似处理强度的单元间不存在选择偏误，但不假设处理强度显著不同的单元间不存在选择偏误。&lt;/p&gt;
&lt;p&gt;第三，某些情况下，在加入可观测的协变量 $X$ 后，强平行趋势可能更合理。在这种条件下，研究者可以识别条件平均处理效应 $ATE_x(d)=\mathbb{E}[Y_{t=2}(d)-Y_{t=2}(0)|X=x]$。&lt;/p&gt;
&lt;h3&gt;5.2 多时点和处理时间变化&lt;/h3&gt;
&lt;p&gt;在多时点情况下 (即一旦某个单元接受了强度为 $d$ 的处理，则该单元在之后的时期内仍接受强度为 $d$ 的处理) ，我们需要对潜在结果进行拓展，将 $Y_{i,t}(g,d)$ 写为单元 $i$ 在时间 $t$ 的潜在结果，如果该单元在时间 $g$ 首次接受强度为 $d$ 的处理。如果有些单元一直到数据的最后一个时期仍未接受处理，则写为 $Y_{i,t}(0)=Y_{i,t}(\infty,0)$。在这种情况下，我们将 $ATE(d)$ 的多时期版本定义为：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
ATE(g,t,d)=\mathbb{E}[Y_t(g,d)-Y_t(0)|G=g]&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;$ACR(g,t,d)$ 则定义为 $ATE(g,t,d)$ 关于 $d$ 的导数。&lt;/p&gt;
&lt;h3&gt;5.3 多时点/组别的TWFE回归&lt;/h3&gt;
&lt;p&gt;当存在多个时期或处理时间变化时，TWFE 回归 (i) 仍然面临我们在定理 4 中指出的权重和选择偏误问题，(ii) 仍然存在二元、交错处理效应中常见的权重问题 (包括可能的负权重)，以及 (iii) 会受到处理前时期违反平行趋势假设的影响。&lt;/p&gt;
&lt;h3&gt;5.4 事件研究法和处理前差异&lt;/h3&gt;
&lt;p&gt;在连续 DID 设计中，可以检验 $\mathbb{E}[\Delta Y_t|D=d]=\mathbb{E}[\Delta Y_t|D=0]$ 是否在处理前的所有时期 $t$ 和所有强度 $d$ 下都成立。然而，由于涉及了多个“强度-反应”函数的非参数估计，这个检验可能会很复杂。一个便捷的替代方法是汇报处理前的加总事件研究参数，通过绘制处理前参数的估计值，评估平行趋势和强平行趋势的合理性，但这种采用事件研究法的处理也有着潜在的缺陷，即无法检验到违反平行趋势的情况，且统计力度可能不足。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;6. 总结&lt;/h2&gt;
&lt;p&gt;我们已经详细探讨了连续 DID 设计中的两种因果效应 (平均水平效应和平均因果反应) ，描述了识别这些效应所需要的不同假设 (平行趋势和强平行趋势)，并对这些效应进行了总结，指出了 TWFE 估计系数至少存在以下三个问题之一：负权重、选择偏误和不易理解的权重组合。最后，针对上述情况，我们提出了一种数据驱动的非参数估计以避免 TWFE 估计的限制。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;7. 参考资料&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Acemoglu, D., and Finkelstein, A. 2008. Input and technology choices in regulated industries: Evidence from the health care sector. &lt;em&gt;Journal of Political Economy&lt;/em&gt;, 116(5), 837-880. &lt;a href=&quot;https://sci-hub.se/10.1086/595014&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Chen, X., Christensen, T., and Kankanala, S. 2024. Adaptive estimation and uniform confidence bands for nonparametric structural functions and elasticities. &lt;em&gt;Review of Economic Studies&lt;/em&gt;, 00, 1-35. &lt;a href=&quot;https://watermark.silverchair.com/rdae025.pdf?token=AQECAHi208BE49Ooan9kkhW_Ercy7Dm3ZL_9Cf3qfKAc485ysgAAA4YwggOCBgkqhkiG9w0BBwagggNzMIIDbwIBADCCA2gGCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQMHewepk0hOg98fYWnAgEQgIIDOaFlH9QyXkRcqjVN_sc5Rp3qQl6LEw-Gv1u_QdHt8tu43EDYYrNrwHRW_62Wkc9uivC-jfKwqu5NwxkOmdWpmPteOPnoiMaOEJbDcEOkrOEWfW73aMwYkC2h05v47oHMCo5oIXzStupYDbgpfAjEViTqaYRfNsja1wFZVsWLzH2k5Rx3HE2uUKtxb6LGiIgaE2_6fjBzgOKkGaVAUHjuL6i_H3-R1q97FPEsz7ynsT1ABIR8s1s3nt2O8qmQoX2XQk588kTg4km1eHfH0uGdjOZTDTPLu-cEwIIfPE6dB_3e5YoDJ-ju3EdtwCG1d8Ihpnuwf0CxlZMx_zmz9stj5cRPQKdd0SUtnwLeHsu_jfzf3K3ZQdHvj-rTNDPCmmbVtSFiCJ6b8uP_d9vnXd_yzI6pIf24INzWU0nzvM3A3Ydx-owswybKtmKMl6NUBpK-zABSnqGrXhpF-UvKTHhNDHwWYHkjBEdJfIt7DcqhXhsXkt4e_qILUrj8W6yze5KkLoZxuHCWw7E4Zlzk1c-MEBFoCfWLUE4BVHKFTULvz_OLw1sc2u37TvRD0gRgduabVAel8G2yOHU7yxidyFIa722GGe3cvu4D0Kiq0Y9_QFBmy5LlEHWs62o0y_eGw3F6407FAgXWTkxuzP-RHunoMv1ajnX9XmkRZgroZzIFtoTLdnxXvZQJAgAm0ueb6qR2ZkogMp_2CCyVbF7NG2W-llyCWTpYokXT068e0ZOVS6c3_V4E3mMkEz9xsHl1r6TKcqhVpUY0FPCqC7tQUivpwXDQ-iofdJBwvi-bi7pls95yuesrMlrBtwheDU8fHoMUrEeHP2r5fjYlKx6W2lzpasO3ftER2NGPZDl-VZjaHp2_fN7iJYZJ7NB9c-7EY7v2MzboCSrgeyBQcKh7Q3jNdtT25BF-SMOhNDLfwsEOPCBXYpWM2BONlh1OgedfhxbOPFbemjoVMDByfQJ_Knfd1O7eY7GAQEdA8zM7B7B1wtnifaEKUw-0iAFpsh8lENrNyrS329Pz8gsWoQoLaM6Glj0nBgtpxHRhQ9S_Q8Kllc9KLNo2PCA9NEgCTewg2mI2syshDbMqC5gORw&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;8. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh did, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;倍分法DID&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;周嘉怡, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1097.html&quot;&gt;Stata：各种DID估计量的比较分析&lt;/a&gt;, 连享会 No.1097.&lt;/li&gt;
&lt;li&gt;周涛, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/504.html&quot;&gt;DID：仅有几个实验组样本的倍分法 (双重差分)&lt;/a&gt;, 连享会 No.504.&lt;/li&gt;
&lt;li&gt;周瑾, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1482.html&quot;&gt;sdid_event命令：合成DID事件研究法&lt;/a&gt;, 连享会 No.1482.&lt;/li&gt;
&lt;li&gt;安贤娟, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/165.html&quot;&gt;Big Bad Banks：多期 DID 经典论文介绍&lt;/a&gt;, 连享会 No.165.&lt;/li&gt;
&lt;li&gt;宋燕欣, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/601.html&quot;&gt;DIDM：多期多个体倍分法-did_multiplegt&lt;/a&gt;, 连享会 No.601.&lt;/li&gt;
&lt;li&gt;展一帆, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/592.html&quot;&gt;面板PSM+DID如何做匹配？&lt;/a&gt;, 连享会 No.592.&lt;/li&gt;
&lt;li&gt;巴宁, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/840.html&quot;&gt;Stata：空间双重差分模型(Spatial DID)-xsmle&lt;/a&gt;, 连享会 No.840.&lt;/li&gt;
&lt;li&gt;庞小冬, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1293.html&quot;&gt;组内队列DID：高知女性愿意生更多孩子吗？-within cohort DID&lt;/a&gt;, 连享会 No.1293.&lt;/li&gt;
&lt;li&gt;康希, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1347.html&quot;&gt;Stata-DID：异质性多期估计方法-Bacon分解&lt;/a&gt;, 连享会 No.1347.&lt;/li&gt;
&lt;li&gt;张伟广, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/381.html&quot;&gt;Stata：双重差分的固定效应模型-(DID)&lt;/a&gt;, 连享会 No.381.&lt;/li&gt;
&lt;li&gt;张子楠, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1024.html&quot;&gt;DID偏误问题：两时期DID的双重稳健估计量(上)-drdid&lt;/a&gt;, 连享会 No.1024.&lt;/li&gt;
&lt;li&gt;张子楠, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1027.html&quot;&gt;DID偏误问题：多时期DID的双重稳健估计量(下)-csdid&lt;/a&gt;, 连享会 No.1027.&lt;/li&gt;
&lt;li&gt;张梓瑶, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/829.html&quot;&gt;如何在R语言中实现多期DID&lt;/a&gt;, 连享会 No.829.&lt;/li&gt;
&lt;li&gt;张超, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/649.html&quot;&gt;Stata倍分法：全国一刀切的DID&lt;/a&gt;, 连享会 No.649.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;断点回归RDD&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;张超, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/763.html&quot;&gt;Stata：RDD-DID-断点回归与倍分法完美结合&lt;/a&gt;, 连享会 No.763.&lt;/li&gt;
&lt;li&gt;张远远, 2019, &lt;a href=&quot;https://www.lianxh.cn/details/76.html&quot;&gt;Stata：多期倍分法 (DID) 详解及其图示&lt;/a&gt;, 连享会 No.76.&lt;/li&gt;
&lt;li&gt;彭晴, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1071.html&quot;&gt;DID新进展：异质性多期DID估计的新方法-csdid&lt;/a&gt;, 连享会 No.1071.&lt;/li&gt;
&lt;li&gt;曹昊煜, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/536.html&quot;&gt;Fuzzy DID：模糊倍分法&lt;/a&gt;, 连享会 No.536.&lt;/li&gt;
&lt;li&gt;朱学贵, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/259.html&quot;&gt;多期DID之安慰剂检验、平行趋势检验&lt;/a&gt;, 连享会 No.259.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;内生性-因果推断&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;李安琪, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/438.html&quot;&gt;Change-in-Change（CIC）：双重变化模型&lt;/a&gt;, 连享会 No.438.&lt;/li&gt;
&lt;li&gt;李胜胜, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/606.html&quot;&gt;DID陷阱解析-L111&lt;/a&gt;, 连享会 No.606.&lt;/li&gt;
&lt;li&gt;李闯, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1201.html&quot;&gt;多时点DID保姆级教程(上)-平行趋势检验&lt;/a&gt;, 连享会 No.1201.&lt;/li&gt;
&lt;li&gt;李闯, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1163.html&quot;&gt;多时点DID保姆级教程(下)-安慰剂检验&lt;/a&gt;, 连享会 No.1163.&lt;/li&gt;
&lt;li&gt;杜静玄, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/846.html&quot;&gt;DID最新进展：异质性处理条件下的双向固定效应DID估计量 (TWFEDD)&lt;/a&gt;, 连享会 No.846.&lt;/li&gt;
&lt;li&gt;杜静玄, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1116.html&quot;&gt;Stata：Mundlak方法的DID-jwdid&lt;/a&gt;, 连享会 No.1116.&lt;/li&gt;
&lt;li&gt;杜静玄, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/853.html&quot;&gt;Stata：事件研究法的稳健有效估计量-did_imputation&lt;/a&gt;, 连享会 No.853.&lt;/li&gt;
&lt;li&gt;杨云帆, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1517.html&quot;&gt;地方选举的兴衰——交叠DID的应用&lt;/a&gt;, 连享会 No.1517.&lt;/li&gt;
&lt;li&gt;杨云帆, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1321.html&quot;&gt;论文复现：多期DID应用之地方选举的兴衰&lt;/a&gt;, 连享会 No.1321.&lt;/li&gt;
&lt;li&gt;梁淑珍, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/823.html&quot;&gt;Stata：异质性稳健DID估计量方法汇总&lt;/a&gt;, 连享会 No.823.&lt;/li&gt;
&lt;li&gt;王昆仑, 2019, &lt;a href=&quot;https://www.lianxh.cn/details/73.html&quot;&gt;倍分法DID详解 (一)：传统 DID&lt;/a&gt;, 连享会 No.73.&lt;/li&gt;
&lt;li&gt;王昆仑, 2019, &lt;a href=&quot;https://www.lianxh.cn/details/9.html&quot;&gt;倍分法DID详解 (三)：多时点 DID (渐进DID) 的进一步分析&lt;/a&gt;, 连享会 No.9.&lt;/li&gt;
&lt;li&gt;王昆仑, 2019, &lt;a href=&quot;https://www.lianxh.cn/details/72.html&quot;&gt;倍分法DID详解 (二)：多时点 DID (渐进DID)&lt;/a&gt;, 连享会 No.72.&lt;/li&gt;
&lt;li&gt;王烨文, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1467.html&quot;&gt;Stata：平行趋势敏感性检验-honestdid&lt;/a&gt;, 连享会 No.1467.&lt;/li&gt;
&lt;li&gt;秦利宾, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/639.html&quot;&gt;队列DID：以知识青年“上山下乡”为例-T401&lt;/a&gt;, 连享会 No.639.&lt;/li&gt;
&lt;li&gt;笑花心, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/464.html&quot;&gt;tfdiff：多期DID的估计及图示&lt;/a&gt;, 连享会 No.464.&lt;/li&gt;
&lt;li&gt;胡文涛, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/627.html&quot;&gt;DID功效计算中的序列相关问题-T407&lt;/a&gt;, 连享会 No.627.&lt;/li&gt;
&lt;li&gt;胡文涛, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/679.html&quot;&gt;Stata倍分法新趋势：did2s-两阶段双重差分模型&lt;/a&gt;, 连享会 No.679.&lt;/li&gt;
&lt;li&gt;胡文涛, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/638.html&quot;&gt;倍分法：交错DID与Stata操作&lt;/a&gt;, 连享会 No.638.&lt;/li&gt;
&lt;li&gt;胡艺泽, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/567.html&quot;&gt;倍分法：DID是否需要随机分组？&lt;/a&gt;, 连享会 No.567.&lt;/li&gt;
&lt;li&gt;苗妙, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/142.html&quot;&gt;DID的陷阱和注意事项&lt;/a&gt;, 连享会 No.142.&lt;/li&gt;
&lt;li&gt;袁子晴, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/499.html&quot;&gt;考虑溢出效应的倍分法：spillover-robust DID&lt;/a&gt;, 连享会 No.499.&lt;/li&gt;
&lt;li&gt;袁洛琪, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/321.html&quot;&gt;Stata：DID入门教程&lt;/a&gt;, 连享会 No.321.&lt;/li&gt;
&lt;li&gt;连享会, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1349.html&quot;&gt;2024 五一论文班 · 30 名助教为您答疑解惑&lt;/a&gt;, 连享会 No.1349.&lt;/li&gt;
&lt;li&gt;连享会, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1395.html&quot;&gt;2024 政策优化和机制分析专题-连享会&lt;/a&gt;, 连享会 No.1395.&lt;/li&gt;
&lt;li&gt;连享会, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/433.html&quot;&gt;Abadie新作：简明IV,DID,RDD教程和综述&lt;/a&gt;, 连享会 No.433.&lt;/li&gt;
&lt;li&gt;连享会, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1048.html&quot;&gt;NEW-面板数据因果推断：从入门到精通&lt;/a&gt;, 连享会 No.1048.&lt;/li&gt;
&lt;li&gt;连享会, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/439.html&quot;&gt;倍分法DID：一组参考文献&lt;/a&gt;, 连享会 No.439.&lt;/li&gt;
&lt;li&gt;连享会, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1326.html&quot;&gt;助教入选通知-2024Stata寒假班&lt;/a&gt;, 连享会 No.1326.&lt;/li&gt;
&lt;li&gt;连享会, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1439.html&quot;&gt;连享会 · 2024 空间计量专题&lt;/a&gt;, 连享会 No.1439.&lt;/li&gt;
&lt;li&gt;连享会, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1292.html&quot;&gt;连享会-2024寒假班&lt;/a&gt;, 连享会 No.1292.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1535.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1535.html</guid><pubDate>Tue, 07 Jan 2025 16:00:00 GMT</pubDate><author>李萌</author></item><item><title>AITurk 平台论文复现</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：邱一崎 (四川大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:6243715837@qq.com&quot;&gt;6243715837@qq.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;：本文主要整理自下文，特此致谢！&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Qin X, Huang M, Ding J. AITurk: Using ChatGPT for Social Science Research[J]. Available at SSRN 4922861, 2024. &lt;a href=&quot;https://papers.ssrn.com/sol3/Delivery.cfm?abstractid=4922861&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Dang C T, Volpone S D, Umphress E E. The ethics of diversity ideology: Consequences of leader diversity ideology on ethical leadership perception and organizational citizenship behavior[J]. Journal of Applied Psychology, 2023, 108(2): 307. &lt;a href=&quot;https://psycnet.apa.org/record/2022-42350-001&quot;&gt;-Link-&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Title&lt;/strong&gt;：AITurk 平台论文复现&lt;br&gt;
&lt;strong&gt;Keywords&lt;/strong&gt;：Mturk，AITurk，ChatGPT，AI 模拟，论文复现&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 研究概要&lt;/h2&gt;
&lt;p&gt;中山大学的秦昕教授及其合作团队最近开展了一项研究，探讨了利用人工智能 (AI) 模拟真实人类被试参与研究的有效性。该研究开发了 AITurk 平台 (网址：www.aiturk.cc)，借助 ChatGPT 的能力模仿人类反应，将 AI 作为被试来收集数据。研究团队复制了 2023 年 1 月至 6 月间在顶级心理学期刊上发表的 22 项研究，为 AI 模拟人类行为的应用奠定了基础。&lt;/p&gt;
&lt;p&gt;结果显示，ChatGPT 成功复现了约 93.2% 的研究结论，准确率极高。与在线众包平台 Mturk 相比，AITurk 在收集数据时具有以下几点优势 (以收集 300 个被试为例)：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;准确率高：论文复现中，AITurk 实现 93.2% 的准确度；&lt;/li&gt;
&lt;li&gt;成本低：AITurk 仅需 6 美元，而 MTurk 需要 180 美元；&lt;/li&gt;
&lt;li&gt;时间快：AITurk 仅需 0.5 min，而 MTurk 需要 720 min；&lt;/li&gt;
&lt;li&gt;高效能：每组仅 30 个被试的小样本即可复现结果。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;但需要注意的是，AITurk 平台重点在复现主效应，而非调节效应或中介效应。因此本文将采用 AITurk 平台复现论文，并展示平台使用过程。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 数据背景&lt;/h2&gt;
&lt;p&gt;秦昕教授原文共复现了 22 项研究，本文选择了其中一篇论文进行复现，该论文为 The ethics of diversity ideology: Consequences of leader diversity ideology on ethical leadership perception and organizational citizenship behavior，以下是论文的假设及实验过程 (由于本文重点在于如何使用 AITurk 平台复现顶刊论文的数据，并验证基本假设，因此该论文的研究背景、基本概念等不做赘述)。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;H1：与持有无身份意识观念 (colorblind, meritocracy, assimilation group) 的领导相比，追随者更容易感知到具有身份认同意识观念（如多元文化群体）领导的道德水平。&lt;/li&gt;
&lt;li&gt;H2：追随者的制度性歧视意识调节了领导者的身份意识观念 (multicultural vs. colorblind, meritocracy, assimilation)。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/AITurk%E5%B9%B3%E5%8F%B0%E8%AE%BA%E6%96%87%E5%A4%8D%E7%8E%B0_Fig1_%E6%A8%A1%E5%9E%8B_%E9%82%B1%E4%B8%80%E5%B4%8E.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;在 AITurk 平台收集数据前，需要获取该实验的基本信息，包括被试的人口统计特征、实验设计、变量测量。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;人口统计特征&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;样本总量：283 (为节约成本，本文仅用了 30 个样本来验证假设有效性)&lt;/li&gt;
&lt;li&gt;女性占比：43%&lt;/li&gt;
&lt;li&gt;平均年龄：31.42&lt;/li&gt;
&lt;li&gt;年龄方差：13.12&lt;/li&gt;
&lt;li&gt;实验地点：United States of America&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;实验设计&lt;/strong&gt; (为尽量保证输入进 AITurk 的内容与原文一致，因此下面内容都用英文展示)：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;实验类型：基于情景的组间实验&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;实验步骤：&lt;em&gt;we used an adapted experimental design from previous leadership research (Dang et al., 2017). Participants were told that they were completing a multipart study about leadership. In Part 1, participants were instructed to write a short essay about a time when they were a leader, and what they were asked/task to do. We did this to set up the leader–follower simulation in Part 2, where participants were told that they would be randomly presented with another participant’s essay to review. In Part 3, participants were told that they would be participating in a team task led by the participant whose leadership essay they read in Part 2. To enhance realism, when participants submitted their personal essay in Part 1, the computer initiated a wait screen with a continuous circle until the supposedly randomly selected essay appeared for participants’ assessment. After completing Parts 1–3, participants were directed to an ostensibly different study where institutional discrimination awareness, controls, and demographics were measured. We manipulated leader diversity ideology in Part 2 by varying the statements the leader made in their essay about managing race/ ethnic diversity in the workplace.&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;实验分组：4 组&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;multicultural 组：&lt;em&gt;As someone who has had many work experiences, I can talk about a time when I was asked to deliver a speech to my work unit about how to manage diversity in the workplace. Personally, I believe that multiculturalism is the best way to approach diversity. We are all human But it is important to acknowledge and value people’s racial/ethnic differences. So as a leader, employees’ racial/ ethnic differences are important to me and should be valued. In fact, I think it’s important for leaders of companies to expose their followers to the different racial and ethnic groups within the company. As such, I like to create environments where our differences—both racial and ethnic— are recognized. I achieve this by acknowledging people’s heritages.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;colorblind 组：&lt;em&gt;As someone who has had many work experiences, I can talk about a time when I was asked to deliver a speech to my work unit about how to manage diversity in the workplace. Personally, I believe that being colorblind is the best way to approach diversity. We are all human. We should acknowledge and value our similarities rather than our racial/ethnic differences. So as a leader, employees’ racial/ ethnic differences aren’t that important to me and shouldn’t be overly valued. In fact, I think it’s important for leaders of companies to not expose their followers to the different racial and ethnic groups within the company. As such, I like to create environments where our differences—both racial and ethnic— are minimized. I achieve this by not acknowledging people’s heritages.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;meritocracy 组：&lt;em&gt;As someone who has had many work experiences, I can talk about a time when I was asked to deliver a speech to my work unit about how to manage diversity in the workplace. Personally, I believe that meritocracy is the best way to approach diversity. We are all human. If we judge people by their merits (meaning we judge them by their qualifications like their job-relevant knowledge, skills and abilities), we shouldn’t acknowledge and value our racial/ ethnic differences. So as a leader, so long as employees have been treated in a meritocratic way and judged based on their qualifications, employees’ racial/ethnic differences aren’t that important to me and shouldn’t be overly valued. In fact, I think it’s important for leaders of companies to not expose their followers to the different racial and ethnic groups within the company so long as the company operates under meritocratic ideologies. I achieve this by making sure that policies and procedures are meritocratic.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;assimilation 组:&lt;em&gt;As someone who has had many work experiences, I can talk about a time when I was asked to deliver a speech to my work unit about how to manage diversity in the workplace. Personally, I believe that assimilation is the best way to approach diversity. We are all human. We should put aside our racial/differences and assimilate to the mainstream group and the mainstream group’ norms. So as a leader, employees’ racial/ ethnic differences aren’t that important to me and shouldn’t be overly valued. In fact, I think it’s important for leaders of companies to not expose their followers to the different racial and ethnic groups within the company. I achieve this by having people blend in with their environment.&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;变量测量&lt;/strong&gt;：复现时主要涉及两个变量，即道德领导感知 (Ethical Leadership Perception，因变量)，制度性歧视意识 (Institutional Discrimination Awareness，调节变量)。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;道德领导感知 (Ethical Leadership Perception) 测量题项如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The leader seems to conduct his/her personal life in an ethical manner.&lt;/li&gt;
&lt;li&gt;The leader seems to define success not just by results but also by the way that the results were obtained.&lt;/li&gt;
&lt;li&gt;The leader seems to listen to what employees have to say.&lt;/li&gt;
&lt;li&gt;It seems likely that the leader would discipline employees who violate ethical standards.&lt;/li&gt;
&lt;li&gt;It seems like the leader would make fair and balanced decisions.&lt;/li&gt;
&lt;li&gt;I think the leader can be trusted.&lt;/li&gt;
&lt;li&gt;It seems like the leader would discuss business ethics or values with employees.&lt;/li&gt;
&lt;li&gt;The leader seems to be able to set an example of how to do things the right way in terms of ethics.&lt;/li&gt;
&lt;li&gt;The leader seems to have the best interests of employees in mind.&lt;/li&gt;
&lt;li&gt;When making decisions, it seems like the leader would ask “what is the right thing to do?”&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;制度性歧视意识 ( Institutional Discrimination Awareness ) 测量题项如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Social policies, such as affirmative action, discriminate unfairly against white people.&lt;/li&gt;
&lt;li&gt;White people in the U.S. are discriminated against because of the color of their skin.&lt;/li&gt;
&lt;li&gt;English should be the only official language in the U.S.&lt;/li&gt;
&lt;li&gt;Due to racial discrimination, programs such as affirmative action are necessary to help create equality.&lt;/li&gt;
&lt;li&gt;Racial and ethnic minorities in the U.S. have certain advantages because of the color of their skin.&lt;/li&gt;
&lt;li&gt;It is important that people begin to think of themselves as American and not African American, Mexican American, or Italian American.&lt;/li&gt;
&lt;li&gt;Immigrants should try to fit into the culture and values of the U.S.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;收集完被试、实验和变量测量的基本信息后，就可以把这些复制粘贴进 AITurk 平台 ( www.aiturk.cc) 中了，部分截图如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/AITurk%E5%B9%B3%E5%8F%B0%E8%AE%BA%E6%96%87%E5%A4%8D%E7%8E%B0_Fig2_%E5%B9%B3%E5%8F%B0%E6%88%AA%E5%9B%BE1_%E9%82%B1%E4%B8%80%E5%B4%8E.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/AITurk%E5%B9%B3%E5%8F%B0%E8%AE%BA%E6%96%87%E5%A4%8D%E7%8E%B0_Fig1_%E5%B9%B3%E5%8F%B0%E6%88%AA%E5%9B%BE2_%E9%82%B1%E4%B8%80%E5%B4%8E.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/AITurk%E5%B9%B3%E5%8F%B0%E8%AE%BA%E6%96%87%E5%A4%8D%E7%8E%B0_Fig1_%E5%B9%B3%E5%8F%B0%E6%88%AA%E5%9B%BE3_%E9%82%B1%E4%B8%80%E5%B4%8E.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;所有信息填完以后即可点击训练，就可以得到由AI组成的样本。本文只搜集了 30 个样本，训练时间 4.2 秒。接下来使用R对假设进行验证。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 假设验证&lt;/h2&gt;
&lt;h3&gt;3.1 数据准备&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;# 载入包
library(tidyverse)
library(readxl)
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;#读取数据
data&amp;lt;-read_excel(&quot;AITurk_data (study_title=replicate learning, n=30).xlsx&quot;)
data

attach(data)
var_institutional_dis&amp;lt;-c(&quot;institutional discrimination_1&quot;,&quot;institutional discrimination_2&quot;,&quot;institutional discrimination_3&quot;,&quot;institutional discrimination_4&quot;,&quot;institutional discrimination_5&quot;,&quot;institutional discrimination_6&quot;,&quot;institutional discrimination_7&quot;)
var_ethical_leadership_per&amp;lt;-c(&quot;Ethical Leadership perception_1&quot;,&quot;Ethical Leadership perception_2&quot;,&quot;Ethical Leadership perception_3&quot;,&quot;Ethical Leadership perception_4&quot;,&quot;Ethical Leadership perception_5&quot;,&quot;Ethical Leadership perception_6&quot;,&quot;Ethical Leadership perception_7&quot;,&quot;Ethical Leadership perception_8&quot;,&quot;Ethical Leadership perception_9&quot;,&quot;Ethical Leadership perception_10&quot;)
var_OCBO&amp;lt;-c(&quot;OCBO_1&quot;,&quot;OCBO_2&quot;,&quot;OCBO_3&quot;,&quot;OCBO_4&quot;,&quot;OCBO_5&quot;,&quot;OCBO_6&quot;,&quot;OCBO_7&quot;,&quot;OCBO_8&quot;)

#处理反向题：
data$`institutional discrimination_4`&amp;lt;-8-data$`institutional discrimination_4`

# 通过mean合并成summary variable
data&amp;lt;-data%&amp;gt;%
  mutate(mean_institutional_dis=rowMeans(select(.,var_institutional_dis)),
         mean_ethical_leadership_per=rowMeans(select(.,var_ethical_leadership_per)),
         mean_OCBO=rowMeans(select(.,var_OCBO)))

#将multicultural作为参考组
data$condition_label&amp;lt;-factor(data$condition_label,levels=c(&quot;multicutural&quot;,&quot;colorblind&quot;,&quot;Meritocracy&quot;,&quot;Assimilation&quot;))  
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;3.2 主效应检验&lt;/h3&gt;
&lt;p&gt;数据准备好以后，就可以开始主效应检验了，即验证 H1。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;hypothesis_1&amp;lt;-lm(mean_ethical_leadership_per~condition_label+race+gender,data=data)
print(summary(hypothesis_1))
print(anova(hypothesis_1))
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;结果表明，multicutural 组的道德领导感知均显著大于另外三组 (corlorblind, meritocracy, assimilation)，假设 1 得到验证。&lt;/p&gt;
&lt;h3&gt;3.3 调节效应检验&lt;/h3&gt;
&lt;p&gt;接下来进行调节效应检验：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;hypothesis_2&amp;lt;-lm(mean_ethical_leadership_per~condition_label*institutional_dis_label++race+gender,data=data)
print(summary(hypothesis_2))
print(anova(hypothesis_2))
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;方差分析的交互项显著表明组间差异显著，即制度性歧视意识与 leader diversity ideology 交互项显著影响 ethical leadership perception。原假设指出在制度性歧视意识较高水平时，multicultural 组的道德领导感知都高于另外三组 (corlorblind, meritocracy, assimilation)。但本文的结果仅支持 multicultural 组只高于其中两组 (corlorblind, meritocracy)。因此 H2 调节效应只得到部分验证。&lt;/p&gt;
&lt;h3&gt;3.4 稳健性检验&lt;/h3&gt;
&lt;p&gt;为了验证 H1 和 H2 的稳健性，本文在 AITurk 平台上分别搜集了三次数据 (见下面截图) ，并分开做了同样的主效应和调节效应分析，结果表明主效应稳定显著，但每一次样本得到的调节效应都发生变化。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/AITurk%E5%B9%B3%E5%8F%B0%E8%AE%BA%E6%96%87%E5%A4%8D%E7%8E%B0_Fig1_%E7%A8%B3%E5%81%A5%E6%80%A7%E6%A3%80%E9%AA%8C_%E9%82%B1%E4%B8%80%E5%B4%8E.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. 结论&lt;/h2&gt;
&lt;p&gt;最后总结一下，正如秦昕教授团队在研究论文中注明的那样：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AITurk 在验证主效应方面稳健且高质量，能够复现顶刊文章。&lt;/li&gt;
&lt;li&gt;AITurk 无法有效验证调节效应或中介效应。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh Bootstrap 蒙特卡洛, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/26.html&quot;&gt;Stata程序&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;侯新烁, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/405.html&quot;&gt;Stata：蒙特卡洛模拟A-(Monte-Carlo-Simulation)没那么神秘&lt;/a&gt;, 连享会 No.405.&lt;/li&gt;
&lt;li&gt;吴雄, 童天天, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/43.html&quot;&gt;Stata：Bootstrap-自抽样-自举法&lt;/a&gt;, 连享会 No.43.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/43.html&quot;&gt;Stata命令&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;周圆, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1188.html&quot;&gt;Stata：Bayes Bootstrap介绍-exbsample&lt;/a&gt;, 连享会 No.1188.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;李坤, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/931.html&quot;&gt;Stata：蒙特卡洛模拟新命令-simulate2&lt;/a&gt;, 连享会 No.931.&lt;/li&gt;
&lt;li&gt;李烨阳, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1286.html&quot;&gt;Stata：自己动手做组间系数差异检验-bootstrap-bdiff&lt;/a&gt;, 连享会 No.1286.&lt;/li&gt;
&lt;li&gt;浦进博, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1431.html&quot;&gt;Stata：手把手教你做蒙特卡洛模拟&lt;/a&gt;, 连享会 No.1431.&lt;/li&gt;
&lt;li&gt;王乔, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/825.html&quot;&gt;Stata：原始聚类自助法(wild cluster bootstrap)-boottest&lt;/a&gt;, 连享会 No.825.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;断点回归RDD&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;郑伊达, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/837.html&quot;&gt;倒U型+RDD：利用断点回归检验 U 形关系&lt;/a&gt;, 连享会 No.837.&lt;/li&gt;
&lt;li&gt;郑裕璇, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1091.html&quot;&gt;Stata：手动实现置换检验(permutation)和自抽样(bootstrap)&lt;/a&gt;, 连享会 No.1091.&lt;/li&gt;
&lt;li&gt;陈勇吏, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/343.html&quot;&gt;Stata程序：Monte-Carlo-模拟之产生符合特定分布的随机数&lt;/a&gt;, 连享会 No.343.&lt;/li&gt;
&lt;li&gt;陈勇吏, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/47.html&quot;&gt;Stata：蒙特卡洛模拟分析 (Monte Carlo Simulation)&lt;/a&gt;, 连享会 No.47.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;雷诺, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1328.html&quot;&gt;控制函数法：Bootstrap标准误的获取&lt;/a&gt;, 连享会 No.1328.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1534.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1534.html</guid><pubDate>Mon, 06 Jan 2025 16:00:00 GMT</pubDate><author>邱一崎</author></item><item><title>Stata：回归分析中的权重问题-aweight-fweight</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者：&lt;/strong&gt; 连玉君 (中山大学)&lt;br&gt;
&lt;strong&gt;邮箱：&lt;/strong&gt; &lt;a href=&quot;mailto:arlionn@163.com&quot;&gt;arlionn@163.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;: Stata：回归分析中的权重问题-aweight-fweight&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;: 权重设定, aweight, pweight, fweight, 加权回归, PSM, Propensity Score Matching, 最近邻匹配&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;在此前的两篇推文中，我们介绍了 Stata 中的权重设定问题，参见：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E7%8E%8B%E7%BB%B4%E6%80%A1&quot;&gt;王维怡&lt;/a&gt;, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/728.html&quot;&gt;Stata 权重设定-fweight-pweight&lt;/a&gt;, 连享会 No.728.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E9%9B%B7%E8%AF%BA&quot;&gt;雷诺&lt;/a&gt;, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1325.html&quot;&gt;回归中的权重 [aweight]、[pweight] 如何设定&lt;/a&gt;, 连享会 No.1325.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;本文采用一些数值算例，让大家更直观地理解加权回归的缘由和适用场景。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. aweight：算数权重&lt;/h2&gt;
&lt;h3&gt;1.1 背景与问题&lt;/h3&gt;
&lt;p&gt;在区域经济研究中，通常会基于城市或省级数据来分析&lt;strong&gt;人均 GDP&lt;/strong&gt;、&lt;strong&gt;失业率&lt;/strong&gt;等经济变量。此类变量都是加总数据，在统计和回归分析中，如果不考虑各区域的规模 (如人口或经济总量)，而直接采用算术平均值，可能会导致偏差。&lt;/p&gt;
&lt;p&gt;假设我们有两个地区的经济数据：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;gdp_pc&lt;/strong&gt;：人均 GDP（单位：万元），衡量区域内的平均经济产出水平。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;pop&lt;/strong&gt;：人口数（单位：千万人），反映该地区的规模。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GDP&lt;/strong&gt;：地区总 GDP，公式为 $\text{GDP} = \text{gdppc} \times \text{pop}$。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;示例数据呈现如下：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;City&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;gdppc&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;pop&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;A&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;6&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;70&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;B&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;3&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;30&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;如果我们想计算两个地区的平均人均 GDP，最常用的方法便是将两个地区的人均 GDP 做算术平均：&lt;br&gt;
$$&lt;br&gt;
m_a&lt;br&gt;
= \frac{\text{gdppc}_A + \text{gdppc}_B}{2}&lt;br&gt;
= \frac{6 + 3}{2}&lt;br&gt;
= \frac{1}{2} \times 6 + \frac{1}{2} \times 3&lt;br&gt;
= 4.5&lt;br&gt;
$$&lt;br&gt;
然而，这种方法隐含的假设并不合理：两个地区具有相同的权重（即各占 $50%$）。由于两个地区人口差异显著，这种计算结果并不能真实反映整体的经济水平。&lt;/p&gt;
&lt;p&gt;更为合理计算方法应该是：&lt;br&gt;
$$&lt;br&gt;
m_w&lt;br&gt;
= \frac{\text{GDP}_A + \text{GDP}_B}{\text{Pop}_A + \text{Pop}_B}&lt;br&gt;
= \frac{6 \times 70 + 3 \times 30}{70 + 30}&lt;br&gt;
= \frac{70}{100} \times 6 + \frac{30}{100} \times 3&lt;br&gt;
= 5.1&lt;br&gt;
$$&lt;/p&gt;
&lt;h3&gt;1.2 统一表述&lt;/h3&gt;
&lt;p&gt;上述两种计算方法可以统一表述为如下加权平均形式 ($w_1 + w_2 = 1$)：&lt;br&gt;
$$&lt;br&gt;
m = w_1 \cdot \text{gdppc}_A + w_2 \cdot \text{gdppc}_B&lt;br&gt;
$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;算术平均值的权重。在 $m_a$ 中，假设两个组的权重是相等的：&lt;br&gt;
$$&lt;br&gt;
w_1 = w_2 = 0.5&lt;br&gt;
$$&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;人口加权平均值的权重。在 $m_w$ 中，权重由各组人口占总人口的比例决定：&lt;br&gt;
$$&lt;br&gt;
w_1 = \frac{\text{Pop}_A}{\text{Pop}_A + \text{Pop}_B} = 0.7, \quad w_2 = \frac{\text{Pop}_B}{\text{Pop}_A + \text{Pop}_B} = 0.3&lt;br&gt;
$$&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;1.3 使用 Stata 计算加权平均值&lt;/h3&gt;
&lt;p&gt;在 Stata 中，我们可以通过 &lt;code&gt;sum&lt;/code&gt; 命令结合选项 &lt;code&gt;[aweight=pop]&lt;/code&gt; 来计算加权平均值。以下是相应的 Stata 代码示例：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;* 数据输入
clear
input str1 city gdppc pop
           &quot;A&quot;  6     70
           &quot;B&quot;  3     30
end

* 计算算数人均 GDP (m_a)
sum gdppc

* 计算加权平均人均 GDP (m_w)
sum gdppc [aw=pop] 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;我们也可以用 &lt;code&gt;regress&lt;/code&gt; 命令计算 $m_a$ 和 $m_w$：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;reg gdppc             // 算术平均值
reg gdppc [aw = pop]  // 加权平均值
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;精简后的输出结果为：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;
. * 计算算数人均 GDP (m_a)
. sum gdppc
     Variable |  Obs   Mean 
     ---------+-------------
        gdppc |    2    4.5 

. * 计算加权平均人均 GDP (m_w)
. sum gdppc [aw=pop] 
     Variable |  Obs  Weight   Mean 
     ---------+---------------------
        gdppc |    2     100    5.1 

. reg gdppc
     ------------------------------
     gdppc | Coefficient  Std. err.
     ------+-----------------------
     _cons |     4.5000     1.5000 
     ------------------------------

. reg gdppc [aw = pop]
    (sum of wgt is 100)
    ------------------------------
    gdppc | Coefficient  Std. err.
    ------+-----------------------
    _cons |     5.1000     1.3748 
    ------------------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;简要总结一下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;算术平均值适用于各组权重相等的情况，如对所有组赋予相同的重要性时。&lt;/li&gt;
&lt;li&gt;加权平均值则考虑了不同组的权重（如人口、经济总量等），能更准确地反映整体水平，尤其在各组规模差异较大的情况下。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在实际数据分析中，选择合适的平均值计算方法至关重要。正确的加权方法不仅能提高结果的准确性，还能更好地服务于数据驱动的决策过程。&lt;/p&gt;
&lt;h3&gt;1.4 应用实例&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://doi.org/10.1093/qje/qjab022&quot;&gt;Akcigit&lt;/a&gt; et al. (&lt;a href=&quot;http://sci-hub.ren/10.1093/qje/qjab022&quot;&gt;2022&lt;/a&gt;, QJE, &lt;a href=&quot;https://doi.org/10.7910/DVN/SR410I&quot;&gt;-Replication-&lt;/a&gt;) 研究了 20 世纪美国公司税和个人税对创新的影响。他们设定了如下模型来估计州级层面上税收-创新弹性：&lt;br&gt;
$$&lt;br&gt;
Y_{s t} = \beta_{p} \ln T_{s t-3}^p + \beta_{c} \ln T_{s t-3}^c +\gamma \mathbb{X}&lt;em&gt;{s t}+\delta&lt;/em&gt;{t}+\delta_{s}+\varepsilon_{s t} \quad (3)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中，&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$Y_{s t}$：$s$ 州在 $t$ 时期的创新产出 (专利申请数、专利引用数、发明人数量等) 的自然对数。&lt;/li&gt;
&lt;li&gt;$T_{s t-3}^p$：滞后 3 年期的个人所得税净税率&lt;/li&gt;
&lt;li&gt;$T_{s t-3}^c$：滞后 3 年期的公司所得税净税率&lt;/li&gt;
&lt;li&gt;$\delta_{t}$ 和 $\delta_{s}$：时间和州固定效应，以捕获不可观测的个体和时间趋势效应&lt;/li&gt;
&lt;li&gt;$X_{s t}$ 代表随时间变化的州层级的变量，包括：
&lt;ul&gt;
&lt;li&gt;滞后 3 期的人口密度 (城市化程度)&lt;/li&gt;
&lt;li&gt;滞后 3 期的人均收入水平 (经济发展水平)&lt;/li&gt;
&lt;li&gt;滞后 3 期的研发支出抵免 (税收激励)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;考虑到州级数据为加总数据，而美国各州在人口数量、经济规模等方面都存在巨大差异，且模型中还包含了人均收入这一控制变量，在估计过程中，作者使用 1940 年各州的人口数 (&lt;strong&gt;pop1940&lt;/strong&gt;) 作为抽样权重。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;use &quot;state_data.dta&quot;, clear
gen fiveyear = 5*floor(year/5)
egen statenum_fiveyear = group(statenum fiveyear)

global yx  &quot;lnpat  mtr90_lag3 top_corp_lag3&quot;
global cov &quot;L.real_gdp_pc L.population_density&quot;

reghdfe $yx $cov [aw=pop1940],  ///
        absorb(statenum year)   ///
        vce(cluster statenum_fiveyear year)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. fweight：频数权重&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Source: &lt;a href=&quot;https://www.stata.com/manuals/u20.pdf#u20.24Weightedestimation=&amp;amp;page=54.35&quot;&gt;&lt;strong&gt;[U]&lt;/strong&gt; Stata Users&#39; Guide: 20.24 Weighted estimation&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;2.1 原理&lt;/h3&gt;
&lt;p&gt;频率权重（fweights）是整数，它用来表示每个观察值的重复次数。从统计角度来看，频率权重并不重要，但从数据处理的角度来看，它具有重要意义。考虑以下数据：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;--------------------- D1.dta : Raw Data ----
type    y    x1   x2
 A     22    1    0
 A     22    1    0
 B     22    1    1
 C     23    0    1
 C     23    0    1
 C     23    0    1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;虽然这份数据包含 6 个观察值，但只有三种形态 (A, B, C)。因此，很多情况下，此类数据会采用更为精简 (高效) 的方式存储：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;-------------------- D2.dta : Compact Data ----
 type   y    x1   x2   freq
 A     22    1    0     2
 B     22    1    1     1
 C     23    0    1     3
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;我们用变量 &lt;strong&gt;freq&lt;/strong&gt; 来记录每种形态的观察值在样本中重复出现的次数，以保证 &lt;strong&gt;D1.dta&lt;/strong&gt; 和 &lt;strong&gt;D2.dta&lt;/strong&gt; 这两份数据包含的信息相同，可以互相转换。&lt;/p&gt;
&lt;p&gt;实证分析中，以下两种估计方法是完全等价的：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. use &quot;D1.dta&quot;, clear   // Raw Data
. regress y x1 x2

. use &quot;D2.dta&quot;, clear   // Compact Data
. regress y x1 x2 [fweight=freq]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;至此，我们可以清晰的了解 &lt;code&gt;[fweight=freq]&lt;/code&gt; 的作用了：对于 &lt;strong&gt;freq = 2&lt;/strong&gt; 的观测值，Stata 将其视为 2 行；同理，对于 &lt;strong&gt;freq = 10&lt;/strong&gt; 的观测值，Stata 将其视为 10 行。&lt;/p&gt;
&lt;p&gt;你可以将次过程解读为：Stata 会根据 &lt;strong&gt;freq&lt;/strong&gt; 变量将 &lt;strong&gt;D2.dta&lt;/strong&gt; 的数据恢复成 &lt;strong&gt;D1.dta&lt;/strong&gt; 的形态；然后基于 &lt;strong&gt;D1.dta&lt;/strong&gt; 执行普通的 OLS 回归。当然，在实际计算过程中，我们只需在 OLS 的估计式中加入权重即可。&lt;/p&gt;
&lt;h3&gt;2.2 外部命令如何实现加权估计？&lt;/h3&gt;
&lt;p&gt;有些命令，尤其是外部命令，并不支持加权操作。此时，我们可以使用 &lt;code&gt;expand&lt;/code&gt; 命令（参见 &lt;a href=&quot;https://www.stata.com/manuals/dexpand.pdf&quot;&gt;&lt;strong&gt;[D]&lt;/strong&gt; expand&lt;/a&gt;）将 &lt;strong&gt;D2.dta&lt;/strong&gt; 格式的数据转换成 &lt;strong&gt;D1.dta&lt;/strong&gt; 格式，进而执行常规的估计即可。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. use &quot;D2.dta&quot;, clear
. expand freq      // 转换为 D1.dta 格式
. usercmd y x1 x2  // 此时无需加权操作
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;一个重要原则是：使用频率权重运行命令的结果，应与在未加权且扩展后的数据上运行该命令的结果相同。因为未加权的重复数据和频率加权数据本质上只是记录相同信息的两种方式而已。&lt;/p&gt;
&lt;p&gt;对于面板数据，可以使用 &lt;a href=&quot;https://www.stata.com/manuals/dexpandcl.pdf&quot;&gt;&lt;strong&gt;[D]&lt;/strong&gt; expandcl&lt;/a&gt; 命令进行数据转换。外部命令 &lt;code&gt;expgen&lt;/code&gt; 和 &lt;code&gt;lexpgen&lt;/code&gt; 增加了不少扩展功能。&lt;/p&gt;
&lt;h3&gt;2.3 应用实例：&lt;/h3&gt;
&lt;p&gt;在因果推断中，经常使用 PSM 解决样本选择偏误问题。本例以最近邻匹配为例，来说明 &lt;strong&gt;fweight&lt;/strong&gt; 的用法。&lt;/p&gt;
&lt;p&gt;以下数据源于 Stata 手册 &lt;a href=&quot;https://www.stata.com/manuals/teteffectspsmatch.pdf&quot;&gt;&lt;strong&gt;[TE]&lt;/strong&gt; teffects psmatch&lt;/a&gt;，原始数据及研究背景参见 &lt;a href=&quot;https://doi.org/10.1016/j.jeconom.2009.09.023&quot;&gt;Cattaneo&lt;/a&gt; (&lt;a href=&quot;http://sci-hub.ren/10.1016/j.jeconom.2009.09.023&quot;&gt;2010&lt;/a&gt;)。&lt;/p&gt;
&lt;p&gt;本例中，我们想要分析母亲怀孕期间的吸烟状态（&lt;strong&gt;mbsmoke&lt;/strong&gt;）对新生儿出生体重（&lt;strong&gt;bweight&lt;/strong&gt;）的影响。由于原始数据中吸烟者的平均年龄大于非吸烟者，为了缓解样本选择偏误产生的影响，我们采用 PSM 中的最近邻匹配法，根据母亲年龄（&lt;strong&gt;mage&lt;/strong&gt;）进行 1:1 匹配。&lt;/p&gt;
&lt;p&gt;由于本例的主要目的是说明「频数权重」在回归分析中的用法，我们仅从原始数据中抽取了 4 个观察值，进而使用 &lt;code&gt;psmatch2&lt;/code&gt; 命令进行 PSM 分析。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;webuse &quot;cattaneo2&quot;, clear

set seed 1234567
sample 4, count by(mmarried)  # 随机抽取 4 个观察值
sort mbsmoke
rename bweight babywei

psmatch2 mbsmoke mage, n(1) out(babywei) // 1:1 最近邻匹配

-----------------------------------------------------------
Variable     Sample | Treated  Controls  Difference  T-stat
--------------------+--------------------------------------
 babywei  Unmatched |  3203.5   3490.75     -287.25   -0.70
                ATT |  3203.5    3434.0     -230.5    -0.32
--------------------+--------------------------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;执行上述命令后，会自动生成一组以 &lt;code&gt;_&lt;/code&gt; 开头的变量，如 &lt;strong&gt;_pscore&lt;/strong&gt; 表示倾向得分值，&lt;strong&gt;_babywei&lt;/strong&gt; 表示结果变量 &lt;strong&gt;babywei&lt;/strong&gt; 的反事实估计结果。本例中，我们关注的重点是 &lt;strong&gt;_weight&lt;/strong&gt; 变量，它表示某个观测值在匹配过程中被选为匹配对的次数：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;_weight = 1&lt;/strong&gt;：该观测值被使用一次，成功匹配一个其他组的观测值；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;_weight &amp;gt; 1&lt;/strong&gt;：该观测值被多次使用，与多个其他组的观测值匹配；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;_weight = . (缺失值)&lt;/strong&gt;：该观测值未找到合适的匹配对象。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;本例中，我们希望从控制组 (&lt;strong&gt;非吸烟者&lt;/strong&gt;) 中，为每一个处理组 (&lt;strong&gt;吸烟者&lt;/strong&gt;) 中的妇女找到一个与其年龄最接近 (1:1 匹配) 的匹配对象。匹配过程中，控制组的观察值可以被重复使用。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;sort mbsmoke _id 
format _pscore _pdif %4.2f
global vlist &quot;mbsmoke mage _pscore babywei _babywei _id _n1 _pdif _weight&quot;
order $vlist
list  $vlist, sepby(mbsmoke) noobs

--------------------------------------------------------------
  mbsmoke mage _pscore babywei _babywei _id  _n1 _pdif _weight
--------------------------------------------------------------
Nonsmoker   19    0.31    2510        .   1    .     .       1
Nonsmoker   24    0.42    3600        .   2    .     .       .
Nonsmoker   25    0.45    4111        .   3    .     .       .
Nonsmoker   34    0.66    3742        .   4    .     .       3
--------------------------------------------------------------
   Smoker   19    0.31    3260     2510   5    1  0.00       1
   Smoker   31    0.59    2552     3742   6    4  0.07       1
   Smoker   32    0.62    3487     3742   7    4  0.05       1
   Smoker   33    0.64    3515     3742   8    4  0.02       1
--------------------------------------------------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;从上述结果可以看出，&lt;strong&gt;Nonsmoker&lt;/strong&gt;（非吸烟者）组的观测值并未被完全使用：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;第 1 个观测值（年龄 19）与 &lt;strong&gt;Smoker&lt;/strong&gt; 组的第 5 个观测值 (&lt;code&gt;_id=5&lt;/code&gt;，年龄 19) 匹配，&lt;strong&gt;_weight = 1&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;第 4 个观测值（年龄 34）与 &lt;strong&gt;Smoker&lt;/strong&gt; 组的第 6、7 和 8 个观测值匹配 (年龄分别为 31, 32, 33)，&lt;strong&gt;_weight = 3&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;第 2 和 3 个观测值未匹配，&lt;strong&gt;_weight = .&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;完成上述匹配后，我们基本上可以保证处理组和控制组父母在年龄方面大体相近 (样本较为平衡)。进行匹配的直接目的是获取结果变量的反事实估计 &lt;strong&gt;_babywei&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;以 &lt;code&gt;_id=6&lt;/code&gt; 的妇女为例，如果她不吸烟，则她的孩子的出生体重应为 3742 (反事实结果，记为 $y_6(1)$)，而非 2552 (实际观测结果，记为 $y_6(0)$)。因此，对于该妇女而言，吸烟产生的处理效应为 $\widehat{\text{TE}}&lt;em&gt;6 = y_6(1) - y_6(0) = 2552 - 3742 = -1190 g$。其它吸烟者的处理效应也都可以相似的方式加以计算。最终，平均处理效应为：$\text{ATE} = (1/4)\sum&lt;/em&gt;{j=5}^{8}\widehat{\text{TE}}_j$。&lt;/p&gt;
&lt;p&gt;此时，在执行 OLS 估计时，我们实际使用的数据中并不包含 &lt;code&gt;_id=2&lt;/code&gt; 和 &lt;code&gt;_id=3&lt;/code&gt; 的观察值，而 &lt;code&gt;_id=4&lt;/code&gt; 的观察值则需要复制为三行。因此，回归命令设定如下：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;reg babywei mbsmoke [aw=_weight]

--------------------------------------
babywei |   Coeff   Std. err.      t  
--------+-----------------------------
mbsmoke |  -230.5   466.8267  -0.4938 
  _cons |  3434.0   330.0963  10.4030 
--------------------------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;理解了 &lt;strong&gt;[aw=_weight]&lt;/strong&gt; 的含义后，我们也可以直接对如下数据执行 &lt;code&gt;reg babywei mbsmoke&lt;/code&gt; 或 &lt;code&gt;ttest babywei, by(mbsmoke)&lt;/code&gt; 命令，并得到相同的结果。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. expand _weight  // 扩充数据
-------------------------------
  mbsmoke mage babywei  _weight
-------------------------------
Nonsmoker   19    2510        1
Nonsmoker   34    3742        1
Nonsmoker   34    3742        1
Nonsmoker   34    3742        1
-------------------------------
   Smoker   19    3260        1
   Smoker   31    2552        1
   Smoker   32    3487        1
   Smoker   33    3515        1
-------------------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;// pscore 的计算方法
probit mbsmoke mage
predict ps, pr

list ps _pscore in 1/2, clean

              ps     _pscore  
  1.   .30854283   .30854283  
  2.   .42390537   .42390537  
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 小结：如何选择加权类型？&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;算数权重&lt;/strong&gt; (&lt;code&gt;aweight&lt;/code&gt;) 主要适用于如下场景：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用加总数据，如国家级数据、省级数据、行业级数据时，需要使用各组人口数、经济总量等进行加权，以便更准确地反映整体水平，尤其在各组规模差异较大的情况下。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;频率权重&lt;/strong&gt; (&lt;code&gt;pweight&lt;/code&gt;) 通常用于以下场景：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;数据压缩&lt;/strong&gt;：当数据中有许多相同的观测值时，可以通过频率权重来表示每个观测值的重复次数，减少数据冗余并提高计算效率。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;重复数据&lt;/strong&gt;：如果数据中某些样本反复出现，使用频率权重可以更准确地反映这些重复数据对整体估计的贡献，避免重复计算。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. 参考资料&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.ufukakcigit.com/&quot;&gt;Akcigit&lt;/a&gt;, U., J. Grigsby, T. Nicholas, S. Stantcheva, &lt;strong&gt;2022&lt;/strong&gt;, Taxation and innovation in the twentieth century, &lt;strong&gt;The Quarterly Journal of Economics&lt;/strong&gt;, 137 (1): 329-385. &lt;a href=&quot;https://doi.org/10.1093/qje/qjab022&quot;&gt;-Link-&lt;/a&gt;, &lt;a href=&quot;https://sci-hub.ren/10.1093/qje/qjab022&quot;&gt;-PDF-&lt;/a&gt;, &lt;a href=&quot;https://oup.silverchair-cdn.com/oup/backfile/Content_public/Journal/qje/137/1/10.1093_qje_qjab022/1/qjab022_onlineappendix.pdf?Expires=1649965153&amp;amp;Signature=soPrpxU1GGqhdNr58Nc6j-gZhttwWtj2XQG5WxaVp-k7ZqVAJOoYz60biLwCcpgYVpVutAw-uJn59pJkQJOuZlMv6DHHRPiIHE2I7CUNOv5c05r1msRmBbFmzntnyXBov2UkywbuJpob1e59Q5fesu5Z7t6RQFOoh8qgVxjlQcTNgcN6YFuFISMPa2GP8zRbQcNxcFuKbRhPyoUMqFI-MJkwVS7pfl162hJ0ZRa0fH9ho7N3FhBGyoN0jAufE1S3vCSeb2FetG7lhS8JGYMb~FMOcpyRpv1hjSiSL52lSl5W2jT18i1uN-k4atVdt3TN-JFWXMk796qn~BvYnM~85Q__&amp;amp;Key-Pair-Id=APKAIE5G5CRDK6RD3PGA&quot;&gt;-Appendix-&lt;/a&gt;, &lt;a href=&quot;https://xs2.dailyheadlines.cc/scholar?cites=3691559864871282829&amp;amp;as_sdt=2005&amp;amp;sciodt=0,5&amp;amp;hl=zh-CN&amp;amp;scioq=Social+ties+and+the+selection+of+China%27s+political+elite&quot;&gt;-cited-&lt;/a&gt;, &lt;a href=&quot;https://doi.org/10.7910/DVN/SR410I&quot;&gt;-Replication-&lt;/a&gt;, &lt;a href=&quot;https://www.ecb.europa.eu/pub/conferences/shared/pdf/20190905_4th_ARC/Stantcheva_Stefanie.pdf&quot;&gt;-WP-version-2018-&lt;/a&gt;, &lt;a href=&quot;https://www.docin.com/p-2195999965.html&quot;&gt;-幻灯片-&lt;/a&gt;, &lt;a href=&quot;https://voxeu.org/article/taxation-and-innovation-20th-century&quot;&gt;-作者提要 2018-&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Cattaneo, M. D. (2010). Efficient semiparametric estimation of multi-valued treatment effects under ignorability. Journal of Econometrics, 155(2), 138–154. &lt;a href=&quot;https://doi.org/10.1016/j.jeconom.2009.09.023&quot;&gt;Link&lt;/a&gt;, &lt;a href=&quot;http://sci-hub.ren/10.1016/j.jeconom.2009.09.023&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=Efficient%20semiparametric%20estimation%20of%20multi-valued%20treatment%20effects%20under%20ignorability&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.stata.com/manuals/u20.pdf#u20.24Weightedestimation=&amp;amp;page=54.35&quot;&gt;&lt;strong&gt;[U]&lt;/strong&gt; Stata Users&#39; Guide: 20.24 Weighted estimation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh 加权 weight&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E6%AE%B5%E4%B9%89%E5%AD%A6&quot;&gt;段义学&lt;/a&gt;, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1268.html&quot;&gt;因果推断中的 RA, IPW, IPWRA&lt;/a&gt;, 连享会 No.1268.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E7%8E%8B%E7%BB%B4%E6%80%A1&quot;&gt;王维怡&lt;/a&gt;, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/728.html&quot;&gt;Stata 权重设定-fweight-pweight&lt;/a&gt;, 连享会 No.728.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E9%83%91%E5%AE%87&quot;&gt;郑宇&lt;/a&gt;, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1425.html&quot;&gt;Stata绘图：加权直方图&lt;/a&gt;, 连享会 No.1425.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E9%99%88%E7%82%B9%E7%82%B9&quot;&gt;陈点点&lt;/a&gt;, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1279.html&quot;&gt;R：如何使用逆概率加权和贝叶斯倾向得分&lt;/a&gt;, 连享会 No.1279.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E9%9B%B7%E8%AF%BA&quot;&gt;雷诺&lt;/a&gt;, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1325.html&quot;&gt;回归中的权重 [aweight]、[pweight] 如何设定&lt;/a&gt;, 连享会 No.1325.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1533.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1533.html</guid><pubDate>Sun, 05 Jan 2025 16:00:00 GMT</pubDate><author>连玉君</author></item><item><title>R语言：IPW深度解读-离散变量和连续变量情形</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：李增杰 (南开大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:Lazaroo@163.com&quot;&gt;Lazaroo@163.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;：本文主要摘译自下文，特此致谢！&lt;br&gt;
&lt;strong&gt;Source&lt;/strong&gt;：&lt;a href=&quot;https://www.andrewheiss.com/&quot;&gt;Andrew Heiss&lt;/a&gt;, 2020, Generating inverse probability weights for both binary and continuous treatments. &lt;a href=&quot;https://www.andrewheiss.com/blog/2020/12/01/ipw-binary-continuous/index.html&quot;&gt;-Link-&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;：R语言：IPW深度解读-离散变量和连续变量情形&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;：因果图，IPW，二元处理变量，连续处理变量，R语言&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 基本说明&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;环境搭建&lt;/strong&gt;：为了实现本文中的相关内容，首先需要在 &lt;code&gt;R&lt;/code&gt; 语言中安装并加载以下包：&lt;code&gt;tidyverse&lt;/code&gt;、&lt;code&gt;broom&lt;/code&gt;、&lt;code&gt;scales&lt;/code&gt;、&lt;code&gt;ggdag&lt;/code&gt;、&lt;code&gt;dagitty&lt;/code&gt;、&lt;code&gt;truncnorm&lt;/code&gt;、&lt;code&gt;ipw&lt;/code&gt; 和 &lt;code&gt;WeightIt&lt;/code&gt;。相应的代码如下所示：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;# 安装对应的包
install.packages(&quot;tidyverse&quot;)  # 安装tidyverse
install.packages(&quot;broom&quot;)      # 安装broom
install.packages(&quot;scales&quot;)     # 安装scales
install.packages(&quot;ggdag&quot;)      # 安装ggdag
install.packages(&quot;dagitty&quot;)    # 安装dagitty
install.packages(&quot;truncnorm&quot;)  # 安装truncnorm
install.packages(&quot;ipw&quot;)        # 安装ipw
install.packages(&quot;WeightIt&quot;)   # 安装WeightIt

# 加载对应的包
library(tidyverse)   
library(broom)         
library(scales)     
library(ggdag)          
library(dagitty)       
library(truncnorm)  
library(ipw)  
library(WeightIt)  
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;作为一个 Judea Pearl 风格的“因果革命”因果图 (DAG) 的忠实粉丝，这些图使我和我的学生更容易理解计量经济学的方法，例如双重差分模型、断点回归和工具变量。&lt;/p&gt;
&lt;p&gt;DAG 对于利用观测数据进行因果推断也非常有帮助，而不需要特定的准实验情况。正如我在这篇博客文章中所展示的，你可以使用 DAG 来识别那些扭曲处理效应和结果之间关系的混杂因素。然后，你可以使用统计方法来排除这些渠道，并根据这些混杂因素进行调整。本篇推文展示了如何通过匹配和逆概率加权 (IPW) 来实现这一点。&lt;/p&gt;
&lt;p&gt;然而，这些例子假设处理效应是二元的。这很好——很多社会学项目都是二元的 (参与项目/未参与项目)，用二元处理变量创建逆概率权重的数学方法相对简单。然而，在许多情况下，处理变量往往不是二元的，尤其是在项目评估之外。因此，这篇文章展示了如何手动计算以及使用几个不同的 R 包 (&lt;code&gt;ipw&lt;/code&gt; 和 &lt;code&gt;WeightIt&lt;/code&gt;) 来计算二元和连续处理效应的逆概率加权。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 二元处理效应&lt;/h2&gt;
&lt;h3&gt;2.1 样本数据&lt;/h3&gt;
&lt;p&gt;在这个例子中，我们将为一个假设项目生成一个 DAG，该项目旨在研究使用蚊帐是否能够降低疟疾风险。然而，这种关系受到收入和健康因素的干扰，收入会影响健康状况，而收入和健康又都会提高蚊帐的净使用率。&lt;/p&gt;
&lt;p&gt;这里的处理变量是二元的：要么人们使用蚊帐，要么他们不使用。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;mosquito_dag &amp;lt;- dagify(mal ~ net + inc + hlth,
                       net ~ inc + hlth,
                       hlth ~ inc,
                       coords = list(x = c(mal = 4, net = 1, inc = 2, hlth = 3),
                                     y = c(mal = 1, net = 1, inc = 2, hlth = 2)),
                       exposure = &quot;net&quot;,
                       outcome = &quot;mal&quot;)

ggdag_status(mosquito_dag) +
  guides(color = &quot;none&quot;) +
  theme_dag()
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/B503-R%E8%AF%AD%E8%A8%80%EF%BC%9AIPW%E6%B7%B1%E5%BA%A6%E8%A7%A3%E8%AF%BB-%E7%A6%BB%E6%95%A3%E5%8F%98%E9%87%8F%E5%92%8C%E8%BF%9E%E7%BB%AD%E5%8F%98%E9%87%8F%E6%83%85%E5%BD%A2_Fig1_%E6%9D%8E%E5%A2%9E%E6%9D%B0.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;我们将这样测量这些节点：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;疟疾风险&lt;/strong&gt;：从 0 到 100，大多在 40 左右，但从 10 到 80 不等。最好使用 Beta 分布。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;处理变量 (使用情况)&lt;/strong&gt;：二进制 0/1，TRUE/FALSE 变量，其中 50% 的人使用蚊帐。最好使用二项式分布。然而，由于我们想使用其他变量来增加使用蚊帐的可能性，我们将生成一个潜在的连续变量，将其重新标准化到 0–1，然后将其用作 &lt;code&gt;rbinom()&lt;/code&gt; 中的概率，并根据这些概率为人们分配是否接受处理。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;收入&lt;/strong&gt;：以美元为单位的周收入，大多在 500±300 左右。最好使用正态分布。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;健康&lt;/strong&gt;：从 0 到 100，大部分在 70 左右，但从 50 到 100 不等。最好使用 Beta 分布。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;# 设置随机种子
set.seed(1234)

# 模拟1138个人
n_people &amp;lt;- 1138

net_data &amp;lt;- tibble(
  # 产生一个ID属性
  id = 1:n_people,
  # 产生收入变量，正态分布，500 ± 300
  income = rnorm(n_people, mean = 500, sd = 75)
) %&amp;gt;% 
  # 产生健康变量，beta分布，中心在70ish处
  mutate(health_base = rbeta(n_people, shape1 = 7, shape2 = 4) * 100,
         # 收入增加一美元，健康上升0.02
         health_income_effect = income * 0.02,
         # 产生最终健康得分并加入噪音
         health = health_base + health_income_effect + rnorm(n_people, mean = 0, sd = 3),
         # 标准化，保证不超过100
         health = rescale(health, to = c(min(health), 100))) %&amp;gt;% 
  # 基于收入、健康和随机噪音生成蚊帐变量
  mutate(net_score = (0.5 * income) + (1.5 * health) + rnorm(n_people, mean = 0, sd = 15),
         # 将蚊帐使用变量标准化到0.05-0.95区间，产生蚊帐使用概率变量
         net_probability = rescale(net_score, to = c(0.05, 0.95)),
         # 使用概率生成0/1随机数
         net = rbinom(n_people, 1, net_probability)) %&amp;gt;% 
  # 最后基于收入、健康和蚊帐使用变量和随机噪音生成疟疾风险变量
  mutate(malaria_risk_base = rbeta(n_people, shape1 = 4, shape2 = 5) * 100,
         # 使用蚊帐，使得风险下降10，收入上升风险也会下降
         malaria_effect = (-30 * net) + (-1.9 * health) + (-0.1 * income),
         # 产生最后的风险变量，加入噪音
         malaria_risk = malaria_risk_base + malaria_effect + rnorm(n_people, 0, sd = 3),
         # 标准化保证不小于0
         malaria_risk = rescale(malaria_risk, to = c(5, 70))) %&amp;gt;% 
  select(-c(health_base, health_income_effect, net_score, net_probability, 
            malaria_risk_base, malaria_effect))

head(net_data)
## # A tibble: 6 × 5
##      id income health   net malaria_risk
##   &amp;lt;int&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;        &amp;lt;dbl&amp;gt;
## 1     1   409.   63.1     0         45.1
## 2     2   521.   83.5     1         23.4
## 3     3   581.   73.0     0         36.5
## 4     4   324.   60.6     0         58.7
## 5     5   532.   73.4     1         32.7
## 6     6   538.   42.6     0         52.5
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h3&gt;2.2 人工IPW，二元处理变量&lt;/h3&gt;
&lt;p&gt;如果我们不做任何统计调整，只看蚊帐对疟疾风险的影响，我们就会发现，蚊帐使疟疾风险降低了 13 个百分点。但这是错误的，因为存在混淆。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;# 错误的系数，并不是因果效应
model_net_naive &amp;lt;- lm(malaria_risk ~ net, data = net_data)
tidy(model_net_naive)
## # A tibble: 2 × 5
##   term        estimate std.error statistic   p.value
##   &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;
## 1 (Intercept)     41.9     0.413     102.  0        
## 2 net            -13.6     0.572     -23.7 2.90e-101
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;我们需要根据收入和健康状况进行调整：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;adjustmentSets(mosquito_dag)
## { hlth, inc }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;我们将使用逆概率加权来实现这一目标。首先，我们将利用健康和收入这两个混杂因素来预测处理变量，即蚊帐的使用情况，然后生成倾向得分。接下来，我们将使用这些倾向得分，按照以下公式生成逆概率权重：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\frac{Treatment}{Propensity}+\frac{1-Treatment}{1-Propensity}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;该公式将计算平均处理效果 (ATE) 的权重。Lucy D&#39;Agostino McGowan 有一系列不同 IPW 的公式，包括处理组的平均治疗 (ATT)、对照组的平均处理效应 (ATC) 和其他效应。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;# 使用Logit模型预测蚊帐使用
model_predict_net &amp;lt;- glm(net ~ income + health,
                         family = binomial(link = &quot;logit&quot;),
                         data = net_data)

# 产生倾向得分和IPWs
net_data_ipw &amp;lt;- augment_columns(model_predict_net, net_data,
                                type.predict = &quot;response&quot;) %&amp;gt;% 
  rename(propensity = .fitted) %&amp;gt;% 
  mutate(ipw = (net / propensity) + ((1 - net) / (1 - propensity)))

net_data_ipw %&amp;gt;% 
  select(id, income, health, net, malaria_risk, propensity, ipw) %&amp;gt;% 
  head()
## # A tibble: 6 × 7
##      id income health   net malaria_risk propensity   ipw
##   &amp;lt;int&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;        &amp;lt;dbl&amp;gt;      &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
## 1     1   409.   63.1     0         45.1      0.380  1.61
## 2     2   521.   83.5     1         23.4      0.628  1.59
## 3     3   581.   73.0     0         36.5      0.659  2.93
## 4     4   324.   60.6     0         58.7      0.266  1.36
## 5     5   532.   73.4     1         32.7      0.597  1.68
## 6     6   538.   42.6     0         52.5      0.459  1.85
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;最后，我们将在回归模型中使用这些权重来找到 ATE。在对混杂因素进行调整并排除掉收入和健康因素的干扰后，蚊帐使用的效果为 -10.5，这比我们之前发现的直接估计更准确。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;model_net_ipw &amp;lt;- lm(malaria_risk ~ net, data = net_data_ipw, weights = ipw)
tidy(model_net_ipw)
## # A tibble: 2 × 5
##   term        estimate std.error statistic  p.value
##   &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;
## 1 (Intercept)     40.4     0.409      98.8 0       
## 2 net            -10.5     0.578     -18.3 1.83e-65
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;2.3 使用ipw包计算IPW，二元处理变量&lt;/h3&gt;
&lt;p&gt;我们可以使用 &lt;code&gt;ipw&lt;/code&gt; 包自动生成 ipw 列，而无需运行 Logit 回归模型并手动生成倾向得分。在 &lt;code&gt;denominator&lt;/code&gt; 参数中指定混杂因素。此外，还有一个 &lt;code&gt;numerator&lt;/code&gt; 参数，我们可以用来生成稳定的权重，但我们目前将跳过该步骤。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;# ipwpoint() 不能处理 tibbles类型，强制转换为 data.frame
weights_ipwpoint &amp;lt;- ipwpoint(
  exposure = net,
  family = &quot;binomial&quot;,  # The treatment is binary
  link = &quot;logit&quot;,
  denominator = ~ income + health,
  data = as.data.frame(net_data)
)

# 结果相同
head(weights_ipwpoint$ipw.weights)
## [1] 1.61 1.59 2.93 1.36 1.68 1.85
head(net_data_ipw$ipw)
## [1] 1.61 1.59 2.93 1.36 1.68 1.85
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这里得到的权重对象是一个独立的对象，您可以用它进行其他操作，例如使用 &lt;code&gt;summary()&lt;/code&gt; 函数。我们可以将权重重新添加到原始数据中，然后拟合最终模型。在这里，我们得到了相同的 ATE，为 -10.5：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;net_data_ipwpoint &amp;lt;- net_data %&amp;gt;% 
  mutate(ipw = weights_ipwpoint$ipw.weights)

model_net_ipwpoint &amp;lt;- lm(malaria_risk ~ net, 
                         data = net_data_ipwpoint, weights = ipw)
tidy(model_net_ipwpoint)
## # A tibble: 2 × 5
##   term        estimate std.error statistic  p.value
##   &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;
## 1 (Intercept)     40.4     0.409      98.8 0       
## 2 net            -10.5     0.578     -18.3 1.83e-65
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;2.4 使用WeightIt包计算IPW，二元处理变量&lt;/h3&gt;
&lt;p&gt;我们还可以使用 &lt;code&gt;WeightIt&lt;/code&gt; 包来生成权重。它的语法略有不同，可以在 ATE 之外找到多种不同的估计量 (就像 Lucy 列出的大多数估计量一样)。除了倾向得分，它还可以处理多种不同的方法。&lt;code&gt;WeightIt&lt;/code&gt; 还支持 &lt;code&gt;tibbles&lt;/code&gt; 格式，并提供了一系列其他汇总信息 (如果使用 &lt;code&gt;summary()&lt;/code&gt; 函数)。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;weights_weightit &amp;lt;- weightit(net ~ income + health, 
                             data = net_data, 
                             estimand = &quot;ATE&quot;,  # 取ATE
                             method = &quot;ps&quot;)  # 使用倾向得分来计算权重
weights_weightit
## A weightit object
##  - method: &quot;glm&quot; (propensity score weighting with GLM)
##  - number of obs.: 1138
##  - sampling weights: none
##  - treatment: 2-category
##  - estimand: ATE
##  - covariates: income, health

# 运行下面命令可以得到更多细节
# summary(weights_weightit)

# 和其他方法结果相同
head(weights_weightit$weights)
## [1] 1.61 1.59 2.93 1.36 1.68 1.85
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;与 &lt;code&gt;ipw&lt;/code&gt; 包一样，我们可以将权重添加到数据集并运行模型以找到相同的处理相应 -10.5：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;net_data_weightit &amp;lt;- net_data %&amp;gt;% 
  mutate(ipw = weights_weightit$weights)

model_net_weightit &amp;lt;- lm(malaria_risk ~ net, 
                         data = net_data_weightit, weights = ipw)
tidy(model_net_weightit)
## # A tibble: 2 × 5
##   term        estimate std.error statistic  p.value
##   &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;
## 1 (Intercept)     40.4     0.409      98.8 0       
## 2 net            -10.5     0.578     -18.3 1.83e-65
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 连续处理变量&lt;/h2&gt;
&lt;h3&gt;3.1 样本数据&lt;/h3&gt;
&lt;p&gt;逆概率权重同样适用于连续处理变量，但数学问题要复杂得多。例如，我们将为一个假设项目生成 DAG，在该项目中，贫困家庭可以获得现金补助，用于购买疟疾预防用品，如蚊帐、化学治疗和药物。这是一个自愿项目——人们自行选择是否参加，我们假设健康分数较低、收入较低的人更可能报名。补助金的数额取决于收入水平。&lt;/p&gt;
&lt;p&gt;这里的治疗是持续的：人们获得不同数额的抗疟疾补助金。为了简单起见，每个人都会得到一些补助金。&lt;/p&gt;
&lt;p&gt;DAG 看起来和以前一样 (因为我们试图让事情变得简单)：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;grant_dag &amp;lt;- dagify(mal ~ grant + inc + hlth,
                    grant ~ inc + hlth,
                    hlth ~ inc,
                    coords = list(x = c(mal = 4, grant = 1, inc = 2, hlth = 3),
                                  y = c(mal = 1, grant = 1, inc = 2, hlth = 2)),
                    exposure = &quot;grant&quot;,
                    outcome = &quot;mal&quot;)

ggdag_status(grant_dag) +
  guides(color = &quot;none&quot;) +
  theme_dag()
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/B503-R%E8%AF%AD%E8%A8%80%EF%BC%9AIPW%E6%B7%B1%E5%BA%A6%E8%A7%A3%E8%AF%BB-%E7%A6%BB%E6%95%A3%E5%8F%98%E9%87%8F%E5%92%8C%E8%BF%9E%E7%BB%AD%E5%8F%98%E9%87%8F%E6%83%85%E5%BD%A2_Fig2_%E6%9D%8E%E5%A2%9E%E6%9D%B0.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;我们将这样测量这些节点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;疟疾风险&lt;/strong&gt;：从 0 到 100，大多在 40 左右，但从 10 到 80 不等。最好使用 Beta 分布。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;赠款&lt;/strong&gt;：金额在 5 到 40 之间，以 20 英镑为中心。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;收入&lt;/strong&gt;：以美元为单位的周收入，大多在 500±300 左右。最好使用正态分布。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;健康&lt;/strong&gt;：从 0 到 100，大部分在 70 左右，但从 50 到 100 不等。最好使用 Beta 分布。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;# 设置随机种子
set.seed(1234)

# 模拟1504个人
n_people &amp;lt;- 1504

grant_data &amp;lt;- tibble(
  # 产生一个ID属性
  id = 1:n_people,
  # 产生收入变量，正态分布，500 ± 300
  income = rnorm(n_people, mean = 500, sd = 75)
) %&amp;gt;%
  # 产生健康变量，beta分布，中心在70ish处
  mutate(health_base = rbeta(n_people, shape1 = 7, shape2 = 4) * 100,
         # 收入增加一美元，健康上升0.02
         health_income_effect = income * 0.02,
         # 产生最终健康得分并加入噪音
         health = health_base + health_income_effect + rnorm(n_people, mean = 0, sd = 3),
         # 标准化保证不超过100
         health = rescale(health, to = c(min(health), 100))) %&amp;gt;% 
  # 生成赠款变量
  mutate(grant_base = rtruncnorm(n_people, mean = 18, sd = 10, a = 5, b = 40),
         # 对于低收入人群和低健康人群，赠款较高
         grant_effect = (income * -0.25) + (health * -0.5),
         # 产生最终赠款金额，并且加入噪音，标准化
         grant = grant_base + grant_effect + rnorm(n_people, mean = 0, sd = 8),
         grant = round(rescale(grant, to = c(5, 40)), 0)) %&amp;gt;% 
  # 最后基于收入、健康、赠款、噪音产生一个疟疾风险变量
  mutate(malaria_risk_base = rbeta(n_people, shape1 = 4, shape2 = 5) * 100,
         # 赠款上升，风险降低
         malaria_effect = (-40 * grant) + (-25 * health) + (-0.05 * income),
         # 产生最终疟疾风险并且加入噪音
         malaria_risk = malaria_risk_base + malaria_effect + rnorm(n_people, 0, sd = 3),
         # 标准化保证不小于0
         malaria_risk = rescale(malaria_risk, to = c(5, 70))) %&amp;gt;% 
  select(-c(health_base, health_income_effect, grant_base, grant_effect, 
            malaria_risk_base, malaria_effect))

head(grant_data)
## # A tibble: 6 × 5
##      id income health grant malaria_risk
##   &amp;lt;int&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;        &amp;lt;dbl&amp;gt;
## 1     1   409.   70.2    27         26.3
## 2     2   521.   75.3    18         33.3
## 3     3   581.   62.6    20         42.3
## 4     4   324.   83.9    28         11.8
## 5     5   532.   74.3    20         31.8
## 6     6   538.   75.9    15         36.2
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;3.2 人工IPW，连续处理变量&lt;/h3&gt;
&lt;p&gt;如果我们不做任何调整，仅仅观察赠款对疟疾风险的影响，每增加一美元的赠款，疟疾风险就会下降 0.4 个百分点。然而，再一次，由于其他因素的干扰，这一结论是不准确的。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;# 错误的系数不代表因果效应
model_grant_naive &amp;lt;- lm(malaria_risk ~ grant, data = grant_data)
tidy(model_grant_naive)
## # A tibble: 2 × 5
##   term        estimate std.error statistic   p.value
##   &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;
## 1 (Intercept)   44.2      1.35       32.8  2.56e-178
## 2 grant         -0.417    0.0615     -6.78 1.69e- 11
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;接着，我们调整收入和健康因素的影响：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;adjustmentSets(grant_dag)
## { hlth, inc }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这就是数学变得棘手的地方。当我们使用二元处理时，我们计算每次观察的倾向得分，然后使用此公式生成逆概率权重：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\frac{Treatment}{Propensity}+\frac{1-Treatment}{1-Propensity}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;然而，我们不能用连续的处理变量来做到这一点，因为我们并没有真正的倾向得分。相反，我们使用下面公式 (来自 Naimi 等 (2014))：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
IPW=\frac{f_X (X;\mu_1 ,\sigma_1^2)}{f_{X|C} (X|C=c;\mu_2 ,\sigma_2^2)}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;上面公式看起来很复杂，但是分开来看：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$X$ 表示连续的处理变量；&lt;/li&gt;
&lt;li&gt;$C$ 表示混杂因素 (影响因果效应的因素)；&lt;/li&gt;
&lt;li&gt;分子和分母中的 $f_.(·)$ 表示以 $\mu$ 为均值、以 $\sigma^2$ 为方差的概率密度函数；&lt;/li&gt;
&lt;li&gt;分子 $f_X (X;\mu_1 ,\sigma_1^2)$ 表示处理变量的概率分布 (可以仅仅用 1 来代替分子，但是这会导致不稳定的权重)；&lt;/li&gt;
&lt;li&gt;分母 $f_{X|C} (X|C=c;\mu_2 ,\sigma_2^2)$ 表示由混杂因素解释的处理变量的概率分布。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我们可以计算这个分数的每个元素，然后生成逆概率权重。以下是如何使用 R 执行此操作：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;# 分子只是处理变量的概率分布。我们将使用正态分布 (因此使用dnorm()) 。我们需要向dnorm()提供每个人的赠款金额、grant~1模型的预测值以及该模型的残差
model_num &amp;lt;- lm(grant ~ 1, data = grant_data)
num &amp;lt;- dnorm(grant_data$grant,
             predict(model_num),
             sd(model_num$residuals))

# 分母是由混杂因素解释的处理变量的概率分布。我们将再次使用正态分布。我们将向dnorm()提供赠款金额，包括混杂因素的模型的预测值，以及该模型残差
model_den &amp;lt;- lm(grant ~ health + income, data = grant_data)
den &amp;lt;- dnorm(grant_data$grant,
             predict(model_den),
             sd(model_den$residuals))

# 最后生成IPW
grant_data_ipw &amp;lt;- grant_data %&amp;gt;% 
  mutate(ipw = num / den)

head(grant_data_ipw)
## # A tibble: 6 × 6
##      id income health grant malaria_risk   ipw
##   &amp;lt;int&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;        &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
## 1     1   409.   70.2    27         26.3 0.288
## 2     2   521.   75.3    18         33.3 0.492
## 3     3   581.   62.6    20         42.3 0.687
## 4     4   324.   83.9    28         11.8 0.177
## 5     5   532.   74.3    20         31.8 0.499
## 6     6   538.   75.9    15         36.2 0.748
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;现在我们可以使用权重来找到 ATE，就像我们使用二元处理变量一样：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;model_grant_ipw &amp;lt;- lm(malaria_risk ~ grant, data = grant_data_ipw, weights = ipw)
tidy(model_grant_ipw)
## # A tibble: 2 × 5
##   term        estimate std.error statistic   p.value
##   &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;
## 1 (Intercept)    58.4     1.79        32.6 1.95e-176
## 2 grant          -1.11    0.0806     -13.7 1.45e- 40
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;因此，每一美元的赠款都会导致疟疾风险点下降 -1.1。&lt;/p&gt;
&lt;h3&gt;3.3 使用ipw包计算IPW，连续处理变量&lt;/h3&gt;
&lt;p&gt;手动创建分子和分母可能会枯燥。我们可以使用 &lt;code&gt;ipw&lt;/code&gt; 包中的 &lt;code&gt;ipwpoint()&lt;/code&gt; 函数一步生成连续权重。我们将使用高斯 (正态) 族，而不是像以前那样指定二项式处理。我们还指定了 &lt;code&gt;numerator&lt;/code&gt; 和 &lt;code&gt;denominator&lt;/code&gt;。它将生成相同的权重。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;weights_continuous_ipwpoint &amp;lt;- ipwpoint(
  exposure = grant,
  family = &quot;gaussian&quot;,
  numerator = ~ 1,
  denominator = ~ health + income,
  data = as.data.frame(grant_data)
)

# 结果相同
head(grant_data_ipw$ipw)
## [1] 0.288 0.492 0.687 0.177 0.499 0.748
head(weights_continuous_ipwpoint$ipw.weights)
## [1] 0.288 0.492 0.687 0.177 0.499 0.748
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;将权重放入数据中，重新跑模型得到 ATE 为 -1.1。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;grant_data_ipwpoint &amp;lt;- grant_data %&amp;gt;% 
  mutate(ipw = weights_continuous_ipwpoint$ipw.weights)

model_grant_ipwpoint &amp;lt;- lm(malaria_risk ~ grant, 
                           data = grant_data_ipwpoint, weights = ipw)
tidy(model_grant_ipwpoint)
## # A tibble: 2 × 5
##   term        estimate std.error statistic   p.value
##   &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;
## 1 (Intercept)    58.4     1.79        32.6 1.95e-176
## 2 grant          -1.11    0.0806     -13.7 1.45e- 40
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;3.4 使用WeightIt包计算IPW，连续处理变量&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;WeightIt&lt;/code&gt; 包也可以处理连续权重。语法要简单得多——不需要担心 &lt;code&gt;numerator&lt;/code&gt; 和 &lt;code&gt;denominator&lt;/code&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;weights_weightit &amp;lt;- weightit(grant ~ income + health, 
                             data = grant_data, 
                             stabilize = TRUE)
weights_weightit
## A weightit object
##  - method: &quot;glm&quot; (propensity score weighting with GLM)
##  - number of obs.: 1504
##  - sampling weights: none
##  - treatment: continuous
##  - covariates: income, health

# 运行下面命令可以看到更为详细的结果
# summary(weights_weightit)

# 结果与其他方法不同
head(weights_weightit$weights)
## [1] 0.580 0.990 1.384 0.356 1.005 1.506
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然而由于一些数学原因，笔者还没有弄清楚其中的原理，它生成的权重与我们手动或使用 &lt;code&gt;ipwpoint()&lt;/code&gt; 时获得的权重不同。事实上，它们几乎是手动和 &lt;code&gt;ipwpoint()&lt;/code&gt; 权重的两倍大：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;# 手动计算权重
head(grant_data_ipw$ipw)
## [1] 0.288 0.492 0.687 0.177 0.499 0.748

# weightit() weights / 2
head(weights_weightit$weights) / 2
## [1] 0.290 0.495 0.692 0.178 0.502 0.753
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;无论如何，ATE 是相同的，尽管权重大约是原来的两倍：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-r&quot;&gt;grant_data_weightit &amp;lt;- grant_data %&amp;gt;% 
  mutate(ipw = weights_weightit$weights)

model_grant_weightit &amp;lt;- lm(malaria_risk ~ grant, 
                           data = grant_data_weightit, weights = ipw)
tidy(model_grant_weightit)
## # A tibble: 2 × 5
##   term        estimate std.error statistic   p.value
##   &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;
## 1 (Intercept)    58.4     1.79        32.6 1.95e-176
## 2 grant          -1.11    0.0806     -13.7 1.45e- 40
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh 权重, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/29.html&quot;&gt;空间计量-网络分析&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;张家星, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1060.html&quot;&gt;Stata：如何生成天马行空的空间权重矩阵？&lt;/a&gt;, 连享会 No.1060.&lt;/li&gt;
&lt;li&gt;彭甲超, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/779.html&quot;&gt;Stata：空间计量模型双权重-spm&lt;/a&gt;, 连享会 No.779.&lt;/li&gt;
&lt;li&gt;潘星宇, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/195.html&quot;&gt;空间权重矩阵的构建&lt;/a&gt;, 连享会 No.195.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;王维怡, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/728.html&quot;&gt;Stata 权重设定-fweight-pweight&lt;/a&gt;, 连享会 No.728.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/43.html&quot;&gt;Stata命令&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;雷诺, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1325.html&quot;&gt;回归中的权重 [aweight]、[pweight] 如何设定&lt;/a&gt;, 连享会 No.1325.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1532.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1532.html</guid><pubDate>Sun, 29 Dec 2024 16:00:00 GMT</pubDate><author>李增杰</author></item><item><title>dsgenl命令：用 Stata 估计 DSGE 模型</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：李祉豪（厦门大学）&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:andycristone@163.com&quot;&gt;andycristone@163.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;: dsgenl命令：用 Stata 估计 DSGE 模型&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;: 动态随机一般均衡模型, 校准&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Source:&lt;/strong&gt; Saadaoui Jamel, 2023. Estimating a nonlinear DSGE model with Stata. &lt;a href=&quot;https://www.jamelsaadaoui.com/estimating-a-nonlinear-dsge-model-with-stata&quot;&gt;-Link-&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 简介&lt;/h2&gt;
&lt;p&gt;动态随机一般均衡模型（DSGE model）的应用作为当今宏观经济学中的主流研究方法，在宏观经济政策评估等领域中得到广泛应用。本文的示例模型是 King and Rebelo (1999)一文中新古典模型的一个变体。该示例模型涉及的变量主要有：&lt;strong&gt;产出 &lt;em&gt;Y(t)&lt;/em&gt;&lt;/strong&gt;，&lt;strong&gt;消费 &lt;em&gt;C(t)&lt;/em&gt;&lt;/strong&gt;, &lt;strong&gt;投资 &lt;em&gt;I(t)&lt;/em&gt;&lt;/strong&gt;, &lt;strong&gt;工作时长 &lt;em&gt;H(t)&lt;/em&gt;&lt;/strong&gt;, &lt;strong&gt;利率 &lt;em&gt;R(t)&lt;/em&gt;&lt;/strong&gt;, &lt;strong&gt;实际工资水平 &lt;em&gt;W(t)&lt;/em&gt;&lt;/strong&gt;, &lt;strong&gt;资本存量 &lt;em&gt;K(t)&lt;/em&gt;&lt;/strong&gt;, &lt;strong&gt;生产率&lt;em&gt;Z(t)&lt;/em&gt;&lt;/strong&gt;。这些变量都是弱平稳的。此外，模型参数主要有：${\alpha}$, ${\beta}$, ${\chi}$, ${\delta}$, ${\rho}$, ${\sigma}$。整个模型包含8个等式，如下所示。&lt;/p&gt;
&lt;p&gt;$(1) \quad \frac{1}{C_{t}}=\beta E_{t}[(\frac{1}{C_{t+1}})(1+R_{t+1}-\delta)]$&lt;/p&gt;
&lt;p&gt;$(2) \quad \chi H_{t}=\frac {W_{t}}{C_{t}}$&lt;/p&gt;
&lt;p&gt;$(3) \quad Y_{t}=C_{t}+I_{t}$&lt;/p&gt;
&lt;p&gt;$(4) \quad Y_{t}=Z_{t}K_{t}^{\alpha}H_{t}^{1-\alpha}$&lt;/p&gt;
&lt;p&gt;$(5) \quad R_{t}=\alpha \frac{Y_{t}}{K_{t}}$&lt;/p&gt;
&lt;p&gt;$(6) \quad W_{t}=(1-\alpha)\frac{Y_{t}}{H_{t}}$&lt;/p&gt;
&lt;p&gt;$(7) \quad K_{t+1}=I_{t}+(1-\delta)K_{t}$&lt;/p&gt;
&lt;p&gt;$(8) \quad ln(Z_{t+1})=\rho ln(Z_{t})+e_{t+1}$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;等式（1）为消费端的欧拉方程，它将即期消费表示为未来消费和利率的期望表达式；&lt;/li&gt;
&lt;li&gt;等式（2）为劳动供给方程，它将工作时长表示为工资和消费的函数；&lt;/li&gt;
&lt;li&gt;等式（3）为一个标准的国民收入核算恒等式，它将产出表示为由消费和投资两部分构成；&lt;/li&gt;
&lt;li&gt;等式（4）为产出供给方程或生产函数，他将产出表示为资本投入 &lt;strong&gt;$K_{t}$&lt;/strong&gt;、劳动投入 &lt;strong&gt;$H_{t}$&lt;/strong&gt; 和生产率水平 &lt;strong&gt;$Z_{t}$&lt;/strong&gt; 的函数；&lt;/li&gt;
&lt;li&gt;等式（5）为资本需求方程；&lt;/li&gt;
&lt;li&gt;等式（6）为劳动需求方程；&lt;/li&gt;
&lt;li&gt;等式（7）为资本运动方程；&lt;/li&gt;
&lt;li&gt;等式（8）为生产率水平变化的表达式，其中 $e_{t+1}$ 为独立同分布，均值为0，标准差为$\sigma_{z}$的随机冲击项。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 估计&lt;/h2&gt;
&lt;p&gt;本文演示所使用的数据来自美联储2017年1月15日所报告的美国经济数据，在&lt;code&gt;Stata&lt;/code&gt; 中利用如下链接加载数据：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;use https://www.stata-press.com/data/r18/usmacro2
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;使用 &lt;strong&gt;describe&lt;/strong&gt; 命令进行描述性统计，结果如下所示：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;Contains data from https://www.stata-press.com/data/r18/usmacro2.dta
 Observations: 244    Federal Reserve Economic Data - St. Louis Fed, 2017-01-15
    Variables:  11    1 May 2022 17:52
                                              (_dta has notes)
--------------------------------------------------------------------------
Variable      Storage   
    name         type    Variable label
--------------------------------------------------------------------------
daten           int      Numeric (daily) date
year            int      Year
quarter         byte     Quarter
dateq           int      Date (quarters)
y               double   Growth rate of real GDP (GDPC96)
p               double   Growth rate of prices (GDPDEF)
r               double   Federal funds rate (FEDFUNDS)
c               double   Growth rate of consumption (PCECC96)
n               double   Growth rate of hours worked (HOANBS)
i               double   Corporate bond interest rate (AAA)
e               double   Percentage change in US exchange rate (TWEXBMTH)
--------------------------------------------------------------------------
Sorted by: dateq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;该数据报告了实际 GDP 增长率 $y$，价格变动率 $p$，联邦基金利率 $r$，消费增长率 $c$，劳动投入增长率 $n$，公司债券利率 $i$，美元汇率 $e$。&lt;/p&gt;
&lt;p&gt;在对上述数据的基本信息有了初步认识后，结合上文模型中的8个方程进行参数校准。该模型中需要校准的外生参数主要有$\beta$，$\delta$，$\chi$，$\alpha$，$\rho$，$\sigma_{z}$。其中参考文献King and elo (1999) 对前四项参数的取值进行了规定，因而最终需要依据模型和数据进行校准的参数为最后两项。此处的校准步骤通过新建一个 do 文件运行下述指令进行。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;// Set the constraints

constraint 1 _b[alpha] = 0.33
constraint 2 _b[beta] = 0.99
constraint 3 _b[delta] = 0.025
constraint 4 _b[chi] = 2
dsgenl (1/c = {beta}*(1/F.c)*(1+F.r-{delta})) ///
       ({chi}*h = w/c)                ///
       (y = c + i)                      ///
       (y = z*k^{alpha}*h^(1-{alpha}))  ///
       (r = {alpha}*y/k)                ///
       (w = (1-{alpha})*y/h)            ///
       (F.k = i + (1-{delta})*k)        ///
       (ln(F.z) = {rho}*ln(z))          /// 
       , observed(y)                    ///
       unobserved(c i r w h)            ///
       exostate(z)                      ///
       endostate(k) constraint(1/4)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;在上述do文件中，首先对前四项参数的取值进行约束，这体现在constraint 1至4中。对后两项参数的估计涉及到&lt;em&gt;非线性动态随机一般均衡模型估计&lt;/em&gt; &lt;strong&gt;dsgenl&lt;/strong&gt; 命令的使用，其语法结构如下：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;*- dsgenl 命令
dsgenl (lexp_1 = rexp_1) [(lexp_2 = rexp_2) ...] [if] [in], 
        observed(varlist) 
       [unobserved(varlist)] 
        exostate(namelist) 
       [endostate(namelist)] 
       [constraint]
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;lexp&lt;/code&gt;&lt;/strong&gt;: 估计方程等号左边的表达式；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;rexp&lt;/code&gt;&lt;/strong&gt;: 估计方程等号右边的表达式 ；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;observed&lt;/code&gt;&lt;/strong&gt;:可观测到的控制变量名；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;unobserved&lt;/code&gt;&lt;/strong&gt;:不可观测到的控制变量名；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;exostate&lt;/code&gt;&lt;/strong&gt;:模型外生的状态变量名,，可以受到冲击；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;endostate&lt;/code&gt;&lt;/strong&gt;:模型内生的状态变量名，不可受到冲击；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;constraint&lt;/code&gt;：线性约束条件。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其他一些选项可参照 &lt;strong&gt;help dsgenl&lt;/strong&gt; 命令查看。在上述 do 文件中，本文将示例中的等式1至8置于 dsgenl 命令中进行参数校准。其中位于等式左边的 &lt;strong&gt;F.varlist&lt;/strong&gt; 表示状态变量。该示例中为 &lt;em&gt;k&lt;/em&gt; 和 &lt;em&gt;z&lt;/em&gt;。状态变量 &lt;em&gt;z&lt;/em&gt; 为一阶自回归过程，状态变量 &lt;em&gt;k&lt;/em&gt; 取决于即期的控制变量，如i。所有的变量为可观测的（数据所报告的变量）或不可观测的，但需注意的是状态变量都是不可观测的。状态变量的初值给定，其未来值由系统方程决定。&lt;/p&gt;
&lt;p&gt;运行上述 do 文件后，本文得到该经济系统所有参数的校准结果如下所示。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;First-order DSGE model

Sample: 1955q1 thru 2015q4                                 Number of obs = 244
Log likelihood = -639.39684
 ( 1)  [/structural]alpha = .33
 ( 2)  [/structural]beta = .99
 ( 3)  [/structural]delta = .025
 ( 4)  [/structural]chi = 2
------------------------------------------------------------------------------
           y | Coefficient  Std. err.      z    P&amp;gt;|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
/structural  |
        beta |        .99  (constrained)
       delta |       .025  (constrained)
         chi |          2  (constrained)
       alpha |        .33  (constrained)
         rho |   .3133483   .0614696     5.10   0.000     .1928701    .4338265
-------------+----------------------------------------------------------------
      sd(e.z)|   2.287682   .1036018                      2.084627    2.490738
------------------------------------------------------------------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 分析：模型特征及其经济效应&lt;/h2&gt;
&lt;p&gt;在完成参数校准和模型估计后，研究者可以结合数据对模型所展示的经济系统特征及其效应展开研究。研究者可利用 &lt;strong&gt;estat steady&lt;/strong&gt; 命令求解模型的稳态值，利用 &lt;strong&gt;estat covariance&lt;/strong&gt; 命令了解变量的协方差特征。若要计算脉冲响应函数，可使用 &lt;strong&gt;irf&lt;/strong&gt; 组合命令，具体可参照  &lt;strong&gt;help irf&lt;/strong&gt; 命令查看，需注意的是该组合命令要在运行 &lt;strong&gt;dsgenl&lt;/strong&gt; 命令后方可执行。下方命令及图例展示了该经济系统各变量对一个标准差幅度的生产率冲击的脉冲响应。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;irf set rbcirf, replace
irf create est, step(20) replace
irf graph irf, impulse(z) response(y c i h w z)   ///
  byopts(yrescale)                                ///
  ttitle(Effects of a Productivity shock (z))
graph rename prod, replace
graph export prod.png, replace
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E5%88%A9%E7%94%A8Stata%E8%BF%9B%E8%A1%8Cdsge%E6%A8%A1%E5%9E%8B%E4%BC%B0%E8%AE%A1_Fig1_irfexample_%E6%9D%8E%E7%A5%89%E8%B1%AA.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;上图表明，生产率冲击对所有的模型变量产生了正向影响。对大部分变量而言，这种上升趋势只在短期存在，而五个时期后变量值均收敛到正常水平，冲击影响消失。消费表现出例外特征。冲击使其平稳上升几期后逐渐回落到长期正常水平，表现出平滑渐进特征。&lt;/p&gt;
&lt;p&gt;除上述分析外，研究者还可进行参数敏感性分析。下文逐步展示了折旧率设定为0.8的反事实模拟和基准模型的对照结果。&lt;/p&gt;
&lt;p&gt;首先通过如下一系列命令调用和改变折旧率参数 &lt;strong&gt;$\delta$&lt;/strong&gt; 的取值&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;ereturn list
matrix liste(b)
matrix b2 = e(b)
matrix b2[1,2] = 0.08
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;其次代入调整后的参数 $\delta$ 利用 &lt;strong&gt;dsgenl&lt;/strong&gt; 命令重新进行估计:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;dsgenl (0 = {beta}*(c/F.c)*(1+F.r-{delta}) - 1)         ///
       (h = (1/{chi})*(w/c))                            ///
       (y = c + i)                                      ///
       (y = z*k^{alpha}*h^(1-{alpha}))                  ///
       (r = {alpha}*y/k)                                ///
       (w = (1-{alpha})*y/h)                            ///
       (F.k = i + (1-{delta})*k)                        ///
       (ln(F.z) = {rho}*ln(z))                          /// 
       , observed(y) unobserved(c i r w h) exostate(z)  ///
       endostate(k) constraint(1 2 4) tech(nr) from(b2) ///
       solve
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;其语法结构与基准模型一致，只是在估计命令最后指定利用新取值范围内的参数进行估计。&lt;/p&gt;
&lt;p&gt;最后通过 &lt;strong&gt;ifr&lt;/strong&gt; 命令绘制脉冲相应图与基准模型进行比较：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;irf create counterfactual, step(20) replace
irf ograph (est z c irf) (counterfactual z c irf)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;下图表明，相比基准模型高折旧率放大了生产率冲击对消费的影响，消费调整的幅度更为明显。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E5%88%A9%E7%94%A8Stata%E8%BF%9B%E8%A1%8Cdsge%E6%A8%A1%E5%9E%8B%E4%BC%B0%E8%AE%A1_Fig2_highrdepriation_%E6%9D%8E%E7%A5%89%E8%B1%AA.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. 参考文献&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;King, R. G., &amp;amp; Rebelo, S. T. (1999). Resuscitating real business cycles. Handbook of macroeconomics, 1, 927-1007 &lt;a href=&quot;https://www.sciencedirect.com/science/article/pii/S1574004899100223&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;David Schenck (2017). Estimating the parameters of DSGE models. Stata Blog  &lt;a href=&quot;https://blog.stata.com/2017/07/11/estimating-the-parameters-of-dsge-models&quot;&gt;-Link-&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;David Schenck (2017). Dynamic stochastic general equilibrium models for policy analysis  &lt;a href=&quot;https://blog.stata.com/2018/04/23/dynamic-stochastic-general-equilibrium-models-for-policy-analysis/&quot;&gt;-Link-&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;StataCorp (2023). Stata dynamic stochastic general equilibrium models reference manual  &lt;a href=&quot;https://www.stata.com/manuals/dsge.pdf&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh DSGE 理论&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E5%BC%A0%E5%BC%9B&quot;&gt;张弛&lt;/a&gt;, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1491.html&quot;&gt;如何撰写理论模型类论文？&lt;/a&gt;, 连享会 No.1491.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E8%BF%9E%E4%BA%AB%E4%BC%9A&quot;&gt;连享会&lt;/a&gt;, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1336.html&quot;&gt;CGE 专题：理论与实操&lt;/a&gt;, 连享会 No.1336.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E8%BF%9E%E4%BA%AB%E4%BC%9A&quot;&gt;连享会&lt;/a&gt;, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/293.html&quot;&gt;DSGE模型的Stata实现简介&lt;/a&gt;, 连享会 No.293.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E9%99%88%E6%96%87%E6%AD%A6&quot;&gt;陈文武&lt;/a&gt;, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/985.html&quot;&gt;从经济结构变化视角突破平衡增长理论&lt;/a&gt;, 连享会 No.985.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1531.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1531.html</guid><pubDate>Sat, 28 Dec 2024 16:00:00 GMT</pubDate><author>李祉豪</author></item><item><title>顶刊编辑的投稿建议：定量研究要注意什么？</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：郑宇、徐文曦 (汕头大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:cn_vip@outlook.com&quot;&gt;cn_vip@outlook.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;：本文主要摘译自下文，特此致谢！&lt;br&gt;
&lt;strong&gt;Source&lt;/strong&gt;：Mustillo, S. A., Lizardo, O. A., &amp;amp; McVeigh, R. M. (2018). Editors&#39; Comment: A Few Guidelines for Quantitative Submissions. American Sociological Review, 83(6), 1281-1283. &lt;a href=&quot;https://doi.org/10.1177/0003122418806282&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;https://journals.sagepub.com/doi/epub/10.1177/0003122418806282&quot;&gt;-PDF-&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Title：顶刊编辑的投稿建议：定量研究要注意什么？&lt;/li&gt;
&lt;li&gt;Keywords：定量研究，p值，中介效应，分类因变量，Multiple regression，Multivariate model&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;资深学者 &lt;a href=&quot;https://sociology.nd.edu/people/sarah-mustillo/&quot;&gt;Sarah Mustillo&lt;/a&gt;、&lt;a href=&quot;https://soc.ucla.edu/person/omar-lizardo/&quot;&gt;Omar Lizardo&lt;/a&gt; 和 &lt;a href=&quot;https://sociology.nd.edu/people/rory-mcveigh/&quot;&gt;Rory McVeigh&lt;/a&gt; 关注到网络爬虫和文本分析等前沿技术的发展。在担任《美国社会学评论》(&lt;strong&gt;ASR&lt;/strong&gt;) 编辑的三年中，他们处理了数千篇稿件，并对其中反复出现的一系列问题进行了总结。这些问题并非严格意义上的错误，而是反映了社会学定量研究者之间先前接受的做法与定量方法学家中最新技术共识之间的差距或滞后。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. p 值&lt;/h2&gt;
&lt;p&gt;关于 $p$ 值效用的讨论在文献中比比皆是。一方面，那些关心可复制性和新发现标准的人认为，统计显著性的阈值应该降低到 0.05 以下 (Benjamin 等，2018)。另一方面，一些人认为我们应该完全摒弃 $p$ 值和零假设显著性检验 (McShane 等，2017)。&lt;/p&gt;
&lt;p&gt;在这场辩论中，我们不打算表明立场，只是总体上认为，$p$ 值小于 0.10 和单尾检验应该只在极少数特殊情况下，并且有恰当的理由时才使用。许多论文试图通过指出其口头提出的假设中的“方向性”来为使用 $p$ 值小于 0.10 的标准辩护。其他人则使用含糊的语言，将 $p$ 值小于 0.10 的结果描述为“边缘性”或“提示性”发现。我们并不认为第一个理由有说服力。就第二种做法而言，ASR 是我们学科的顶级期刊，&lt;strong&gt;我们需要发表的是强有力的证据，而不是“提示性”的发现&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 中介效应检验&lt;/h2&gt;
&lt;p&gt;我们接收到许多投稿，试图通过简化版的 Baron 和 Kenny (1986) 步骤来检验中介效应。作者通常采取以下步骤：首先，建立一个包含自变量和控制变量的模型；接着，再建立一个加入中介变量的模型。如果自变量的系数减小或变得不显著，作者便得出结论，认为主要效应已被中介变量所中介。&lt;/p&gt;
&lt;p&gt;这种方法存在几个问题。最常见的问题是，作者未能对系数大小的差异进行显著性检验。这个步骤对于判断是否发生了中介效应是必要的。自变量的系数可能会减小，甚至变得不显著，但仍可能处于仅由随机因素引起的波动范围内。正如 Gelman 和 Stern (2006) 所指出的，统计显著性的变化本身可能并不具备显著性。&lt;/p&gt;
&lt;p&gt;有时，作者可能会像 Sobel (1986) 检验一样进行显著性检验，以判断系数变化是否具有统计显著性，这无疑是一个正确的方向。近年来，不少学者开发了改进 Sobel 检验的新方法，这些方法可以在不同的软件包中实现，并且能在一定程度上提高检验效果。其中一些方法解决了我们将要提到的下一个问题，即在非线性模型（如 logit 和 probit 模型）中，无法仅通过观察模型间系数大小的变化来判断中介效应。&lt;/p&gt;
&lt;p&gt;有关更详细的信息，可以参考 MacKinnon (2008)，Imai 等 (2010)，Karlson 等 (2012) 以及 Vanderweele (2015，2016) 的研究。我们建议，未来计划在 ASR 期刊上发表文章的作者，&lt;strong&gt;针对中介效应的检验应采用更为复杂和精确的方法&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 分类因变量模型中的交互作用&lt;/h2&gt;
&lt;p&gt;在非线性模型中使用交乘项系数的 $z$ 统计量 (及相关的 $p$ 值) 来检验统计交互作用，已经引发了各种问题。Allison (1999)，Williams (2009) 等学者集中讨论了其中一种类型的问题 (例如，组间残差方差的异质性)，而 Mood (2010)，Breen 和 Karlson (2013)，Long 和 Mustillo 等则关注了一系列其他问题。问题已经明确：&lt;strong&gt;不要使用交互作用项的系数来推断分类模型 (如 logit、probit、Poisson 等) 中的统计交互作用&lt;/strong&gt;。每位学者都推荐了不同的检验交互作用的方法。我们建议未来的作者根据具体的应用情境，选择合适的检验方法。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. Multivariate VS Multivariable&lt;/h2&gt;
&lt;p&gt;许多学科的学者常常交替使用这些术语来描述他们的模型，但它们并不意味着相同的内容。社会学家并不是唯一会如此使用这些术语的群体。将这些术语交替使用可能会导致对所估计模型类型的混淆。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Simple regression&lt;/em&gt; (简单回归) 是指包含一个自变量和一个因变量的模型。&lt;em&gt;Multiple regression&lt;/em&gt; (多元回归) 是指包含多个自变量和一个因变量的模型。&lt;em&gt;Multiple regression&lt;/em&gt; 的另一个术语是 &lt;em&gt;Multivariable regression&lt;/em&gt; (多变量回归)。&lt;/p&gt;
&lt;p&gt;而 &lt;em&gt;Multivariate model&lt;/em&gt; (多变量模型) 则与上述模型完全不同：&lt;em&gt;Multivariate model&lt;/em&gt; 是指包含多个因变量的模型，例如因子分析、结构方程模型或潜增长曲线模型。鉴于这些术语在已发表的文献中经常被混淆，许多人认为这种区分已变得随意或仅是语义上的，但我们认为保持这一区分仍然很重要，原因在于 &lt;em&gt;Multivariate statistics&lt;/em&gt; (多变量统计学) 本身是一个发展成熟的统计学分支，通常作为完整课程的主题，并且这一术语的使用在其他学科中也是一致的。这一点尤为重要，因为 ASR 上的文章被广泛阅读，涵盖的不仅仅是社会学领域。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. 测量&lt;/h2&gt;
&lt;p&gt;许多作者需要比目前更认真地对待测量问题。我们经常收到一些投稿，其中关键变量 (无论是自变量还是因变量) 只是作者的临时创作，未充分考虑测量科学的严谨性。对于简单、直接的概念，这种策略可能是可以接受的，但对于更复杂的内容，当可能、合适或相关时，&lt;strong&gt;优选已验证的测量方法或有文献支持的测量方法&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;一个较为次要但仍值得关注的问题是，一些作者在使用经过验证的量表时，方式与已发表的验证工作不一致。如果一个经过验证的量表有 12 个项目，这些项目在验证研究中是按 1 到 4 的评分标准进行编码并求和的，那么&lt;strong&gt;除非有合理的解释，使用者应当按原方式处理该量表&lt;/strong&gt;。我们经常收到一些投稿，其中作者会从量表中挑选部分项目，或者更改项目的编码方式，或者修改求和方案。这些任何改变都可能削弱量表的有效性。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;6. 方法部分&lt;/h2&gt;
&lt;p&gt;在方法部分的组织和程序细节方面，仍然有提升的空间。许多投稿未能&lt;strong&gt;充分提供关于数据收集程序、样本量、缺失数据、剔除数据、所估计模型的类型及其选择理由、问卷的响应率、选择效应、变量测度等方面的足够细节&lt;/strong&gt;。有时，这些信息虽然有提供，但往往不是集中展示在方法部分，而是零散分布在方法和结果部分，或被放置在附录中，难以一目了然地呈现。最容易让读者跟随的论文，通常是在&lt;strong&gt;方法部分紧密链接前文，并且方法内容有条不紊地展开——从数据、变量到模型的描述清晰连贯&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;总之，社会学在定量研究方法的广度和复杂性上已有显著进展，为解答我们领域中的重要问题提供了丰富的手段。我们提出这些建议，旨在帮助学者在选择合适的方法和更好地展示结果时，尤其是在目前缺乏明确指南的领域中做出明智决策。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;7. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh p值 中介 调节, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项-调节-中介&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;伊凌雪, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/789.html&quot;&gt;调节效应是否需要考虑对控制变量交乘？&lt;/a&gt;, 连享会 No.789.&lt;/li&gt;
&lt;li&gt;余坚, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1177.html&quot;&gt;中介效应：有序因果中介分析的半参数估计A-理论&lt;/a&gt;, 连享会 No.1177.&lt;/li&gt;
&lt;li&gt;余坚, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1179.html&quot;&gt;中介效应：有序因果中介分析的半参数估计B-实操&lt;/a&gt;, 连享会 No.1179.&lt;/li&gt;
&lt;li&gt;修博文, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1497.html&quot;&gt;交乘项困惑：交互模型中的控制变量如何选择？&lt;/a&gt;, 连享会 No.1497.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/38.html&quot;&gt;IV-GMM&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;关欣, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/914.html&quot;&gt;Stata：基于IV的因果中介分析-ivmediate&lt;/a&gt;, 连享会 No.914.&lt;/li&gt;
&lt;li&gt;刘聪聪, 陈点点, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/121.html&quot;&gt;Stata：interflex-交乘项该这么分析!&lt;/a&gt;, 连享会 No.121.&lt;/li&gt;
&lt;li&gt;周依仿, 展一帆, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/581.html&quot;&gt;medsem-中介效应：基于结构方程模型SEM的中介效应分析&lt;/a&gt;, 连享会 No.581.&lt;/li&gt;
&lt;li&gt;崔颖, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/268.html&quot;&gt;Stata：调节中介效应检验.md&lt;/a&gt;, 连享会 No.268.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;文海铭, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/952.html&quot;&gt;中介效应分析：三段式中介效应模型真的适用于经济学研究吗？&lt;/a&gt;, 连享会 No.952.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;内生性-因果推断&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;曹昊煜, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1046.html&quot;&gt;Stata：一般化的因果中介分析&lt;/a&gt;, 连享会 No.1046.&lt;/li&gt;
&lt;li&gt;曹琳君, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/584.html&quot;&gt;Stata：因果中介分析大比拼-T323&lt;/a&gt;, 连享会 No.584.&lt;/li&gt;
&lt;li&gt;曹琳君, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/580.html&quot;&gt;med4way：中介效应和交互效应分析&lt;/a&gt;, 连享会 No.580.&lt;/li&gt;
&lt;li&gt;曾颖娴, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/80.html&quot;&gt;离散型调节变量——该如何设定模型？&lt;/a&gt;, 连享会 No.80.&lt;/li&gt;
&lt;li&gt;李坤, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/981.html&quot;&gt;Stata：中介效应分析新命令-sgmediation2&lt;/a&gt;, 连享会 No.981.&lt;/li&gt;
&lt;li&gt;李昭宏, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1422.html&quot;&gt;rwrmed：基于回归残差法的因果中介分析&lt;/a&gt;, 连享会 No.1422.&lt;/li&gt;
&lt;li&gt;沙莎, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/126.html&quot;&gt;Stata+R：一文读懂中介效应&lt;/a&gt;, 连享会 No.126.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/16.html&quot;&gt;Stata入门&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;肖蕊, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/221.html&quot;&gt;25常见种误区：P值、置信区间和统计功效&lt;/a&gt;, 连享会 No.221.&lt;/li&gt;
&lt;li&gt;胡雨霄, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/87.html&quot;&gt;交乘项专题：主效应项可以忽略吗？&lt;/a&gt;, 连享会 No.87.&lt;/li&gt;
&lt;li&gt;苏舜禹, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1475.html&quot;&gt;路径分析实操指南：调节效应、中介效应和调节中介&lt;/a&gt;, 连享会 No.1475.&lt;/li&gt;
&lt;li&gt;苗妙, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/990.html&quot;&gt;抛弃p值？经济显著性与统计显著性&lt;/a&gt;, 连享会 No.990.&lt;/li&gt;
&lt;li&gt;袁子晴, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/480.html&quot;&gt;interactplot：图示交乘项-交互项-调节效应&lt;/a&gt;, 连享会 No.480.&lt;/li&gt;
&lt;li&gt;贾寰宇, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1404.html&quot;&gt;Logit和Probit模型的中介效应分析&lt;/a&gt;, 连享会 No.1404.&lt;/li&gt;
&lt;li&gt;赵雨鑫, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1211.html&quot;&gt;调节变量与中介变量介绍&lt;/a&gt;, 连享会 No.1211.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;连玉君, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1365.html&quot;&gt;Stata结果输出：手动添加带星号的统计量&lt;/a&gt;, 连享会 No.1365.&lt;/li&gt;
&lt;li&gt;连玉君, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/137.html&quot;&gt;交乘项-交叉项的中心化问题&lt;/a&gt;, 连享会 No.137.&lt;/li&gt;
&lt;li&gt;邓浩然, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/383.html&quot;&gt;Stata：图示交互效应-调节效应&lt;/a&gt;, 连享会 No.383.&lt;/li&gt;
&lt;li&gt;陈炜, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1200.html&quot;&gt;Stata：非线性模型的中介效应检验-khb&lt;/a&gt;, 连享会 No.1200.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;黄晨晨, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1374.html&quot;&gt;Lasso-SFA：基于自适应Lasso的面板固定效应随机边界分析&lt;/a&gt;, 连享会 No.1374.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1530.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1530.html</guid><pubDate>Fri, 27 Dec 2024 16:00:00 GMT</pubDate><author>郑宇、徐文曦</author></item><item><title>论文推介：分位数回归在经济史研究中的应用</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：颜国强 (东南大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:yangq0827@163.com&quot;&gt;yangq0827@163.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;：本文整理自下文，特此致谢！&lt;br&gt;
&lt;strong&gt;Source&lt;/strong&gt;：Clarke, D., Llorca Jaña, M., &amp;amp; Pailañir, D. (2023). The use of quantile methods in economic history. Historical Methods: A Journal of Quantitative and Interdisciplinary History, 56(2), 115–132. &lt;a href=&quot;https://doi.org/10.1080/01615440.2023.2198272&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;http://sci-hub.ren/10.1080/01615440.2023.2198272&quot;&gt;-PDF-&lt;/a&gt; &lt;a href=&quot;https://scholar.google.com/scholar?q=The%20use%20of%20quantile%20methods%20in%20economic%20history&quot;&gt;-Google-&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;：论文推介：分位数回归在经济史研究中的应用&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;：经济史，线性分位数回归，分位数处理效应&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 引言&lt;/h2&gt;
&lt;p&gt;在经济史研究中，捕捉变量之间的相关关系通常需要测量变量的整个分布。例如，在人口统计学中，儿童时期的发育迟缓和发育不良与成年后的健康状况差、劳动市场收入低以及晚年的认知能力差有关 (Jayachandran and Pande, 2017; Fogel, 2004; Floud et al., 2011)。虽然身高与健康及其他福祉指标有广泛的相关性，但这些关系并不是在整个身高范围内都是一致的，而且在不同群体中也会有所不同。因此，评估历史事件对身高或其他人口统计学指标的影响，需要了解该事件对因变量整个分布的影响。&lt;/p&gt;
&lt;p&gt;同样，有学者研究了财富的分布 (Latzko, 2020; Canbakal and Filiztekin, 2021)，发现财富的平均值变化背后可能隐藏着截然不同的财富分配模式，比如财富底端和顶端的变化。正因如此，除了平均值外，政策或事件的分布效应可能和平均效应同样重要，甚至更重要。&lt;/p&gt;
&lt;p&gt;分位数回归由 Koenker and Bassett (1978) 首次提出，此后在许多研究中得到了广泛讨论和应用。尽管这篇开创性的论文已经发表四十多年，但分位数回归仍然是一个活跃的研究领域。然而，本文聚焦于探讨历史事件对分布的影响，重点分析分位数回归及其相关方法的计量建模和估计，而并未涉及非参数分析或经济史研究中的描述性方法 (Deaton, 1989; Wachter, 1981)。&lt;/p&gt;
&lt;p&gt;尽管分位数回归非常适用于经济史研究，因为感兴趣的因变量通常是连续分布的，但在经济史文献中，分位数回归的应用相对较少。本文不仅概述了这些方法及其最新扩展，还讨论了其在经济史中的优缺点。通过对主流经济史期刊的分析，我们发现大约有 50 篇论文使用了分位数回归。本文审视了这些论文中采用分位数方法的理由，主要归结为以下三点：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在特定情境下，分位数方法能提供更深入的理解；&lt;/li&gt;
&lt;li&gt;在某些情况下，分位数方法与特定的计量模型更加契合；&lt;/li&gt;
&lt;li&gt;分位数方法能解决其他模型设定中出现的某些特定问题。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;然而，在经济史研究中，如果面临测量误差和数据收集的难题，分位数方法可能并不适用。此外，分位数方法依赖于连续性测量结果，并且只有在数据规模较大时才能发挥其优势。因此，在数据收集困难且成本高昂的研究领域，这些限制可能会制约分位数回归的实际应用。&lt;/p&gt;
&lt;p&gt;本文旨在通过以下两种方式，提升学者们在经济史研究中使用分位数方法的兴趣：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;阐释实证研究者如何有效利用这些方法，以揭示那些简单平均值或其他平均值估计量无法捕捉到的相关关系；&lt;/li&gt;
&lt;li&gt;记录这些方法在经济史文献中的使用情况，并指出在某些研究中，分位数回归方法可能未得到充分应用的方面。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 回归和分位数回归的概述&lt;/h2&gt;
&lt;p&gt;回归分析是研究自变量如何影响因变量的常用统计方法。通常情况下，我们会使用普通最小二乘法 (OLS) 来估计参数，这些参数表示在其他条件不变时，自变量每增加一个单位，因变量的预期变化量。虽然 OLS 方法可以提供因变量平均值变化的估计，但它可能掩盖了不同子群体之间的差异。&lt;/p&gt;
&lt;p&gt;为了更深入地理解数据的异质性，分位数回归提供了一种替代方法，它提供了一个更丰富的视角，能够观察特定变量对因变量分布中各个分位数的影响，从而揭示 OLS 可能忽略的深层次信息。分位数实际上是指变量分布中低于该点的特定比例群体的值。例如，一个变量的 5% 分位数表示 5% 的群体的值低于这个点，而 95% 的群体的值高于这个点。50% 分位数，也就是中位数，表示在这个变量值下，50% 的群体的观测值低于它，而另外 50% 的群体的观测值高于它。&lt;/p&gt;
&lt;p&gt;利用分位数回归，我们可以回答诸如自变量变化如何影响那些在因变量分布中处于较低位置的个体，或者如何影响那些分布中处于较高位置的个体的问题。分位数回归能够考虑数据中的一种特定类型的异质性，即特定变量的回报在整个因变量分布中是如何变化的。这种方法为我们提供了更全面的理解，有助于揭示隐藏在平均值分析背后的复杂关系。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 分位数回归&lt;/h2&gt;
&lt;p&gt;考虑一个较为常见 OLS 的线性回归模型，设定如下：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
y_i=\beta_1+\beta_2x_1+ \cdots +\beta_Kx_K+u_i  \quad (1)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其线性回归模型的参数解为：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\hat {\boldsymbol {\beta}}=\arg\min_{\beta\in\mathbb {R}^K}\sum_{i=1}^N  (y_i-\boldsymbol {x}_i^{\prime}\beta)^2     \quad (2)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中 $x_i$ 指的是对于每个单位 $i$，所有自变量 $x_k$ 的值构成的向量。通过模型估计，可以得到一个参数向量，它捕捉了每个 $x_k$ 对感兴趣的结果 $y$ 的平均效应。尽管 $y_i$ 的分布的平均效应在许多情况下可能是一个合理的总结参数，但这并不是唯一具有实际意义的参数，$y$ 的其他分布可能与平均值一样重要，或者更加重要。接下来，我们将介绍一系列分位数估计方法，这些方法允许我们在结果变量的任意分位数上进行估计。&lt;/p&gt;
&lt;h3&gt;3.1 线性分位数回归模型&lt;/h3&gt;
&lt;p&gt;分位数回归考虑了某个自变量如何影响因变量 $y$ 在整个分布的特定点上的情况。因此，至少 $y$ 的分布需要呈现出一定的变化，因此在 $y$ 为二元或分类度量的情况下使用分位数回归进行估计是不恰当的。我们用 $\tau$ 表示分布的分位数，例如 $W_{0.5}$ 表示分布的中位数，而 $W_{0.1}$ 表示分布的第 10 百分位数，或者说观察到的 $y$ 的 10% 以下的那个点。正如 Koenker and Bassett (1978) 最初所记录的那样，我们可以基于以下最小化问题估计参数向量 $E (W_{\tau})$，以捕捉每个 $x_k$ 对 $y$ 的 $\tau$ 分位数的影响：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\hat {\beta} (\tau) =\arg\min_{\beta\in\mathbb {R}^k}\biggl [\sum_{i:y_i\geq x_i^{\prime}\beta}\tau\left|y_i-x_i^{\prime}\beta\right|+\sum_{i:y_i&amp;lt;x_i^{\prime}\beta}(1-\tau)\left|y_i-x_i^{\prime}\beta\right|\biggr]    \quad (3)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;需要注意的是，这里的估计基于 $\boldsymbol {x}_i^{\prime }\boldsymbol {\beta }$ 与 ${y}_i$ 的绝对偏差，而不是 OLS 中的二次平方距离。实际上，当 $\tau = 0.5$ (中位数) 时，这个公式简化为最小绝对偏差估计量。除了中位数的情况，这个最小化问题用 $\tau$ 来“倾斜”估计，使其朝向分布在 ${y}_i$ 中较低或较高的数据，正如可以在方程 (3) 括号内的两个项中观察到的：当 $\tau$ 在 0 和 0.5 之间时，赋予右侧 (${y}_i$ 小于条件均值 $\boldsymbol {x}_i^{\prime }\boldsymbol {\beta }$ 的单位 $i$) 求和更多的权重；而当 $\tau$ 在 0.5 和 1 之间时，赋予左侧求和更多的权重 (${y}_i$ 大于条件均值 $\boldsymbol {x}_i^{\prime }\boldsymbol {\beta }$ 的单位 $i$)。按照 Lamarche (2019) 的符号，向量 $\beta (\tau)$ 的近似分布可以写成：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\hat {\beta} (\tau) \thicksim\mathcal {N}\Bigg (\beta，\frac1N\tau (1-\tau) H^{-1} JH^{-1}\Bigg) \quad (4)$$&lt;/p&gt;
&lt;h3&gt;3.2 分位数处理效应&lt;/h3&gt;
&lt;p&gt;虽然这种分位数回归可以用于任意形式和维度的 $x_k$，但我们特别感兴趣的是包含一些二元“处理”变量的处理效应模型，我们将二元解释变量表示为 $D_i$。尽管分位数回归要求感兴趣的结果变量具有连续分布，但对于自变量 $x_k$ 的性质没有任何限制，包括二元和分类变量。标准的平均水平处理效应旨在识别接受处理（与未接受处理）对因变量 $y$ 的平均影响：$\mathbb{E}(y | D_i = 1) - \mathbb{E}(y | D_i = 0)$。这假定 $D_i$ 与不可观测因素独立，并将其扩展到分位数处理效应（Quantile Treatment Effect，QTE）类比给出。&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\Delta (\tau) =Q_y (\tau\Big|D=1)-Q_y (\tau\Big|D=0)   \quad (5)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;$Q_y (\tau)$ 指在 $y$ 分布的特定分位数 $\tau$ 处的 $y$ 的值。这种估计可以用于评估一系列历史政策的影响。例如，分析暴露于特定经济或政治体系、历史性环境冲击或政策是否对个体结果的分布产生不同的影响。这些例子都涉及到二元的“处理”状态，因此，QTE 方法及其扩展 (将在下文中讨论) 可能非常适合，前提是感兴趣的结果 $y$ 是连续型度量。&lt;/p&gt;
&lt;h3&gt;3.3 分位数回归拓展&lt;/h3&gt;
&lt;p&gt;标准的分位数回归和 QTE 可以提供可解释的结果，使我们能够理解超出均值的效应。我们将在部分讨论这一方法的最新进展，并提供关键参考文献。完整的实证建模可以在下面讨论的论文中找到，然而在 Koenker (2017) 的综述文章或手册章节中也可以找到对这些方法更详细的概述，或者在 Wei (2018)，Lamarche (2019)，Melly and Wüthrich (2018)，Chernozhukov et al. (2018) 的论文中，它们专注于某一特定问题。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;纠正测量误差的模型。&lt;/strong&gt; 在经济历史研究中，常常从不同的数据来源收集变量，跨越相当长的时间框架，测量误差或样本选择问题是较为常见的问题。幸运的是，一些方法提出了在分位数回归框架内考虑测量误差的方式。例如，Wei and Carroll (2009) 记录了在自变量存在测量误差时的潜在估计方法，Wang et al. (2012) 提出了替代方法。这些模型的核心是，如果我们观察到的不是真实变量 $x$，而是一些嘈杂的代理变量，我们必须考虑基于嘈杂代理情况下的 $x$ 条件期望，而不是简单地在回归中使用代理变量。&lt;/p&gt;
&lt;p&gt;此外，即使变量的测量误差有限，样本也可能存在自选择问题。例如，如果只有某些类型的记录在收集历史数据后留存下来，或者数据仅基于幸存的个体。Arellano and Bonhomme (2017) 提出了基于排除限制的分位数回归选择的方法，而 Blanco et al. (2013) 提出了部分识别方法作为在这种情况下的计量方法选择。上述模型的计算是可以实现的，例如通过 Biewen and Erhardt (2020)，Siravegna (2020) 的程序。感兴趣的读者可以参考 Wei (2018) 的手册章节，该章节对这些问题进行了更深入的讨论。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;内生性、工具变量和因果关系。&lt;/strong&gt; 在许多经济史研究的兴趣领域，关注的自变量通常是内生的 —— 即与未观察到的因素相关，而这些未观察到的因素本身又与感兴趣的结果相关。在存在内生性时，标准计量经济模型和分位数回归或量化处理效应 (QTE) 模型都不能进行因果推断。然而，有一系列丰富的研究致力于将标准线性工具变量 (IV) 模型扩展到分位数框架中。这里我们特别讨论局部分位数处理效应 (LQTE) 方法，该方法在一些关键假设下，为整个结果变量分布中的特定人群提供了一致估计。&lt;/p&gt;
&lt;p&gt;LQTE 框架扩展了 Imbens and Angrist (1994) 提出的著名的局部平均处理效应 (LATE) 框架。在这里，使用工具变量进行因果估计基于一个单调性假设，该假设要求工具变量在感兴趣的因变量上引起外生变化，使所有个体都在同一方向上弱变化，例如作为一种如同随机分配的激励或抑制因素来影响一个感兴趣的内生变量。这里我们总结了这个单调性假设和其他识别假设，以及如何使用二元工具变量 $Z$ 来估计 LQTE。Melly and Wüthrich (2018) 提供了这些方法以及扩展到其他情况的详细讨论。根据第 3.2 节的符号，考虑一个感兴趣的结果变量 $y$，一个感兴趣的二元处理变量 $D$，以及工具变量 $Z$。在五个假设下，即工具独立性 (或有效性)、排他性、工具变量相关性、单调性和 SUTVA 假设 (限制了处理状态之间的相互作用)，Imbens and Angrist (1994) 证明了以下 Wald 估计量给出了 LATE：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\frac {E(y_i|Z_i=1)-E (y_i|Z_i=0)}{E (y_i|D_i=1)-E(y_i|D_i=0)}  \quad (6)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;为了将这个框架扩展到分位数框架，Imbens and Rubin (1997)，Abadie (2002) 提供了分布结果。它们给出了专门针对 complier 的累积密度函数，在这种情况下，我们将其记作 $F_{Y|c}(1)$ 和 $F_{Y|c}(0)$。这里，下标 $c$ 指的是服从者群体，$F$ 指的是接受处理 ($F_{Y|c}(1)$) 或未接受处理 ($F_{Y|c}(0)$) 下的结果累积密度。基于 IV 和服从者的这些定义，很容易回到第 3.2 节的符号，给出 LQTE 估计量：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\Delta^c(\tau)=Q_{Y_1}^c (\tau)-Q_{Y_0}^c (\tau)   \quad (7)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;如前所述，$\tau$ 指的是上述相关条件密度函数的分位数。值得注意的是，这些方法虽然比标准 QTE 模型要求更高，因为需要工具变量的有效性条件，但对于存在内生性问题的经济史研究可能非常适合。&lt;/p&gt;
&lt;p&gt;例如，Aaronson et al. (2021) 通过利用双胞胎出生作为 IV，估计了女性生育子女数量对母亲劳动供给的影响。Valencia Caicedo (2021) 的最新工作提供了许多使用 IV 的其他例子，描述了例如基于地图边界或其他地理特征如河流、地形坡度、地理适宜性指数或 Bartik 型工具变量的例子。所有这些在经济史中的工具变量，如果考虑分布结果，都可以有效引入分位数框架。&lt;/p&gt;
&lt;p&gt;**其他扩展和方法。**在量化经济史研究的范畴内，一系列补充性分析框架能够在分位数回归的背景下发挥显著作用。这些框架涵盖了针对面板数据的分析方法和双重差分模型、断点设计和非参数方法。&lt;/p&gt;
&lt;p&gt;Koenker (2004) 提出了将分位数回归扩展到面板数据中，跟踪个体随时间的变化。Koenker (2004) 建议使用惩罚估计量来控制相关的个体效应。Gu and Volgushev (2019) 的最新工作建议使用分组固定效应方法，同样基于惩罚估计量在面板数据中对类似个体进行分组。&lt;/p&gt;
&lt;p&gt;另一条研究思路，如 Arellano and Bonhomme (2016)，建议将潜在的个体层面变动视为未观察到的异质性问题，并使用迭代过程进行估计，在标准分位数回归程序之上叠加基于模拟的估计程序。在纵向数据分析中，一种特别有价值的方法是双重差分模型的估计，它允许我们观察不同时间点上处理效果的变化。利用处理实施前的基线数据，我们可以有效地捕捉并对比即将接受处理与未接受处理个体之间的起始差异。这些模型已经扩展到分位数设置中；例如，参见 Callaway et al. (2018) 针对两个时间段的估计，以及 Callaway and Li (2019b) 针对更广泛的面板估计。Callaway (2019) 中也提供了实现这些方法的计算软件。&lt;/p&gt;
&lt;p&gt;在因变量由于某个特定截断值而发生不连续跳跃的情况下，断点回归设计提供了一种强有力的识别策略。Valencia Caicedo (2021) 对这些方法在经济史中的使用进行了研究，其中的例子通常基于到地理特征或地图边界的距离。Frandsen et al. (2012) 非常灵活地将断点回归设计扩展到分位数框架，允许估计特定不连续性的‘局部’分位数处理效应，并且有相应的程序来实现这种方法。&lt;/p&gt;
&lt;p&gt;标准的非参数回归实现可以捕捉某变量 $y$ 的均值与某自变量 $x$ 之间的完全灵活的关系。不同于参数假设和线性函数形式 (如方程 1 中所施加的)，这种关系可以在 $x$ 的支持范围内自由变化，允许 $x$ 对 $y$ 的均值产生非线性影响。如果不是考虑 $y$ 的均值和 $x$ 之间的非参数关系，而是估计 $y$ 的特定分位数 $\tau$ 和 $x$ 之间的非参数关系，这种逻辑可以扩展到分位数回归。这是一种特别灵活的方式来建模异质性，可能非常适合于那些在研究关系性质上几乎没有先验假设的历史结果。Koenker (2017) 对这些方法进行了综述，而实现这些程序的计算资源可以在 Koenker (2021) 和 Lipsitz et al. (2017) 中找到。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. 经济史研究的应用&lt;/h2&gt;
&lt;h3&gt;4.1 经济史研究中的分位数回归&lt;/h3&gt;
&lt;p&gt;为了深入了解分位数回归在经济史领域的应用情况，我们对 2000 年以来的主要学术期刊进行了全面检索。具体包括了&lt;a href=&quot;https://www.jstor.org/journal/jeconhist&quot;&gt;Journal of Economic History&lt;/a&gt;、&lt;a href=&quot;https://www.journals.elsevier.com/explorations-in-economic-history&quot;&gt;Explorations in Economic History&lt;/a&gt;、&lt;a href=&quot;https://onlinelibrary.wiley.com/journal/14680289&quot;&gt;Economic History Review&lt;/a&gt;、&lt;a href=&quot;https://link.springer.com/journal/11698&quot;&gt;Cliometrica&lt;/a&gt; 以及 &lt;a href=&quot;https://academic.oup.com/ereh&quot;&gt;European Review of Economic History&lt;/a&gt; 等期刊。此外，我们还对其他相关的经济史期刊进行了补充搜索。根据我们的估算，过去 20 年间，大约有 50 至 55 篇论文采用了分位数回归技术进行分析，尽管 2005 年之前的相关论文数量较少。&lt;/p&gt;
&lt;p&gt;Journal of Economic History 是发表分位数回归文章最多的期刊，自 2000 年起，已发表 18 篇运用分位数回归或非参数分析的学术文章，主题内容涵盖广泛，包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1285 至 1550 年间佛罗伦萨及意大利绘画市场的探讨 (Etro, 2018)；&lt;/li&gt;
&lt;li&gt;19 世纪末美国不平等与金融发展相互作用的研究 (Jaremski and Fishback, 2018)；&lt;/li&gt;
&lt;li&gt;大萧条时期美国技术变革的分析 (Watanabe, 2016)；&lt;/li&gt;
&lt;li&gt;古典金本位制下固定汇率制度可信度的评估 (Mitchener and Weidenmier, 2015)；&lt;/li&gt;
&lt;li&gt;奥斯曼帝国时期财富不平等的考察 (Coşgel and Ergene, 2012) 等。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;仅从 2010 年之后发表的文章来看，分位数回归方法在经济史研究中的应用已经非常广泛，涵盖微观经济学、宏观经济学以及金融经济学等多个领域。&lt;/p&gt;
&lt;p&gt;Explorations in Economic History 期刊也频繁发表采用分位数回归方法的研究。经过详细审查，我们识别出六篇相关论文，分别是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Walker (2000) 深入探讨了 19 世纪中期旧金山与其他地区经济机会的比较；&lt;/li&gt;
&lt;li&gt;Dupont (2007) 研究了 1893 年金融危机期间堪萨斯州银行挤兑现象的传染性；&lt;/li&gt;
&lt;li&gt;Canaday (2008) 分析了 1910 年至 1919 年间南卡罗来纳州黑人与白人群体的财富积累及其决定性因素；&lt;/li&gt;
&lt;li&gt;Drelichman and González-Agudo (2014) 重建并分析了 1489 至 1600 年托莱多、西班牙不同社会群体的住房成本，并观察了外部冲击对租赁市场的影响；&lt;/li&gt;
&lt;li&gt;Álvarez and Ramos-Palencia (2018) 研究了 18 世纪西班牙人力资本与男性劳动收入的关系；&lt;/li&gt;
&lt;li&gt;Callaway and Collins (2018) 则采用无条件分位数回归方法，研究了 1950 年左右美国若干城市的工会工资溢价。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这些论文充分体现了分位数回归在揭示经济历史不同层面现象中的应用价值。&lt;/p&gt;
&lt;p&gt;Economic History Review 也发表了五篇使用分位数回归的文章：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Temin and Voth (2008) 分析了 1702 年至 1724 年间私人银行信贷的成本与可用性；&lt;/li&gt;
&lt;li&gt;Gazeley and Newell (2011) 估计了 1904 年左右不列颠群岛工人家庭的城市贫困水平；&lt;/li&gt;
&lt;li&gt;Brown and Guinnane (2018) 研究了 1820 年代至 1910 年代巴伐利亚婴儿死亡率波动的原因；&lt;/li&gt;
&lt;li&gt;Artunç (2019) 研究了 1910 年至 1949 年间埃及企业所有权与创业的构成；&lt;/li&gt;
&lt;li&gt;Karagedikli and Tunçer (2021) 则估计了 1720 年至 1814 年奥斯曼帝国住房市场的实际享乐房价与城市财富不平等。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这些文章不仅展现了广泛的主题，还显示了分位数回归在地理和时间跨度上的应用，进一步证明了该方法在经济史研究中的潜力。&lt;/p&gt;
&lt;p&gt;European Review of Economic History 期刊同样发表了五篇使用分位数回归的文章，包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Koepke and Baten (2005) 提供了公元 1000 年欧洲生物生活标准的首次估计；&lt;/li&gt;
&lt;li&gt;Dincecco (2009) 分析了 1750 年至 1913 年间欧洲政治制度与主权信用风险的关系；&lt;/li&gt;
&lt;li&gt;Dribe (2009) 研究了 1880 至 1930 年瑞典生育转变中的需求与供应因素；&lt;/li&gt;
&lt;li&gt;Kholodilin (2016) 分析了第一次世界大战期间柏林住房租金的动态；&lt;/li&gt;
&lt;li&gt;Jorge-Sotelo (2019) 则关注了 1928 至 1931 年西班牙货币贬值对国际资本流动的影响。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Cliometrica 也发表了 6 篇使用分位数回归的文章，第一篇发表于 2012 年。相关研究包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Carson (2012) 比较了 19 世纪末和 20 世纪初非裔美国人群体的体重指数；&lt;/li&gt;
&lt;li&gt;Ogasawara and Kobayashi (2015) 研究了社会工作者在减少战间期东京婴儿死亡率中的作用；&lt;/li&gt;
&lt;li&gt;Du et al. (2015) 估计了 1700 至 1725 年间的奴隶价格指数及其边际生产力的价值；&lt;/li&gt;
&lt;li&gt;González-Val et al. (2017) 分析了 1860 至 1960 年间西班牙一些城市的市场潜力对经济结构和增长的影响；&lt;/li&gt;
&lt;li&gt;Ogasawara and Matsushita (2019) 研究了 20 世纪 20 至 30 年代日本工业化过程中自来水对疾病治疗的影响；&lt;/li&gt;
&lt;li&gt;Keywood and Baten (2021) 则探讨了 500 年至 1900 年间欧洲精英识字率与精英暴力之间的关系。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;虽然一些其他经济史期刊的分位数回归使用频率较低，但我们仍进行了相关搜索。例如，&lt;a href=&quot;https://www.tandfonline.com/toc/vhmh20/current&quot;&gt;Historical Methods&lt;/a&gt; 期刊中，Carson (2018) 研究了 19 世纪和 20 世纪美国墨西哥居民体重的相关性，Conley and Galenson (1994) 在该领域的影响力也不可忽视。西班牙的 &lt;a href=&quot;https://www.cambridge.org/core/journals/revista-de-historia-economica-journal-of-iberian-and-latin-american-economic-history&quot;&gt;Revista de Historia Economica – Journal of Iberian and Latin American Economic History&lt;/a&gt; 仅有四篇论文使用了分位数回归；&lt;a href=&quot;https://onlinelibrary.wiley.com/journal/14678456&quot;&gt;Australian Economic History Review&lt;/a&gt; 仅有一篇；&lt;a href=&quot;https://www.tandfonline.com/toc/rehr20/current&quot;&gt;Economic History of Developing Regions&lt;/a&gt; 也仅发表过一篇，而 &lt;a href=&quot;https://www.tandfonline.com/toc/rehr20/current&quot;&gt;Scandinavian Economic History Review&lt;/a&gt; 则出现了两篇。最后，在三大商业史期刊 (&lt;a href=&quot;https://www.tandfonline.com/toc/rbhi20/current&quot;&gt;Business History&lt;/a&gt;、&lt;a href=&quot;https://www.cambridge.org/core/journals/business-history-review&quot;&gt;Business History Review&lt;/a&gt; 和 &lt;a href=&quot;https://www.cambridge.org/core/journals/enterprise-and-society&quot;&gt;Enterprise &amp;amp; Society&lt;/a&gt;) 中，分位数回归只出现在三篇文章中，其中两篇出现在 &lt;a href=&quot;https://www.cambridge.org/core/journals/business-history-review&quot;&gt;Business History Review&lt;/a&gt; 上，一篇出现在 &lt;a href=&quot;https://www.cambridge.org/core/journals/enterprise-and-society&quot;&gt;Enterprise &amp;amp; Society&lt;/a&gt; 上，这也不足为奇，因为商业史领域采用定量方法的文章相对较少。&lt;/p&gt;
&lt;p&gt;总的来说，分位数回归方法在经济史研究中的应用逐渐增多，尤其在揭示数据异质性和分析不同群体差异方面，展现了其独特的价值和潜力。&lt;/p&gt;
&lt;h3&gt;4.2 经济史研究中分位数回归方法的优势和劣势&lt;/h3&gt;
&lt;h4&gt;4.2.1 经济史中应用分位数方法的优势&lt;/h4&gt;
&lt;p&gt;在现有文献中，采用分位数回归的研究通常提出三个主要理由，以证明它相比于传统分析方法 (如 OLS) 具有优势。这些理由通常与 OLS 方法作为“基线”选择形成鲜明对比。具体来说，主要包括：(1) 更深入的分析和更多的发现；(2) 基于清晰建模假设的理论基础；(3) 技术优势，即分位数回归能够解决一些 OLS 无法处理的问题。&lt;/p&gt;
&lt;p&gt;首先，分位数回归最常被提到的优势之一是它能提供比 OLS 更为丰富的洞察，特别是在研究者关注某个政策或因素如何影响结果分布的情况下。如果我们关心的是一个自变量如何在整个分布上影响因变量，那么分位数回归无疑更为适用。例如，Walker (2000) 在研究人口因素与财富的关系时提到：“OLS 作为均值估计方法，无法有效分析 19 世纪旧金山等城市的财富分布。OLS 计算的条件均值对于像 1860 年旧金山那样高度不均的财富分布几乎没有实际意义。”这表明，在分布不均匀的情况下，分位数回归能够提供更多的实用信息。&lt;/p&gt;
&lt;p&gt;其次，分位数回归可能更符合特定模型的理论假设或研究情境。分位数回归能够处理 OLS 无法捕捉的异质性，尤其是在某些情况下，它更贴合理论假设或研究背景。例如，Álvarez and Ramos-Palencia (2018) 在讨论历史因素对房租的影响时指出，OLS 方法假设交易的商品或服务是同质的，但房地产并不符合这一假设。对于收入分布的上端，房屋除了提供住所外，可能还具备炫耀属性，这使得分位数回归更加适合。&lt;/p&gt;
&lt;p&gt;最后，分位数回归在技术上的优势也支持其应用。Kholodilin (2016) 指出，分位数回归对于异常值具有更强的鲁棒性，而 OLS 方法则不具备这一优势。此外，分位数回归在估计未受截断影响的结果分布时，能够避免截断数据带来的干扰。González-Val et al. (2017)，以及 Carson (2012) 等学者也强调了分位数回归在处理数据中的异质性、异常值和异方差性方面的优势。这些技术特性使得分位数回归在经济史研究中成为一种更为合适的分析工具。&lt;/p&gt;
&lt;h4&gt;4.2.2 经济史研究中使用分位数方法的劣势&lt;/h4&gt;
&lt;p&gt;首先，如果异质性本身并不是研究兴趣所在，而平均结果才是有用的汇总统计量，那么可能就没有必要使用分位数回归。此外，如果研究者需要衡量某种中心趋势，并且数据呈正态分布，那么平均值与中位数相等，这时 OLS 会是一个比分位数回归更高效的估计工具。&lt;/p&gt;
&lt;p&gt;其次，可能是基于数据的考量。首先，数据需要是大致连续的，这样才能使分位数回归方法有效。这就排除了因变量是二元的或者是分类的情况。同样，许多我们关注的变量，例如受教育年限，通常只有有限的取值范围，因此在细粒度上进行分位数分析意义不大。因此，当数据并非以连续方式采集时，分位数回归的应用会受到明显限制。&lt;/p&gt;
&lt;p&gt;最后，在经济史研究中，数据的获取通常非常困难，通常可用的样本量相对较小。在这种情况下，即使变量理论上是连续的，能够考虑的分位数数量也会受到样本量的限制。Buchinsky (1998) 提到了这一点，他指出，当可用的数据点数量很少时，能够区分的不同分位数也会相应减少。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. 应用实例：19 世纪的人口统计和经济增长&lt;/h2&gt;
&lt;p&gt;本文参考了 Llorca-Jaña et al. (2019, 2021) 描述的经验性研究，该研究收集了智利 20 世纪出生的 36371 名军事人员和 19 世纪出生的 3283 名军事人员的记录。这些记录主要涵盖士兵或低级军官。在样本中，我们筛选了 17 至 55 岁智利出生的人群，并将他们的个人信息与出生省份的经济增长情况进行了对比分析。&lt;/p&gt;
&lt;p&gt;通过整合这些数据，我们能够将大量微观层面的身高数据与按年代和省份划分的经济增长数据相结合。最终，我们构建了一个包含 17293 名个体的数据库。数据库规模缩减的主要原因是可用经济增长数据的时间范围限制了研究对象的选择。图 1 展示了身高与经济增长的描述性统计，揭示了个体身高的显著差异以及不同省份经济条件随时间的变化趋势。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%AE%BA%E6%96%87%E6%8E%A8%E4%BB%8B%EF%BC%9A%E5%88%86%E4%BD%8D%E6%95%B0%E5%9B%9E%E5%BD%92%E5%9C%A8%E7%BB%8F%E6%B5%8E%E5%8F%B2%E7%A0%94%E7%A9%B6%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8-%E9%A2%9C%E5%9B%BD%E5%BC%BA-Fig01.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;为了展示分位数回归方法的应用，我们构建如下模型，目的是评估个体在成长关键期所经历的经济增长对其成年身高的影响。关于身高与经济发展的关系，已有许多研究探讨这一主题，其中包括一些长期追踪研究，例如 Peracchi (2008) 对 18 世纪中叶至 20 世纪末意大利身高变化的研究。在本研究中，我们关注的是这样一个模型：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
\mathrm {Height}&lt;em&gt;{ipt}=\beta&lt;/em&gt;{0}+\beta_{1}\mathrm {Growth}&lt;em&gt;{pt}^{0}+\beta&lt;/em&gt;{2}\mathrm {Growth}&lt;em&gt;{pt}^{10}+\beta&lt;/em&gt;{3}\mathrm {Growth}_{pt}^{20} \quad(8)&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;在这个模型中，个体 $i$ 在省份 $p$、出生年份 $t$ 的身高被回归到该省份出生时的增长率 ($Growth0$)、10 岁时的增长率 ($Growth10$) 以及 20 岁时的增长率 ($Growth20$)。&lt;/p&gt;
&lt;h3&gt;5.1 模型设定的挑战&lt;/h3&gt;
&lt;p&gt;首先需要指出的是，由于获取约 200 年前的经济数据存在较大难度，尽管我们当前使用的增长指标已是最佳可行的选择，但这些指标应被理解为对个体成长期间经济状况的近似、有噪声的度量。我们的模型中包含了省份和十年期的固定效应 (分别表示为 $μ_p$ 和 $λ_t$)，这些固定效应能够捕捉特定区域或时间段的独特特征。&lt;/p&gt;
&lt;p&gt;其次，我们意识到，由于捕捉经济增长率的难度，我们的数据仅代表了 10 年平均增长率。因此，我们需要将每个个体与他们特定年龄时的增长率相关联。其中 ${Growth}&lt;em&gt;{pt}^{10}$ 指的是个体在 0 岁时的十年期增长率。然而，个体实际接触到的增长率程度会有所不同。例如，如果某人出生在十年期的最后一年，他们只有在 0 到 1 岁之间才会接触到这个增长率；而对于那些出生在十年期第一年的个体，他们会在 0 到 9 岁之间接触到这个增长率。类似地，${Growth}&lt;/em&gt;{pt}^{10}$ 捕获的是个体在 10 岁时的十年期增长率，这可能包括从 1 岁到 10 岁或 10 岁到 19 岁的极端情况。因此，十年一个跨度的年龄暴露度量可能无法独特地捕捉每个年龄的不同增长率，这一估计策略也是由于经济增长度量频率所带来的挑战。&lt;/p&gt;
&lt;h3&gt;5.2 实证结果&lt;/h3&gt;
&lt;p&gt;为了探讨分位数回归在经济史研究中的优势，我们基于方程 (8)，使用普通最小二乘法 (OLS) 以及分位数回归 (针对 5%、10%、95% 分位数) 进行了估计。这些结果在下图中展示，我们绘制了各个参数 $\beta_1$、$\beta_2$、$\beta_3$ 以及截距 $\beta_0$ 的平均估计值与其在不同分位数上的估计值。95% 的置信区间通过虚线 (OLS) 或阴影区域 (分位数回归) 进行表示。&lt;/p&gt;
&lt;p&gt;左上角的面板显示了平均效应下，出生时的经济增长率对成年身高没有显著影响，尽管趋势显示对身高分布较低端有边际负效应，而对较高端则有边际正效应。右上角的面板显示，虽然 10 岁时的经济增长率对成年身高的总体效应不显著，但这种效应存在不均性：它对身高分布的低端有显著影响，而对较高端的个体影响不明显。在这里，即使面临经济增长暴露的测量挑战，分位数回归的价值也变得更加明显。这些结果表明，早期生活中的经济增长对改善健康状况较差个体的影响尤其显著，尤其是在儿童快速成长的阶段。&lt;/p&gt;
&lt;p&gt;成年身高是众所周知的健康标志，这表明在这一儿童期，经济增长最有助于改善健康状况较差的个体。对于 20 岁时的经济增长，结果与 10 岁时的模式大体相似。然而，考虑到 95% 置信区间，20 岁时的增长对成年身高的影响在很大程度上不显著。正如我们前面提到的，这一度量 (20 岁时的增长) 涵盖了一些个体 11 岁至 20 岁的成长阶段，因此，这依然是人类快速发育的时期。&lt;/p&gt;
&lt;p&gt;最后，右下角的面板记录了截距部分，按定义，在较低分位数处截距较低。在这一特定情境下，它帮助我们可视化了在控制了增长、省份和年份固定效应后，身高的变化趋势。结果显示，从大约 5% 分位数到 95% 分位数，成年身高增加了近 20 厘米。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%AE%BA%E6%96%87%E6%8E%A8%E4%BB%8B%EF%BC%9A%E5%88%86%E4%BD%8D%E6%95%B0%E5%9B%9E%E5%BD%92%E5%9C%A8%E7%BB%8F%E6%B5%8E%E5%8F%B2%E7%A0%94%E7%A9%B6%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8-%E9%A2%9C%E5%9B%BD%E5%BC%BA-Fig02.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;6. 结论与未来展望&lt;/h2&gt;
&lt;p&gt;本文讨论了 Koenker and Bassett (1978) 提出的标准分位数回归方法，并探讨了该方法在近年来“处理效应”文献中的成功应用，尤其是在分位数处理效应方面的应用。本文还介绍了其他可能对经济史研究者特别有用的扩展方法，包括考虑测量误差的分位数回归、进一步放宽参数假设的方法，以及解决模型内生性问题的潜在解决方法。&lt;/p&gt;
&lt;p&gt;在经济学和经济史研究中，像 R、Stata、Julia、Python 和 MATLAB 等广泛使用的计算语言通常都实现了标准的分位数回归，使得这些模型的实施变得更加简便。例如，Koenker (2021) 为 R 语言提供了 &lt;code&gt;quantreg&lt;/code&gt; 包，其中包括标准的分位数回归函数 &lt;code&gt;rq&lt;/code&gt;，而 Stata 的 &lt;code&gt;qreg&lt;/code&gt; 命令则为估计和各种推断程序提供了稳定的选项。&lt;/p&gt;
&lt;p&gt;此外，还有许多扩展包，如 Stata 中的 &lt;code&gt;ivqte&lt;/code&gt; (Fröolich and Melly, 2010) 或 R 中的 &lt;code&gt;QTE&lt;/code&gt; 包 (Callaway, 2019)，它们将分析扩展到分位数处理效应，特别适用于处理分配是内生的情况以及在 QTE 框架下的差异中的差异模型。R 语言的 &lt;code&gt;quantreg&lt;/code&gt; 包还包括多种扩展功能，涵盖了广泛的推断程序、非线性模型、LASSO 模型和绘图工具。总的来说，这些模型为经济史研究者提供了一个灵活、易于访问且可扩展的分析工具，帮助研究者更深入地探讨经济过程中历史现象的分布效应。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;7. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh 分位数回归, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/48.html&quot;&gt;分位数回归&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;张蛟蛟, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1461.html&quot;&gt;fqreg：在零处扎堆的分位数回归&lt;/a&gt;, 连享会 No.1461.&lt;/li&gt;
&lt;li&gt;徐云娇, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/626.html&quot;&gt;arhomme：分位数回归中的样本选择问题-T202&lt;/a&gt;, 连享会 No.626.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;内生性-因果推断&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;徐云娇, 甘徐沁, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/469.html&quot;&gt;Stata：分位数回归中的样本自选择问题&lt;/a&gt;, 连享会 No.469.&lt;/li&gt;
&lt;li&gt;曹钰潇, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/857.html&quot;&gt;Stata分位数回归I：理解边际效应和条件边际效应&lt;/a&gt;, 连享会 No.857.&lt;/li&gt;
&lt;li&gt;李胜胜, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/594.html&quot;&gt;qregplot：分位数回归图示-T359&lt;/a&gt;, 连享会 No.594.&lt;/li&gt;
&lt;li&gt;杨雪, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/768.html&quot;&gt;Stata：无条件分位数回归及应用&lt;/a&gt;, 连享会 No.768.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;杨雪, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/702.html&quot;&gt;xtrifreg：基于再中心化影响函数的分位数回归及Stata实操-T340&lt;/a&gt;, 连享会 No.702.&lt;/li&gt;
&lt;li&gt;武翰涛, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/378.html&quot;&gt;Stata：分位数回归简介&lt;/a&gt;, 连享会 No.378.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;断点回归RDD&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;江鑫, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/772.html&quot;&gt;Stata：基于大带宽的断点分位数回归稳健推断-rdqte&lt;/a&gt;, 连享会 No.772.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/42.html&quot;&gt;合成控制法&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;浦进博, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1515.html&quot;&gt;合成控制法最新进展！机器学习+SCM！-qcm&lt;/a&gt;, 连享会 No.1515.&lt;/li&gt;
&lt;li&gt;胡雨霄, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/747.html&quot;&gt;分位数回归及Stata实现&lt;/a&gt;, 连享会 No.747.&lt;/li&gt;
&lt;li&gt;谢雁翔, 钟舜斌, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/463.html&quot;&gt;Stata+R：分位数回归一文读懂&lt;/a&gt;, 连享会 No.463.&lt;/li&gt;
&lt;li&gt;赵玉, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/654.html&quot;&gt;qrprocess：高效好用的分位数回归命令-T313&lt;/a&gt;, 连享会 No.654.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;连享会, 2008, &lt;a href=&quot;https://www.lianxh.cn/details/33.html&quot;&gt;Stata: 面板分位数回归&lt;/a&gt;, 连享会 No.33.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1529.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1529.html</guid><pubDate>Thu, 26 Dec 2024 16:00:00 GMT</pubDate><author>颜国强</author></item><item><title>Stata绘图：如何调整图形的纵横比？</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者：&lt;/strong&gt; 连玉君 (中山大学)&lt;br&gt;
&lt;strong&gt;邮箱：&lt;/strong&gt; &lt;a href=&quot;mailto:arlionn@163.com&quot;&gt;arlionn@163.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;: Stata绘图：如何调整图形的纵横比？&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;: graphfunctions, shapes, circles, Stata画图, 正方形图形, aspect, xsize, ysize&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: 生成文中图形的 Stata 代码统一放在了文末。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;提要&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;绘制 Stata 图形时，可以使用 &lt;code&gt;aspect(#)&lt;/code&gt; 设置整幅图的纵横比，也可以同时设置主体图形 (坐标轴内部区域) 的绝对尺寸 (单位为英寸)，以实现对主体图形纵横比的控制。例如，下面的命令将保证图形的主体部分和整幅图形的纵横比均为 1:1。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;sysuse &quot;auto.dta&quot;, clear
scatter mpg weight, xsize(4) ysize(4) aspect(1)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 简介&lt;/h2&gt;
&lt;p&gt;在 Stata 中，默认情况下生成的图形通常是「扁平形」的：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;sysuse &quot;auto.dta&quot;, clear
scatter mpg weight
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/fig01_ratio_default.png&quot; alt=&quot;fig01_ratio_default&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;center&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;图 1&lt;/strong&gt;：Stata 默认图形的纵横比&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/center&gt;
&lt;p&gt;有时候我们需要调整图形的纵横比，以便得到「方形」或者「窄版」的图形。例如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;论文为双栏排版时，插入「方形」图形更合适 (见&lt;strong&gt;图 2&lt;/strong&gt;)；&lt;/li&gt;
&lt;li&gt;将两幅图并列显示时，子图采用窄版样式更合适 (见&lt;strong&gt;图 3)&lt;/strong&gt;；&lt;/li&gt;
&lt;li&gt;绘制函数图，如圆形或三角形时，使用「方形」图形可以避免失真 (见&lt;strong&gt;图 4&lt;/strong&gt;)。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/fig02_ratio_square.png&quot; alt=&quot;fig02_ratio_square&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;center&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;图 2&lt;/strong&gt;：纵横比为 1:1 的图形&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/center&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/fig03_ratio_combine_two.png&quot; alt=&quot;fig03_ratio_combine_two&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;center&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;图 3&lt;/strong&gt;：两幅并排放置的图形&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/center&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/fig04_ratio_circle.png&quot; alt=&quot;fig04_ratio_circle&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;center&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;图 4&lt;/strong&gt;：函数图 - 圆圈和三角形&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/center&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 方形图形的绘制方法&lt;/h2&gt;
&lt;p&gt;那么，如何调整图形的纵横比呢？我们先看看生成图 2 代码：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;sysuse &quot;auto.dta&quot;, clear
scatter mpg weight, xsize(4) ysize(4) aspect(1)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;可以看出，我们设定了选项 &lt;code&gt;xsize(4) ysize(4) aspect(1)&lt;/code&gt; 来调整图形的纵横比。解释如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;xsize(4) ysize(4)&lt;/code&gt;：将图形整体 (图形区域，&lt;strong&gt;graph region&lt;/strong&gt;) 的高度设为 4 英寸，宽度也设定为 4 英寸。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;aspect(1)&lt;/code&gt; 将绘图区域 (&lt;strong&gt;plot region&lt;/strong&gt;) 的纵横比设定为 1:1，即正方形。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对于中文读者而言，很难区分 &lt;strong&gt;graph&lt;/strong&gt; 和 &lt;strong&gt;plot&lt;/strong&gt; 的差别。不过，你可以根据如下规则来区分它们：若以横纵坐标轴为分界，则坐标轴内围的部分为「绘图区，plot region」；坐标轴外围的部分为「图形区 (graph region)」。&lt;/p&gt;
&lt;p&gt;因此，调整图形纵横比的「&lt;strong&gt;经验法则&lt;/strong&gt;」如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果你只需保证整幅图 (包括散点、坐标轴、标题、图例和留白等) 的纵横比为 1:1，那就只需要将 &lt;code&gt;xsize()&lt;/code&gt; 和 &lt;code&gt;ysize()&lt;/code&gt; 设定为相同的尺寸即可。&lt;/li&gt;
&lt;li&gt;如果你只需要保证图形主体部分 (坐标轴内围部分) 的纵横比为 1:1，那就只需将设定 &lt;code&gt;aspect(1)&lt;/code&gt; 即可。不过，此时坐标轴外围可能会出现很多空白区域，因为图形整体的纵横比并未改变。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在绘制图 2 时，我采用了双管齐下的方法，即 &lt;code&gt;xsize(4) ysize(4) aspect(1)&lt;/code&gt;。大家可以尝试设定为 &lt;code&gt;xsize(4) ysize(3) aspect(1)&lt;/code&gt;，图形的整体效果或许会更协调一些。&lt;/p&gt;
&lt;hr&gt;
&lt;br&gt;
&lt;p&gt;下面的内容是为了大家更好地理解 Stata 图形的布局，以及 &lt;code&gt;xsize(4) ysize(3) aspect(1)&lt;/code&gt; 选项的作用原理，有兴趣的读者可以继续。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 进阶解释&lt;/h2&gt;
&lt;h3&gt;3.1 绘图区 (plot region) 与图形区 (graph region)&lt;/h3&gt;
&lt;p&gt;如果把 Stata 的图形视为一个画布，为了实现对图形的精细调整，这个画布被细分为四个区域。如 &lt;strong&gt;图 5&lt;/strong&gt; 所示，从内到外，这四个区域分别由四个方框划分：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;[1] + [2]&lt;/strong&gt; 号区域称为「绘图区」(&lt;strong&gt;plot region&lt;/strong&gt;)
&lt;ul&gt;
&lt;li&gt;[1] 号区域称为「内绘图区」，用于呈现散点、折线等图形元素&lt;/li&gt;
&lt;li&gt;[2] 号区域称为「外绘图区」，是 [1] 号区域与坐标轴之间的留白 (margin)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;[3] + [4]&lt;/strong&gt; 号区域称为「图形区」(&lt;strong&gt;graph region&lt;/strong&gt;)
&lt;ul&gt;
&lt;li&gt;[3] 号区域称为「内图形区」，用于呈现图形的标题、注释、图例等文本或标注信息。&lt;/li&gt;
&lt;li&gt;[4] 号区域称为「外图形区」，是 [3] 号区域与图形外边界之间的留白 (margin)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;简言之，若以横纵坐标轴为分界，则坐标轴内围的部分为「绘图区，plot region」，坐标轴外围的部分为「图形区 (graph region)」。&lt;/p&gt;
&lt;center&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Stata_region_option_01.png&quot; alt=&quot;Stata_region_option_01&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;图 5&lt;/strong&gt;：Stata 图形的区域划分 (&lt;strong&gt;graph region&lt;/strong&gt; v.s &lt;strong&gt;plot region&lt;/strong&gt;)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/center&gt;
&lt;blockquote&gt;
&lt;p&gt;Source: &lt;a href=&quot;https://www.stata.com/manuals/g-3region_options.pdf&quot;&gt;&lt;strong&gt;[G-3]&lt;/strong&gt; region options&lt;/a&gt; (&lt;code&gt;help region_option&lt;/code&gt;)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;多数 Stata 用户都不曾意识到 [2] 号和 [4] 号留白区域的存在，因为，在多数绘图模板中，[2] 号区与 [1] 号区都选择相同的底色，[3] 号和 [4] 号区的底色通常也都相同。&lt;/p&gt;
&lt;p&gt;为了让大家清晰地在实际图形中分辨出上述四个区域的差别，我绘制了一幅配色「很丑」的图形，呈现于 &lt;strong&gt;图 6&lt;/strong&gt;。其中，灰色区域为「plot region」，黄色部分为「graph region」，两个区域内的深色部分表示「留白 (margin)」。&lt;/p&gt;
&lt;center&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/graph_region_margin.png&quot; alt=&quot;graph_region_margin&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;图 6&lt;/strong&gt;：Stata 图形的区域划分示例&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/center&gt;
&lt;p&gt;大家可以对照如下代码查看每个区域的区分方法：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;// 图 6
sysuse &quot;auto.dta&quot;, clear
drop if mpg&amp;gt;38
scatter mpg weight, ///
    xsize(3) ysize(3) aspect(1)      ///
    plotregion( ifcolor(black*0.2))  ///  
    plotregion(  fcolor(black*0.4))  ///  
    graphregion(ifcolor(yellow*0.2)) ///
    graphregion( fcolor(yellow*0.5))   
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;有兴趣的读者可以参阅 Stata 手册 &lt;a href=&quot;https://www.stata.com/manuals/g-3region_options.pdf&quot;&gt;&lt;strong&gt;[G-3]&lt;/strong&gt; region options&lt;/a&gt; (或执行命令 &lt;code&gt;help region_option&lt;/code&gt;)。我们可以根据需要调整各种「留白」(margin) 的大小和间距。&lt;/p&gt;
&lt;h3&gt;3.2 aspect() 和 xsize()+ysize() 的区别&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;aspect()&lt;/code&gt; 和 &lt;code&gt;xsize()+ysize()&lt;/code&gt; 的主要差别在于二者作用的范围不同。由上述分析可知，Stata 的图形区域被分为两个部分：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;plot region&lt;/code&gt;&lt;/strong&gt;：这是显示数据的区域，包括坐标轴和数据点。调整 &lt;code&gt;aspect()&lt;/code&gt; 就是调整这个区域的纵横比。
&lt;ul&gt;
&lt;li&gt;默认情况下，Stata 会根据数据范围和坐标轴刻度自动决定纵横比，但通常都小于 1。因此，设定 &lt;code&gt;aspect(1)&lt;/code&gt; 会将纵横比调整为 1:1，从而绘制一个正方形的数据区域；而设定 &lt;code&gt;aspect(2)&lt;/code&gt; 会使得图形的高度是宽度的两倍。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;grap hregion&lt;/code&gt;&lt;/strong&gt;：这是包含整个图形的区域，包括标题、坐标轴标签、图例等。调整 &lt;code&gt;xsize()&lt;/code&gt; 和 &lt;code&gt;ysize()&lt;/code&gt; 是对 &lt;strong&gt;graph region&lt;/strong&gt; 的实际尺寸 (单位为英寸) 进行调整。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. 小结&lt;/h2&gt;
&lt;p&gt;在 Stata 中，默认的图形纵横比通常较为&quot;扁平&quot;。当需要绘制特定纵横比的图形时（如正方形或圆形），可以使用 &lt;code&gt;aspect()&lt;/code&gt; 选项来调整 &lt;code&gt;plotregion&lt;/code&gt; 的纵横比。同时，如果想精确控制图形的物理尺寸并避免空白区域，可以结合使用 &lt;code&gt;xsize()&lt;/code&gt;、&lt;code&gt;ysize()&lt;/code&gt; 来调整图形的整体布局。&lt;/p&gt;
&lt;p&gt;通过理解 &lt;strong&gt;plot region&lt;/strong&gt; 和 &lt;strong&gt;graph region&lt;/strong&gt; 的区别，结合使用这些选项，我们可以灵活地调整图形的纵横比，同时确保图形美观、紧凑。&lt;/p&gt;
&lt;p&gt;大家可以自行琢磨一下本文图 3 和图 3 中是如何调整纵横比的。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. 附：文中使用的代码&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;*-Basic setting - 绘图模板
  ssc install scientific, replace
  set scheme  scientific
*-安装外部命令，其中包含 shapes 命令
  ssc install graphfunctions, replace  

// Figure 1

sysuse &quot;auto.dta&quot;, clear
scatter mpg weight

graph export &quot;fig01_ratio_default.png&quot;, width(700) replace


// Figure 2

scatter mpg weight, xsize(4) ysize(4) aspect(1)

graph export &quot;fig02_ratio_square.png&quot;, width(400) replace 


// Figure 3

local size &quot;xsize(2) ysize(2) aspect(1)&quot;
scatter mpg weight if foreign==0, `size&#39; subtitle(&quot;Domestic&quot;)
graph save temp01.gph, replace 
scatter mpg weight if foreign==1, `size&#39; subtitle(&quot;Foreign&quot;)
graph save temp02.gph, replace 

graph combine temp01.gph temp02.gph, ///
      xsize(7) ysize(3) ///
      xcommon ycommon 

graph export &quot;fig03_ratio_combine_two.png&quot;, width(700) replace 


// Figure 4

shape circle, n(3)   rotate(90) replace   // Triangle
shape circle, n(300) genx(x_c ) geny(y_c) // Circle

twoway (line _y   _x, lcolor(green))  ///
       (line y_c x_c, lcolor(blue)),  ///
        xlabel(-15 15) ylabel(-15 15) ///
        legend(off)                   ///
        xsize(1) ysize(1) aspect(1)  

graph export &quot;fig04_ratio_circle.png&quot;, width(400) replace


// Figure 5

sysuse &quot;auto.dta&quot;, clear
drop if mpg&amp;gt;38
scatter mpg weight, ///
    xsize(3) ysize(3) aspect(1)      ///
    plotregion( ifcolor(black*0.2))  ///  
    plotregion(  fcolor(black*0.4))  ///  
    graphregion(ifcolor(yellow*0.2)) ///
    graphregion( fcolor(yellow*0.5))   
graph export &quot;graph_region_margin.png&quot;, width(600) replace   
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;6. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh Stata + 绘图&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;Stata绘图&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E8%BF%9E%E7%8E%89%E5%90%9B&quot;&gt;连玉君&lt;/a&gt;, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/274.html&quot;&gt;Stata绘图：用暂元统一改变图形中的字号&lt;/a&gt;, 连享会 No.274.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E8%BF%9E%E7%8E%89%E5%90%9B&quot;&gt;连玉君&lt;/a&gt;, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/61.html&quot;&gt;Stata黑白图形模板：中文期刊风格的纯黑白图形&lt;/a&gt;, 连享会 No.61.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E8%BF%9E%E7%8E%89%E5%90%9B&quot;&gt;连玉君&lt;/a&gt;, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1064.html&quot;&gt;Stata绘图：唯美的函数图-自定义水平附加线和竖直附加线&lt;/a&gt;, 连享会 No.1064.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E8%BF%9E%E7%8E%89%E5%90%9B&quot;&gt;连玉君&lt;/a&gt;, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1335.html&quot;&gt;Stata 绘图：图形中的中文和英文能否设定为不同的字体&lt;/a&gt;, 连享会 No.1335.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E9%82%93%E9%B8%BF%E6%96%8C&quot;&gt;邓鸿斌&lt;/a&gt;, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/629.html&quot;&gt;给你的图形化个妆：Stata绘图常用选项汇总-上篇&lt;/a&gt;, 连享会 No.629.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E9%82%93%E9%B8%BF%E6%96%8C&quot;&gt;邓鸿斌&lt;/a&gt;, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/630.html&quot;&gt;给你的图形化个妆：Stata绘图常用选项汇总-下篇&lt;/a&gt;, 连享会 No.630.&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1528.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1528.html</guid><pubDate>Wed, 25 Dec 2024 16:00:00 GMT</pubDate><author>连玉君</author></item><item><title>Stata地图：geoboundary-轻松获取全球地图数据</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者：&lt;/strong&gt; 浦进博 (中山大学)&lt;br&gt;
&lt;strong&gt;邮箱：&lt;/strong&gt; &lt;a href=&quot;mailto:pzs143353@163.com&quot;&gt;pzs143353@163.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Source:&lt;/strong&gt; 本文主要翻译自 Naqvi, A. (2024). Stata package &quot;geoboundary&quot; version 1.1. Release date 24 November 2024. &lt;a href=&quot;https://github.com/asjadnaqvi/stata-geoboundary&quot;&gt;https://github.com/asjadnaqvi/stata-geoboundary&lt;/a&gt;，略有增减，特此致谢。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;: Stata地图：geoboundary-轻松获取全球地图数据&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;: Stata绘图, geoplot, 地图绘制, 在线地图数据, geoBoundary, gadm, ISO3&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;地图数据往往难以获取，而在某些研究和分析场景下，我们需要直接在线获取地图数据以进行后续分析。此时，&lt;code&gt;geoboundary&lt;/code&gt; 命令便派上用场！它不仅能够快速下载全球各级行政区划的边界数据，还可以通过与 Stata 的 &lt;code&gt;geoplot&lt;/code&gt; 等命令配合，实现高效的地图可视化。&lt;/p&gt;
&lt;p&gt;本文会介绍 &lt;code&gt;geoboundary&lt;/code&gt; 的安装、使用和应用，并进一步展示如何结合下载的数据进行可视化分析。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. geoboundary 简介&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20241219225251.png&quot; alt=&quot;geoboundary_banner&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;geoboundary&lt;/strong&gt; 是由 &lt;a href=&quot;https://asjadnaqvi.github.io/&quot;&gt;Asjad Naqvi&lt;/a&gt; 博士新近发布的一个 Stata 外部命令，可直接从以下数据库下载国家级或全球行政区划数据：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.geoboundaries.org/&quot;&gt;geoBoundary&lt;/a&gt;: An open database of political administrative boundaries.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://gadm.org/&quot;&gt;gadm.org&lt;/a&gt; v4.1: Provides maps and spatial data for all countries and their sub-divisions.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;主要特点：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;数据标准化&lt;/strong&gt;：支持 EPSG: 4326 (&lt;a href=&quot;https://en.wikipedia.org/wiki/World_Geodetic_System&quot;&gt;WGS84&lt;/a&gt;) 投影；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;多级行政区划&lt;/strong&gt;：从国家边界 (ADM0) 到更细的区划级别 (ADM1-ADM5)，具体视国家而定，对于某些国家，数据可细化至第 5 级行政单位（即 &lt;code&gt;ADM5&lt;/code&gt;）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;便于调用&lt;/strong&gt;：可与 Stata 的 &lt;code&gt;geoplot&lt;/code&gt;、&lt;code&gt;spmap&lt;/code&gt; 等命令无缝配合，进行可视化分析。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最后，需要强调的是，使用本包提供的数据即表示您同意 &lt;strong&gt;7. 使用反馈和注意事项&lt;/strong&gt; 中列出的「免责声明」。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 引用规范&lt;/h2&gt;
&lt;p&gt;开发软件包需要耗费大量的编程、测试和修复时间。如果您使用了此包，引用将是对开发者工作的尊重和支持。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Naqvi, A. (2024). Stata package &quot;geoboundary&quot; version 1.1. Release date 24 November 2024. &lt;a href=&quot;https://github.com/asjadnaqvi/stata-geoboundary&quot;&gt;https://github.com/asjadnaqvi/stata-geoboundary&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;或者，您可以使用以下 BibTeX 格式引用：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-BibTeX&quot;&gt;@software{geoboundary,
   author = {Naqvi, Asjad},
   title = {Stata package ``geoboundary&#39;&#39;},
   url = {https://github.com/asjadnaqvi/stata-geoboundary},
   version = {1.0},
   date = {2024-11-25}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;建议采用如下方式引用 geoBoundary 网站：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Runfola, D. et al. (2020). geoBoundaries: A global database of political administrative boundaries. &lt;strong&gt;PLOS ONE&lt;/strong&gt;, 15(4), e0231866. &lt;a href=&quot;https://doi.org/10.1371/journal.pone.0231866&quot;&gt;Link&lt;/a&gt; (rep), &lt;a href=&quot;http://sci-hub.ren/10.1371/journal.pone.0231866&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=geoBoundaries:%20A%20global%20database%20of%20political%20administrative%20boundaries&quot;&gt;Google&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 安装 geoboundary&lt;/h2&gt;
&lt;p&gt;本包可通过 SSC 或 GitHub 安装。GitHub 版本可能更为最新，包含错误修复、功能更新等，并可能改进语法或默认值。以下为版本说明。GitHub 版本最终会发布至 SSC。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;通过 SSC 安装（版本 v1.0）&lt;/strong&gt;：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;ssc install geoboundary
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;通过 GitHub 安装（版本 v1.1）&lt;/strong&gt;：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;net install geoboundary, from(&quot;https://raw.githubusercontent.com/asjadnaqvi/stata-geoboundary/main/installation/&quot;) replace
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;以下代码用于设置绘图模板和字体，以便得到更佳的绘图效果：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;ssc install schemepack, replace
set scheme white_tableau  

graph set window fontface &quot;Arial Narrow&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. geoboundary 的语法格式&lt;/h2&gt;
&lt;h3&gt;4.1 获取元数据 (meta data)&lt;/h3&gt;
&lt;p&gt;以下是用于获取元数据的语法：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoboundary meta, 
   [ 
    country(list) 
    iso(list) 
    level(list) 
    region(list) 
    any(list) 
    length(num) 
    strict 
    noseperator 
   ]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;参阅 &lt;strong&gt;4.3 meta 选项&lt;/strong&gt;，查看选项的具体含义。&lt;/p&gt;
&lt;h3&gt;获取边界数据 (boundary data)&lt;/h3&gt;
&lt;p&gt;以下是用于下载边界数据的语法：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoboundary ISO3 codes, level(string) 
     [ convert name(str) replace remove ]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;参阅 &lt;strong&gt;4.4 boundary 选项&lt;/strong&gt;，查看选项的具体含义。&lt;/p&gt;
&lt;p&gt;详细信息请参阅 &lt;code&gt;help geoboundary&lt;/code&gt;。&lt;/p&gt;
&lt;h3&gt;4.3 meta 选项&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;country(string)&lt;/code&gt;: 按国家名称搜索。目前不支持带空格的名称列表（将来会实现）。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;iso(string)&lt;/code&gt;: 按 ISO3 代码搜索。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;region(string)&lt;/code&gt;: 按区域名称搜索。正确的选项是世界银行区域分类，例如 LAC 表示拉丁美洲和加勒比地区。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;any(string)&lt;/code&gt;: 在任何原始元数据列中搜索给定表达式。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;strict&lt;/code&gt;: 将搜索严格限制为指定的表达式。例如，&lt;code&gt;region(NA)&lt;/code&gt; 会返回 NA（北美）和 MENA（中东和北非），但如果指定 &lt;code&gt;strict&lt;/code&gt;，则只返回 NA 区域的国家。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;level(string)&lt;/code&gt;: 按 ADM 级别搜索。有效选项包括 ADM0、ADM1、ADM2、ADM3、ADM4 和 ADM5。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;length(numeric)&lt;/code&gt;: 限制命令运行后显示的表格列的长度。如果表格跨多行显示且对齐不良（如遇到长名称时），此选项会非常有用。默认值为 &lt;code&gt;length(30)&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;noseperator&lt;/code&gt;: 在显示的表格中不添加分隔线。默认分隔符由 ISO3 确定。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;4.4 boundary 选项&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;geoboundary ISO3&lt;/code&gt;: 定义单个或一组 3 位 ISO3 代码。如果代码无效，该国家将被跳过并显示错误信息。强烈推荐使用 &lt;code&gt;{cmd geoboundary meta}&lt;/code&gt; 来检查正确的 ISO3 代码。全球地图的正确 ISO3 代码为 WLD。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;level(string)&lt;/code&gt;: 有效选项为 ADM0、ADM1、ADM2、ADM3、ADM4、ADM5 或 ALL。也可以指定一个列表。如果选择 &lt;code&gt;all&lt;/code&gt;，命令会尝试下载所有六个级别。如果某个级别不可用，将被跳过并显示错误信息。需要注意的是，较细的级别（例如 ADM4 或 ADM5）文件较大，请谨慎使用。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;source(name)&lt;/code&gt;: 可选值为 &lt;code&gt;{opt source(geoboundary}&lt;/code&gt;（默认值）或 &lt;code&gt;source(gadm)&lt;/code&gt;。这两个数据集可能包含不同的边界数据，甚至不同的 ADM 级别可用性。需要注意，geoBoundaries 更新更频繁，但请在使用前检查。另外注意，GADM 是作为包含所有 ADM 级别的 ZIP 文件下载的，这意味着：（a）所有其他选项将被覆盖；（b）文件夹大小可能显著增加。其他数据源即将添加。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;replace&lt;/code&gt;: 如果原始文件已存在，覆盖它们。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;convert&lt;/code&gt;: 转换为 Stata shapefile 格式。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;name(string)&lt;/code&gt;: 为 Stata shapefile 定义自定义名称。如果未使用此选项，默认名称格式为 &lt;code&gt;ISO3_ADMx&lt;/code&gt;。例如，默认的 Stata shapefile 名称是 &lt;code&gt;USA_ADM1.dta&lt;/code&gt; 和 &lt;code&gt;USA_ADM1_shp.dta&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;remove&lt;/code&gt;: 删除原始 shapefile 文件。此选项特别推荐用于批量下载。建议将下载的文件转换为 Stata 格式，然后使用此选项删除原始文件（如 &lt;code&gt;.shp&lt;/code&gt;、&lt;code&gt;.prj&lt;/code&gt;、&lt;code&gt;.shx&lt;/code&gt;、&lt;code&gt;.dbf&lt;/code&gt;），以避免文件夹大小急剧增长。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. 下载数据&lt;/h2&gt;
&lt;p&gt;在开始之前，请确保进入正确的工作路径，下载的地图文件将保存至此路径：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;cd &amp;lt;mypath&amp;gt;

// e.g.
cd D:/data/GeoData  
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;5.1 元数据操作示例&lt;/h3&gt;
&lt;h4&gt;示例 1：查找国家代码&lt;/h4&gt;
&lt;p&gt;我们尝试查找 &lt;a href=&quot;https://zh.wikipedia.org/wiki/ISO_3166-1%E4%B8%89%E4%BD%8D%E5%AD%97%E6%AF%8D%E4%BB%A3%E7%A0%81&quot;&gt;ISO3 代码&lt;/a&gt; 为 &lt;code&gt;DOM&lt;/code&gt; 的国家：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoboundary meta, iso(dom) length(20)        // 搜索 ISO3 代码
geoboundary meta, any(dom) length(20)        // 搜索所有数据列
geoboundary meta, any(dom) length(20) strict // 严格匹配 DOM
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;第一个命令返回 Dominican Republic（多米尼加共和国）；&lt;/li&gt;
&lt;li&gt;第二个命令执行模糊搜索，并返回 Dominica（多米尼克）、Dominican Republic（多米尼加共和国）和 United Kingdom（英国）；&lt;/li&gt;
&lt;li&gt;第三个命令通过 &lt;code&gt;strict&lt;/code&gt; 选项限制搜索，仅返回完全匹配 DOM 的结果。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;示例 2：模糊搜索关键词&lt;/h4&gt;
&lt;p&gt;例如，查找包含关键词 &lt;em&gt;island&lt;/em&gt; 的国家：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoboundary meta, any(island) length(15) nosep
geoboundary meta, any(island) length(15) strict nosep
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;第一个命令返回所有名称中包含 &lt;code&gt;island&lt;/code&gt; 或 &lt;code&gt;islands&lt;/code&gt; 的国家；&lt;/li&gt;
&lt;li&gt;第二个命令使用 &lt;code&gt;strict&lt;/code&gt; 选项，仅返回名称中包含 &lt;code&gt;island&lt;/code&gt; 的国家。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;示例 3：按区域查找国家&lt;/h4&gt;
&lt;p&gt;例如，查找属于北美（NA）区域的国家：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoboundary meta, region(NA) length(15) 
geoboundary meta, region(NA) length(15) strict
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;第一个命令返回北美（North America, NA）以及中东和北非（MENA）区域的国家；&lt;/li&gt;
&lt;li&gt;第二个命令仅返回北美区域的国家。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我们也可以指定下载 ECA 区域的国家列表：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoboundary meta, region(ECA) length(15) strict
return list
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;命令返回两个本地变量 &lt;code&gt;r(geob)&lt;/code&gt; 和 &lt;code&gt;r(gadm)&lt;/code&gt;，分别对应可从 geoBoundaries 和 GADM 数据库下载的国家列表。这些列表可以直接用于后续命令。&lt;/p&gt;
&lt;p&gt;扩展阅读：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://data.unicef.org/wp-content/uploads/2018/05/JME_Regional-Classifications.xlsx&quot;&gt;Regional Classification&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://ourworldindata.org/world-region-map-definitions&quot;&gt;Definitions of world regions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;5.2 边界数据操作示例&lt;/h3&gt;
&lt;h4&gt;Step1: 下载原始 shapefile 文件&lt;/h4&gt;
&lt;p&gt;以下命令从 geoBoundaries 下载奥地利和德国的行政边界（ADM0 和 ADM1）数据：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoboundary AUT DEU, level(ADM0 ADM1) replace
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;Step2: 转换为 Stata 格式&lt;/h4&gt;
&lt;p&gt;下载的 shapefile 文件可以转换为 Stata 格式：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoboundary AUT DEU, level(ADM0 ADM1) replace convert
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;Step3: 删除原始文件以节省存储空间&lt;/h4&gt;
&lt;p&gt;如果不需要保留原始 shapefile 文件，可以使用 &lt;code&gt;remove&lt;/code&gt; 选项删除它们。以下命令下载墨西哥的 ADM0、ADM1 和 ADM2 数据，并删除原始文件：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoboundary MEX, level(ADM0 ADM1 ADM2) replace convert remove
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;下载全球边界数据&lt;/h4&gt;
&lt;p&gt;下载全球的 ADM0 和 ADM1 边界数据：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoboundary WLD, level(ADM0 ADM1) replace convert remove
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;6. 地图绘制&lt;/h2&gt;
&lt;h3&gt;6.1 使用 spmap 或 geoplot 绘制地图&lt;/h3&gt;
&lt;p&gt;若您使用的是 Stata 16 或更低版本，则下载完数据后，可以加载地图数据并使用 &lt;code&gt;spmap&lt;/code&gt; 命令绘制地图：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;use WLD_ADM0, clear

spmap using WLD_ADM0_shp, id(_ID)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20241220001621.png&quot; alt=&quot;20241220001621&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;对于 Stata 17 或更高版本的用户，可以使用 Stata 17 引入的 &lt;code&gt;geoplot&lt;/code&gt; 命令绘制地图：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoframe create WLD_ADM0

geoplot (line WLD_ADM0, lc(black)), tight
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/world_geoplot.png&quot; alt=&quot;world_geoplot&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;6.2 绘制更复杂的地图&lt;/h3&gt;
&lt;p&gt;如果已下载全球 ADM0 和 ADM1 边界数据，可以使用以下代码绘制更精美的地图：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoframe create WLD_ADM0
geoframe create WLD_ADM1

geoplot ///
    (area WLD_ADM1, color(white) lc(red) lw(0.02)) ///
    (line WLD_ADM0, lc(gs3) lw(0.03)) ///
    , tight project(robinson) ///
      background(water) grid(lc(white) label) ///
      title(&quot;Global ADM0 and ADM1 boundaries&quot;) ///
      note(&quot;Source: https://www.geoboundaries.org/. Accessed using the #Stata #geoboundary package.&quot;, size(1.8))
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/world_geoplot2.png&quot; alt=&quot;world_geoplot2&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;6.3 下载、合并和绘制多个国家的边界&lt;/h3&gt;
&lt;p&gt;以下示例展示如何下载 DACH 国家（奥地利、瑞士和德国）的三个行政层级边界（ADM0、ADM1 和 ADM2），并将其合并后绘制地图（Stata 17 或更高版本）：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Step 1：&lt;/strong&gt; 下载边界数据&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoboundary DEU AUT CHE,    ///
      level(ADM0 ADM1 ADM2) ///
      replace convert remove
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Step 2：&lt;/strong&gt;  创建地理框架&lt;br&gt;
为每个国家的边界数据创建 &lt;code&gt;geoframe&lt;/code&gt;：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoframe create AUT_ADM0, replace
geoframe create AUT_ADM1, replace
geoframe create AUT_ADM2, replace

geoframe create CHE_ADM0, replace
geoframe create CHE_ADM1, replace
geoframe create CHE_ADM2, replace

geoframe create DEU_ADM0, replace
geoframe create DEU_ADM1, replace
geoframe create DEU_ADM2, replace
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Step 3：&lt;/strong&gt;  合并地理框架&lt;br&gt;
将各国的边界合并为单一框架：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoframe stack AUT_ADM0 CHE_ADM0 DEU_ADM0, into(dach0) replace
geoframe stack AUT_ADM1 CHE_ADM1 DEU_ADM1, into(dach1) replace
geoframe stack AUT_ADM2 CHE_ADM2 DEU_ADM2, into(dach2) replace
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Step 4：&lt;/strong&gt;  绘制合并后的地图&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoplot ///
    (area dach2 i._FRAME, lw(0.01) lc(white)) ///
    (line dach1 i._FRAME, lw(0.04) lc(white)) ///
    (line dach0 i._FRAME, lw(0.05) lc(black)) ///
    , tight project(peters) grid
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/world_geoplot3.png&quot; alt=&quot;world_geoplot3&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;6.4 应用实例：下载多个来源的边界数据&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Step 1：&lt;/strong&gt; 下载墨西哥的 geoBoundaries 数据&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoboundary mex, level(all) replace ///
      convert remove name(geob_mex)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Step 2：&lt;/strong&gt; 下载墨西哥的 GADM 数据&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoboundary mex, level(all) replace ///
      convert remove name(gadm_mex) source(gadm)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Step 3：&lt;/strong&gt; 创建地理框架&lt;br&gt;
将两种来源的数据分别转换为 &lt;code&gt;geoframe&lt;/code&gt;：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoframe create geob_mex_ADM0, replace
geoframe create geob_mex_ADM1, replace
geoframe create geob_mex_ADM2, replace

geoframe create gadm_mex_ADM0, replace
geoframe create gadm_mex_ADM1, replace
geoframe create gadm_mex_ADM2, replace
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Step 4：&lt;/strong&gt; 绘制地图对比&lt;br&gt;
基于 geoBoundaries 数据绘制的图形如下：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoplot ///
(area geob_mex_ADM2, color(white) lc(red) lw(0.02)) ///
(line geob_mex_ADM1, lc(blue) lw(0.04)) ///
(line geob_mex_ADM0, lc(black) lw(0.1)) ///
, tight title(&quot;Mexico from geoBoundaries&quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;基于 GADM 数据绘制的图形如下：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoplot ///
(area gadm_mex_ADM2, color(white) lc(red) lw(0.02)) ///
(line gadm_mex_ADM1, lc(blue) lw(0.04)) ///
(line gadm_mex_ADM0, lc(black) lw(0.1)) ///
, tight title(&quot;Mexico from GADM&quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/geoboundary_mex1.png&quot; alt=&quot;geoboundary_mex1&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/geoboundary_mex2.png&quot; alt=&quot;geoboundary_mex2&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3&gt;6.5 应用实例：对比不同来源的数据&lt;/h3&gt;
&lt;p&gt;以下示例展示了 Gambia（冈比亚）数据在 geoBoundaries 和 GADM 中的差异：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Step 1：&lt;/strong&gt; 下载数据&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoboundary GMB, level(all) replace convert remove name(gadm_gmb) source(gadm) 
geoboundary GMB, level(all) replace convert remove name(geob_gmb)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Step 2：&lt;/strong&gt; 创建地理框架&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoframe create geob_gmb_ADM0, replace
geoframe create geob_gmb_ADM1, replace
geoframe create geob_gmb_ADM2, replace

geoframe create gadm_gmb_ADM0, replace
geoframe create gadm_gmb_ADM1, replace
geoframe create gadm_gmb_ADM2, replace
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Step 3：&lt;/strong&gt; 绘制两种来源的数据&lt;br&gt;
geoBoundaries 数据：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoplot ///
(area geob_gmb_ADM2, color(white) lc(red) lw(0.05)) ///
(line geob_gmb_ADM1, lc(blue) lw(0.1)) ///
(line geob_gmb_ADM0, lc(black) lw(0.2)) ///
, tight title(&quot;The Gambia from geoBoundaries&quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;GADM 数据：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoplot ///
(area gadm_gmb_ADM2, color(white) lc(red) lw(0.05)) ///
(line gadm_gmb_ADM1, lc(blue) lw(0.1)) ///
(line gadm_gmb_ADM0, lc(black) lw(0.2)) ///
, tight title(&quot;The Gambia from GADM&quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Step 5：&lt;/strong&gt; 叠加对比&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;geoplot ///
(line geob_gmb_ADM2, lc(red) lw(0.2) label(&quot;geoBoundaries&quot;)) ///
(line gadm_gmb_ADM2, lc(blue) lw(0.2) label(&quot;GADM&quot;)) ///
, tight title(&quot;The Gambia: geoBoundaries vs GADM&quot;) ///
glegend(layout(1 - 2) tsize(3.5))
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/geoboundary_gmb1.png&quot; alt=&quot;geoboundary_gmb1&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/geoboundary_gmb2.png&quot; alt=&quot;geoboundary_gmb2&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/geoboundary_gmb3.png&quot; alt=&quot;geoboundary_gmb3&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;7. 使用反馈和注意事项&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;反馈&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如遇到问题或需要改进功能，请访问 &lt;a href=&quot;https://github.com/asjadnaqvi/stata-geoboundary/issues&quot;&gt;GitHub 问题页面&lt;/a&gt; 提交反馈。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;注意事项&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;该软件包采用全球标准化的行政边界分类体系。这种分类方式支持不同系统之间的整合。在该分类体系下，&lt;code&gt;ADM0&lt;/code&gt; 始终表示国家边界，而 &lt;code&gt;ADM1&lt;/code&gt; 则可能表示省、区或其他分类，具体视国家情况而定。部分国家的数据可以深入到第五级行政区划（&lt;code&gt;ADM5&lt;/code&gt;）。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注意事项 1&lt;/strong&gt;：GIS 文件通常体积较大且容易快速累积。请尽量只下载所需的数据，并避免重复下载相同的数据集。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注意事项 2&lt;/strong&gt;：如果在下载多个数据集时，目标目录的磁盘写入速度低于下载速度，即使文件本身是有效的，也可能出现返回错误或 I/O 错误。这种情况可能发生在直接下载到云存储（例如 Dropbox、OneDrive 等）或使用较慢的硬盘（如 5400 转速的硬盘或非 SATA 硬盘）时。遇到这种情况时，可以选择将文件下载到其他存储位置，或者等待文件同步完成后再尝试操作。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;免责声明&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;本 Geographic Information System (GIS) 数据仅供信息或教育用途，不应作为法律或工程资源使用。尽管我们已尽力确保数据的准确性和可靠性，但这些数据是“按原样”提供的，不附带任何形式的保证。&lt;/p&gt;
&lt;p&gt;通过本 GIS 软件包提供的数据，我们不对任何不准确、错误或遗漏，以及因使用数据而导致的任何决策或行动承担责任。用户需自行验证数据的准确性及其对特定目的的适用性，并对因使用数据所造成的后果负责。&lt;/p&gt;
&lt;p&gt;请注意，由于更新、修正或其他修改，GIS 数据可能随时更改，恕不另行通知。建议用户访问原始数据来源或联系提供者以获取最新信息。&lt;/p&gt;
&lt;p&gt;通过访问或使用本软件包提供的 GIS 数据，即表示您已了解并同意上述条款和条件。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;8. 参考文献&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Naqvi, A. (2024). Stata package &quot;geoboundary&quot; version 1.1. Release date 24 November 2024. &lt;a href=&quot;https://github.com/asjadnaqvi/stata-geoboundary&quot;&gt;https://github.com/asjadnaqvi/stata-geoboundary&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Runfola, D. et al. (2020). geoBoundaries: A global database of political administrative boundaries. &lt;strong&gt;PLOS ONE&lt;/strong&gt;, 15(4), e0231866. &lt;a href=&quot;https://doi.org/10.1371/journal.pone.0231866&quot;&gt;Link&lt;/a&gt; (rep), &lt;a href=&quot;http://sci-hub.ren/10.1371/journal.pone.0231866&quot;&gt;PDF&lt;/a&gt;, &lt;a href=&quot;https://scholar.google.com/scholar?q=geoBoundaries:%20A%20global%20database%20of%20political%20administrative%20boundaries&quot;&gt;Google&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;9. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh &lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E4%B8%87%E8%8E%89&quot;&gt;万莉&lt;/a&gt;, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/560.html&quot;&gt;Stata绘图：世行可视化案例-条形图-密度函数图-地图-断点回归图-散点图&lt;/a&gt;, 连享会 No.560.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E4%B8%87%E8%8E%89&quot;&gt;万莉&lt;/a&gt;, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/401.html&quot;&gt;Stata：空间计量之用-spmap-绘制地图&lt;/a&gt;, 连享会 No.401.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E5%86%B7%E8%90%B1&quot;&gt;冷萱&lt;/a&gt;, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/509.html&quot;&gt;Stata：我和她离多远？基于百度地图API的地理距离计算&lt;/a&gt;, 连享会 No.509.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E5%BC%A0%E5%BC%9B&quot;&gt;张弛&lt;/a&gt;, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1401.html&quot;&gt;Stata 绘图：用 &lt;code&gt;geoplot&lt;/code&gt; 绘制中国地图&lt;/a&gt;, 连享会 No.1401.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E5%BD%AD%E6%98%BE%E8%80%BF&quot;&gt;彭显耿&lt;/a&gt;, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/475.html&quot;&gt;GIS地图制作栅格计算器的应用&lt;/a&gt;, 连享会 No.475.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E6%B5%A6%E8%BF%9B%E5%8D%9A&quot;&gt;浦进博&lt;/a&gt;, &lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E9%82%93%E9%93%A8%E9%9B%84&quot;&gt;邓铨雄&lt;/a&gt;, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1383.html&quot;&gt;Stata绘图：地图神器geoplot&lt;/a&gt;, 连享会 No.1383.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E7%8E%8B%E5%8D%93&quot;&gt;王卓&lt;/a&gt;, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/922.html&quot;&gt;Python：绘制动态地图-pyecharts&lt;/a&gt;, 连享会 No.922.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E7%8E%8B%E5%8D%93&quot;&gt;王卓&lt;/a&gt;, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1428.html&quot;&gt;Stata绘图：政治关联可视化&lt;/a&gt;, 连享会 No.1428.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E7%8E%8B%E5%8D%93&quot;&gt;王卓&lt;/a&gt;, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1427.html&quot;&gt;Stata绘图：政治关联可视化-B612&lt;/a&gt;, 连享会 No.1427.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E8%82%96%E8%95%8A&quot;&gt;肖蕊&lt;/a&gt;, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/925.html&quot;&gt;Stata：地图绘制命令介绍-maptile&lt;/a&gt;, 连享会 No.925.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/search.html?s=%E9%99%88%E5%8D%93%E7%84%B6&quot;&gt;陈卓然&lt;/a&gt;, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/984.html&quot;&gt;Stata绘图：绘制二维地图和中国地图-geo2xy&lt;/a&gt;, 连享会 No.984.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1527.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1527.html</guid><pubDate>Tue, 24 Dec 2024 16:00:00 GMT</pubDate><author>浦进博</author></item><item><title>Stata数据处理：跨国面板数据描述性统计分析-putexcel</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：李祉豪 (厦门大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:andycristone@163.com&quot;&gt;andycristone@163.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;：本文主要整理自下文，特此致谢！&lt;br&gt;
&lt;strong&gt;Source&lt;/strong&gt;：Saadaoui, J., 2023, Blog. Descriptive Statistics by Country in Panel Data with Stata.  &lt;a href=&quot;https://www.jamelsaadaoui.com/descriptive-statistics-by-country-in-panel-data-with-stata/&quot;&gt;-Link-&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;: Stata数据处理：跨国面板数据描述性统计分析-putexcel&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;: 描述性统计，Excel，putexcel&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 背景简介&lt;/h2&gt;
&lt;p&gt;在对跨国面板数据进行描述性统计时，我们可以借助 Stata 中的 &lt;code&gt;putexcel&lt;/code&gt; 命令实现这一操作。本文演示所涉及的历史汇率数据来自 Eichengreen 等 (2024)，该数据可从如下链接下载。&lt;/p&gt;
&lt;p&gt;网址：&lt;a href=&quot;http://data.mendeley.com/datasets/8526jpm6ct/1&quot;&gt;http://data.mendeley.com/datasets/8526jpm6ct/1&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 应用实例&lt;/h2&gt;
&lt;h3&gt;2.1 数据清洗与处理&lt;/h3&gt;
&lt;p&gt;导入该数据集后，研究者首先需要创建个体和时间变量，并对其进行标注。接下来，需调整和处理数据集的平衡性，舍弃缺失观测值的样本。主要的处理步骤如下。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. *-加载数据
. lxhuse swissdata.zip, clear

. *-添加变量标签
. xtset mycountry myweek
. xtdes
. keep mycountry myweek fx lfx
. order mycountry myweek fx lfx
. label variable mycountry &quot;Country name&quot;
. label variable myweek &quot;Date - current week&quot;
. label variable fx &quot;Currency i units per unit of US dollar&quot;
. label variable lfx &quot;Natural logarithm of 1 + fx&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;上述操作对数据集中各国家和美元的每周汇率信息进行了标注和排序，并生成了历史汇率的自然对数。在对数据进行标注说明后，可以通过以下代码生成时期变量，舍弃缺失观测值的样本，并生成历史汇率均值变量。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. by mycountry: gen period = tw(1913w52) + _n
. format %tw period
. drop if period&amp;gt;tw(1945w52)
. drop if mycountry==.  // To have a strongly (not weakly) balanced panel
. xtset mycountry period
. tsfill, full
. xtset mycountry period
. xtdes

. // Drop countries without observations
. cap egen mean_fx = mean(fx), by(mycountry)
. cap drop if mean_fx == .
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;2.2 数据可视化&lt;/h3&gt;
&lt;p&gt;在对原始数据集进行清洗和处理后，研究者可以使用 &lt;code&gt;xtline&lt;/code&gt; 命令绘制变量的时间变化趋势图，以便了解变量的变动趋势。以下代码展示了英国和阿根廷在该数据集中的历史汇率信息的时间变化，同时对输出图表的格式进行了设定。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. xtline fx if mycountry==57, name(GBR, replace)
. graph export GBR.png, as(png) width(4000) replace
. graph export GBR.png, as(pdf) replace

. xtline fx if mycountry==6, name(ARG, replace)
. graph export ARG.png, as(png) width(4000) replace
. graph export ARG.png, as(pdf) replace
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;2.3 将数据描述性统计信息输出到Excel中&lt;/h3&gt;
&lt;p&gt;在完成上述步骤后，研究者可以使用 &lt;code&gt;putexcel&lt;/code&gt; 命令和 &lt;code&gt;tabstat&lt;/code&gt; 命令在 Excel 中生成按国别分类汇总的汇率描述性统计信息。以下是示例代码。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;tabstat fx, statistics(count) by(names) format(%4.2f) save
putexcel set &quot;tabstat&quot;, replace sheet(Stats)
return list
putexcel (B1) = &quot;count&quot;
forvalues v=2(1)35 {
    capture putexcel (A`v&#39;) = (r(name`v&#39;))
    capture putexcel (B`v&#39;) = matrix(r(Stat`v&#39;))
}

tabstat fx, statistics(mean) by(names) format(%4.2f) save
putexcel (C1) = &quot;mean&quot;
putexcel set &quot;tabstat&quot;, modify sheet(Stats)
forvalues v=2(1)35 {
    capture putexcel (A`v&#39;) = (r(name`v&#39;))
    capture putexcel (C`v&#39;) = matrix(r(Stat`v&#39;))
}

tabstat fx, statistics(median) by(names) format(%4.2f) save
putexcel (D1) = &quot;median&quot;
putexcel set &quot;tabstat&quot;, modify sheet(Stats)
forvalues v=2(1)35 {
    capture putexcel (A`v&#39;) = (r(name`v&#39;))
    capture putexcel (D`v&#39;) = matrix(r(Stat`v&#39;))
}

tabstat fx, statistics(sd) by(names) format(%4.2f) save
putexcel (E1) = &quot;sd&quot;
putexcel set &quot;tabstat&quot;, modify sheet(Stats)
forvalues v=2(1)35 {
    capture putexcel (A`v&#39;) = (r(name`v&#39;))
    capture putexcel (E`v&#39;) = matrix(r(Stat`v&#39;))
}

tabstat fx, statistics(min) by(names) format(%4.2f) save
putexcel (F1) = &quot;min&quot; 
putexcel set &quot;tabstat&quot;, modify sheet(Stats)
forvalues v=2(1)35 {
    capture putexcel (A`v&#39;) = (r(name`v&#39;))
    capture putexcel (F`v&#39;) = matrix(r(Stat`v&#39;))
}

tabstat fx, statistics(max) by(names) format(%4.2f) save
putexcel (G1) = &quot;max&quot;
putexcel set &quot;tabstat&quot;, modify sheet(Stats)
forvalues v=2(1)35 {
    capture putexcel (A`v&#39;) = (r(name`v&#39;))
    capture putexcel (G`v&#39;) = matrix(r(Stat`v&#39;))
}
drop in 1/1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;上述代码实现的主要操作包括：生成一个空白的 Excel 文件，按国别分类存储历史汇率这一变量的描述性统计信息。其中，B1 单元格所在列存储观测值的数量信息，C1 单元格所在列存储均值信息，D1 单元格所在列存储中位数信息，E1 单元格所在列存储标准差信息，F1 单元格所在列存储最小值信息，G1 单元格所在列存储最大值信息。最终生成的 Excel 文件展示结果如下图所示。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E5%88%A9%E7%94%A8Stata%E5%AF%B9%E8%B7%A8%E5%9B%BD%E9%9D%A2%E6%9D%BF%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E6%8F%8F%E8%BF%B0%E6%80%A7%E7%BB%9F%E8%AE%A1_Fig1_%E6%8F%8F%E8%BF%B0%E6%80%A7%E7%BB%9F%E8%AE%A1%E7%BB%93%E6%9E%9C%E8%BE%93%E5%87%BA%E5%88%B0excel%E4%B8%AD_%E6%9D%8E%E7%A5%89%E8%B1%AA.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh 输出, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;丁晨, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/776.html&quot;&gt;Stata结果输出：addest自己定制输出的统计量&lt;/a&gt;, 连享会 No.776.&lt;/li&gt;
&lt;li&gt;万莉, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/266.html&quot;&gt;Stata 可重复性报告系列 B: 导出命令 (put*)&lt;/a&gt;, 连享会 No.266.&lt;/li&gt;
&lt;li&gt;云锋, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/473.html&quot;&gt;Stata结果输出：outreg2命令详解&lt;/a&gt;, 连享会 No.473.&lt;/li&gt;
&lt;li&gt;云锋, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/22.html&quot;&gt;Stata：一文搞定论文表1——基本统计量列表&lt;/a&gt;, 连享会 No.22.&lt;/li&gt;
&lt;li&gt;云锋, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/65.html&quot;&gt;sumup：快速呈现分组统计量&lt;/a&gt;, 连享会 No.65.&lt;/li&gt;
&lt;li&gt;何庆红, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/246.html&quot;&gt;baselinetable命令：论文基本统计量表格输出到Excel和Word&lt;/a&gt;, 连享会 No.246.&lt;/li&gt;
&lt;li&gt;兰茜, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/550.html&quot;&gt;Stata结果输出：tabout命令详解&lt;/a&gt;, 连享会 No.550.&lt;/li&gt;
&lt;li&gt;刘欣妍, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/495.html&quot;&gt;Stata结果输出：Excel结果表变身LaTeX表格&lt;/a&gt;, 连享会 No.495.&lt;/li&gt;
&lt;li&gt;华晨, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/352.html&quot;&gt;Stata结果输出：用esttab生成带组别名称的LaTeX回归表格&lt;/a&gt;, 连享会 No.352.&lt;/li&gt;
&lt;li&gt;卜文超, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/761.html&quot;&gt;Stata：回归结果导出-parmest&lt;/a&gt;, 连享会 No.761.&lt;/li&gt;
&lt;li&gt;卢梅, 2019, &lt;a href=&quot;https://www.lianxh.cn/details/115.html&quot;&gt;asdoc：Stata 结果输出又一利器！&lt;/a&gt;, 连享会 No.115.&lt;/li&gt;
&lt;li&gt;吴水亭, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/264.html&quot;&gt;君生我未生！Stata结果输出：论文四表一键出-reg2docx-corr2docx&lt;/a&gt;, 连享会 No.264.&lt;/li&gt;
&lt;li&gt;唐继凤, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/350.html&quot;&gt;Stata结果输出：两阶段回归的结果输出&lt;/a&gt;, 连享会 No.350.&lt;/li&gt;
&lt;li&gt;姜昊, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1253.html&quot;&gt;Stata结果输出：强大的etable命令&lt;/a&gt;, 连享会 No.1253.&lt;/li&gt;
&lt;li&gt;姜昊, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1044.html&quot;&gt;Stata：分类表述性统计量与论文表1定制-table1_mc命令&lt;/a&gt;, 连享会 No.1044.&lt;/li&gt;
&lt;li&gt;宋慧慧, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/948.html&quot;&gt;Stata结果输出：用esttab命令绘制LaTeX表格&lt;/a&gt;, 连享会 No.948.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;屠西伟, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/701.html&quot;&gt;Stata：mtab2-将二维统计表存储为矩阵&lt;/a&gt;, 连享会 No.701.&lt;/li&gt;
&lt;li&gt;曹琳君, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1080.html&quot;&gt;Stata结果输出：绘制亮眼表格的十条建议&lt;/a&gt;, 连享会 No.1080.&lt;/li&gt;
&lt;li&gt;朱磊, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/376.html&quot;&gt;Stata：今天你table了吗？二维列表和三维列表范例&lt;/a&gt;, 连享会 No.376.&lt;/li&gt;
&lt;li&gt;朱磊, 连玉君, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/386.html&quot;&gt;Stata：今天你table了吗？图片版&lt;/a&gt;, 连享会 No.386.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/43.html&quot;&gt;Stata命令&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;杨涵慧, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1463.html&quot;&gt;令人相见恨晚的 Stata 命令&lt;/a&gt;, 连享会 No.1463.&lt;/li&gt;
&lt;li&gt;王卓, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1410.html&quot;&gt;Stata结果输出：Stata-to-LaTeX指南&lt;/a&gt;, 连享会 No.1410.&lt;/li&gt;
&lt;li&gt;王文泽, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/540.html&quot;&gt;Stata结果输出-addest：自己添加统计量&lt;/a&gt;, 连享会 No.540.&lt;/li&gt;
&lt;li&gt;王美庭, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/261.html&quot;&gt;Stata：毕业论文大礼包 A——实证结果输出命令大比拼-asdoc-esttab-reg2docx&lt;/a&gt;, 连享会 No.261.&lt;/li&gt;
&lt;li&gt;王美庭, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/262.html&quot;&gt;Stata：毕业论文大礼包 B——实证结果输出之搜狗短语&lt;/a&gt;, 连享会 No.262.&lt;/li&gt;
&lt;li&gt;王美庭, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/263.html&quot;&gt;Stata：毕业论文大礼包 C——新版 esttab&lt;/a&gt;, 连享会 No.263.&lt;/li&gt;
&lt;li&gt;王胜文, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1008.html&quot;&gt;Stata：输出LaTeX表格&lt;/a&gt;, 连享会 No.1008.&lt;/li&gt;
&lt;li&gt;王若溪, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/265.html&quot;&gt;pwcorr_a：输出相关系数矩阵至 Word 和 Excel&lt;/a&gt;, 连享会 No.265.&lt;/li&gt;
&lt;li&gt;王若溪, 连玉君, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/348.html&quot;&gt;Stata结果输出：pwcorr_a输出相关系数矩阵&lt;/a&gt;, 连享会 No.348.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;籍保龙, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1473.html&quot;&gt;Stata基础教程（三）：统计表格和回归表格&lt;/a&gt;, 连享会 No.1473.&lt;/li&gt;
&lt;li&gt;袁子晴, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/613.html&quot;&gt;Stata：输出漂亮的LaTeX表格-T222&lt;/a&gt;, 连享会 No.613.&lt;/li&gt;
&lt;li&gt;连享会, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/349.html&quot;&gt;Stata结果输出：tabout-用-Stata-输出高品质表格&lt;/a&gt;, 连享会 No.349.&lt;/li&gt;
&lt;li&gt;连玉君, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1365.html&quot;&gt;Stata结果输出：手动添加带星号的统计量&lt;/a&gt;, 连享会 No.1365.&lt;/li&gt;
&lt;li&gt;连玉君, 2019, &lt;a href=&quot;https://www.lianxh.cn/details/5.html&quot;&gt;Stata：回归结果中不报告行业虚拟变量的系数&lt;/a&gt;, 连享会 No.5.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/37.html&quot;&gt;Python-R-Matlab&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;闫钊鹏, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1311.html&quot;&gt;R语言：gtExtras包-绘制漂亮的表格和图形&lt;/a&gt;, 连享会 No.1311.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown-LaTeX&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;陈楚, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1137.html&quot;&gt;Stata+Markdown：输出幻灯片+PDF+Word-markstat&lt;/a&gt;, 连享会 No.1137.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1526.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1526.html</guid><pubDate>Sun, 22 Dec 2024 16:00:00 GMT</pubDate><author>李祉豪</author></item><item><title>StataNow：相关的随机效应-xtreg</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：赵俊 (南开大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:m16531438093_1@163.com&quot;&gt;m16531438093_1@163.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;：StataNow：相关的随机效应-xtreg&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;：随机效应，固定效应，相关的随机效应，StataNow，xtreg&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;在面板数据估计中，相关的随机效应 (Correlated Random Effects, CRE) 是对传统随机效应模型的一种扩展。它允许个体效应与解释变量相关，同时保留了随机效应模型的建模框架。这种方法旨在弥补传统随机效应模型的局限性，并在一定程度上结合了随机效应和固定效应模型的优点。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 相关的随机效应模型的核心思想&lt;/h2&gt;
&lt;h3&gt;1.1 背景问题&lt;/h3&gt;
&lt;p&gt;随机效应模型假设个体效应 $u_i$ 与解释变量 $X_{it}$ 无关 ($E[u_i | X_{it}] = 0$)。这一假设在许多实际情况下可能不成立，例如某些未观测到的个体特征可能与解释变量相关联。如果忽略这种相关性，随机效应模型的估计会产生偏误。&lt;/p&gt;
&lt;p&gt;如果采用固定效应模型进行估计，固定效应模型假设个体效应 $u_i$ 与解释变量 $X_{it}$ 相关 ($E[u_i | X_{it}] \not = 0$) 。然而，固定效应模型在估计时需要采用差分或者组内去均值的方法，以消除个体固定效应。这会导致某些个体不随时间变化的变量 (比如：性别、经度、纬度) 在去除固定效应后被消除，无法估计其对于因变量的影响。此外，如果数据中解释变量的时间内变化较小 (例如，地区的年平均气温)，固定效应模型可能由于方差较小而无法估计出系数。&lt;/p&gt;
&lt;h3&gt;1.2 相关的随机效应模型的假设、形式和估计&lt;/h3&gt;
&lt;p&gt;如果我们非常关注个体不随时间变化的变量对因变量的影响，但又担心随机效应的假设过于严格，导致个体效应 $u_i$ 与解释变量 $X_{it}$ 可能相关，那么可以考虑使用相关的随机效应模型。此模型假设个体效应 $u_i$ 可以表示为解释变量的函数加上一个随机误差项：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
u_i = \bar{X}_i\gamma + \eta_i&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$\bar{X}&lt;em&gt;i = \frac{1}{T} \sum&lt;/em&gt;{t=1}^T X_{it}$ 是个体 $i$ 的解释变量的时间均值。&lt;/li&gt;
&lt;li&gt;$\gamma$ 是待估参数，反映了个体效应与解释变量之间的关系。&lt;/li&gt;
&lt;li&gt;$\eta_i$ 是随机误差项，服从零均值且与解释变量独立 ($\eta_i \sim N(0, \sigma_\eta^2)$)。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;将 $u_i$ 代入标准的随机效应模型 $y_{it} = \alpha + X_{it}\beta + u_i + \epsilon_{it}$，得到：&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;
y_{it} = \alpha + X_{it}\beta + \bar{X}&lt;em&gt;i\gamma + \eta_i + \epsilon&lt;/em&gt;{it}&lt;br&gt;
$$&lt;/p&gt;
&lt;p&gt;这就是相关的随机效应模型的表达式。通过引入 $\bar{X}&lt;em&gt;i$，该模型明确地考虑了个体效应 $u_i$ 与解释变量 $X&lt;/em&gt;{it}$ 之间的相关性。模型中仍然保留了随机效应 $\eta_i$，因此在估计时可以利用随机效应模型的效率。&lt;/p&gt;
&lt;p&gt;估计相关的随机效应也非常简单，首先计算每个解释变量的时间均值 $\bar{X}_i$。然后，将 $\bar{X}&lt;em&gt;i$ 和原始的 $X&lt;/em&gt;{it}$ 一起作为解释变量，使用随机效应估计方法进行回归即可。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2 相关的随机效应模型的 Stata 代码&lt;/h2&gt;
&lt;p&gt;我们导入 Stata 提供的美国女性工资面板数据，并查看变量信息。该数据集是对 1968 年时年龄在 14 至 24 岁之间女性的纵向调查，共包含 28,534 个观测值。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. lxhuse nlswork.dta, clear
. des

Contains data from https://file.lianxh.cn/data/n/nlswork.dta
 Observations:        28,534                  National Longitudinal Survey.  
                                    Young Women 14-26 years of age in 1968
    Variables:            21                  23 Oct 2018 11:40
--------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
--------------------------------------------------------------------------
idcode          int     %8.0g                 NLS ID
year            byte    %8.0g                 interview year
birth_yr        byte    %8.0g                 birth year
age             byte    %8.0g                 age in current year
race            byte    %8.0g      racelbl    race
msp             byte    %8.0g                 1 if married, spouse present
nev_mar         byte    %8.0g                 1 if never married
grade           byte    %8.0g                 current grade completed
collgrad        byte    %8.0g                 1 if college graduate
not_smsa        byte    %8.0g                 1 if not SMSA
c_city          byte    %8.0g                 1 if central city
south           byte    %8.0g                 1 if south
ind_code        byte    %8.0g                 industry of employment
occ_code        byte    %8.0g                 occupation
union           byte    %8.0g                 1 if union
wks_ue          byte    %8.0g                 weeks unemployed last year
ttl_exp         float   %9.0g                 total work experience
tenure          float   %9.0g                 job tenure, in years
hours           int     %8.0g                 usual hours worked
wks_work        int     %8.0g                 weeks worked last year
ln_wage         float   %9.0g                 ln(wage/GNP deflator)
--------------------------------------------------------------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;根据对每个变量的描述，每个观测值的含义如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;idcode&lt;/strong&gt;：国家纵向调查的个体识别码 (NLS ID)；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;year&lt;/strong&gt;：访谈年份；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;birth_yr&lt;/strong&gt;：出生年份；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;age&lt;/strong&gt;：当前年份的年龄；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;race&lt;/strong&gt;：种族 (&lt;strong&gt;racelbl&lt;/strong&gt; 为种族的标签)；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;msp&lt;/strong&gt;：婚姻状态，1 表示已婚且配偶在场；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;nev_mar&lt;/strong&gt;：婚姻状态，1 表示从未结婚；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;grade&lt;/strong&gt;：完成的最高学历等级；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;collgrad&lt;/strong&gt;：是否大学毕业，1 表示是；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;not_smsa&lt;/strong&gt;：是否不在标准大都市统计区 (SMSA)，1 表示不是 SMSA 地区；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;c_city&lt;/strong&gt;：是否居住在中心城市，1 表示是；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;south&lt;/strong&gt;：是否居住在美国南部，1 表示是；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ind_code&lt;/strong&gt;：就业行业的代码；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;occ_code&lt;/strong&gt;：职业代码；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;union&lt;/strong&gt;：是否是工会成员，1 表示是；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;wks_ue&lt;/strong&gt;：去年失业的周数；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ttl_exp&lt;/strong&gt;：总工作经验 (Total work experience)；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;tenure&lt;/strong&gt;：当前工作的年限 (Job tenure, in years)；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;hours&lt;/strong&gt;：通常每周工作小时数；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;wks_work&lt;/strong&gt;：去年工作的周数；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ln_wage&lt;/strong&gt;：工资的自然对数 (ln(wage/GNP deflator))。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我们希望研究影响女性工资的因素，通过固定效应和随机效应估计方法进行分析。具体考虑的变量包括：最高学历 (&lt;strong&gt;grade&lt;/strong&gt;)、年龄 (&lt;strong&gt;age&lt;/strong&gt;) 及其平方 (&lt;strong&gt;c.age#c.age&lt;/strong&gt;)、工作经验 (&lt;strong&gt;ttl_exp&lt;/strong&gt;) 及其平方 (&lt;strong&gt;c.ttl_exp#c.ttl_exp&lt;/strong&gt;)、当前工作的年限 (&lt;strong&gt;tenure&lt;/strong&gt;) 及其平方 (&lt;strong&gt;c.tenure#c.tenure&lt;/strong&gt;)、种族是否为黑人 (&lt;strong&gt;2.race&lt;/strong&gt;)、是否不在标准大都市统计区 (&lt;strong&gt;not_smsa&lt;/strong&gt;)、是否位于南方 (&lt;strong&gt;south&lt;/strong&gt;)，对工资的自然对数 (&lt;strong&gt;ln_wage&lt;/strong&gt;) 的影响。我们特别关注最高学历和种族是否为黑人对工资的影响。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. lxhuse nlswork.dta, clear
. xtreg ln_w grade age c.age#c.age ttl_exp c.ttl_exp#c.ttl_exp tenure ///
&amp;gt;       c.tenure#c.tenure 2.race not_smsa south, fe
. est store fe

. xtreg ln_w grade age c.age#c.age ttl_exp c.ttl_exp#c.ttl_exp tenure ///
&amp;gt;       c.tenure#c.tenure 2.race not_smsa south, re  
. est store re

. xtreg ln_w grade age c.age#c.age ttl_exp c.ttl_exp#c.ttl_exp tenure ///
&amp;gt;       c.tenure#c.tenure 2.race not_smsa south, cre  
. est store cre

Correlated random-effects regression            Number of obs     =     28,091
Group variable: idcode                          Number of groups  =      4,697
R-squared:                                      Obs per group:
     Within  = 0.1727                                         min =          1
     Between = 0.4899                                         avg =        6.0
     Overall = 0.3800                                         max =         15

                                                Wald chi2(10)     =    5984.86
corr(xit_vars*b, xt_means*γ) = 0.3941           Prob &amp;gt; chi2       =     0.0000
-------------------------------------------------------------------------------------
            ln_wage | Coefficient  Std. err.      z    P&amp;gt;|z|     [95% conf. interval]
--------------------+----------------------------------------------------------------
xit_vars            |
              grade |      0.061      0.002    30.86   0.000        0.057       0.065
                age |      0.036      0.003    10.67   0.000        0.029       0.043
                    |
        c.age#c.age |     -0.001      0.000   -13.62   0.000       -0.001      -0.001
                    |
            ttl_exp |      0.033      0.003    11.32   0.000        0.028       0.039
                    |
c.ttl_exp#c.ttl_exp |      0.000      0.000     1.70   0.089       -0.000       0.000
                    |
             tenure |      0.036      0.002    19.41   0.000        0.032       0.039
                    |
  c.tenure#c.tenure |     -0.002      0.000   -15.82   0.000       -0.002      -0.002
                    |
               race |
             black  |     -0.060      0.010    -5.89   0.000       -0.080      -0.040
           not_smsa |     -0.089      0.009    -9.37   0.000       -0.108      -0.070
              south |     -0.061      0.011    -5.57   0.000       -0.082      -0.039
              _cons |      0.311      0.128     2.43   0.015        0.060       0.563
--------------------+----------------------------------------------------------------
xt_means            |
              grade |      0.000  (omitted)
                age |     -0.002      0.010    -0.22   0.826       -0.021       0.017
                    |
        c.age#c.age |      0.000      0.000     0.65   0.516       -0.000       0.000
                    |
            ttl_exp |     -0.019      0.007    -2.97   0.003       -0.032      -0.007
                    |
c.ttl_exp#c.ttl_exp |      0.000      0.000     1.38   0.169       -0.000       0.001
                    |
             tenure |      0.032      0.006     4.95   0.000        0.019       0.044
                    |
  c.tenure#c.tenure |     -0.001      0.000    -1.83   0.067       -0.002       0.000
                    |
               race |
             black  |      0.000  (omitted)
           not_smsa |     -0.098      0.014    -6.78   0.000       -0.127      -0.070
              south |     -0.041      0.015    -2.76   0.006       -0.069      -0.012
--------------------+----------------------------------------------------------------
            sigma_u |  .25790526
            sigma_e |  .29068923
                rho |  .44045273   (fraction of variance due to u_i)
-------------------------------------------------------------------------------------
Mundlak test (xt_means = 0): chi2(8) = 151.6234           Prob &amp;gt; chi2 = 0.0000


. esttab fe re cre,se

------------------------------------------------------------
                      (1)             (2)             (3)   
                  ln_wage         ln_wage         ln_wage   
------------------------------------------------------------
main                                                        
grade                   0          0.0646***       0.0611***
                      (.)       (0.00178)       (0.00198)   

age                0.0360***       0.0368***       0.0360***
                (0.00339)       (0.00312)       (0.00337)   

c.age#c.age     -0.000723***    -0.000713***    -0.000723***
              (0.0000533)     (0.0000500)     (0.0000531)   

ttl_exp            0.0335***       0.0290***       0.0335***
                (0.00297)       (0.00242)       (0.00296)   

c.ttl_exp#~p     0.000216        0.000305**      0.000216   
               (0.000128)      (0.000116)      (0.000127)   

tenure             0.0358***       0.0393***       0.0358***
                (0.00185)       (0.00176)       (0.00184)   

c.tenure#c~e     -0.00197***     -0.00200***     -0.00197***
               (0.000125)      (0.000119)      (0.000125)   

2.race                  0         -0.0531***      -0.0604***
                      (.)       (0.00999)        (0.0102)   

not_smsa          -0.0890***       -0.131***      -0.0890***
                (0.00953)       (0.00718)       (0.00950)   

south             -0.0606***      -0.0869***      -0.0606***
                 (0.0109)       (0.00730)        (0.0109)   

_cons               1.037***        0.239***        0.311*  
                 (0.0486)        (0.0495)         (0.128)   
------------------------------------------------------------
xt_means                                                    
grade                                                   0   
                                                      (.)   

age                                              -0.00216   
                                                (0.00984)   

c.age#c.age                                      0.000104   
                                               (0.000160)   

ttl_exp                                           -0.0195** 
                                                (0.00654)   

c.ttl_exp#~p                                     0.000493   
                                               (0.000359)   

tenure                                             0.0318***
                                                (0.00642)   

c.tenure#c~e                                    -0.000798   
                                               (0.000435)   

2.race                                                  0   
                                                      (.)   

not_smsa                                          -0.0982***
                                                 (0.0145)   

south                                             -0.0406** 
                                                 (0.0147)   
------------------------------------------------------------
N                   28091           28091           28091   
------------------------------------------------------------
Standard errors in parentheses
* p&amp;lt;0.05, ** p&amp;lt;0.01, *** p&amp;lt;0.001
 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;根据固定效应估计的结果，发现由于共线性，&lt;strong&gt;grade&lt;/strong&gt; (教育水平) 和 &lt;strong&gt;race&lt;/strong&gt; (种族) 被忽略。然而，固定效应估计对于这种相关性是稳健的，对其他变量的估计值是无偏的。虽然随机效应可以估计 &lt;strong&gt;grade&lt;/strong&gt; 和 &lt;strong&gt;race&lt;/strong&gt; 对工资的影响，并且结果显著且符合经济意义，但我们担心随机效应假设过于严格，并且与固定效应在时变变量上的估计存在较大差异。&lt;/p&gt;
&lt;p&gt;接下来，我们使用相关随机效应模型进行估计。固定效应模型无法估计时间不变变量 (如教育水平和种族) 的系数。如果这些变量的影响是我们的关注点，Stata 的最新版本提供了 &lt;code&gt;cre&lt;/code&gt; 选项，可以通过指定 &lt;code&gt;cre&lt;/code&gt; 来拟合相关随机效应模型，并将结果与之前的固定效应和随机效应模型进行比较。&lt;/p&gt;
&lt;p&gt;在相关随机效应估计的系数表中，第一部分标记为 &quot;xit vars&quot;，报告了时间变化和时间不变变量的系数及相关统计数据。所有时间变化的变量的系数在数值上与 &lt;code&gt;xtreg, fe&lt;/code&gt; 的结果等价，这被称为 Mundlak 等价性。&lt;/p&gt;
&lt;p&gt;对于时间不变变量，我们估计教育回报率为 6.1% (与随机效应模型中的 6.5% 相比)，黑人身份使工资降低 6.0% (与随机效应模型中的 5.3% 相比)。由于 Mundlak 等价性，相关随机效应模型与固定效应模型具有相同的组内 $R^2$，即 0.1727。它还具有更高的总体 $R^2$，即 0.3800，因为它包括了时间变化的独立变量和面板均值作为额外的回归量。系数表的第二部分标记为 &quot;xt_means&quot;，报告了时间变化变量的面板均值的系数及相关统计数据。时间不变变量如教育水平的面板均值被省略，因为均值与原始变量共线性。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;xtreg, cre&lt;/code&gt; 还进行了 Mundlak 检验，以帮助决定是使用随机效应模型还是相关随机效应模型或固定效应模型进行估计。该检验测试面板均值的所有系数是否为零。检验结果可在输出表的底部找到。在这个例子中，Wald 统计量为 151.6234，$p$ 值为 0.0000，因此我们拒绝零假设，更倾向于选择相关随机效应模型而非随机效应模型。&lt;/p&gt;
&lt;p&gt;最后，通过比较固定效应、随机效应和相关随机效应的系数，我们发现相关随机效应在时变变量的系数上与固定效应一致，并且还能估计出时间不变变量的系数，综合了固定效应和随机效应的优点。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3.参考文献&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Mundlak Y. On the pooling of time series and cross section data[J]. Econometrica: journal of the Econometric Society, 1978: 69-85. &lt;a href=&quot;http://pages.stern.nyu.edu/~wgreene/Econometrics/Mundlak-1978.pdf&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh 相关效应 随机效应, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;任缘, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1438.html&quot;&gt;xtnumfac：估计面板数据中共同因子的个数&lt;/a&gt;, 连享会 No.1438.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;内生性-因果推断&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;何屹, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/544.html&quot;&gt;用FE-固定效应模型能做因果推断吗？&lt;/a&gt;, 连享会 No.544.&lt;/li&gt;
&lt;li&gt;关欣, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/913.html&quot;&gt;Stata：如何处理固定效应模型中的单期数据-xtfesing&lt;/a&gt;, 连享会 No.913.&lt;/li&gt;
&lt;li&gt;刘佳宁, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1093.html&quot;&gt;Stata：固定效应的颗粒度选择：实践与陷阱&lt;/a&gt;, 连享会 No.1093.&lt;/li&gt;
&lt;li&gt;刘欣妍, 史柯, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/942.html&quot;&gt;Stata：双向固定效应模型中是否要控制公司年龄？&lt;/a&gt;, 连享会 No.942.&lt;/li&gt;
&lt;li&gt;刘潍嘉, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1406.html&quot;&gt;辛普森悖论及模拟分析&lt;/a&gt;, 连享会 No.1406.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/31.html&quot;&gt;论文写作&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;吕卓阳, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/730.html&quot;&gt;Stata 论文复现：Temperature Shocks and Economic Growth&lt;/a&gt;, 连享会 No.730.&lt;/li&gt;
&lt;li&gt;吴煜铭, 郑浩文, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/579.html&quot;&gt;内生性！内生性！解决方法大集合&lt;/a&gt;, 连享会 No.579.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/18.html&quot;&gt;计量专题&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;周翔宇, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/845.html&quot;&gt;主成分分析-交互固定效应基础：协方差矩阵的几何意义&lt;/a&gt;, 连享会 No.845.&lt;/li&gt;
&lt;li&gt;展一帆, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/238.html&quot;&gt;Stata：非对称固定效应模型&lt;/a&gt;, 连享会 No.238.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/27.html&quot;&gt;Probit-Logit&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;庄子安, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/507.html&quot;&gt;feologit：固定效应有序Logit模型&lt;/a&gt;, 连享会 No.507.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;倍分法DID&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;张伟广, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/381.html&quot;&gt;Stata：双重差分的固定效应模型-(DID)&lt;/a&gt;, 连享会 No.381.&lt;/li&gt;
&lt;li&gt;曹昊煜, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1042.html&quot;&gt;FE！FE！面板固定效应模型：你用对了吗&lt;/a&gt;, 连享会 No.1042.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/43.html&quot;&gt;Stata命令&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;李梦馨, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1477.html&quot;&gt;ivreghdfe 命令安装失败解决方法&lt;/a&gt;, 连享会 No.1477.&lt;/li&gt;
&lt;li&gt;李胜胜, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/574.html&quot;&gt;引力模型-高维固定效应面板泊松模型&lt;/a&gt;, 连享会 No.574.&lt;/li&gt;
&lt;li&gt;杜静玄, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/846.html&quot;&gt;DID最新进展：异质性处理条件下的双向固定效应DID估计量 (TWFEDD)&lt;/a&gt;, 连享会 No.846.&lt;/li&gt;
&lt;li&gt;游万海, 连玉君, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/122.html&quot;&gt;Stata: 面板数据模型一文读懂&lt;/a&gt;, 连享会 No.122.&lt;/li&gt;
&lt;li&gt;牛坤在, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/688.html&quot;&gt;xtheckmanfe：面板Heckman模型的固定效应估计&lt;/a&gt;, 连享会 No.688.&lt;/li&gt;
&lt;li&gt;王晓娟, 甘徐沁, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/42.html&quot;&gt;regife：面板交互固定效应模型-Interactive Fixed Effect&lt;/a&gt;, 连享会 No.42.&lt;/li&gt;
&lt;li&gt;秦利宾, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/631.html&quot;&gt;Stata：固定效应分析新命令-sumhdfe&lt;/a&gt;, 连享会 No.631.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;肖志文, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1334.html&quot;&gt;孰优孰劣：固定效应模型与混合效应模型对比-FE-ME&lt;/a&gt;, 连享会 No.1334.&lt;/li&gt;
&lt;li&gt;胡雨霄, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/156.html&quot;&gt;reghdfe：多维面板固定效应估计&lt;/a&gt;, 连享会 No.156.&lt;/li&gt;
&lt;li&gt;董洁妙, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1303.html&quot;&gt;JF论文推介：FE和RE如何选择？&lt;/a&gt;, 连享会 No.1303.&lt;/li&gt;
&lt;li&gt;连享会, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/337.html&quot;&gt;Stata新命令：ppmlhdfe-面板计数模型-多维固定效应泊松估计&lt;/a&gt;, 连享会 No.337.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/38.html&quot;&gt;IV-GMM&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;连玉君, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1299.html&quot;&gt;ivreghdfe-高维固定效应IV估计：错误信息处理-817 lines skipped&lt;/a&gt;, 连享会 No.1299.&lt;/li&gt;
&lt;li&gt;连玉君, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1318.html&quot;&gt;ivreghdfe-高维固定效应IV估计：错误信息处理-817 lines skipped&lt;/a&gt;, 连享会 No.1318.&lt;/li&gt;
&lt;li&gt;连玉君, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1343.html&quot;&gt;多组成绩调整的简便方法：固定效应模型妙用&lt;/a&gt;, 连享会 No.1343.&lt;/li&gt;
&lt;li&gt;郭思媛, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1381.html&quot;&gt;FE vs POLS：聊聊固定效应-优点和缺点&lt;/a&gt;, 连享会 No.1381.&lt;/li&gt;
&lt;li&gt;韩杰, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/947.html&quot;&gt;固定效应还是随机效应？&lt;/a&gt;, 连享会 No.947.&lt;/li&gt;
&lt;li&gt;黄晨晨, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1374.html&quot;&gt;Lasso-SFA：基于自适应Lasso的面板固定效应随机边界分析&lt;/a&gt;, 连享会 No.1374.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/51.html&quot;&gt;论文重现&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;黄晨晨, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1496.html&quot;&gt;用因子模型克服遗漏变量偏误：论文复现和解读&lt;/a&gt;, 连享会 No.1496.&lt;/li&gt;
&lt;li&gt;黄涵麟, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/530.html&quot;&gt;ocmt：高维固定效应模型的变量筛选问题&lt;/a&gt;, 连享会 No.530.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1525.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1525.html</guid><pubDate>Sat, 21 Dec 2024 16:00:00 GMT</pubDate><author>赵俊</author></item><item><title>连享会：助教入选通知-2025寒假班</title><description>&lt;p&gt;承蒙各位的关爱和支持，自连享会专题课：「&lt;a href=&quot;https://www.lianxh.cn/PX.html&quot;&gt;连享会-2025寒假班&lt;/a&gt;」发布以来，我们陆续收到了来自国内外多所高校院系和研究机构的老师和同学的申请。最终，我们诚挚地邀请 26 位老师和同学担任本次课程的助教，为大家提供全方位的答疑和服务工作。&lt;/p&gt;
&lt;p&gt;我们将共同努力，为大家提供最佳的交流和学习环境。&lt;/p&gt;
&lt;p&gt;参加本次课程的同学和老师们，可以随时在「课程微信群」中 &lt;font color=&quot;green&quot;&gt;@助教&lt;/font&gt;，以便实时答疑解惑，轻装前行。&lt;/p&gt;
&lt;p&gt;往期&lt;strong&gt;板书和答疑文档&lt;/strong&gt;：&lt;a href=&quot;https://gitee.com/arlionn/PX/wikis&quot;&gt;https://gitee.com/arlionn/PX/wikis&lt;/a&gt;，汇集了自 2019 年以来连享会开设的多数课程的板书和答疑文档。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;入选名单&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;查佳婧   北京大学&lt;/li&gt;
&lt;li&gt;陈隆轩   首都经济贸易大学&lt;/li&gt;
&lt;li&gt;董思源   墨尔本大学&lt;/li&gt;
&lt;li&gt;杜静玄   东北财经大学&lt;/li&gt;
&lt;li&gt;冯卓立   布里斯托大学&lt;/li&gt;
&lt;li&gt;郭明悦   中国财政科学研究院&lt;/li&gt;
&lt;li&gt;郭旗扬   西安交通大学&lt;/li&gt;
&lt;li&gt;韩丹妮   中山大学&lt;/li&gt;
&lt;li&gt;郝 亮   北京工业大学&lt;/li&gt;
&lt;li&gt;贾寰宇   厦门大学&lt;/li&gt;
&lt;li&gt;兰海铭   广西大学&lt;/li&gt;
&lt;li&gt;李俊奇   中南财经政法大学&lt;/li&gt;
&lt;li&gt;李长生   贵州大学&lt;/li&gt;
&lt;li&gt;刘振岩   南昌大学&lt;/li&gt;
&lt;li&gt;罗晟威   新加坡国立大学&lt;/li&gt;
&lt;li&gt;师潇萌   曼彻斯特大学&lt;/li&gt;
&lt;li&gt;韦佳妤   上海财经大学&lt;/li&gt;
&lt;li&gt;谢万欣   中山大学&lt;/li&gt;
&lt;li&gt;杨中园   中国社会科学院大学&lt;/li&gt;
&lt;li&gt;张 弛   中山大学&lt;/li&gt;
&lt;li&gt;张欣童   南开大学&lt;/li&gt;
&lt;li&gt;张欣童   南开大学&lt;/li&gt;
&lt;li&gt;张祖冲   江苏大学&lt;/li&gt;
&lt;li&gt;赵文琦   浙江大学&lt;/li&gt;
&lt;li&gt;周蔓颖   华南理工大学&lt;/li&gt;
&lt;li&gt;周智霖   中南财经政法大学&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;温馨提示&lt;/strong&gt;：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;请各位查收申请时登记的邮箱，扫码加入助教群。&lt;/li&gt;
&lt;li&gt;若 2025/12/24 日中午 12:00 前尚未收到确认邮件，视为自动放弃本次助教机会。&lt;/li&gt;
&lt;li&gt;未受到邮件的同学，可以发邮件至 &lt;a href=&quot;mailto:arlionn@163.com&quot;&gt;arlionn@163.com&lt;/a&gt; 询问。邮件标题：&lt;code&gt;姓名-助教：2025寒假班-连享会&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;往期优秀助教直录&lt;/h2&gt;
&lt;p&gt;按期按质完成推文写作任务和答疑工作的优秀助教，将受邀加入「&lt;strong&gt;连享会助教群英会&lt;/strong&gt;」。群英会中的成员无需在线提交申请，即可直接担任后续课程的助教。&lt;/p&gt;
&lt;p&gt;本期课程，我们还邀请了十位富有经验的同学担任助教，一方面也可以带领新手助教们更好地开展助教工作，另一方面也能更高效地为学员们提供帮助。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h3&gt;欢迎赐稿&lt;/h3&gt;
&lt;p&gt;欢迎大家将自己平时学习、研究中的感悟、笔记、思考，以文字形式分享出来。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;推文风格&lt;/strong&gt;：参见 &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;分类推文&lt;/a&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;福利：&lt;/strong&gt; 录用 &lt;strong&gt;2 篇&lt;/strong&gt; 以上，即可 &lt;strong&gt;免费&lt;/strong&gt; 获得一期 Stata 现场培训资格&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;投稿信箱&lt;/strong&gt;: StataChina@163.com / arlionn@163.com 。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;邮件标题&lt;/strong&gt;：&lt;strong&gt;推文投稿-姓名：推文标题&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;附：课程简介&lt;/h2&gt;
&lt;h3&gt;连享会 · 2025 寒假班&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;${\color{red}{\Rightarrow}}$ &lt;a href=&quot;https://file.lianxh.cn/KC/lianxh_PX.pdf&quot;&gt;PDF 版&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/details/1502.html&quot;&gt;网页版&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;嘉宾：&lt;/strong&gt; 连玉君 (初+高) || 杨海生 (前沿)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;时间：&lt;/strong&gt; 2025 年 1 月 13-24 日 (线上)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;报名：&lt;/strong&gt; &lt;a href=&quot;https://www.wjx.top/vm/Ot5g7G4.aspx#&quot;&gt;https://www.wjx.top/vm/Ot5g7G4.aspx#&lt;/a&gt; (2900 元起/人/班)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;课程主页&lt;/strong&gt;：&lt;a href=&quot;https://www.lianxh.cn/PX.html&quot;&gt;https://www.lianxh.cn/PX.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;往期&lt;strong&gt;板书和答疑文档&lt;/strong&gt;：&lt;a href=&quot;https://gitee.com/arlionn/PX/wikis&quot;&gt;https://gitee.com/arlionn/PX/wikis&lt;/a&gt;，汇集了自 2019 年以来连享会开设的多数课程的板书和答疑文档。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1502.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxh_PX2025-wide-001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;iframe src=&quot;https://www.yeschat.ai/i/gpts-ZxX1zJ2e-The-Stata-GPT&quot; width=&quot;800&quot; height=&quot;500&quot; style=&quot;max-width: 100%;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/iframe&gt;
</description><link>https://www.lianxh.cn/details/1523.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1523.html</guid><pubDate>Fri, 20 Dec 2024 16:00:00 GMT</pubDate><author>连享会</author></item><item><title>估计处理效应并提供非参数置信区间-xtteifeci</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：任缘 (济南大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:2533219749@qq.com&quot;&gt;2533219749@qq.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;：本文内容主要整理自下文，特此致谢！&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;理论部分&lt;/strong&gt;：Li, X., Shen, Y., &amp;amp; Zhou, Q. (2024). Confidence intervals of treatment effects in panel data models with interactive fixed effects. &lt;em&gt;Journal of Econometrics&lt;/em&gt;, 240(1), 105684. &lt;a href=&quot;https://doi.org/10.1016/j.jeconom.2024.105684&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;https://arxiv.org/pdf/2202.12078&quot;&gt;-PDF-&lt;/a&gt; &lt;a href=&quot;https://scholar.google.com/scholar?q=Confidence%20intervals%20of%20treatment%20effects%20in%20panel%20data%20models%20with%20interactive%20fixed%20effects&quot;&gt;-Google-&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Stata 代码及数据&lt;/strong&gt;：Yan, Guanpeng, Li, Xingyu, Yan Shen, and Qiankun Zhou. 2024.  xtteifeci: A command for estimation and inference of treatment effects through a factor-based approach. Working Paper. &lt;a href=&quot;https://econpapers.repec.org/software/bocbocode/S459301.htm&quot;&gt;-Link-&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;: Stata：估计处理效应并提供非参数置信区间-xtteifeci&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;: 处理效应，置信区间，非参数置信区间，xtteifeci&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 背景简介&lt;/h2&gt;
&lt;p&gt;面板数据的处理效应分析结合了个体间差异和个体内动态，提供了超越单独横截面或时间序列数据所能获得的宝贵信息。然而，由于缺乏对处理组 (treat) 和控制组 (control) 的结果同时进行测量，这使得衡量处理效应变得复杂。&lt;/p&gt;
&lt;p&gt;为了解决上述问题，Bai 和 Ng (2021) 将渐近主成分方法应用于控制组个体的子样本和 Pre 时段的子样本，以识别所有时间和所有单元的共同因素和因子载荷。接着，他们使用估计的共同成分 (即估计的共同因素乘以估计的因子载荷和一个旋转矩阵) 来预测处理组个体在 Post 时段内各个时间点的潜在结果 (反事实结果)。最后，通过简单地从观察到的处理潜在结果中减去预测的未处理潜在结果，就可以得到估计的处理效应。&lt;/p&gt;
&lt;p&gt;在此基础上，Li 等 (2024) 使用易于实施且非参数的置信区间来估计每个处理单元在每个后处理时间点上的处理效应，从而拓展了 Bai 和 Ng (2021) 提出的基于因子的处理效应估计方法。原文中的处理效应估计和非参数置信区间是通过 Matlab 编程实现的。Yan 等 (2024) 以 Li 等 (2024) 为理论基础，编写了相应的 Stata 命令 &lt;code&gt;xtteifeci&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;xtteifeci&lt;/code&gt; 基于因子方法来估计处理效应，并通过报告置信区间和 $p$ 值来支持对面板数据中处理效应的统计推断。它适用于不同规格的模型，包括有或没有协变量的模型，以及平稳或非平稳的模型。&lt;/p&gt;
&lt;p&gt;下文将详细介绍如何使用 &lt;code&gt;xtteifeci&lt;/code&gt; 命令。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. xtteifeci 命令&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;命令安装&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. net install xtteifeci, from(http://fmwww.bc.edu/RePEc/bocode/x) replace
. net get xtteifeci, from(http://fmwww.bc.edu/RePEc/bocode/x) replace
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;命令语法&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;xtteifeci depvar [indepvars], treatvar(treatvarname) [options]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;其中，&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;depvar&lt;/code&gt;：表示回归中的被解释变量。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;indepvars&lt;/code&gt;：表示回归中的解释变量。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;treatvarname&lt;/code&gt;：表示处理效应变量，是一个虚拟变量，用于指示一个单位在特定时期内是否接受了处理。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对于 &lt;code&gt;options&lt;/code&gt;，模型选项包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;r(#)&lt;/code&gt;：指定因子数量。如果未指定 &lt;code&gt;r(#)&lt;/code&gt;，&lt;code&gt;xtteifeci&lt;/code&gt; 会通过选项 &lt;code&gt;rmethod({bn|abc})&lt;/code&gt; 和 &lt;code&gt;rmax(#)&lt;/code&gt; 自动确定因子数量。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;iterate(#)&lt;/code&gt;：指定最大迭代次数。建议将 # 设置为一个较大的正整数，默认值为 1000。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tolerance(tol)&lt;/code&gt;：指定非平稳趋势的指标。&lt;code&gt;tol&lt;/code&gt; 应设置为一个小的正浮点数，默认值为 0.0001。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;trend({0|1})&lt;/code&gt;：指定非平稳趋势指标。&lt;code&gt;trend(0)&lt;/code&gt; 和 &lt;code&gt;trend(1)&lt;/code&gt; 分别对应平稳和非平稳趋势，如果既未指定 &lt;code&gt;trend(0)&lt;/code&gt; 也未指定 &lt;code&gt;trend(1)&lt;/code&gt;，则默认使用 &lt;code&gt;trend(0)&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bootstrap(#)&lt;/code&gt;：指定自抽样样本的数量。# 应设置为一个较大的正整数，默认值为 500。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;seed(int)&lt;/code&gt;：指定随机种子数。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rmethod({bn|abc})&lt;/code&gt;：指定计算因子数量的方法。&lt;code&gt;bn&lt;/code&gt; 用于 BN 方法 (Bai 和 Ng，2002)；&lt;code&gt;abc&lt;/code&gt; 用于 Alessi (2010) 提出的 ABC 方法。默认为 &lt;code&gt;bn&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rmax&lt;/code&gt;：指定最大因子数量。默认值为 8。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;citype({eq|sy})&lt;/code&gt;：指定报告的置信区间类型，&lt;code&gt;eq&lt;/code&gt; 代表等尾置信区间，&lt;code&gt;sy&lt;/code&gt; 代表对称置信区间，默认为 &lt;code&gt;eq&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;frame(framename)&lt;/code&gt;：指定生成一个 Stata 框架，用于存储生成的变量。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nofigure&lt;/code&gt;：指定不生成图形。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;savegraph(prefix, [asis replace])&lt;/code&gt;：指定默认路径，将所有生成的图形保存到当前路径。仅在未指定 &lt;code&gt;nofigure&lt;/code&gt; 时适用。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;注意事项&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在使用 &lt;code&gt;xtteifeci&lt;/code&gt; 时，&lt;code&gt;depvar&lt;/code&gt; 和 &lt;code&gt;treatvar&lt;/code&gt; 是必需设置的参数。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;indepvars&lt;/code&gt; 是可选项，添加它们可以帮助更准确地预测反事实结果并估计处理效应。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;xtteifeci&lt;/code&gt; 也可以用于估算多时段的处理效应。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. Stata 实操&lt;/h2&gt;
&lt;h3&gt;3.1 案例1：香港与中国大陆的政治和经济一体化对其 GDP 增长的影响&lt;/h3&gt;
&lt;p&gt;在 Li (2024) 年的文章中，使用 Hasio (2012) 所研究的课题“香港与中国大陆的政治和经济一体化对其 GDP 增长的影响”来验证所提出的非参数置信区间在处理效应评估中的有效性。论文得出的结论如下：&lt;/p&gt;
&lt;p&gt;首先，关于政治一体化对香港 GDP 的影响，其结论通过图表展示如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/xtteifeci%EF%BC%9A%E4%B8%BA%E4%BA%A4%E4%BA%92%E5%BC%8F%E9%9D%A2%E6%9D%BF%E6%8F%90%E4%BE%9B%E9%9D%9E%E5%8F%82%E6%95%B0%E7%BD%AE%E4%BF%A1%E5%8C%BA%E9%97%B4_Fig2_%E6%94%BF%E6%B2%BB%E4%B8%80%E4%BD%93%E5%8C%96%E5%AF%B9GDP%E5%BD%B1%E5%93%8D_%E4%BB%BB%E7%BC%98.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;图中展示了政治一体化对香港 GDP 增长的估计处理效应以及相应的 90% 和 95% 置信区间。估计的处理效应与 Hsiao (2012) 发现的效应大小相似。即香港的实际 GDP 增长率在主权变更后的前 2 年内，显著受到与中国内地政治一体化的负面影响。然而，在 1999 年中期之后，大多数时候的影响是不显著的，而有少数几次则显著为正面。&lt;/p&gt;
&lt;p&gt;下面在 Stata 中使用 &lt;code&gt;xttfifeci&lt;/code&gt; 来对处理效应进行估计并增加置信区间。&lt;/p&gt;
&lt;p&gt;首先，调用并声明面板数据。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. use growth2, clear
. xtset region time
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;接下来，使用 &lt;code&gt;panelview&lt;/code&gt; 来可视化政治一体化 &lt;strong&gt;(pi)&lt;/strong&gt; 变量在处理组和对照组中的分布。&lt;code&gt;panelview&lt;/code&gt; 可以通过运行命令 &lt;code&gt;ssc install panelview, replace&lt;/code&gt; 来安装。具体的使用方法可以参考这篇推文 &lt;a href=&quot;https://www.lianxh.cn/details/1035.html&quot;&gt;Stata 绘图：面板数据可视化-panelview&lt;/a&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. panelview gdp pi, i(region) t(time) type(treat)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/xtteifeci%EF%BC%9A%E4%B8%BA%E4%BA%A4%E4%BA%92%E5%BC%8F%E9%9D%A2%E6%9D%BF%E6%8F%90%E4%BE%9B%E9%9D%9E%E5%8F%82%E6%95%B0%E7%BD%AE%E4%BF%A1%E5%8C%BA%E9%97%B4_Fig30_%E6%94%BF%E6%B2%BB%E4%B8%80%E4%BD%93%E5%8C%96panelview_%E4%BB%BB%E7%BC%98.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;利用 &lt;code&gt;xtteifeci&lt;/code&gt; 在 &lt;strong&gt;pi&lt;/strong&gt; 没有缺失的情况下检验处理效应：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. xtteifeci gdp if !missing(pi), treatvar(pi)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/xtteifeci%EF%BC%9A%E4%B8%BA%E4%BA%A4%E4%BA%92%E5%BC%8F%E9%9D%A2%E6%9D%BF%E6%8F%90%E4%BE%9B%E9%9D%9E%E5%8F%82%E6%95%B0%E7%BD%AE%E4%BF%A1%E5%8C%BA%E9%97%B4_Fig4_xtteifecipi_%E4%BB%BB%E7%BC%98.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/xtteifeci%EF%BC%9A%E4%B8%BA%E4%BA%A4%E4%BA%92%E5%BC%8F%E9%9D%A2%E6%9D%BF%E6%8F%90%E4%BE%9B%E9%9D%9E%E5%8F%82%E6%95%B0%E7%BD%AE%E4%BF%A1%E5%8C%BA%E9%97%B4_Fig50_xtteifecipi2_%E4%BB%BB%E7%BC%98.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;上图展示了 &lt;code&gt;xtteifeci&lt;/code&gt; 报告的结果。可以观察到，在政治一体化的前 2 年，香港的 GDP 增长率显示出明显的下降趋势，而在政治一体化之后，大多数影响并不显著 (置信区间包含 0)。通过对比 &lt;em&gt;Treatment Effects&lt;/em&gt;，这些结果与 Li (2024) 的图形结论一致。&lt;/p&gt;
&lt;p&gt;同样，按照相同的思路和方法可检验经济一体化的处理效应，下图为 Li (2024) 的图形结论。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/xtteifeci%EF%BC%9A%E4%B8%BA%E4%BA%A4%E4%BA%92%E5%BC%8F%E9%9D%A2%E6%9D%BF%E6%8F%90%E4%BE%9B%E9%9D%9E%E5%8F%82%E6%95%B0%E7%BD%AE%E4%BF%A1%E5%8C%BA%E9%97%B4_Fig6_xtteifeciei_%E4%BB%BB%E7%BC%98.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;以下是使用 &lt;code&gt;xtteifeci&lt;/code&gt; 的步骤和结果：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. use growth2, clear
. xtset region time
. qui panelview gdp ei, i(region) t(time) type(treat)
. xtteifeci gdp if !missing(ei), treatvar(ei) // ei代表经济一体化的虚拟变量
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/xtteifeci%EF%BC%9A%E4%B8%BA%E4%BA%A4%E4%BA%92%E5%BC%8F%E9%9D%A2%E6%9D%BF%E6%8F%90%E4%BE%9B%E9%9D%9E%E5%8F%82%E6%95%B0%E7%BD%AE%E4%BF%A1%E5%8C%BA%E9%97%B4_Fig70_xtteifecieiSTATA_%E4%BB%BB%E7%BC%98.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/xtteifeci%EF%BC%9A%E4%B8%BA%E4%BA%A4%E4%BA%92%E5%BC%8F%E9%9D%A2%E6%9D%BF%E6%8F%90%E4%BE%9B%E9%9D%9E%E5%8F%82%E6%95%B0%E7%BD%AE%E4%BF%A1%E5%8C%BA%E9%97%B4_Fig8_xtteifecieiSTATA2_%E4%BB%BB%E7%BC%98.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;对比 &lt;strong&gt;Treatment Effects&lt;/strong&gt;，与 Li (2024) 的图形结论一致。&lt;/p&gt;
&lt;p&gt;Li (2024) 的图形结论是通过 Matlab 生成的，而使用 &lt;code&gt;xtteifeci&lt;/code&gt;，我们可以在 Stata 中轻松地估计处理效应，并基于置信区间直观地评估处理效应的有效性。&lt;/p&gt;
&lt;h3&gt;3.2 案例2：加州禁烟对人均烟草消费的影响&lt;/h3&gt;
&lt;p&gt;在 Li (2024) 的论文中，还展示了加州烟草控制计划 (CTCP) 的处理效应估计及其 90% 和 95% 的置信区间，如图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/xtteifeci%EF%BC%9A%E4%B8%BA%E4%BA%A4%E4%BA%92%E5%BC%8F%E9%9D%A2%E6%9D%BF%E6%8F%90%E4%BE%9B%E9%9D%9E%E5%8F%82%E6%95%B0%E7%BD%AE%E4%BF%A1%E5%8C%BA%E9%97%B4_Fig9_xtteifeciCTCP_%E4%BB%BB%E7%BC%98.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;可以发现，所展示的处理效应在大小和趋势上与 (Abadie 等，2010) 相似。置信区间表明，随着时间的推移，CTCP 对加州人均香烟消费产生了显著的负面影响。&lt;/p&gt;
&lt;p&gt;下面用 &lt;code&gt;xtteifeci&lt;/code&gt; 来实现同样的效果。首先，是调用数据集以及声明面板数据。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. use smoking2, clear
. xtset state year
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后，使用 &lt;code&gt;xtteifeci&lt;/code&gt; 命令。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. xtteifeci cigsale lnincome eduattain poverty, treatvar(ctcp) trend(1) rmethod(abc)
. /*
&amp;gt; 对带有协变量、非平稳趋势和 abc 法计算出的因子数的模型进行处理效应估算
&amp;gt; ctcp为处理变量，即state为加州时，ctcp取1，否则为0
&amp;gt; cigsale是因变量，即人均烟草消费；lnincome eduattain poverty为协变量
&amp;gt; */
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;得到的处理效应估计以及置信区间如下图所示，对应 Li (2024) 的 &lt;strong&gt;Equal-Tailed CIs&lt;/strong&gt; (等尾置信区间)。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/xtteifeci%EF%BC%9A%E4%B8%BA%E4%BA%A4%E4%BA%92%E5%BC%8F%E9%9D%A2%E6%9D%BF%E6%8F%90%E4%BE%9B%E9%9D%9E%E5%8F%82%E6%95%B0%E7%BD%AE%E4%BF%A1%E5%8C%BA%E9%97%B4_Fig10_xtteifecieqStata_%E4%BB%BB%E7%BC%98.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;同样，我们可以在命令中指定置信区间的类型，以此生成对称置信区间，对应 Li (2024) 的 &lt;strong&gt;Symmetric CIs&lt;/strong&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Stata&quot;&gt;. xtteifeci cigsale lnincome eduattain poverty, treatvar(ctcp) trend(1) rmethod(abc) citype(sy)
. /*
&amp;gt; 与上面的区别在于指定了citype的类型为sy (对称置信区间) 
&amp;gt; 你同样可以按照前文所述的语法定制非平稳趋势trend()，计算因子数量的方法rmethod()等选项
&amp;gt; */
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/xtteifeci%EF%BC%9A%E4%B8%BA%E4%BA%A4%E4%BA%92%E5%BC%8F%E9%9D%A2%E6%9D%BF%E6%8F%90%E4%BE%9B%E9%9D%9E%E5%8F%82%E6%95%B0%E7%BD%AE%E4%BF%A1%E5%8C%BA%E9%97%B4_Fig11_xtteifecisyStata_%E4%BB%BB%E7%BC%98.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;对比 &lt;code&gt;xtteifeci&lt;/code&gt; 生成的结果，与 Li (2024) 的结论相似。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. 结语&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;xtteifeci&lt;/code&gt; 使我们能够在 Stata 中便捷地使用基于因子的估计方法来评估处理效应，并提供处理发生后 (如政策冲击、施加实验) 的处理效应置信区间。这有助于我们判断处理或冲击的效果，从而进行科学的统计推断。&lt;/p&gt;
&lt;p&gt;此外，由于篇幅限制，Stata 中关于各时期处理效应的系数及其统计显著性结果未在此展示。我们强烈建议感兴趣的读者亲自尝试一下！&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;5. 参考文献&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Bai, J., &amp;amp; Ng, S. (2021). Matrix Completion, Counterfactuals, and Factor Analysis of Missing Data. Journal of the American Statistical Association, 116(536), 1746–1763. &lt;a href=&quot;https://doi.org/10.1080/01621459.2021.1967163&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;https://arxiv.org/pdf/1910.06677&quot;&gt;-PDF-&lt;/a&gt; &lt;a href=&quot;https://scholar.google.com/scholar?q=Matrix%20Completion,%20Counterfactuals,%20and%20Factor%20Analysis%20of%20Missing%20Data&quot;&gt;-Google-&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Hsiao, C., Steve Ching, H., &amp;amp; Ki Wan, S. (2011). A panel data approach for program evaluation: measuring the benefits of political and economic integration of Hong Kong with mainland China. Journal of Applied Econometrics, 27(5), 705–740. Portico. &lt;a href=&quot;https://doi.org/10.1002/jae.1230&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;http://sci-hub.ren/10.1002/jae.1230&quot;&gt;-PDF-&lt;/a&gt; &lt;a href=&quot;https://scholar.google.com/scholar?q=A%20PANEL%20DATA%20APPROACH%20FOR%20PROGRAM%20EVALUATION:%20MEASURING%20THE%20BENEFITS%20OF%20POLITICAL%20AND%20ECONOMIC%20INTEGRATION%20OF%20HONG%20KONG%20WITH%20MAINLAND%20CHINA.%20Journal%20of%20Applied%20Econometrics,%2027(5),%20705%E2%80%93740&quot;&gt;-Google-&lt;/a&gt; &lt;a href=&quot;http://qed.econ.queensu.ca/jae/datasets/hsiao003/&quot;&gt;-Replication-&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Abadie, A., Diamond, A., &amp;amp; Hainmueller, J. (2010). Synthetic Control Methods for Comparative Case Studies: Estimating the Effect of California’s Tobacco Control Program. Journal of the American Statistical Association, 105(490), 493–505. &lt;a href=&quot;https://doi.org/10.1198/jasa.2009.ap08746&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;http://sci-hub.ren/10.1198/jasa.2009.ap08746&quot;&gt;-PDF1-&lt;/a&gt; &lt;a href=&quot;http://www.jenshainmueller.de/Paper/ccs.pdf&quot;&gt;-PDF2-&lt;/a&gt; &lt;a href=&quot;https://scholar.google.com/scholar?q=Synthetic%20Control%20Methods%20for%20Comparative%20Case%20Studies:%20Estimating%20the%20Effect%20of%20California%E2%80%99s%20Tobacco%20Control%20Program&quot;&gt;-Google-&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Li, X., Shen, Y., &amp;amp; Zhou, Q. (2024). Confidence intervals of treatment effects in panel data models with interactive fixed effects. Journal of Econometrics, 240(1), 105684. &lt;a href=&quot;https://doi.org/10.1016/j.jeconom.2024.105684&quot;&gt;-Link-&lt;/a&gt; &lt;a href=&quot;https://arxiv.org/pdf/2202.12078&quot;&gt;-PDF-&lt;/a&gt; &lt;a href=&quot;https://scholar.google.com/scholar?q=Confidence%20intervals%20of%20treatment%20effects%20in%20panel%20data%20models%20with%20interactive%20fixed%20effects&quot;&gt;-Google-&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Yan, Guanpeng, Li, Xingyu, Yan Shen, and Qiankun Zhou. 2024.  xtteifeci: A command for estimation and inference of treatment effects through a factor-based approach. Working Paper. &lt;a href=&quot;https://econpapers.repec.org/software/bocbocode/S459301.htm&quot;&gt;-Link-&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;6. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh 置信区间, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;Stata绘图&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;刘东, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1498.html&quot;&gt;Stata：手动计算置信区间&lt;/a&gt;, 连享会 No.1498.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;劳伟健, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1086.html&quot;&gt;Stata：正确理解置信区间&lt;/a&gt;, 连享会 No.1086.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/26.html&quot;&gt;Stata程序&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;吴雄, 童天天, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/43.html&quot;&gt;Stata：Bootstrap-自抽样-自举法&lt;/a&gt;, 连享会 No.43.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;曹琳君, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/712.html&quot;&gt;Stata：如何估计置信区间？&lt;/a&gt;, 连享会 No.712.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/16.html&quot;&gt;Stata入门&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;肖蕊, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/221.html&quot;&gt;25常见种误区：P值、置信区间和统计功效&lt;/a&gt;, 连享会 No.221.&lt;/li&gt;
&lt;li&gt;雷诺, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1257.html&quot;&gt;Stata绘图：confcomptwp-二维系数的置信区间和可比区间可视化&lt;/a&gt;, 连享会 No.1257.&lt;/li&gt;
&lt;li&gt;马洪栋, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1379.html&quot;&gt;Stata绘图：高级柱状图（一）-均值和置信区间-cibar-coefpl&lt;/a&gt;, 连享会 No.1379.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1524.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1524.html</guid><pubDate>Fri, 20 Dec 2024 16:00:00 GMT</pubDate><author>任缘</author></item><item><title>Stata：共同因子解读及 xtdcce2 命令应用</title><description>&lt;blockquote&gt;
&lt;p&gt;连享会   &lt;a href=&quot;https://www.lianxh.cn/KC.html&quot;&gt;主页&lt;/a&gt;  ||  &lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;推文&lt;/a&gt; || &lt;a href=&quot;https://www.zhihu.com/people/arlionn/&quot;&gt;知乎&lt;/a&gt; || &lt;a href=&quot;https://space.bilibili.com/546535876&quot;&gt;B 站&lt;/a&gt; || &lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;在线课堂&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/news/46917f1076104.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/lianxhtop00-400.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;New！&lt;/font&gt; &lt;strong&gt;搜推文，找资料，用 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;/strong&gt;&lt;br&gt;
安装： &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;br&gt;
使用： &lt;code&gt;lianxh 合成控制&lt;/code&gt;&lt;br&gt;
       &lt;code&gt;lianxh DID + 多期, w&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lianxh.cn/details/1543.html&quot;&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefinedlianxh_smodel_001.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;作者&lt;/strong&gt;：王胜文 (山东财经大学)&lt;br&gt;
&lt;strong&gt;邮箱&lt;/strong&gt;：&lt;a href=&quot;mailto:wangs704@outlook.com&quot;&gt;wangs704@outlook.com&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;编者按&lt;/strong&gt;：本文编译自「&lt;a href=&quot;https://www.jamelsaadaoui.com/illustrating-the-consequences-of-not-modeling-common-factors/&quot;&gt;Illustrating the consequences of modeling common factors with Stata (Updated with xtdcce2)&lt;/a&gt;」，特此致谢！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title&lt;/strong&gt;：Stata：共同因子解读及 xtdcce2 命令应用&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keywords&lt;/strong&gt;：汇率，共同因素，混合均值组，xtdcce2&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;1. 前言&lt;/h2&gt;
&lt;p&gt;这篇文章的灵感来源于与 Hiro Ito、Eric Clower 和 Kamila Kuziemska-Pawlak 的精彩讨论。&lt;/p&gt;
&lt;p&gt;本文作者 Jamel 在 2015 年撰写了一篇论文 &lt;a href=&quot;https://doi.org/10.1016/j.econmod.2015.02.007&quot;&gt;Global Imbalances: Should We Use Fundamental Equilibrium Exchange Rates?&lt;/a&gt;，并试图回答以下问题：是否应该使用基本均衡汇率来减少全球失衡？&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;2. 正文&lt;/h2&gt;
&lt;p&gt;这篇论文是对 Zhou (1993) 的论文 &lt;a href=&quot;https://link.springer.com/article/10.1007/BF01000519&quot;&gt;Fundamental Equilibrium Exchange Rates and Exchange Rate Dynamics&lt;/a&gt; 的回应。Zhou 认为，汇率不会恢复到其均衡值，因为汇率可以通过购买力平价或费用支出模型进行估计。&lt;/p&gt;
&lt;p&gt;毕竟，如果这些均衡汇率对实际汇率具有任何预测性，那么当前的研究为何将它们视为均衡值呢？均衡汇率只是理想的汇率反事实值。然而，本研究暂时不会深入探讨这些理论问题。相对而言，本研究将展示不引入共同因素的后果，以及这对预测模型可能产生的重要影响。&lt;/p&gt;
&lt;p&gt;本研究中使用的数据集和代码可以在 &lt;a href=&quot;https://github.com/JamelSaadaoui&quot;&gt;GitHub&lt;/a&gt; 上获取。同时，本研究使用以下 Stata 命令进行 &lt;a href=&quot;https://ideas.repec.org/c/boc/bocode/s456868.html&quot;&gt;Pooled Mean Group&lt;/a&gt; (混合均值组) 估计。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. ssc install xtpmg, replace
. lxhuse xrdynamics, clear 
. xtpmg d.logreer d.logfeer, lr(l.logreer logfeer) ec(ec) replace pmg full

Panel Variable (i): cn                          Number of obs      =       728
Time Variable (t): datayear                     Number of groups   =        26
                                                Obs per group: min =        28
                                                               avg =      28.0
                                                               max =        28
                                                Log Likelihood     =   1169.86
------------------------------------------------------------------------------
   D.logreer | Coefficient  Std. err.      z    P&amp;gt;|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
ec           |
     logfeer |      0.643      0.062    10.32   0.000        0.521       0.765
-------------+----------------------------------------------------------------
cn_1         |
          ec |     -0.236      0.126    -1.88   0.060       -0.482       0.010
             |
     logfeer |
         D1. |      0.284      0.153     1.85   0.064       -0.016       0.584
             |
       _cons |      0.421      0.235     1.79   0.073       -0.039       0.881
-------------+----------------------------------------------------------------
cn_2         |
          ec |     -0.119      0.068    -1.75   0.080       -0.253       0.014
             |
     logfeer |
         D1. |     -0.015      0.060    -0.26   0.797       -0.132       0.101
             |
       _cons |      0.192      0.121     1.59   0.112       -0.045       0.429
-------------+----------------------------------------------------------------
cn_3         |
          ec |     -0.198      0.091    -2.18   0.029       -0.376      -0.020
             |
     logfeer |
         D1. |      0.057      0.182     0.31   0.755       -0.300       0.413
             |
       _cons |      0.329      0.171     1.93   0.054       -0.006       0.663
-------------+----------------------------------------------------------------
……
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;接下来，本文使用以下代码生成残差项，并将生成的残差项与实际汇率变化的观测值进行对比，最终生成了下图：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. xtline d.logreer yhat
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/B595_Fig02_%E8%83%9C%E6%96%87.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;红色线条的预测结果符合预期；然而，我们希望使用以下命令来测试残差项的横截面相关性 (样本中包含欧元区国家)：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. ssc install xtcdf, replace
. xtcdf residuals

xtcd test on variables residuals
Panelvar: cn
Timevar: datayear
------------------------------------------------------------------------------+
    Variable    |  CD-test   p-value   average joint T | mean ρ   mean abs(ρ) |
----------------+--------------------------------------+----------------------|
   residuals    +  1.256      0.209         28.00      +  0.01       0.22     | 
------------------------------------------------------------------------------+
 Notes: Under the null hypothesis of cross-section independence, CD ~ N(0,1)
        P-values close to zero indicate data are correlated across panel groups.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;通过上述结果可以发现，拟合效果良好，但 &lt;a href=&quot;https://ourworldindata.org/coronavirus&quot;&gt;CD 检验&lt;/a&gt; 的 $p$ 值仅为 20.9%，与实际值相比可能偏低。该数据集属于平衡面板，且 T=28 (年)。&lt;/p&gt;
&lt;p&gt;本文通过在短期和长期关系中，采用被解释变量和解释变量的横截面平均值，来估计观察汇率与均衡汇率之间的相同关系。使用的代码如下：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. xtpmg d.logreer d.logfeer d.logreer_cs d.logfeer_cs,  ///
&amp;gt;         lr(l.logreer logfeer l.logreer_cs logfeer_cs) ///
&amp;gt;         ec(ec) replace pmg full


Panel Variable (i): cn                          Number of obs      =       728
Time Variable (t): datayear                     Number of groups   =        26
                                                Obs per group: min =        28
                                                               avg =      28.0
                                                               max =        28
                                                Log Likelihood     =  1253.734
------------------------------------------------------------------------------
   D.logreer | Coefficient  Std. err.      z    P&amp;gt;|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
ec           |
     logfeer |      0.738      0.057    12.85   0.000        0.625       0.850
             |
  logreer_cs |
         L1. |     -0.028      0.161    -0.18   0.860       -0.343       0.286
             |
  logfeer_cs |     -0.187      0.117    -1.60   0.109       -0.416       0.042
-------------+----------------------------------------------------------------
cn_1         |
          ec |     -0.189      0.113    -1.68   0.093       -0.411       0.032
             |
     logfeer |
         D1. |      0.351      0.145     2.41   0.016        0.066       0.636
             |
  logreer_cs |
         D1. |      3.830      1.354     2.83   0.005        1.175       6.484
             |
  logfeer_cs |
         D1. |     -2.945      1.145    -2.57   0.010       -5.190      -0.701
             |
       _cons |      0.430      0.283     1.52   0.129       -0.126       0.986
-------------+----------------------------------------------------------------
cn_2         |
          ec |     -0.112      0.057    -1.98   0.047       -0.224      -0.001
             |
     logfeer |
         D1. |     -0.021      0.057    -0.36   0.717       -0.132       0.091
             |
  logreer_cs |
         D1. |     -0.139      0.126    -1.10   0.271       -0.386       0.108
             |
  logfeer_cs |
         D1. |     -0.136      0.102    -1.33   0.182       -0.336       0.064
             |
       _cons |      0.246      0.144     1.71   0.088       -0.037       0.528
-------------+----------------------------------------------------------------
……
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;接下来，本文使用以下代码再次生成预测值，并将其与实际汇率变化的观测值绘制成图：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. capture drop yhat
. gen yhat = .
. forval cn = 1/26 {
  2.     predict temp if cn ==`cn&#39;, eq(cn_`cn&#39;)
  3.     replace yhat = temp if cn == `cn&#39;
  4.     drop temp
  5. }
. capture drop residuals_cs
. gen residuals_cs = d.logreer - yhat
. xtline d.logreer yhat
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/B595_Fig05_%E8%83%9C%E6%96%87.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;现在，这种模式似乎更适合一些国家，比如阿根廷和哥伦比亚。&lt;/p&gt;
&lt;p&gt;正如论文 &lt;a href=&quot;https://ourworldindata.org/coronavirus&quot;&gt;Identifying Exchange Rate Common Factors&lt;/a&gt; 中所阐述的观点，因为交易所中的某些共同因素对金融一体化的影响变得越来越大。&lt;/p&gt;
&lt;p&gt;所以，本文再一次测试了残差的横截面相关性:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. xtcdf residuals_cs

xtcd test on variables residuals_cs
Panelvar: cn
Timevar: datayear
------------------------------------------------------------------------------+
    Variable    |  CD-test   p-value   average joint T | mean ρ   mean abs(ρ) |
----------------+--------------------------------------+----------------------|
  residuals_cs  +  .162       0.871         28.00      +  0.00       0.21     | 
------------------------------------------------------------------------------+
 Notes: Under the null hypothesis of cross-section independence, CD ~ N(0,1)
        P-values close to zero indicate data are correlated across panel groups.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;可以发现，CD 检验的 $p$ 值从 20% 上升到 80%。所以，在这个例子中，由“残差的横截面相关性”引起的问题，已经顺利得到解决。&lt;/p&gt;
&lt;p&gt;在 Rodolphe Desbordes 和 Jan Ditzen 精彩的讨论之后，我还想在横截面平均值中添加几个滞后项，以此检验对横截面的影响。但是，Rodolphe 强调这可能会影响最终的估计结果。&lt;/p&gt;
&lt;p&gt;最近，我有机会在办公室再次见到 Jan，我们讨论了他在 Stata 期刊上发表的关于这个问题的论文：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ditzen, J. (2018). Estimating dynamic common-correlated effects in Stata. The Stata Journal, 18(3), 585-617. &lt;a href=&quot;https://journals.sagepub.com/doi/pdf/10.1177/1536867X1801800306&quot;&gt;-PDF-&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我们运行下面的代码，进行指数估算，并检验变量横截面的相关性：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. xtcse2 logreer logfeer

Panel Variable (i): cn
Time Variable (t): datayear
Estimation of Cross-Sectional Exponent (alpha)
----------------------------------------------------------------
       variable|     alpha   Std. Err.    [95% Conf. Interval]
---------------+------------------------------------------------
        logreer|  .4638829   .0566748     .3528023    .5749635
        logfeer|  .6589229   .0404036     .5797333    .7381124
----------------------------------------------------------------
0.5 &amp;lt;= alpha &amp;lt; 1 implies strong cross-sectional dependence.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;可以发现，这些变量可能受到了某些横截面相关性的影响。&lt;/p&gt;
&lt;p&gt;现在，研究将使用 &lt;code&gt;xtdcce2&lt;/code&gt; 命令来估计 PMG 模型。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. xtdcce2 d.logreer d.logfeer, lr(L.logreer logfeer) ///
&amp;gt;         p(L.logreer logfeer) cross(_all) cr_lags(0)  exponent

Panel Variable (i): cn                           Number of obs     =        728
Time Variable (t): datayear                      Number of groups  =         26
Degrees of freedom per group:                    Obs per group:    
 without cross-sectional avg. min   = 24                       min =         28
                              max   = 24                       avg =         28
 with cross-sectional avg.    min   = 22                       max =         28
                              max   = 22
Number of                                        F(106, 622)       =       4.72
 cross-sectional lags               0 to 0       Prob &amp;gt; F          =       0.00
 variables in mean group regression = 28         R-squared         =       0.55
 variables partialled out           = 78         Adj. R-squared    =       0.48
                                                 Root MSE          =       0.07
-------------------------------------------------------------------------------
      D.logreer|     Coef.   Std. Err.      z    P&amp;gt;|z|     [95% Conf. Interval]
---------------+---------------------------------------------------------------
 Short Run Est.|
---------------+---------------------------------------------------------------
   Mean Group: |
      D.logfeer|  .1980608   .0541099    3.66    0.000      .0920074   .3041142
---------------+---------------------------------------------------------------
 Adjust. Term  |
---------------+---------------------------------------------------------------
   Pooled:     |
      L.logreer|  -.318621   .0932028   -3.42    0.001     -.5012951  -.1359469
---------------+---------------------------------------------------------------
 Long Run Est. |
---------------+---------------------------------------------------------------
   Pooled:     |
        logfeer|   .579443   .2636656    2.20    0.028      .0626679   1.096218
-------------------------------------------------------------------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;由于估计命令的算法略有不同，所以导致不同模型的结果也有些不同。更多详情和示例请参阅 &lt;a href=&quot;https://journals.sagepub.com/doi/pdf/10.1177/1536867X1801800306&quot;&gt;Ditzen (2021)&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;在样本中，我们剔除了 78 个变量 (其中有 26 个常数，logreer_cs 和 logfeer_cs 在时间单位第 T 期中的横截面平均值，26×2×1)。&lt;/p&gt;
&lt;p&gt;在均值组回归中变量的数量为 28 (26 个 D.logfeer 的短期系数；以及 logreer 和 logfeer 的 2 个截面平均变量)。CD 测试的 $p$ 值为 75%。&lt;/p&gt;
&lt;p&gt;更多关于“剔除变量以消除影响”的论文，可以查阅 &lt;a href=&quot;https://journals.sagepub.com/doi/pdf/10.1177/1536867X211000004&quot;&gt;Testing for slope heterogeneity in Stata&lt;/a&gt;，以及 &lt;a href=&quot;https://arxiv.org/ftp/arxiv/papers/2112/2112.01486.pdf&quot;&gt;Simple Alternatives to the Common Correlated Effects Model&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;现在，我在横截面平均值中添加了两个滞后项：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. xtdcce2 d.logreer d.logfeer, lr(L.logreer logfeer) ///
&amp;gt;         p(L.logreer logfeer) cross(_all) cr_lags(2) exponent

Panel Variable (i): cn                           Number of obs     =        676
Time Variable (t): datayear                      Number of groups  =         26
Degrees of freedom per group:                    Obs per group:    
 without cross-sectional avg. min   = 22                       min =         26
                              max   = 22                       avg =         26
 with cross-sectional avg.    min   = 16                       max =         26
                              max   = 16
Number of                                        F(210, 466)       =       1.70
 cross-sectional lags               2 to 2       Prob &amp;gt; F          =       0.00
 variables in mean group regression = 28         R-squared         =       0.57
 variables partialled out           = 182        Adj. R-squared    =       0.37
                                                 Root MSE          =       0.07
-------------------------------------------------------------------------------
      D.logreer|     Coef.   Std. Err.      z    P&amp;gt;|z|     [95% Conf. Interval]
---------------+---------------------------------------------------------------
 Short Run Est.|
---------------+---------------------------------------------------------------
   Mean Group: |
      D.logfeer|  .2203299   .0586742    3.76    0.000      .1053305   .3353293
---------------+---------------------------------------------------------------
 Adjust. Term  |
---------------+---------------------------------------------------------------
   Pooled:     |
      L.logreer| -.2919711   .0964745   -3.03    0.002     -.4810577  -.1028846
---------------+---------------------------------------------------------------
 Long Run Est. |
---------------+---------------------------------------------------------------
   Pooled:     |
        logfeer|  .6604173   .2884739    2.29    0.022      .0950189   1.225816
-------------------------------------------------------------------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这里，我们剔除了 182 个变量 (其中包含 26 个常数，logreer_cs 和 logfeer_cs 在时间单位第 T 期、T+1 期、T+2 期中的横截面平均值，26×2×3)。在均值组回归中变量的数量为 28 (26 个 D.logfeer 的短期系数；以及 logreer 和 logfeer 的 2 个截面平均变量)。CD 测试的 $p$ 值为 48.4%。&lt;/p&gt;
&lt;p&gt;接下来，本文在完成上面的估计之后，对横截面依赖性的强度进行了检验：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-stata&quot;&gt;. xtcd2, pesaran cdw contour(abs) reps(50)

Testing for weak cross-sectional dependence (CSD)
   H0: weak cross-section dependence
   H1: strong cross-section dependence
--------------------------------------------
               |    CD            CDw
---------------+----------------------------
residuals      |    -0.70       -0.47
               |  (0.484)     (0.636)
--------------------------------------------
p-values in parenthesis.
References
  CD:        Pesaran (2015, 2021)
  CDw:       Juodis, Reese (2021)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这些结论在本质上与横截面平均值较少的结论相类似。想要了解更多关于实证检验的常规因素，请查看：&lt;a href=&quot;https://www.jamelsaadaoui.com/panel-data-econometrics-common-factor-analysis-for-empirical-researchers-update/&quot;&gt;Panel Data Econometrics: Common Factor Analysis for Empirical Researchers&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;3. Jamel Saadaoui 个人简介&lt;/h2&gt;
&lt;p&gt;本文作者 Jamel Saadaoui 是一名社会科学领域的研究员，专注于与国际经济学相关的多个课题。Jamel 有时从宏观角度撰写关于概率论、哲学、经济学及其他主题的文章，最近对地缘政治局势与经济发展之间的相互作用尤为感兴趣。&lt;/p&gt;
&lt;p&gt;自 2024 年起，Jamel 在巴黎第八大学担任经济学全职教授，并在 &lt;a href=&quot;https://sites.google.com/site/up8led/research&quot;&gt;LED 实验室&lt;/a&gt; 以及&lt;a href=&quot;https://iee.univ-paris8.fr/&quot;&gt;欧洲研究所&lt;/a&gt;从事科研活动。此外，Jamel 还被选为 2016 至 2024 年&lt;a href=&quot;https://conseil-national-des-universites.fr/cnu/#/&quot;&gt;国家大学理事会&lt;/a&gt;的成员。Jamel 的&lt;a href=&quot;https://www.jamelsaadaoui.com/wp-content/uploads/2024/06/CV_Jamel_Saadaoui_OL.pdf&quot;&gt;简历&lt;/a&gt;和邮箱：&lt;a href=&quot;mailto:jamelsaadaoui@gmail.com&quot;&gt;jamelsaadaoui@gmail.com&lt;/a&gt; 。&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2&gt;4. 相关推文&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note：产生如下推文列表的 Stata 命令为：&lt;br&gt;
  &lt;code&gt;lianxh 论文复现, m&lt;/code&gt;&lt;br&gt;
安装最新版 &lt;code&gt;lianxh&lt;/code&gt; 命令：&lt;br&gt;
  &lt;code&gt;ssc install lianxh, replace&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/51.html&quot;&gt;论文重现&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;刘依云, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1190.html&quot;&gt;论文复现：土豆对人口与城市化的贡献-连续DID应用&lt;/a&gt;, 连享会 No.1190.&lt;/li&gt;
&lt;li&gt;刘峒杉, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1459.html&quot;&gt;110篇经济学政治学论文复现代码、数据和复现报告&lt;/a&gt;, 连享会 No.1459.&lt;/li&gt;
&lt;li&gt;连玉君, 陈鑫梅, 2020, &lt;a href=&quot;https://www.lianxh.cn/details/124.html&quot;&gt;可重复性研究：如何保证你的研究结果可重现？&lt;/a&gt;, 连享会 No.124.&lt;/li&gt;
&lt;li&gt;邹恬华, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/928.html&quot;&gt;Stata论文复现：做一个优雅的码农&lt;/a&gt;, 连享会 No.928.&lt;/li&gt;
&lt;li&gt;郭思媛, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1443.html&quot;&gt;论文复现时如何与原文作者沟通？&lt;/a&gt;, 连享会 No.1443.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/31.html&quot;&gt;论文写作&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;刘帅, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/831.html&quot;&gt;Stata论文复现：女性领导人当选是否有助于更多女性从政-RD&lt;/a&gt;, 连享会 No.831.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;倍分法DID&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;刘梦蝶, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1363.html&quot;&gt;DID大餐：49 篇 QJE 论文汇总（2018-2022）&lt;/a&gt;, 连享会 No.1363.&lt;/li&gt;
&lt;li&gt;刘淑云, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1197.html&quot;&gt;论文复现：低碳转型冲击就业吗？&lt;/a&gt;, 连享会 No.1197.&lt;/li&gt;
&lt;li&gt;匡宇驰, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1454.html&quot;&gt;经济学家知错必改吗？AER复现类论文的影响&lt;/a&gt;, 连享会 No.1454.&lt;/li&gt;
&lt;li&gt;吕卓阳, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/730.html&quot;&gt;Stata 论文复现：Temperature Shocks and Economic Growth&lt;/a&gt;, 连享会 No.730.&lt;/li&gt;
&lt;li&gt;吕卓阳, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/726.html&quot;&gt;Stata 论文复现：儿童权利公约对儿童健康的影响&lt;/a&gt;, 连享会 No.726.&lt;/li&gt;
&lt;li&gt;吕大兴, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1145.html&quot;&gt;论文复现：基于组级纵向数据评估政策的试验模拟方法&lt;/a&gt;, 连享会 No.1145.&lt;/li&gt;
&lt;li&gt;吴奕玮, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1316.html&quot;&gt;论文复现：引入注意力的考虑集模型-alogit&lt;/a&gt;, 连享会 No.1316.&lt;/li&gt;
&lt;li&gt;姚永健, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1185.html&quot;&gt;论文复现： 家庭财富冲击会影响生产力吗？&lt;/a&gt;, 连享会 No.1185.&lt;/li&gt;
&lt;li&gt;孙晓艺, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1371.html&quot;&gt;论文复现：面板变系数模型及其在工资溢价和教育回报中的应用&lt;/a&gt;, 连享会 No.1371.&lt;/li&gt;
&lt;li&gt;张蛟蛟, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/911.html&quot;&gt;Stata论文复现：社科领域Top5期刊复现资料&lt;/a&gt;, 连享会 No.911.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;断点回归RDD&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;张迪, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1054.html&quot;&gt;Stata论文复现：适用于小样本的RDD&lt;/a&gt;, 连享会 No.1054.&lt;/li&gt;
&lt;li&gt;徐安宇, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/1131.html&quot;&gt;Stata论文复现：政策评估中的交互效应&lt;/a&gt;, 连享会 No.1131.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/43.html&quot;&gt;Stata命令&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;李原, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1370.html&quot;&gt;Stata：可重复研究中的版本控制问题-require命令&lt;/a&gt;, 连享会 No.1370.&lt;/li&gt;
&lt;li&gt;李沣航, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1471.html&quot;&gt;论文推介：MS期刊的论文可复现吗？&lt;/a&gt;, 连享会 No.1471.&lt;/li&gt;
&lt;li&gt;李烨阳, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1142.html&quot;&gt;论文复现：包含交互项的假设检验&lt;/a&gt;, 连享会 No.1142.&lt;/li&gt;
&lt;li&gt;杨云帆, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1321.html&quot;&gt;论文复现：多期DID应用之地方选举的兴衰&lt;/a&gt;, 连享会 No.1321.&lt;/li&gt;
&lt;li&gt;梁淑珍, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/993.html&quot;&gt;论文复现：顶刊JF中的因子分析-谁更容易当CEO？&lt;/a&gt;, 连享会 No.993.&lt;/li&gt;
&lt;li&gt;王珞嘉, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/917.html&quot;&gt;如何永久保存论文中的链接？&lt;/a&gt;, 连享会 No.917.&lt;/li&gt;
&lt;li&gt;王颖, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1239.html&quot;&gt;论文复现：使用因果森林估计处理效应&lt;/a&gt;, 连享会 No.1239.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/38.html&quot;&gt;IV-GMM&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;秦范, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/912.html&quot;&gt;Stata论文复现：份额移动法工具变量(Shift-Share IV)&lt;/a&gt;, 连享会 No.912.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;罗兰若, 2022, &lt;a href=&quot;https://www.lianxh.cn/details/866.html&quot;&gt;Stata论文复现：高维线性回归的变量筛选-baing-ocmt&lt;/a&gt;, 连享会 No.866.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项-调节-中介&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;肖志文, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1492.html&quot;&gt;interflex：交乘项值得信任吗？陷进及应对方法&lt;/a&gt;, 连享会 No.1492.&lt;/li&gt;
&lt;li&gt;艾卫冕, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/774.html&quot;&gt;Stata论文复现：累进税率真的能减少不平等吗？&lt;/a&gt;, 连享会 No.774.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;专题：&lt;a href=&quot;https://www.lianxh.cn/blogs/35.html&quot;&gt;Stata资源&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;郭盼亭, 张少鹏, 2021, &lt;a href=&quot;https://www.lianxh.cn/details/691.html&quot;&gt;Stata搜索神器：songbl命令详解&lt;/a&gt;, 连享会 No.691.&lt;/li&gt;
&lt;li&gt;陈卓然, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1302.html&quot;&gt;JF论文复现：金融学术圈的女性们&lt;/a&gt;, 连享会 No.1302.&lt;/li&gt;
&lt;li&gt;陈卓然, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1209.html&quot;&gt;论文复现：消费券的经济效果评估&lt;/a&gt;, 连享会 No.1209.&lt;/li&gt;
&lt;li&gt;陈晓淇, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1151.html&quot;&gt;论文复现：装模做样的IV&lt;/a&gt;, 连享会 No.1151.&lt;/li&gt;
&lt;li&gt;陈荟文, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1449.html&quot;&gt;经济学顶刊论文可复现吗？&lt;/a&gt;, 连享会 No.1449.&lt;/li&gt;
&lt;li&gt;马雨驰, 2023, &lt;a href=&quot;https://www.lianxh.cn/details/1180.html&quot;&gt;如何整理一份规范的论文复现文档？&lt;/a&gt;, 连享会 No.1180.&lt;/li&gt;
&lt;li&gt;黄晨晨, 2024, &lt;a href=&quot;https://www.lianxh.cn/details/1496.html&quot;&gt;用因子模型克服遗漏变量偏误：论文复现和解读&lt;/a&gt;, 连享会 No.1496.&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/undefined01-%E6%A8%AA%E7%89%88%E6%B5%B7%E6%8A%A5.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2&gt;资源共享&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/share.html&quot;&gt;连享会资料 ……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线视频&lt;/strong&gt;：&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;lianxh-class.cn&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443345&quot;&gt;Stata 33 讲&lt;/a&gt;，100 万+ 播放，Stata 入门必备，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/view/1527932289698443344&quot;&gt;直击面板数据模型&lt;/a&gt;，10 万+ 播放，白话面板模型，公开课&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lianxh-class.cn/&quot;&gt;… more …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;论文复现和数据&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/e87e5976686d5.html&quot;&gt;学术论文重现网站大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/0b65fd5165c2c.html&quot;&gt;常用数据库&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/6f06c914acde8.html&quot;&gt;人文社科开放数据库&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;主题分类&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/all.html&quot;&gt;所有分类&lt;/a&gt;&lt;/strong&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/17.html&quot;&gt;Stata教程&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/22.html&quot;&gt;结果输出&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/24.html&quot;&gt;绘图&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/25.html&quot;&gt;数据处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/32.html&quot;&gt;回归分析&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/20.html&quot;&gt;面板数据&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/21.html&quot;&gt;交乘项&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/19.html&quot;&gt;因果推断&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/39.html&quot;&gt;DID&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/40.html&quot;&gt;RDD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/blogs/30.html&quot;&gt;Markdown&lt;/a&gt;  | &lt;a href=&quot;https://www.lianxh.cn/blogs/23.html&quot;&gt;工具软件&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/blogs/47.html&quot;&gt;机器学习&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/blogs/33.html&quot;&gt;其它&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;热门推文&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/3849f237b6d36.html&quot;&gt;Stata：DID 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/32ae13ec789a1.html&quot;&gt;稳健性检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/cf8bd8363200d.html&quot;&gt;安慰剂检验！&lt;/a&gt; | &lt;a href=&quot;https://www.lianxh.cn/news/224e2b4e170e4.html&quot;&gt;内生性！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.lianxh.cn/news/bf27906144b4e.html&quot;&gt;面板数据模型&lt;/a&gt; |  &lt;a href=&quot;https://www.lianxh.cn/news/a7a8e613b2699.html&quot;&gt;聚类调整后的标准误&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的老师 / 亲爱的同学们：&lt;br&gt;
连享会致力于不断优化和丰富课程内容，以确保每位学员都能获得最有价值的学习体验。为了更精准地满足您的学习需求，我们诚挚地邀请您参与到我们的课程规划中来。&lt;br&gt;
请您在下面的问卷中，分享您 &lt;strong&gt;感兴趣的学习主题或您希望深入了解的知识领域&lt;/strong&gt; 。您的每一条建议都是我们宝贵的资源，将直接影响到我们课程的改进和创新。&lt;br&gt;
我们期待您的反馈，因为您的参与和支持是我们不断前进的动力。感谢您抽出宝贵时间，与我们共同塑造更加精彩的学习旅程！&lt;a href=&quot;https://www.wjx.cn/vm/YgPfdsJ.aspx#&quot;&gt;https://www.wjx.cn/vm/YgPfdsJ.aspx#&lt;/a&gt; 再次感谢大家宝贵的意见！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E6%84%8F%E8%A7%81%E5%BE%81%E9%9B%86.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;关于我们&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Stata连享会&lt;/strong&gt; 由中山大学连玉君老师团队创办，定期分享实证分析经验。&lt;a href=&quot;https://www.lianxh.cn/about.html&quot;&gt;more……&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;扫码加入连享会微信群，提问交流更方便&lt;br&gt;
&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/%E8%BF%9E%E4%BA%AB%E4%BC%9A-%E5%AD%A6%E4%B9%A0%E4%BA%A4%E6%B5%81%E5%BE%AE%E4%BF%A1%E7%BE%A4001-150.jpg&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/Lianxh_%E8%A3%85%E9%A5%B0%E9%BB%84%E7%BA%BF.png&quot; alt=&quot;&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
</description><link>https://www.lianxh.cn/details/1520.html</link><guid isPermaLink="false">https://www.lianxh.cn/details/1520.html</guid><pubDate>Thu, 19 Dec 2024 16:00:00 GMT</pubDate><author>王胜文</author></item></channel></rss>