<?xml version="1.0" encoding="UTF-8"?><rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>æ˜é‡‘ - æ”¶è—é›†</title><link>https://juejin.im/user/1697301682482439/collections</link><atom:link href="http://rss.datuan.dev/juejin/collections/1697301682482439" rel="self" type="application/rss+xml"></atom:link><description>æ˜é‡‘ï¼ŒæŒ‡å®šç”¨æˆ·æ•´ä¸ªæ”¶è—é›† - Powered by RSSHub</description><generator>RSSHub</generator><webMaster>contact@rsshub.app (RSSHub)</webMaster><language>en</language><lastBuildDate>Tue, 25 Mar 2025 00:37:40 GMT</lastBuildDate><ttl>5</ttl><item><title>æ•²äº†å‡ ä¸‡è¡Œæºç åï¼Œæˆ‘ç»™Mybatisç”»äº†å¼ â€œå…¨åœ°å›¾â€</title><description>&lt;p&gt;ä½œè€…ï¼šå°å‚…å“¥
&lt;br&gt;åšå®¢ï¼š&lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fbugstack.cn&quot; target=&quot;_blank&quot; title=&quot;https://bugstack.cn&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;bugstack.cn&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 data-id=&quot;heading-0&quot;&gt;ä¸€ã€è¯´è¯´ï¼šâ€œäº§â€åæ„Ÿå—&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;ğŸ¤”æœ‰äººè·Ÿæˆ‘è¯´ï¼Œæ‰‹å†™Springéš¾ï¼Œæ‰‹å†™Mybatisæ˜“ï¼Ÿ&lt;/code&gt;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
    &lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aba17e46195f45bfad47d019a1aad500~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp&quot; width=&quot;180px&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;ä¸€è‚¡ç¥å¥‡çš„åŠ›é‡&lt;/strong&gt;ï¼Œè®©æˆ‘åœ¨&lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fbugstack.cn%2Fmd%2Fspring%2Fdevelop-spring%2F2021-05-16-%25E7%25AC%25AC1%25E7%25AB%25A0%25EF%25BC%259A%25E5%25BC%2580%25E7%25AF%2587%25E4%25BB%258B%25E7%25BB%258D%25EF%25BC%258C%25E6%2589%258B%25E5%2586%2599Spring%25E8%2583%25BD%25E7%25BB%2599%25E4%25BD%25A0%25E5%25B8%25A6%25E6%259D%25A5%25E4%25BB%2580%25E4%25B9%2588%25EF%25BC%259F.html&quot; target=&quot;_blank&quot; title=&quot;https://bugstack.cn/md/spring/develop-spring/2021-05-16-%E7%AC%AC1%E7%AB%A0%EF%BC%9A%E5%BC%80%E7%AF%87%E4%BB%8B%E7%BB%8D%EF%BC%8C%E6%89%8B%E5%86%99Spring%E8%83%BD%E7%BB%99%E4%BD%A0%E5%B8%A6%E6%9D%A5%E4%BB%80%E4%B9%88%EF%BC%9F.html&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;æ‰‹å†™å®Œ Spring å&lt;/a&gt;ï¼Œå¼€å§‹å¯¹ &lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fbugstack.cn%2Fmd%2Fspring%2Fdevelop-mybatis%2F2022-03-20-%25E7%25AC%25AC1%25E7%25AB%25A0%25EF%25BC%259A%25E5%25BC%2580%25E7%25AF%2587%25E4%25BB%258B%25E7%25BB%258D%25EF%25BC%258C%25E6%2589%258B%25E5%2586%2599Mybatis%25E8%2583%25BD%25E7%25BB%2599%25E4%25BD%25A0%25E5%25B8%25A6%25E6%259D%25A5%25E4%25BB%2580%25E4%25B9%2588%25EF%25BC%259F.html&quot; target=&quot;_blank&quot; title=&quot;https://bugstack.cn/md/spring/develop-mybatis/2022-03-20-%E7%AC%AC1%E7%AB%A0%EF%BC%9A%E5%BC%80%E7%AF%87%E4%BB%8B%E7%BB%8D%EF%BC%8C%E6%89%8B%E5%86%99Mybatis%E8%83%BD%E7%BB%99%E4%BD%A0%E5%B8%A6%E6%9D%A5%E4%BB%80%E4%B9%88%EF%BC%9F.html&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;Mybatis ä¸‹æ‰‹&lt;/a&gt;ã€‚æœ€å¼€å§‹æˆ‘ä¹Ÿè§‰å¾— Spring é‚£ä¹ˆå¤§éƒ½å†™ä¸‹æ¥äº†ï¼ŒMybatis èƒ½æœ‰å¤šéš¾ï¼Ÿä½†éšç€æˆ‘å¼€å§‹æ¢³ç†ã€æ‹†è§£ã€ç»†åŒ–ï¼ŒMybatis æ¡†æ¶æºç çš„æ¶æ„æ¨¡å‹åå‘ç°ï¼Œ&lt;code&gt;äº‹æƒ…æ²¡é‚£ä¹ˆç®€å•&lt;/code&gt;ï¼&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆäº‹æƒ…æ²¡é‚£ä¹ˆç®€å•ï¼Ÿå› ä¸ºå¦‚æœè¯´åªæ˜¯ä¸ºäº†ä½“ç°å‡ºä¸€ä¸ª ORM æ¡†æ¶çš„æ ¸å¿ƒç»“æ„å’ŒåŠŸèƒ½ï¼Œ&lt;strong&gt;7/8&lt;/strong&gt; ä¸ªç±»å°±èƒ½å®ç°å‡ºæ¥ã€‚ä½†å‡å¦‚æ˜¯å®ç°ä¸€ä¸ªå®Œæ•´çš„ä¸²è”å‡ºé‡è¦æ ¸å¿ƒè„‰ç»œæµç¨‹çš„ ORM æ¡†æ¶ï¼Œè‡³å°‘è¦åœ¨ &lt;strong&gt;100&lt;/strong&gt;ä¸ªç±»ä»¥ä¸Šï¼Œæ‰èƒ½æŠŠ Mybatis è¿™äº›åŠŸèƒ½å…¨éƒ¨ä¸²è”å‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a4f68ab22e74ad4a9b250b80c6c3da9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp&quot; alt=&quot;&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é‚£ä¸ºä»€ä¹ˆ&lt;/strong&gt;å‡ ä¸ªç±»å°±èƒ½æå®šçš„äº‹è¦ï¼Œå†™æŠŠå¼€æ•´ä¸ª Mybatis æ‰‹å†™ä¸€å †çš„ä»£ç æ¥å®ç°å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å…¶å®è¿™é‡Œæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„ç‚¹ï¼Œå°±æ˜¯ä½ å­¦ä¹ æºç çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Œ&lt;em&gt;æ˜¯ä¸ºäº†é¢è¯•ï¼Ÿ&lt;/em&gt; &lt;em&gt;ä¸ºäº†ç†Ÿæ‚‰æµç¨‹ï¼Ÿ&lt;/em&gt; &lt;em&gt;ä¸ºäº†è·Ÿé£ï¼Ÿ&lt;/em&gt; å…¶å®åœ¨å°å‚…å“¥çœ‹æ¥ï¼Œè¿™äº›éƒ½ä¸æ˜¯å­¦ä¹ æºç çš„æ ¸å¿ƒç›®çš„å’ŒæœŸå¾…çš„ç»“æœã€‚æˆ‘ä»¬å­¦ä¹ æºç æ›´å¤šçš„æ˜¯ä¸ºäº†å­¦ä¹ è¿™äº›æºç åœ¨&lt;strong&gt;é¢å¯¹å¤æ‚ç³»ç»Ÿé—®é¢˜æ—¶å€™&lt;/strong&gt;ï¼Œå¦‚ä½•è®¾è®¡å·¥ç¨‹æ¶æ„ï¼Œè¿ç”¨äº†ä»€ä¹ˆè®¾è®¡åŸåˆ™å’Œå“ªäº›è®¾è®¡æ¨¡å¼ï¼Œè€Œè¿™äº›è¿ç”¨åˆ°çš„æ€æƒ³åœ¨ä»£ç ä¸­åˆæ˜¯å¦‚ä½•è½åœ°çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·çš„ä¸œè¥¿ï¼Œæ‰æ˜¯å­¦ä¹ æºç åº”è¯¥é‡è§†çš„å†…å®¹ï¼Œè€Œä¸”è¿™ä¹Ÿæ˜¯èƒ½çœŸçš„å¸®åŠ©ç ”å‘äººå‘˜&lt;strong&gt;æé«˜ç¼–ç æ€ç»´é«˜åº¦&lt;/strong&gt;çš„ä¸œè¥¿ã€‚æ‰€ä»¥ä½ ä¼šçœ‹åˆ°å°å‚…å“¥é€æ­¥æ‹†è§£ Mybatis æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼Œé€šè¿‡æ¸è¿›å¼çš„é€æ­¥å¼€å‘å®ç°ï¼Œå±‚å±‚å±•å¼€ Mybatis çš„è®¾è®¡å’Œå®ç°çš„ç¥ç§˜é¢çº±ï¼ˆ&lt;code&gt;PSï¼šå†™è¿‡ä»¥åä¹Ÿä¸å¤ªç¥ç§˜&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;h2 data-id=&quot;heading-1&quot;&gt;äºŒã€æºç ï¼šå…¨è²Œåœ°å›¾&lt;/h2&gt;
&lt;p&gt;åœ¨å°å‚…å“¥æ‰‹å†™å®Œ Mybatis æ¡†æ¶ä»¥åï¼Œæ¢³ç†äº†ä¸€å¼ å…¨è²Œåœ°å›¾ï¼Œé¢„è§ˆæ•´ä¸ª Mybatis æ¡†æ¶çš„æ‰§è¡Œè„‰ç»œä½“ç³»ã€‚æœ‰äº†è¿™å¼ æ‰“å¼€äº†æˆ˜äº‰è¿·é›¾åœ°å›¾çš„æŒ‡å¼•ï¼Œå†å­¦ä¹ èµ·æ¥ Mybatis çš„æŠ€æœ¯ï¼Œä¹Ÿå°±å˜å¾—éå¸¸æ¸…æ™°äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9cf1787c9b4045509f17630409ad16b1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp&quot; alt=&quot;å°å‚…å“¥ Mybatis æ¡†æ¶æºç æŠ€æœ¯å…¨è²Œåœ°å›¾&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿™æ˜¯æ•´ä¸ª&lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fbugstack.cn%2Fmd%2Fspring%2Fdevelop-mybatis%2F2022-03-20-%25E7%25AC%25AC1%25E7%25AB%25A0%25EF%25BC%259A%25E5%25BC%2580%25E7%25AF%2587%25E4%25BB%258B%25E7%25BB%258D%25EF%25BC%258C%25E6%2589%258B%25E5%2586%2599Mybatis%25E8%2583%25BD%25E7%25BB%2599%25E4%25BD%25A0%25E5%25B8%25A6%25E6%259D%25A5%25E4%25BB%2580%25E4%25B9%2588%25EF%25BC%259F.html&quot; target=&quot;_blank&quot; title=&quot;https://bugstack.cn/md/spring/develop-mybatis/2022-03-20-%E7%AC%AC1%E7%AB%A0%EF%BC%9A%E5%BC%80%E7%AF%87%E4%BB%8B%E7%BB%8D%EF%BC%8C%E6%89%8B%E5%86%99Mybatis%E8%83%BD%E7%BB%99%E4%BD%A0%E5%B8%A6%E6%9D%A5%E4%BB%80%E4%B9%88%EF%BC%9F.html&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;ã€Šæ‰‹å†™ Mybatisã€‹&lt;/a&gt;çš„å…¨è²Œåœ°å›¾ï¼Œå°å‚…å“¥ä¼šå¸¦ç€å¤§å®¶é€æ­¥å®ç°è¿™é‡Œé¢çš„åŠŸèƒ½æ¨¡å—ï¼Œåˆ†ç« èŠ‚ç»†åŒ–å„ä¸ªæ¨¡å—çš„å®ç°æµç¨‹ï¼Œæœ€ç»ˆè®©è¯»è€…å®ç°å‡ºä¸€ä¸ªä¸°å¯Œã€å…¨é¢ã€ç»†è‡´çš„ ORM æ¡†æ¶ã€‚åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å‚è€ƒè¿™å¼ å›¾æ¥å¯¹ç…§æ‰‹å†™çš„ä»£ç ä»¥åŠ Mybatis çš„æºç ï¼Œè¿™æ ·æ›´åŠ æœ‰åˆ©äºå¯¹ Mybatis æ¡†æ¶çš„ç†è§£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;é€šå¸¸å¦‚æœä½ ä¸æ˜¯æ”¯ç¦»ç ´ç¢çš„æ‹¼å‡‘å¼å­¦ä¹ ï¼Œè€Œæ˜¯æˆä½“ç³»çš„å»ºè®¾è‡ªå·±çš„çŸ¥è¯†æ ˆï¼Œé‚£ä¹ˆä½ åœ¨å­¦ä¹ åï¼Œä¹Ÿä¸€å®šèƒ½æ¢³ç†å‡ºä¸€å¥—å…³äºå­¦ä¹ è¿‡å†…å®¹çš„æŠ€æœ¯åœ°å›¾ã€‚&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 data-id=&quot;heading-2&quot;&gt;ä¸‰ã€æŸ¥çœ‹ï¼šå°å†Œç›®å½•&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;ğŸ¤”è¦å¹ç‰›äº†ï¼&lt;/strong&gt; &lt;code&gt;å‚…å“¥ï¼Œæ‰‹å†™Mybatis è€Œå·²ï¼Œä½ æ€ä¹ˆæŠŠ Mybatis éƒ½æ‰‹å†™äº†ï¼&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å“ˆå“ˆå“ˆï¼Œå†™çš„çˆ½äº†ï¼Œå°±é¡ºä¾¿éƒ½ç»™æ•²äº†ï¼ŒåŒ…æ‹¬ï¼šè§£æã€ç»‘å®šã€åå°„ã€ç¼“å­˜ã€äº‹åŠ¡ï¼Œè¿™è¿˜æœ‰æ³¨è§£ã€æ•°æ®æºã€MetaObject éƒ½ç»™å¹²äº†ï¼&lt;/p&gt;
&lt;h3 data-id=&quot;heading-3&quot;&gt;1. ç›®å½•&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/55cf8877b62541548d2f327d42fcc993~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp&quot; alt=&quot;ã€Šæ‰‹å†™Mybatisã€‹å°å†Œç›®å½•ï¼š4éƒ¨åˆ†18ç« &quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åšå®¢ï¼š&lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fbugstack.cn%2F&quot; target=&quot;_blank&quot; title=&quot;https://bugstack.cn/&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;bugstack.cn&lt;/a&gt; - &lt;code&gt;åšå®¢èœå•ä¸­ Spring æ ç›®ä¸‹ -&amp;gt; æ‰‹æ’¸ Mybatis&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;è¯´æ˜ï¼šåœ¨18ç« è¯¾ç¨‹ä¸­ï¼Œä¼šé€æ­¥å¸¦ç€è¯»è€…æ‰‹å†™å‡ºä¸€å¥— Mybatis æ¡†æ¶ï¼Œå¹¶ä¸”æ˜¯ä¸€å¥—ä¸²è”æ‰€æœ‰æ ¸å¿ƒæµç¨‹çš„ Mybatis æ¡†æ¶ï¼Œé˜…è¯»å­¦ä¹ åä¼šå¯¹ ORM æºç æœ‰é€å½»æ¸…æ™°çš„äº†è§£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 data-id=&quot;heading-4&quot;&gt;2. æºç &lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e278a966b5ce4f7098bc201717bfc1d5~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp&quot; alt=&quot;ã€Šæ‰‹å†™Mybatisã€‹æºç å†…å®¹ï¼šæ¸è¿›å¼è¿­ä»£å¼€å‘&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æºç ï¼šæ¯ä¸€ä¸ªç« èŠ‚çš„ä»£ç ï¼Œéƒ½ä¼šåœ¨ä¸Šä¸€ç« èŠ‚çš„åŸºç¡€ä¸Šè¿›è¡Œæ‰©å±•å’Œè¿­ä»£ï¼Œè¿™æ ·å¯ä»¥æ›´åŠ æ¸…æ™°çš„çŸ¥æ™“ï¼Œæ¯ä¸€ä¸ªç« èŠ‚éƒ½åœ¨æ·»åŠ ä»€ä¹ˆåŠŸèƒ½ï¼Œæ”¹åŠ¨äº†å“ªäº›ä»£ç ï¼Œæ–°å¢äº†ä»€ä¹ˆæ¨¡å—ã€‚è¿™æ ·çš„æ–¹å¼èƒ½è®©å³ä½¿æ˜¯å°ç™½è¯»è€…ï¼Œä¹Ÿå¯ä»¥é€æ­¥å­¦ä¹ æŒæ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 data-id=&quot;heading-5&quot;&gt;3. è§†é¢‘(Bç«™)&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ea98a7764fd041388b2ebf9576677543~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp&quot; alt=&quot;ã€Šæ‰‹å†™Mybatisã€‹è§†é¢‘è¯¾ç¨‹ï¼šBç«™è§†é¢‘&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è§†é¢‘ï¼š&lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1nY4y1B7eT&quot; target=&quot;_blank&quot; title=&quot;https://www.bilibili.com/video/BV1nY4y1B7eT&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;www.bilibili.com/video/BV1nYâ€¦&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;è¯´æ˜ï¼šæ•´å¥—æºç ç¼–å†™å†…å®¹ï¼Œè¿˜ä¼šé™„å¸¦ç€è§†é¢‘è®²è§£ï¼Œå¸®åŠ©æœ‰æ„æ„¿å­¦ä¹  Mybatis æºç çš„ä¼™ä¼´ï¼Œå¯ä»¥å¿«é€Ÿä¸Šæ‰‹å¹¶åŠ æ·±å­¦ä¹ ç†è§£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 data-id=&quot;heading-6&quot;&gt;å››ã€åŠ å…¥ï¼šæ‰‹å†™æºç &lt;/h2&gt;
&lt;p&gt;ä¹‹æ‰€ä»¥å¼€æ”¾ä¸€éƒ¨åˆ†å°å†Œçš„æ–‡ç« å’Œå°‘é‡çš„ä»£ç ï¼Œæ˜¯ä¸ºäº†å‘Šè¯‰è¯»è€…åœ¨è·Ÿéšä¸€ä¸ªä»€ä¹ˆæ ·çš„æœ‰æŠ€æœ¯çƒ­æƒ…çš„äººåœ¨å­¦ä¹ ï¼Œèƒ½å¾—åˆ°ä»€ä¹ˆæ ·çš„æˆé•¿ã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿæ­£å› ä¸ºæˆ‘å¯¹æŠ€æœ¯çš„æŠ˜è…¾ï¼ŒğŸ˜„çœ‹ä¼¼ç‰›çš®çš„èƒ½åŠ›ï¼Œæ‰èƒ½è®©è¯»è€…æ”¾å¿ƒçš„è¿½æ±‚ã€‚ä¸€å°‘éƒ¨åˆ†çš„ä»˜è´¹ï¼Œä¹Ÿæ˜¯ä¸ºäº†æŠŠæŠ€æœ¯åˆ†äº«è¿™æ¡è·¯èµ°çš„æ›´åŠ åšå®šã€‚&lt;em&gt;å¦‚æœä¸æ˜¯ä»˜è´¹ï¼Œé‚£ä¹ˆå¤§éƒ¨åˆ†é˜…è¯»çš„å¯èƒ½éƒ½æ˜¯åˆ«äººçš„æ½¦è‰ç¬”è®°ï¼Œè€Œä¸æ˜¯æ·±åº¦çš„æ‹†è§£åˆ†æï¼Œå±•ç¤ºç»™è¯»è€…æ¥é¾™å»è„‰ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;æœ‰éœ€è¦æ ¡æ‹›ã€é¢è¯•ã€æ™‹å‡ï¼Œæƒ³æé«˜è‡ªå·±çš„æŠ€æœ¯æ·±åº¦ï¼Œä¸ºè‡ªå·±çš„èŒä¸šç”Ÿæ¶¯ç»­æœŸï¼Œå¯ä»¥é•¿ç¨³å‘å±•ï¼Œå®Œå–„è‡ªå·±çš„æŠ€æœ¯ä½“ç³»ï¼Œå¥”ç€é«˜çº§å¼€å‘å’Œæ¶æ„å¸ˆè·¯çº¿çš„ç ”å‘ä¼™ä¼´ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æºç åœ°å€&lt;/strong&gt;ï¼š&lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgitcode.net%2Fxiaofuge%2Fsmall-mybatis&quot; target=&quot;_blank&quot; title=&quot;https://gitcode.net/xiaofuge/small-mybatis&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;gitcode.net/xiaofuge/smâ€¦&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7737bff5c81943698b6ad3616a91b548~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp&quot; alt=&quot;ç•™è¨€æ¥è‡ªåŠ å…¥çŸ¥è¯†æ˜Ÿçƒï¼šç å†œä¼šé”ï¼Œä¼™ä¼´çš„è®¤å¯&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h2 data-id=&quot;heading-7&quot;&gt;äº”ã€æ€»ç»“ï¼šæˆ‘çš„ç»éªŒ&lt;/h2&gt;
&lt;p&gt;å…¶å®æˆ‘èƒ½çŸ¥é“å¤§éƒ¨åˆ†ä»äº‹å¼€å‘äººå‘˜æˆ–è€…æ­£åœ¨ä¸Šå­¦é˜¶æ®µçš„åŒå­¦ï¼Œå…¶å®å¯¹äºæºç çš„å­¦ä¹ ï¼Œéƒ½æ˜¯éå¸¸å¥½çš„æé«˜æŠ€æœ¯çš„æ–¹å¼ã€‚ä½†å…¶å®ä¸€å¤§éƒ¨åˆ†äººéƒ½ä¸çŸ¥é“å¯¹äºä¸€ä¸ªæºç æ¡†æ¶è¯¥ä»å“ªä¸‹æ‰‹ï¼Œå¾ˆå¤šæ—¶å€™å³ä½¿é˜…è¯»æºç ä¹Ÿæ˜¯æ„Ÿè§‰&lt;code&gt;æ‹¿ç»£èŠ±é’ˆæ…æ‹Œä¸€ç¼¸æ°´&lt;/code&gt;ï¼Œæ²¡å•¥æ”¶è·è¿˜å¼„çš„æŒºç–²æƒ«ğŸ˜«ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯å› ä¸ºä¸å¹³å¸¸çš„ä¸šåŠ¡éœ€æ±‚å¼€å‘æˆ–è€…è‡ªå·±å­¦ä¹ çš„æ¡ˆä¾‹ä»£ç ç›¸æ¯”ï¼Œæ¡†æ¶æºç ä¸­è¿ç”¨äº†å¤§é‡çš„&lt;strong&gt;è®¾è®¡åŸåˆ™&lt;/strong&gt;å’Œ&lt;strong&gt;è®¾è®¡æ¨¡å¼&lt;/strong&gt;å¯¹ç³»ç»ŸåŠŸèƒ½è¿›è¡Œ&lt;code&gt;è§£è€¦&lt;/code&gt;å’Œ&lt;code&gt;å®ç°&lt;/code&gt;ï¼Œä¹Ÿä½¿ç”¨äº†ä¸å°‘å¦‚&lt;code&gt;åå°„&lt;/code&gt;ã€&lt;code&gt;ä»£ç†&lt;/code&gt;ã€&lt;code&gt;å­—èŠ‚ç &lt;/code&gt;ç­‰ç›¸å…³æŠ€æœ¯ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥å¦‚æœæ²¡æœ‰å¤§ç‰›&lt;code&gt;å¸¦ç€ä½ å¼€è·¯&lt;/code&gt;ï¼Œè€Œæ˜¯è‡ªå·±ç¡¬æ‘¸ç´¢ï¼Œå…¶å®å¾ˆéš¾é‡Œæ¸…ä¸€å¥—æºç çš„å…¨éƒ¨è„‰ç»œã€‚å› ä¸ºäººåœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œæ€»éœ€è¦ä¸€ä»½ç»éªŒçš„å€Ÿé‰´ã€ç§¯ç´¯å’Œä½¿ç”¨ï¼Œæ‰€ä»¥åœ¨å­¦ä¹ æºç çš„è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯è¦å€Ÿé‰´ä»–äººçš„ç»éªŒï¼Œä¸°å¯Œçš„è‡ªå·±çš„ç¾½ç¿¼ï¼Œè€Œåå†ç”¨è¿™äº›å¥—è·¯å»å­¦ä¹ å…¶ä»–çš„æºç å†…å®¹ä¹Ÿå°±å˜å¾—å®¹æ˜“äº†ã€‚&lt;/p&gt;</description><link>https://juejin.cn/post/7111107709658726408</link><guid isPermaLink="false">https://juejin.cn/post/7111107709658726408</guid><pubDate>Mon, 20 Jun 2022 00:10:32 GMT</pubDate><author>å°å‚…å“¥</author><category>åç«¯</category><category>å‰ç«¯</category><category>é¢è¯•</category></item><item><title>å¦‚ä½•ä½¿ç”¨ Golang å®ç°ä¸€ä¸ªé«˜æ€§èƒ½çš„åˆ†å¸ƒå¼ IM</title><description>&lt;p&gt;è¿™ä¸ªé¡¹ç›®è‡ª 2021 å¹´ä¸­æ—¬å¼€å§‹, ä¸‰ç«¯å‡å¼€å‘ç”±æˆ‘ä¸€ä¸ªäººç‹¬è‡ªä¸é—´æ–­å¼€å‘ç›´åˆ°ç°åœ¨, ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€ä¸ªè€—è´¹æœ€å¤šç²¾åŠ›å»å¼€å‘åŠå­¦ä¹ çš„é¡¹ç›®. ç”±äºæˆ‘å·¥ä½œè¾ƒå¤šç©ºé—²æ—¶é—´, åŸºæœ¬ä¸Šéƒ½åœ¨å¼€å‘æœ¬é¡¹ç›®, ä»é›¶åŸºç¡€é›¶ç»éªŒå¼€å§‹, è¾¹å­¦ä¹ è¾¹å¼€å‘, æŸ¥é˜…äº†å¤§é‡èµ„æ–™, æ…¢æ…¢å¼€å‘åˆ°ç°åœ¨. ç¬¬ä¸€ç‰ˆå¾®æœåŠ¡æ¶æ„åœ¨å¼€å‘ä¸‰ä¸ªæœˆçš„æ—¶å€™åŸºæœ¬å·²ç»å®Œæˆäº†, åé¢åˆ™æ˜¯åšäº†å¾®æœåŠ¡æ¶æ„è°ƒæ•´, å’Œè¿›ä¸€æ­¥ä¼˜åŒ– IM æœåŠ¡ç»†èŠ‚, æˆªè‡³ç›®å‰(2022å¹´3æœˆ3æ—¥), è·ç¦»æˆ‘é¢„æœŸçš„ç¬¬äºŒç‰ˆ, åªå‰©ä¸‹ä¸€äº›æ”¶å°¾å·¥ä½œ(åæœŸè¡¥å……: æ”¶å°¾å¤±è´¥, é‡æ–°å¼„äº†).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœåŠ¡ç«¯æºç : &lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FGlide-IM%2FGlide-IM&quot; target=&quot;_blank&quot; title=&quot;https://github.com/Glide-IM/Glide-IM&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;GlideIM - GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Web ç«¯: &lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fglide-im%2Fglide_ts_sdk&quot; target=&quot;_blank&quot; title=&quot;https://github.com/glide-im/glide_ts_sdk&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;GlideIM - GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;åœ¨çº¿ä½“éªŒ &lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Fim.dengzii.com&quot; target=&quot;_blank&quot; title=&quot;http://im.dengzii.com&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;GlideIM&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 data-id=&quot;heading-0&quot;&gt;ä¸€. åŠŸèƒ½&lt;/h2&gt;
&lt;h3 data-id=&quot;heading-1&quot;&gt;1.1 ç”¨æˆ·ä¾§åŠŸèƒ½&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ— æ„Ÿæ‰çº¿é‡è¿, æ¶ˆæ¯åŒæ­¥&lt;/li&gt;
&lt;li&gt;ç™»å½•æ³¨å†ŒåŠä¿æŒç™»å½•&lt;/li&gt;
&lt;li&gt;ä¸€å¯¹ä¸€èŠå¤©, ç¾¤èŠ&lt;/li&gt;
&lt;li&gt;æ¶ˆæ¯æ¼«æ¸¸, å†å²è®°å½•&lt;/li&gt;
&lt;li&gt;ç¦»çº¿æ¶ˆæ¯&lt;/li&gt;
&lt;li&gt;å¤šè®¾å¤‡ç™»å½•, åŒè®¾å¤‡äº’æŒ¤ä¸‹çº¿&lt;/li&gt;
&lt;li&gt;å¤šç§ç±»å‹çš„æ¶ˆæ¯ (å›¾ç‰‡, è¯­éŸ³ç­‰, ç”±å®¢æˆ·ç«¯å®šä¹‰)&lt;/li&gt;
&lt;li&gt;æ¶ˆæ¯æ’¤å›&lt;/li&gt;
&lt;li&gt;è”ç³»äººç®¡ç†, ç¾¤ç®¡ç†&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 data-id=&quot;heading-2&quot;&gt;1.2 å¼€å‘ä¾§åŠŸèƒ½&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ”¯æŒ WebSocket, TCP, è‡ªå®šä¹‰è¿æ¥åè®®&lt;/li&gt;
&lt;li&gt;æ”¯æŒ JSON æˆ– Protobuff æˆ–è‡ªå®šä¹‰æ•°æ®äº¤æ¢åè®®&lt;/li&gt;
&lt;li&gt;æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½², æ°´å¹³æ‰©å±•&lt;/li&gt;
&lt;li&gt;å¿ƒè·³ä¿æ´», è¶…æ—¶æ–­å¼€, æ¸…ç†æ­»é“¾æ¥&lt;/li&gt;
&lt;li&gt;æ¶ˆæ¯ç¼“å†², å¼‚æ­¥å¤„ç†, å¼±ç½‘ä¼˜åŒ–&lt;/li&gt;
&lt;li&gt;æ¶ˆæ¯é€è¾¾æœºåˆ¶, æ¶ˆæ¯é‡å‘, ACK&lt;/li&gt;
&lt;li&gt;æ¶ˆæ¯å»é‡, é¡ºåºä¿éšœ, è¯»æ‰©æ•£&lt;/li&gt;
&lt;li&gt;èŠå¤©æœºå™¨äºº&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 data-id=&quot;heading-3&quot;&gt;äºŒ. ç³»ç»Ÿæ¶æ„&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†æé«˜å¯ç”¨æ€§å’Œæ•´ä½“çš„ç¨³å®šæ€§, å•æœºæ€§èƒ½çš„é™åˆ¶, å¿…é¡»ä½¿ç”¨åˆ†å¸ƒå¼æ¶æ„, å¾®æœåŠ¡çš„æ¨¡å¼æ–¹ä¾¿äº†ç»´æŠ¤. æˆ‘å¯¹ IM ä¸šåŠ¡éƒ¨åˆ†æ‹†åˆ†äº†å…­å¤§æ ¸å¿ƒä¸»æ¨¡å—(æœåŠ¡), æ¯ä¸ªæœåŠ¡å¯ä»¥æ°´å¹³ä»»æ„æ•°é‡æ‰©å±•, æ•´ä¸ªç³»ç»Ÿå¯ä»¥å…·æœ‰ä¸€å®šçš„ä¼¸ç¼©æ€§, æ¯ä¸ªæ¨¡å—æ ¹æ®å…¶ä¸šåŠ¡ç‰¹æ€§åˆ’åˆ†, é€»è¾‘å’Œæ¥å£åˆ†ç¦», åœ¨ä¿è¯æ¥å£ç®€æ´æ€§çš„åŒæ—¶ä¹Ÿæœ‰è¶³å¤Ÿçš„æ‰©å±•æ€§.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/12fae004310944e8b3e6706a20cd2105~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?&quot; alt=&quot;system_arch.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3 data-id=&quot;heading-4&quot;&gt;2.1 èŠå¤©æœåŠ¡åˆ’åˆ†&lt;/h3&gt;
&lt;h4 data-id=&quot;heading-5&quot;&gt;Gateway&lt;/h4&gt;
&lt;p&gt;Gateway æ¨¡å—ä¸ºç®¡ç†ç”¨æˆ·è¿æ¥çš„èŠå¤©æœåŠ¡ç½‘å…³, æ‰€æœ‰ç”¨æˆ·æ¶ˆæ¯ä¸Šä¸‹è¡Œéƒ½ç”±è¿™ä¸ªæ¨¡å—å¤„ç†. Gateway ç®¡ç†ç”¨æˆ·è¿æ¥, æ¶ˆæ¯çš„æ¥æ”¶è§£æ, æ¶ˆæ¯ä¸‹å‘, åˆ¤æ–­è¿æ¥æ˜¯å¦å­˜æ´», æ ‡è¯†ç”¨æˆ·è¿æ¥, æ–­å¼€ç”¨æˆ·è¿æ¥.&lt;/p&gt;
&lt;p&gt;Gateway ä¾èµ– Messaging æœåŠ¡, æ¥æ”¶åˆ°å®¢æˆ·ç«¯æ¶ˆæ¯å°†äº¤ç”± Messaging å¤„ç†, Gateway æä¾›æŒ‡å®š uid ç™»å½•, ç™»å‡º, ä¸‹å‘æ¶ˆæ¯ä¸‰ä¸ªæ¥å£.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-6&quot;&gt;Messaging&lt;/h4&gt;
&lt;p&gt;Messaging è´Ÿè´£ä¸åŒç±»å‹æ¶ˆæ¯çš„è·¯ç”±, ä¾‹å¦‚ç¾¤æ¶ˆæ¯, API æ¶ˆæ¯, ä¹Ÿå¤„ç†éƒ¨åˆ†ç±»å‹çš„æ¶ˆæ¯, ä¾‹å¦‚ ACK æ¶ˆæ¯, å•èŠæ¶ˆæ¯, å¿ƒè·³æ¶ˆæ¯. æ ¹æ®æ¶ˆæ¯ç±»å‹åˆ†åˆ«è½¬å‘ç»™ Dispatch (ç”¨æˆ·æ¶ˆæ¯), API (APIæ¶ˆæ¯), Group(ç¾¤æ¶ˆæ¯).&lt;/p&gt;
&lt;p&gt;Messaging ä¾èµ– API, GroupMessaging, Dispatch, æä¾›ä¸€ä¸ªæ¶ˆæ¯è·¯ç”±æ¥å£.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-7&quot;&gt;Group&lt;/h4&gt;
&lt;p&gt;(GroupMessaging), ç¾¤èŠæœåŠ¡, ä¸»è¦è´Ÿè´£å¤šäººèŠå¤©æ¶ˆæ¯çš„ä¸‹å‘, ä¿å­˜, ç¾¤æ¶ˆæ¯ç¡®è®¤, æˆå‘˜ç®¡ç†. ç”¨æˆ·ä¸Šçº¿ååŒæ­¥è”ç³»äººæ—¶åˆå§‹åŒ–ç¾¤èŠåˆ—è¡¨, æ ¹æ®ç¾¤èŠæ‰€åœ¨æœåŠ¡é€šè¿›å…¥ç¾¤èŠå¤©.&lt;/p&gt;
&lt;p&gt;Group æœåŠ¡ä¾èµ– Dispatch æœåŠ¡, æä¾›ç¾¤æ›´æ–°, æˆå‘˜æ›´æ–°, å‘é€æ¶ˆæ¯åˆ°æŒ‡å®šç¾¤ä¸‰ä¸ªæ¥å£.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-8&quot;&gt;API&lt;/h4&gt;
&lt;p&gt;ç›®å‰æš‚æ—¶ä½œä¸ºé•¿è¿æ¥çš„ç™»å½•é‰´æƒ, HTTP API æ¥å£éƒ½å¯ä»¥é€šè¿‡é•¿è¿æ¥æ¶ˆæ¯è®¿é—®, è¿™ä¸ªå¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µçµæ´»é…ç½®, åªéœ€é…ç½®ç›¸å…³è·¯ç”±å³å¯.&lt;/p&gt;
&lt;p&gt;API ä¾èµ– Dispatch, Group æœåŠ¡. æä¾›ä¸€ä¸ªå¤„ç† API ç±»å‹æ¶ˆæ¯çš„æ¥å£.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-9&quot;&gt;Dispatch&lt;/h4&gt;
&lt;p&gt;æ¶ˆæ¯è·¯ç”±æœåŠ¡, ç”¨äºæ¶ˆæ¯è·¯ç”±åˆ°ç”¨æˆ·æ‰€åœ¨ç½‘å…³, åœ¨ç”¨æˆ·ç™»å½•æ—¶é€šçŸ¥ Dispatch æ›´æ–°ç¼“å­˜ç”¨æˆ·å¯¹åº”çš„ç½‘å…³, ç¼“å­˜ä¿¡æ¯é€šè¿‡ä¸€è‡´æ€§å“ˆå¸Œä¿å­˜åœ¨å›ºå®šçš„ä¸€ä¸ªæœåŠ¡ä¸Š, æ¶ˆæ¯ä¸‹å‘æ—¶æŸ¥è¯¢ç¼“å­˜, æ ¹æ®æŸ¥è¯¢åˆ°çš„ç½‘å…³ä¿¡æ¯æ”¾å…¥åˆ° NSQ é˜Ÿåˆ—, æ¯Gateway è®¢é˜…è‡ªå·±çš„æ¶ˆæ¯. è¿™é‡Œçš„æ¶ˆæ¯ä¸ä¸€å®šæ˜¯ç”¨æˆ·æ¶ˆæ¯, ä¹Ÿå¯ä»¥æ˜¯é€šçŸ¥ç½‘å…³æ›´æ–°ç”¨æˆ·çŠ¶æ€çš„æ§åˆ¶æ¶ˆæ¯, ä¾‹å¦‚ç™»å½•ç™»å‡º, ç”±äºä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œé€šä¿¡, æ‰€ä»¥å«åšæ¶ˆæ¯, å…¶å®æ˜¯è°ƒç”¨ Gateway çš„æ¥å£.&lt;/p&gt;
&lt;p&gt;Dispatch ä¸ç›´æ¥ä¾èµ–ä»»ä½•æœåŠ¡, æ¶ˆæ¯é€šè¿‡ NSQ å‘é€åˆ° Gateway, æä¾›æ›´æ–°è·¯ç”±å’Œä¸‹å‘æ¶ˆæ¯ä¸¤ä¸ªæ¥å£.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-10&quot;&gt;Broker&lt;/h4&gt;
&lt;p&gt;ç¾¤èŠä¸ç”¨æˆ·ç½‘å…³ä¸€æ ·æ˜¯å±äºå¸¦çŠ¶æ€æœåŠ¡, æ¶ˆæ¯éœ€è¦å‡†ç¡®å¿«é€Ÿè·¯ç”±åˆ°ç¾¤æ‰€åœ¨è·¯å¾„, Broker å’Œ Dispatch åŠŸèƒ½å¤§è‡´ç›¸ä¼¼.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-11&quot;&gt;NSQ&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fnsq.io%2F&quot; target=&quot;_blank&quot; title=&quot;https://nsq.io/&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;NSQ&lt;/a&gt; æ˜¯ Golang å®ç°çš„æ¶ˆæ¯é˜Ÿåˆ—, æ‰€æœ‰æ¶ˆæ¯éƒ½é€šè¿‡ NSQ è·¯ç”±. ç›¸æ¯”å…¶ä»– MQ é€‰æ‹© NSQ çš„ç†ç”±: å»ä¸­å¿ƒåˆ†å¸ƒå¼(ç”Ÿäº§æ¶ˆè´¹ç›´è¿), ä½å»¶è¿Ÿ, ä¸éœ€è¦é¡ºåº, é«˜æ€§èƒ½, ç®€å•äºŒè¿›åˆ¶åè®®.&lt;/p&gt;
&lt;p&gt;åœ¨æ¯ä¸€å°ç”Ÿäº§è€…ä¸Šéƒ½éƒ¨ç½²ä¸€ä¸ª nsqd.&lt;/p&gt;
&lt;h3 data-id=&quot;heading-12&quot;&gt;2.2 HTTP API æœåŠ¡åˆ’åˆ†&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¤è¯&lt;/strong&gt;: ç”¨æˆ·é‰´æƒ, ç™»å½•æ³¨å†Œç­‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·&lt;/strong&gt;: ç”¨æˆ·ä¿¡æ¯ç®¡ç†&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆæ¯&lt;/strong&gt;: æ¶ˆæ¯åŒæ­¥, æ‹‰å–ç­‰æ¥å£, æ¶ˆæ¯ID&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¾¤ç®¡ç†&lt;/strong&gt;: ç¾¤å¢åˆ æ”¹æŸ¥&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¶ä»–&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ä¸Šåˆ’åˆ†åªæ˜¯åœ¨é¡¹ç›®ä¸­çš„æ¨¡å—åˆ’åˆ†, å¹¶æœªç‹¬ç«‹æˆæœåŠ¡, ä½†æ‹†åˆ†è¿™äº›æ˜¯è½»è€Œæ˜“ä¸¾çš„äº‹æƒ…, ä¸Šé¢è¿™äº›æ¥å£æ—¢å¯ä»¥é€šè¿‡ HTTP æœåŠ¡è®¿é—®, ä¹Ÿå¯ä½¿ç”¨é•¿è¿æ¥è®¿é—®, é•¿è¿æ¥ ä¸ HTTP è®¿é—®çš„å·®å¼‚åœ¨äº: 1. é•¿è¿æ¥è®¿é—®éœ€è¦æ·»åŠ  &lt;code&gt;å…¬å…±è¯·æ±‚ä½“&lt;/code&gt;, 2. å…¬å…±å“åº”ä½“å®šä¹‰ä¸åŒ.&lt;/p&gt;
&lt;h3 data-id=&quot;heading-13&quot;&gt;2.3 æ¶ˆæ¯è·¯ç”±&lt;/h3&gt;
&lt;h4 data-id=&quot;heading-14&quot;&gt;ç½‘å…³æ¶ˆæ¯è·¯ç”±&lt;/h4&gt;
&lt;p&gt;åœ¨åˆ†å¸ƒå¼éƒ¨ç½²ç¯å¢ƒä¸‹, ç½‘å…³å¯èƒ½éƒ¨ç½²ä»»æ„ä¸ªå®ä¾‹, ç”¨æˆ·å¯èƒ½è¿æ¥åˆ°å…¶ä¸­ä»»æ„ä¸€ä¸ªå®ä¾‹ä¸­, å½“éœ€è¦ç»™æŸä¸€ä¸ªç”¨æˆ·å‘é€æ¶ˆæ¯, æˆ–è€…æ–­å¼€æŸä¸ªç”¨æˆ·çš„è¿æ¥æ—¶, æˆ‘ä»¬éœ€è¦æ‰¾åˆ°è¿™ä¸ªç”¨æˆ·æ‰€åœ¨çš„ç½‘å…³, è¿™å°±éœ€è¦è®°å½•æ‰€æœ‰åœ¨çº¿ç”¨æˆ·æ‰€åœ¨ç½‘å…³. å¯èƒ½å¿«æƒ³åˆ°çš„æ˜¯ä½¿ç”¨ Redis, æˆ–è€… Redis åŠ äºŒçº§ç¼“å­˜, ä½† IM ç³»ç»Ÿæ¶ˆæ¯ååé‡éå¸¸å¤§, è€Œä¸”å­˜åœ¨æ‰©æ•£ç­‰å…¶ä»–åŸå› , Redis å¾ˆå®¹æ˜“æˆä¸ºæ€§èƒ½ç“¶é¢ˆ.&lt;/p&gt;
&lt;p&gt;é¡¹ç›®ä¸­ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•, å°†æ¯ä¸ªç”¨æˆ·è¿æ¥çš„ç½‘å…³ä¿¡æ¯æŒ‰ç…§ UID åˆ†å¸ƒåœ¨ä¸åŒçš„ Dispatch æœåŠ¡ä¸Š, ä»è€Œè¾¾åˆ°åˆ†æ•£ç¼“å­˜, è´Ÿè½½å‡è¡¡, åŠæé«˜å¯ç”¨æ€§çš„ç›®çš„.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d573a906d1b8466f981c3743769493dc~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?&quot; alt=&quot;msg_routing.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤º, Dispatch åœ¨æ•´ä¸ªç¯èŠ‚ä¸­æ‰¿å½“äº†æ¶ˆæ¯åˆ†å‘çš„è§’è‰². å½“æŸä¸€ä¸ª Dispatch æœåŠ¡å®•æœºå, è¯¥æœåŠ¡ä¸­æ‰€æœ‰ç¼“å­˜çš„ç½‘å…³ä¿¡æ¯éƒ½å°†ä¸¢å¤±, æ ¹æ®ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•, åŸæ¥çš„è¯·æ±‚éƒ½è½¬å‘äº†ä¸‹ä¸€ä¸ª Dispatch, æ˜¾ç„¶è¿™ä¸ªæœåŠ¡ä¸Šæ˜¯æ²¡æœ‰å·²å®•æœºçš„é‚£ä¸ªæœåŠ¡ç¼“å­˜çš„ä¿¡æ¯çš„, æˆ‘ä»¬å¯ä»¥åœ¨ç”¨æˆ·ç™»å½•åå°†ç™»å½•ä¿¡æ¯ç¼“å­˜åœ¨ Redis ä¸­ (æŸ¥è¯¢ç™»å½•è®¾å¤‡åˆ—è¡¨ç­‰å…¶ä»–åœºæ™¯å…±ç”¨), Dispatch å†…å­˜ä¸­æ²¡æŸ¥åˆ°å†å» Redis æŸ¥æ‰¾, æŸ¥æ‰¾ä¸€æ¬¡åç¼“å­˜åœ¨å†…å­˜ä¸­å³å¯.æ–°ä¸Šçº¿çš„ç”¨æˆ·åˆ™ä¸å½±å“, åªå½±å“åœ¨çº¿æœŸé—´ç½‘å…³ä¿¡æ¯ä¿å­˜çš„ Dispatch æœåŠ¡å®•æœºçš„ç”¨æˆ·.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-15&quot;&gt;ç¾¤æ¶ˆæ¯çš„è·¯ç”±&lt;/h4&gt;
&lt;p&gt;ç¾¤å’Œç”¨æˆ·ä¸€æ · Group æœåŠ¡ä¹Ÿéœ€è¦ä¸€æ ·çš„è·¯ç”±, ä¸åŒç¾¤å¯èƒ½åˆ†å¸ƒåœ¨ä¸åŒçš„æœåŠ¡ä¸Š, ä½†ç¾¤å¹¶ä¸ä¼šéšæ„åˆ‡æ¢æ‰€åœ¨æœåŠ¡, ä¸€èˆ¬åªæœ‰ç¾¤æ‰€åœ¨çš„æœåŠ¡å¼‚å¸¸çš„æ—¶å€™é‡æ–°åŠ è½½ç¾¤ä¿¡æ¯æ‰å¯èƒ½é‡æ–°åˆ†é…, Broker è¯»å¤šå†™å°‘, å› æ­¤åªéœ€è¦åœ¨æ‰€æœ‰ Broker ä¸­éƒ½ç¼“å­˜æ‰€æœ‰ç¾¤æ‰€åœ¨æœåŠ¡å³å¯, ç¾¤æ¶ˆæ¯å¯ä»¥é€šè¿‡ä»»æ„ä¸€å° Broker è½¬å‘, å½“ Group æœåŠ¡æ‰çº¿å’ŒåŠ è½½ç¾¤æ—¶é€šçŸ¥æ‰€æœ‰ Broker æ›´æ–°å³å¯.&lt;/p&gt;
&lt;h3 data-id=&quot;heading-16&quot;&gt;2.4 è®¾è®¡å‡†åˆ™&lt;/h3&gt;
&lt;p&gt;åœ¨æœ¬é¡¹ç›®ä¸­, æˆ‘ä¸€ç›´åœ¨æ¢ç´¢å’Œè¿½æ±‚é¡¹ç›®æ•´æ´æ€§ä¸å¤æ‚ç³»ç»Ÿæ¶æ„ä¹‹é—´çŸ›ç›¾çš„è§£å†³æ–¹æ¡ˆ, ä½†ç”±äºæˆ‘æ²¡æœ‰ä»»ä½•ç›¸å…³ç»éªŒ, åœ¨é¡¹ç›®ä¸­å¯èƒ½å‡ºç°ä¸€äº›éä¸»æµçš„é£æ ¼æˆ–é”™è¯¯å†—ä½™çš„è®¾è®¡, è‹¥ä½ å¯¹æ­¤æœ‰ä»»ä½•ç–‘æƒ‘æˆ–æŒ‡æ•™, è¯·åœ¨ issues ä¸­è‡ªç”±åœ°å‘è¡¨ä½ çš„æƒ³æ³•.&lt;/p&gt;
&lt;p&gt;åœ¨é¢å¯¹ä¸€ä¸ªåºå¤§å¤æ‚çš„é—®é¢˜, å°†é—®é¢˜æ‹†åˆ†å¹¶æŠ½è±¡æˆå¯¹è±¡, åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ªå°é—®é¢˜å¾€å¾€æ–¹ä¾¿è§£å†³, OOP åœ¨è¿™æ–¹é¢ä¸€ç›´æ˜¯ä¼˜åŠ¿, æœ¬é¡¹ç›®ä½¿ç”¨äº†è¾ƒå¤šçš„ OOP æ€æƒ³.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-17&quot;&gt;ä½¿ç”¨æ¥å£&lt;/h4&gt;
&lt;p&gt;å¯¹ä¸€äº›å¯èƒ½éœ€è¦æ‰©å±•çš„å…³é”®ç‚¹, é¡¹ç›®ä¸­ä½¿ç”¨æ¥å£çš„æ–¹å¼å®ç°çš„, ä¾‹å¦‚ Dao (æ•°æ®è®¿é—®å¯¹è±¡)å±‚å®ç°å‡ä¸ºæ¥å£, å‡ºäºæ—¶é—´åŸå› (è¿˜æœ‰æˆ‘æœ¬äººå¯¹æ•°æ®åº“æ–¹é¢çŸ¥è¯†åŒ®ä¹), é¡¹ç›®ä¸­å¯¹æ•°æ®åº“æ–¹é¢å‡æ˜¯ç®€å•å®ç°, å¹¶æœªè€ƒè™‘ä¾‹å¦‚æ€§èƒ½ç­‰ä¼˜åŒ–, ä½†æ¥å£ä¸å½±å“åæœŸå¯¹è¿™æ–¹é¢å‡çº§å’Œæ›¿æ¢.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-18&quot;&gt;æŒ‰ä¸šåŠ¡åˆ†åŒ…&lt;/h4&gt;
&lt;p&gt;åŒ…çš„åˆ’åˆ†æ–¹å¼ä¸€èˆ¬æœ‰ä¸¤ç§, æŒ‰å±‚åˆ†åŒ…å’ŒæŒ‰ä¸šåŠ¡åˆ†åŒ…. æŒ‰å±‚åˆ†åŒ…å°±æ˜¯ç›¸åŒç±»å‹çš„æ¨¡å—æ”¾åœ¨åŒä¸€ä¸ªåŒ…, ä¾‹å¦‚å°†æ‰€æœ‰çš„ API è¯·æ±‚å¤„ç†æ¨¡å—æ”¾ä¸€å±‚, å°†è¯·æ±‚å’Œå“åº”çš„å®ä½“å¯¹è±¡æ”¾åœ¨åŒä¸€ä¸ªåŒ…, è¿™è¿™æ–¹æ³•ç»™æ¨¡å—çš„ç®¡ç†å¢åŠ äº†ä¸ä¾¿, æˆ‘ä»¬æ›´æ”¹ä¸€ä¸ªæ¥å£éœ€è¦åœ¨å‡ ä¸ªä¸åŒçš„åŒ…ä¸­ä¿®æ”¹ä»£ç , è¿™æ ·åˆ†åŒ…ä¸€ä¸ªåŒ…é‡Œçš„ä¸åŒä»£ç æ²¡æœ‰ä»»ä½•å…³è”, å®Œå…¨æ˜¯ç±»ä¼¼äºå›¾ä¹¦é¦†ç®¡ç†å‘˜æ ¹æ®ä¹¦çš„å‡ºç‰ˆç¤¾è¿›è¡Œåˆ†ç±»ä¸€æ ·.&lt;/p&gt;
&lt;p&gt;è€ŒæŒ‰åŠŸèƒ½åˆ†åŒ…åˆ™ä¸ä¼šå‡ºç°æ›´æ–°ä¸€ä¸ªåŠŸèƒ½, ä¿®æ”¹ä¸åŒåŒ…çš„ä»£ç çš„æƒ…å†µ, ä¸€ä¸ªåŠŸèƒ½ç›¸å…³çš„ä»£ç éƒ½åœ¨ç›¸åŒåŒ…å†…. åœ¨æœ¬é¡¹ç›®ä¸­æ¯ä¸ªåŒ…å°½é‡éƒ½éµå¾ªå•ä¸€èŒè´£åŸåˆ™, å¤šä¸ªåŒ…ä¹‹é—´å°½é‡é™ä½è€¦åˆåº¦.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-19&quot;&gt;æ¨¡å—æ¥å£ä¾èµ–&lt;/h4&gt;
&lt;p&gt;é¡¹ç›®åŒ…çš„åˆ’åˆ†åŸºæœ¬å’Œå¾®æœåŠ¡çš„æ¨¡å—åˆ’åˆ†ä¿æŒä¸€è‡´, åˆšå¼€å§‹å¯åŠ¨çš„æœ¬é¡¹ç›®æ—¶å°±æŒ‰ç…§äº†æŒ‰åŠŸèƒ½åˆ’åˆ†æ¨¡å—çš„æ–¹æ³•, å¹¶ä¸”æ¯ä¸ªæ¨¡å—åªæš´éœ²æä¾›ç»™å…¶ä»–æ¨¡å—çš„æ¥å£, æ¨¡å—ä¹‹é—´çš„è°ƒç”¨åªé€šè¿‡ç‰¹å®šçš„æ¥å£, è¿™æ ·è®¾è®¡å³æ–¹ä¾¿ç»´æŠ¤ä¹Ÿæ–¹ä¾¿å…¶ä»–äººæŸ¥çœ‹ä»£ç , ä¸ä¼šä½¿å¾—æ¨¡å—ä¹‹é—´çš„è°ƒç”¨å‡Œä¹±, è€Œä¸”ä¹Ÿä¸ºåæœŸå¾®æœåŠ¡åŒ–çš„æä¾›äº†æå¤§ä¾¿åˆ©.&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ Gateway æ¨¡å—çš„æ¥å£&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs language-go&quot; lang=&quot;go&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// æä¾›ç»™å…¶ä»–æ¨¡å—çš„æ¥å£&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;type&lt;/span&gt; Interface &lt;span class=&quot;hljs-keyword&quot;&gt;interface&lt;/span&gt; {
    ClientSignIn(tempId &lt;span class=&quot;hljs-type&quot;&gt;int64&lt;/span&gt;, uid &lt;span class=&quot;hljs-type&quot;&gt;int64&lt;/span&gt;, device &lt;span class=&quot;hljs-type&quot;&gt;int64&lt;/span&gt;)
    ClientLogout(uid &lt;span class=&quot;hljs-type&quot;&gt;int64&lt;/span&gt;, device &lt;span class=&quot;hljs-type&quot;&gt;int64&lt;/span&gt;)
    EnqueueMessage(uid &lt;span class=&quot;hljs-type&quot;&gt;int64&lt;/span&gt;, device &lt;span class=&quot;hljs-type&quot;&gt;int64&lt;/span&gt;, message *message.Message)
}
&lt;span class=&quot;hljs-comment&quot;&gt;// Gateway ä¾èµ–çš„æ¥å£&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;type&lt;/span&gt; MessageHandleFunc &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(from &lt;span class=&quot;hljs-type&quot;&gt;int64&lt;/span&gt;, device &lt;span class=&quot;hljs-type&quot;&gt;int64&lt;/span&gt;, message *message.Message)&lt;/span&gt;&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å…¶ä»–æ¨¡å—åªéœ€è¦çŸ¥é“ Gateway æ¨¡å—æä¾›å®¢æˆ·ç«¯çš„ç™»å½•ç™»å‡ºå’Œå°†æ¶ˆæ¯åŠ å…¥åˆ°æŒ‡å®š ID çš„å®¢æˆ·ç«¯çš„é˜Ÿåˆ—å³å¯, å…¶ä»–æ¨¡å—ä¸å¿…çŸ¥é“ Gateway çš„å…·ä½“å®ç°, æˆ‘ä»¬å¯ä»¥è½»è€Œæ˜“ä¸¾çš„å°†è¿™ä¸ªæ¨¡å—æ›¿æ¢ä¸ºä¸€ä¸ªå¾®æœåŠ¡æœåŠ¡.&lt;/p&gt;
&lt;h3 data-id=&quot;heading-20&quot;&gt;2.5 å¾®æœåŠ¡&lt;/h3&gt;
&lt;p&gt;è¿™é‡Œä½¿ç”¨ &lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Frpcx.io%2F&quot; target=&quot;_blank&quot; title=&quot;https://rpcx.io/&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;RPCX&lt;/a&gt; ä½œä¸ºå¾®æœåŠ¡çš„åŸºç¡€, å¼€ç®±å³ç”¨çš„å¾®æœåŠ¡æ–¹æ¡ˆè®©æˆ‘é€‰æ‹©äº†å®ƒ, RPCX åŠŸèƒ½ä¸°å¯Œ, æ€§èƒ½ä¼˜è¶Š, é›†æˆäº†æœåŠ¡å‘ç°, å¤šç§è·¯ç”±æ–¹æ¡ˆ, ä»¥åŠå¤±è´¥æ¨¡å¼, æœåŠ¡å‘ç°ä½¿ç”¨ &lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Fwww.etcd.cn%2F&quot; target=&quot;_blank&quot; title=&quot;http://www.etcd.cn/&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;ETCD&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;æœåŠ¡é—´é€šè®¯å‡ä½¿ç”¨ Protobuff + RPC æ–¹å¼, åœ¨æ€§èƒ½ä¸Šè¿™æ˜¯æœ€å¥½çš„é€‰æ‹©ç»„åˆ.&lt;/p&gt;
&lt;h3 data-id=&quot;heading-21&quot;&gt;2.6 é¡¹ç›®ä»‹ç»&lt;/h3&gt;
&lt;h4 data-id=&quot;heading-22&quot;&gt;é¡¹ç›®ç›®å½•&lt;/h4&gt;
&lt;p&gt;ä¸€ä¸‹ç›®å½•ç»“æ„çœç•¥äº†éƒ¨åˆ†ä¸é‡è¦çš„ç›®å½•&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs language-text&quot; lang=&quot;text&quot;&gt;â”œâ”€cmd                   // å…¥å£(ä»è¿™é‡Œå¼€å§‹è¿è¡Œ)
â”‚  â”œâ”€performance_test   // æ€§èƒ½æµ‹è¯•ä»£ç å…¥å£
â”‚  â”œâ”€run                // é¡¹ç›®ç¨‹åºå…¥å£
â”‚  â”‚  â”œâ”€api_http        // API æ¥å£çš„ HTTP æœåŠ¡, æä¾›ç»™å®¢æˆ·ç«¯è®¿é—®
â”‚  â”‚  â”œâ”€api_rpc         // API æ¥å£çš„ RPC æœåŠ¡, æä¾›ç»™å…¶ä»–æœåŠ¡ä½¿ç”¨
â”‚  â”‚  â”œâ”€broker          // ç¾¤è·¯ç”±æœåŠ¡
â”‚  â”‚  â”œâ”€dispatch        // ç½‘å…³è·¯ç”±æœåŠ¡
â”‚  â”‚  â”œâ”€getaway         // ç½‘å…³æœåŠ¡
â”‚  â”‚  â”œâ”€group           // ç¾¤æœåŠ¡
â”‚  â”‚  â”œâ”€messaging       // IM æ¶ˆæ¯è·¯ç”±æœåŠ¡
â”‚  â”‚  â””â”€singleton       // å•å®ä¾‹è¿è¡Œ (è¿™é‡ŒåŒæ—¶å¯åŠ¨ IM å’Œ HTTP API æ¥å£)
â”‚  â””â”€script             // éƒ¨ç½²è„šæœ¬
â”‚      â”œâ”€etcd           // å¯åŠ¨ etcd è„šæœ¬
â”‚      â”œâ”€glide_im       // é¡¹ç›®éƒ¨ç½²è„šæœ¬
â”‚      â””â”€nsq            // nsq éƒ¨ç½²è„šæœ¬
â”œâ”€config                // é…ç½®å…¥å£
â”œâ”€doc                   // é¡¹ç›®æ–‡æ¡£
â”œâ”€im                    // IM æ ¸å¿ƒé€»è¾‘å…¥å£
â”‚  â”œâ”€api                ////////////// API æ¥å£
â”‚  â”‚  â”œâ”€apidep          // API å¤–éƒ¨ä¾èµ–        
â”‚  â”‚  â”œâ”€auth            // ç™»å½•è®¤è¯
â”‚  â”‚  â”œâ”€comm            // å…¬å…±
â”‚  â”‚  â”œâ”€groups          // ç¾¤ç®¡ç†
â”‚  â”‚  â”œâ”€http_srv        // api http æœåŠ¡å¯åŠ¨é€»è¾‘
â”‚  â”‚  â”œâ”€msg             // æ¶ˆæ¯
â”‚  â”‚  â”œâ”€router          // é€šè¿‡é•¿è¿æ¥è®¿é—®æ¥å£çš„è·¯ç”±æŠ½è±¡
â”‚  â”‚  â””â”€user            // ç”¨æˆ·ç›¸å…³
â”‚  â”œâ”€client             ///////////// ç”¨æˆ·è¿æ¥ç®¡ç†ç›¸å…³
â”‚  â”œâ”€conn               // é•¿è¿æ¥åŸºç¡€æŠ½è±¡
â”‚  â”œâ”€dao                // æ•°æ®è®¿é—®å±‚, æ•°æ®åº“ç›¸å…³
â”‚  â”œâ”€group              // ç¾¤èŠ, åŠç¾¤èŠæ¶ˆæ¯
â”‚  â”œâ”€message            // IM æ¶ˆæ¯å®šä¹‰
â”‚  â”œâ”€messaging          // IM æ¶ˆæ¯è·¯ç”±
â”‚  â””â”€statistics         // æ•°æ®ç»Ÿè®¡, æµ‹è¯•ç”¨
â”œâ”€pkg                   ///////////// åŒ…, å…¬å…±ä¾èµ–ç®¡ç†
â”‚  â”œâ”€db                 // æ•°æ®åº“
â”‚  â”œâ”€hash               // hash ç®—æ³•å®ç°
â”‚  â”œâ”€logger             // æ—¥å¿—æ‰“å°
â”‚  â”œâ”€lru                // lru ç¼“å­˜å®ç°
â”‚  â”œâ”€mq_nsq             // nsq å°è£…
â”‚  â”œâ”€rpc                // rpc å°è£…, åŸºäº rpcx
â”‚  â””â”€timingwheel        // å®šæ—¶å™¨, æ—¶é—´è½®ç®—æ³•å®ç°
â”œâ”€protobuf              //////////// protobuf æ¶ˆæ¯å®šä¹‰
â”‚  â”œâ”€gen                // ç¼–è¯‘å¥½çš„æ–‡ä»¶
â”‚  â”œâ”€im                 // im æ¶ˆæ¯å®šä¹‰
â”‚  â””â”€rpc                // rpc é€šè®¯æ¶ˆæ¯å®šä¹‰
â”œâ”€service               /////////// å¾®æœåŠ¡
â”‚  â”œâ”€api_service        // api å¾®æœåŠ¡å®ç°
â”‚  â”œâ”€broker             // ç¾¤è·¯ç”± broker æœåŠ¡
â”‚  â”œâ”€dispatch           // ç½‘å…³æ¶ˆæ¯è·¯ç”±æœåŠ¡
â”‚  â”œâ”€gateway            // ç½‘å…³æœåŠ¡å®ç°
â”‚  â”œâ”€group_messaging    // ç¾¤æœåŠ¡
â”‚  â”œâ”€messaging_service  // im æ¶ˆæ¯è·¯ç”±æœåŠ¡
â”œâ”€sql                   // æ•°æ®åº“è¡¨ç»“æ„ SQL
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;é¡¹ç›®æŸ¥çœ‹æŒ‡å—&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;IM æ ¸å¿ƒé€»è¾‘åœ¨æ ¹ç›®å½•ä¸‹ &lt;code&gt;im&lt;/code&gt; ä¸­, é™¤äº†å¾®æœåŠ¡ç›¸å…³, IM ä¸»è¦ä¸šåŠ¡é€»è¾‘å®ç°å‡åœ¨è¿™ä¸ªç›®å½•ä¸‹, &lt;code&gt;im&lt;/code&gt; ä¸‹åŒ…çš„åˆ’åˆ†å¤§è‡´å¯ä»¥çœ‹åšæ˜¯åé¢å¾®æœåŠ¡çš„åˆ’åˆ†, &lt;code&gt;im/conn&lt;/code&gt; åŒ…ä¸­æ˜¯é•¿è¿æ¥æœåŠ¡å™¨å¯åŠ¨å’Œè¿æ¥å¯¹è±¡æ¥å£çš„é€»è¾‘, æ–°çš„è¿æ¥å°†äº¤ç”± &lt;code&gt;im/client&lt;/code&gt; åŒ…ä¸­ç®¡ç†, è¿™ä¸ªåŒ…å¤§è‡´æ˜¯ç®¡ç†è¿æ¥, è¯»å†™è§£ææ¶ˆæ¯çš„, æ”¶åˆ°é“¾æ¥ä¸­çš„æ¶ˆæ¯å°†äº¤ç”± &lt;code&gt;im/messaging&lt;/code&gt; åŒ…å¤„ç†, è¿™ä¸ªåŒ…å·¥å…·æ¶ˆæ¯ç±»å‹äº¤ç»™ä¸åŒçš„æ¨¡å—, ä¾‹å¦‚: è®¤è¯æ¶ˆæ¯ç»™ &lt;code&gt;api&lt;/code&gt; æ¨¡å—å¤„ç†, ç¾¤æ¶ˆæ¯åˆ†å‘ç»™ &lt;code&gt;group&lt;/code&gt;, å•èŠæ¶ˆæ¯åˆ™ &lt;code&gt;im/client&lt;/code&gt; ä¸‹å‘. &lt;code&gt;im&lt;/code&gt; ä¸‹æ¶‰åŠä¸šåŠ¡é€»è¾‘çš„åŒ…ä¸‹åŸºæœ¬éƒ½æœ‰ä¸€ä¸ª &lt;code&gt;interface.go&lt;/code&gt; æ–‡ä»¶, è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†è¿™ä¸ªåŒ…çš„ä¾èµ–ä»¥åŠå‘å¤–éƒ¨æä¾›çš„æ¥å£.&lt;/p&gt;
&lt;p&gt;å¾®æœåŠ¡ç›¸å…³çš„ä»£ç éƒ½åœ¨æ ¹ç›®å½• &lt;code&gt;service&lt;/code&gt; åŒ…ä¸‹é¢, IM æ ¸å¿ƒä¸šåŠ¡ç›¸å…³çš„æœåŠ¡é€»è¾‘éƒ½åœ¨ &lt;code&gt;im&lt;/code&gt; ä¸‹, æœåŠ¡åªæ˜¯å¯¹å…¶æ¥å£ä½¿ç”¨ rpc æœåŠ¡çš„æ–¹å¼è¿›è¡Œå®ç°, å¹¶åœ¨ &lt;code&gt;im&lt;/code&gt; åŒ…ä¸­å¯¹åº”æ¥å£çš„é»˜è®¤å®ç°è¿›è¡Œæ›¿æ¢, ä¾‹å¦‚ &lt;code&gt;messaging_service&lt;/code&gt; æœåŠ¡(æ¶ˆæ¯è·¯ç”±)åˆ™æ˜¯å°† &lt;code&gt;im/messaging&lt;/code&gt; åŒ…ä¸‹çš„ &lt;code&gt;Interface&lt;/code&gt; æ¥å£çš„å®ç°æ›¿æ¢ä¸º &lt;code&gt;messaging_service&lt;/code&gt; çš„ &lt;code&gt;Server&lt;/code&gt;, è€Œ &lt;code&gt;messaging&lt;/code&gt; ä¾èµ–çš„å…¶ä»–åŒ…åˆ™æ˜¯å¯¹åº”æœåŠ¡ä¸‹çš„ &lt;code&gt;Client&lt;/code&gt;, æŸ¥é˜…æ¯ä¸ªæœåŠ¡åŒ…ä¸‹çš„ &lt;code&gt;run.go&lt;/code&gt; å³å¯æ‰¾åˆ°æœåŠ¡å¯åŠ¨ä»£ç , å…¶ä¸­åŒ…å«äº†å…¶ä¾èµ–çš„å’Œå®ç°è®¾ç½®.&lt;/p&gt;
&lt;p&gt;å¯¹äºå°†æ ¸å¿ƒé€»è¾‘å’Œå¾®æœåŠ¡å‰¥ç¦»çš„è¿™ç§æ¨¡å¼æ˜¯å› ä¸ºä¸€å¼€å§‹å¹¶å°†å¾®æœåŠ¡çš„åˆ’åˆ†å®šå‹(ä¹Ÿç»è¿‡äº†å‡ æ¬¡è¾ƒå¤§çš„æ”¹åŠ¨), æˆ–è€…ä¸ºäº†æ–¹ä¾¿å°† IM éƒ¨åˆ†æ ¸å¿ƒé€»è¾‘å…ˆå®ç°å’Œç†æ¸…, æ‰€ä»¥å°†ä¸¤è€…æ”¾åœ¨ä¸¤ä¸ªä¸åŒçš„åœ°æ–¹, ä½†åœ¨æˆ‘å®è·µçš„è¿‡ç¨‹ä¸­, å¯¹äºæœåŠ¡çš„æ”¹åŠ¨å’Œ &lt;code&gt;im&lt;/code&gt; ä¸‹æ ¸å¿ƒé€»è¾‘(æ¨¡å—æ¥å£æ”¹åŠ¨é™¤å¤–)çš„æ”¹åŠ¨å¹¶ä¸ä¼šäº’ç›¸ç‰µè¿, è¿™ç‚¹ç»™æˆ‘å¾ˆå¤§çš„ä¾¿åˆ©, æˆ‘è¿˜æœ‰ä¸€å®šçš„è‡ªç”±åº¦åˆ’åˆ†æ·»åŠ æœåŠ¡, ä¾‹å¦‚åœ¨ &lt;code&gt;group&lt;/code&gt; æœåŠ¡ä¸­é—´åŠ ä¸€ä¸ª &lt;code&gt;broker&lt;/code&gt;, æˆ–è€…å¯ä»¥é’ˆå¯¹ç‰¹å®š &lt;code&gt;im&lt;/code&gt; ä¸­æŸä¸ªæ¨¡å—çš„æ¥å£ä¸­çš„ä¸€ä¸ªæ–¹æ³•è¿›è¡Œç‰¹æ®Šå¤„ç†.&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ä¸Šé¢æ‰€è¯´çš„ä¾¿åˆ©ä»…ä»…æ˜¯å› ä¸ºæˆ‘å½“æ—¶å¯¹å¾®æœåŠ¡ä¸å¤ªç†Ÿæ‚‰, é¡¹ç›®å¼€å‘è¿‡ç¨‹æ”¹åŠ¨è¾ƒå¤§, åˆ†å¼€æ”¹åŠ¨çš„æ—¶å€™ç¨å¾®æ–¹ä¾¿ä¸€äº›. è¿™æ ·åšä»£ä»·å°±æ˜¯, ä¸¤è€…åˆ†å¼€ä¸åˆ©äºä»£ç æŸ¥çœ‹, è¿™å…¶å®æ˜¯ä¸€ç§åˆ†å±‚, &lt;code&gt;im&lt;/code&gt; ä¸‹å®šä¹‰æ¥å£åŠé»˜è®¤å®ç°, ä¸Šå±‚&lt;code&gt;service&lt;/code&gt;å®šä¹‰æ¥å£çš„å®ç°, ä½†è¿™äº›æ¥å£ä¹‹é—´çš„ä¾èµ–å…³ç³», è¿˜æ˜¯è¦å» &lt;code&gt;im&lt;/code&gt; ä¸­å¯»æ‰¾, åé¢å¯èƒ½ä¼šè€ƒè™‘å°†è¿™ä¸¤ä¸ªåŒ…åˆå¹¶åœ¨ä¸€èµ·.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-23&quot;&gt;é¡¹ç›®ä¸»è¦ä¾èµ–&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FBurntSushi%2Ftoml&quot; target=&quot;_blank&quot; title=&quot;https://github.com/BurntSushi/toml&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;BurntSushi/toml&lt;/a&gt;: è¿™æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„é…ç½®æ–‡ä»¶æ ¼å¼, ä¸ªäººæ¯”è¾ƒå–œæ¬¢&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fgin-gonic%2Fgin&quot; target=&quot;_blank&quot; title=&quot;https://github.com/gin-gonic/gin&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;gin&lt;/a&gt;: ä¼˜ç§€çš„ HTTP Web æ¡†æ¶&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fgogo%2Fprotobuf&quot; target=&quot;_blank&quot; title=&quot;https://github.com/gogo/protobuf&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;protobuff&lt;/a&gt;: Google å‡ºå“äºŒè¿›åˆ¶æ•°æ®ä¼ è¾“åè®®&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fgorilla%2Fwebsocket&quot; target=&quot;_blank&quot; title=&quot;https://github.com/gorilla/websocket&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;gorilla/websocket&lt;/a&gt;: Golang ä¸­æœ€å¤š star çš„ WebSocket åº“&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fnsqio%2Fgo-nsq&quot; target=&quot;_blank&quot; title=&quot;https://github.com/nsqio/go-nsq&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;nsq&lt;/a&gt;: ç®€å•, é«˜æ€§èƒ½, åˆ†å¸ƒå¼ MQ&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fsmallnest%2Frpcx&quot; target=&quot;_blank&quot; title=&quot;https://github.com/smallnest/rpcx&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;rpcx&lt;/a&gt;: é«˜æ€§èƒ½, åŠŸèƒ½ä¸°å¯Œçš„å¾®æœåŠ¡æ¡†æ¶&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://link.juejin.cn/?target=gorm.io%2Fgorm&quot; target=&quot;_blank&quot; title=&quot;gorm.io/gorm&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;gorm&lt;/a&gt;: ORM&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fgo-redis%2Fredis&quot; target=&quot;_blank&quot; title=&quot;https://github.com/go-redis/redis&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;go-redis/redis&lt;/a&gt;: Redis å®¢æˆ·ç«¯&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://link.juejin.cn/?target=github.com%2Fpanjf2000%2Fants%2Fv2&quot; target=&quot;_blank&quot; title=&quot;github.com/panjf2000/ants/v2&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;ants&lt;/a&gt;: åç¨‹æ± &lt;/li&gt;
&lt;/ul&gt;
&lt;h4 data-id=&quot;heading-24&quot;&gt;æ„å»ºå’Œè¿è¡Œ&lt;/h4&gt;
&lt;p&gt;æ ¹ç›®å½•ä¸‹ &lt;code&gt;cmd/run&lt;/code&gt; ä¸‹çš„åŒ…ä¸ºç¨‹åºå…¥å£, åŒ…åè¡¨ç¤ºå…¶æœåŠ¡/æ¨¡å¼, ä¾‹å¦‚ &lt;code&gt;api_http&lt;/code&gt; åŒ…ä¸ºä»¥ HTTP æœåŠ¡å¯åŠ¨ API çš„æ¥å£(æä¾›ç»™å®¢æˆ·ç«¯HTTPæ–¹å¼è°ƒç”¨), &lt;code&gt;api_rpc&lt;/code&gt; ä¸ºå¯åŠ¨ API RPC æœåŠ¡(æä¾›ç»™å…¶ä»–æœåŠ¡è°ƒç”¨), ä¸ºäº†å¿«é€Ÿè°ƒè¯•, è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå•å®ä¾‹æ¨¡å¼ &lt;code&gt;singleton&lt;/code&gt;, è¿™ä¸ªå…¥å£ä¼šåŒæ—¶å¯åŠ¨ IMé•¿è¿æ¥æœåŠ¡å’Œ HTTP API æœåŠ¡, æ–¹ä¾¿è°ƒè¯• &lt;code&gt;im&lt;/code&gt; æ ¸å¿ƒé€»è¾‘, æˆ–è€…è°ƒè¯•å®¢æˆ·ç«¯ç”¨.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¯å¢ƒä¾èµ–&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å•å®ä¾‹
&lt;ul&gt;
&lt;li&gt;redis&lt;/li&gt;
&lt;li&gt;mysql&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¾®æœåŠ¡
&lt;ul&gt;
&lt;li&gt;nsq&lt;/li&gt;
&lt;li&gt;etcd&lt;/li&gt;
&lt;li&gt;åŒ…å«å•å®ä¾‹çš„æ‰€æœ‰ä¾èµ–&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;é…ç½®æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å•å®ä¾‹æ¨¡å¼åœ¨ &lt;code&gt;singleton&lt;/code&gt; åŒ…ä¸­ &lt;code&gt;config.toml&lt;/code&gt; ä¿®æ”¹ç›¸å…³é…ç½®&lt;/li&gt;
&lt;li&gt;å¾®æœåŠ¡æ¨¡å¼éœ€è¦å°† &lt;code&gt;service/example_config.toml&lt;/code&gt; æ–‡ä»¶å¤åˆ¶åˆ°å¯¹äºæœåŠ¡å…¥å£ä¸‹, å¹¶æ ¹æ®ç¯å¢ƒä¿®æ”¹ç›¸å…³é…ç½®&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœä¾èµ–æˆ–è€…å…¶ä»–åŸå› æ— æ³•åœ¨ IDE ä¸­è¿è¡Œä»£ç , å¯ä»¥åœ¨ &lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fp3-juejin.byteimg.com%2Ftos-cn-i-k3u1fbpfcp%2F09c2b4f6397e4554b0910670afb11ad8~tplv-k3u1fbpfcp-zoom-1.image&quot; target=&quot;_blank&quot; title=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/09c2b4f6397e4554b0910670afb11ad8~tplv-k3u1fbpfcp-zoom-1.image&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;è¿™é‡Œ&lt;/a&gt; ä¸‹è½½å·²ç»ç¼–è¯‘å¥½çš„ &lt;code&gt;singleton&lt;/code&gt; æ¨¡å¼çš„å¯æ‰§è¡Œæ–‡ä»¶.&lt;/p&gt;
&lt;h3 data-id=&quot;heading-25&quot;&gt;2.7 ç°å­˜é—®é¢˜&lt;/h3&gt;
&lt;h4 data-id=&quot;heading-26&quot;&gt;åè®®ç›¸å…³&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯åè®®é€‰æ‹©&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›®å‰ä¸ºäº†æ–¹ä¾¿å®¢æˆ·ç«¯ä½¿ç”¨ json è¿›è¡Œé€šä¿¡, ä¹Ÿæ˜¯å› ä¸ºæµè§ˆå™¨å¯¹äºŒè¿›åˆ¶åè®®çš„æ”¯æŒä¸å‹å¥½, ä½†åç«¯å¯¹äºŒè€…éƒ½æœ‰å®ç°, åè®®åŠ¨æ€é€‰æ‹©å¹¶æ²¡æœ‰å®ç°, æˆ–è€…åŒºåˆ† websocket å’Œ tcp ç½‘å…³, å°†äºŒè€…åŒºåˆ†, æµè§ˆå™¨çš„ä¸ç§»åŠ¨ç«¯ç¯å¢ƒæœ‰å·®å¼‚, ä½†æœªåšå¤„ç†.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Protobuf å’Œ Json çš„å…¼å®¹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¾®æœåŠ¡ä½¿ç”¨ protobuf åè®®, è€Œå®¢æˆ·ç«¯æ¶ˆæ¯å¯èƒ½ä»¥ json åè®®, éƒ¨åˆ†ä½¿ç”¨åŒä¸€ä¸ªç”± &lt;code&gt;protoc&lt;/code&gt; ç¼–è¯‘ç”Ÿæˆçš„ struct åœ¨å…¼å®¹ä¸Šå­˜åœ¨ä¸€äº›é—®é¢˜, æš‚æœªå¤„ç†.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¶ˆæ¯è§£ææ€§èƒ½&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½¿ç”¨ go ä¸­çš„ json.Marshal æ€§èƒ½æå·®, åœ¨æ•´ä¸ªæ¶ˆæ¯æµè½¬è¿‡ç¨‹ä¸­å ç”¨äº†å¤§é‡æ—¶é—´, æš‚æœªä¼˜åŒ–, ç›®å‰æœ‰å¤šç§ç¬¬ä¸‰æ–¹æ–¹æ¡ˆå¯ä»¥é€‰æ‹©.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åè®®ç‰ˆæœ¬&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¶ˆæ¯åè®®å¯èƒ½ä¼šå‡çº§, æ–°è€å®¢æˆ·ç«¯ä½¿ç”¨ä¸åŒåè®®ç‰ˆæœ¬å…¼å®¹ä¸Šä¸ºåšå¤„ç†.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-27&quot;&gt;æ•°æ®åº“ç›¸å…³&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ¶ˆæ¯ ID ç”Ÿæˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é¡¹ç›®ä¸­ç›®å‰ä½¿ç”¨ Redis Incr ç”Ÿæˆé€’å¢ ID, å­˜åœ¨æ€§èƒ½é—®é¢˜, åé¢å¯ä»¥è€ƒè™‘ä½¿ç”¨ Leaf ç­‰æ–¹æ¡ˆ.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®åº“, è¡¨, æŸ¥è¯¢ä¼˜åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœªå¯¹è¿™æ–¹é¢åšä»»ä½•ä¼˜åŒ–, dao å±‚å‡åªæ˜¯ç®€å•å®ç°äº† CRUD åŠŸèƒ½.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-28&quot;&gt;å¾®æœåŠ¡ç›¸å…³&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;é…ç½®ç®¡ç†&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›®å‰å¯åŠ¨æœåŠ¡æ˜¯é€šè¿‡æœ¬åœ°é…ç½®æ–‡ä»¶åŠ è½½é…ç½®å¯åŠ¨, éƒ¨ç½²ç®¡ç†èµ·æ¥ä¸å¤ªæ–¹ä¾¿, åé¢è€ƒè™‘ä½¿ç”¨é…ç½®ä¸­å¿ƒ.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒ…ç»“æ„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›®å‰å¾®æœåŠ¡å’Œ IM é€»è¾‘æ˜¯åˆ†å±‚è®¾è®¡, ä¸æ–¹ä¾¿ç»´æŠ¤å’ŒæŸ¥çœ‹, åé¢éœ€è¦è°ƒæ•´.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-29&quot;&gt;ç¾¤èŠçš„ç›¸å…³&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ¶ˆæ¯é£æš´&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¾¤æ¶ˆæ¯å­˜åœ¨æ‰©æ•£é—®é¢˜, å°¤å…¶æ˜¯å¤§ç¾¤ä¸€ä¸ªæˆå‘˜å‘æ¶ˆæ¯æ‰©æ•£å‡ åƒä¸Šä¸‡æ¬¡, ç¾¤æ•°é‡ç¨å¾®å¤šä¸€ç‚¹æˆ–è€…æ¶ˆæ¯ç¨å¾®é¢‘ç¹ä¸€ç‚¹, æ¶ˆæ¯æ•°é‡éå¸¸å®¹æ˜“å¤±æ§. åœ¨å¾®æœåŠ¡æ¨¡å¼ä¸‹éœ€è¦å¯¹ç³»ç»Ÿç½‘å…³çš„ç”¨æˆ·æ¶ˆæ¯è¿›è¡Œåˆå¹¶æ‰“åŒ…æˆä¸€æ¡æ¶ˆæ¯.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¾¤èŠæœåŠ¡æ•…éšœ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¾¤èŠå±äºå¸¦çŠ¶æ€æœåŠ¡, å½“ç¾¤æ‰€åœ¨æœåŠ¡å®•æœºåå¦‚ä½•ä¸å½±å“ç¾¤æ¶ˆæ¯çš„åˆ†å‘, è¿™ç‚¹æš‚æœªå¤„ç†, å¯¹äºæ¢å¤å¯ä»¥æ–°å¢ä¸€ä¸ªç¾¤èŠæœåŠ¡ç›‘æ§æœåŠ¡, ç›‘æ§åˆ°æŸä¸€ä¸ªç¾¤èŠæœåŠ¡æ‰çº¿ç«‹é©¬æ¢å¤, ä½†è¿™ä»…æ˜¯æ•…éšœæ¢å¤è€Œä¸æ˜¯å¯¹æ•…éšœè½¬ç§».&lt;/p&gt;
&lt;h2 data-id=&quot;heading-30&quot;&gt;ä¸‰. è®¾è®¡ç»†èŠ‚&lt;/h2&gt;
&lt;p&gt;ç”±äº GlideIM çš„è®¾è®¡ç»†èŠ‚è¾ƒå¤š, é™äºæ—¶é—´å’Œç¯‡å¹…, è¿™é‡Œåªåˆ—ä¸¾äº†å‡ ä¸ªè¾ƒä¸ºé‡è¦çš„ç¯èŠ‚æ¥åšç®€å•çš„è¯´æ˜, è¯¦ç»†æƒ…å†µæˆ–å…¶ä»–æœªè¯´æ˜çš„åœ°æ–¹å¯ä»¥æŸ¥çœ‹æºç æˆ–åŠ å…¥è®¨è®ºç¾¤ä¸€èµ·è®¨è®º.&lt;/p&gt;
&lt;h3 data-id=&quot;heading-31&quot;&gt;3.1 æ¶ˆæ¯ç±»å‹&lt;/h3&gt;
&lt;p&gt;IM æ¶ˆæ¯ç±»å‹æŒ‡çš„æ˜¯èŠå¤©åè®®æ¶ˆæ¯ç±»å‹, æ³¨æ„åŒºåˆ«èŠå¤©å†…å®¹çš„æ¶ˆæ¯ç±»å‹, IM æ¶ˆæ¯ç±»å‹å…³è”å‰åç«¯åŒæ–¹çš„ä¸šåŠ¡é€»è¾‘, èŠå¤©æ¶ˆæ¯ç±»å‹åªéœ€è¦åœ¨å‰ç«¯å¤„ç†.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;IM æ¶ˆæ¯ç±»å‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;èŠå¤©æ¶ˆæ¯: é‡å‘, é‡è¯•, æ’¤å›, ç¾¤èŠ, å•èŠ&lt;/li&gt;
&lt;li&gt;ACK æ¶ˆæ¯: æœåŠ¡å™¨ç¡®è®¤æ”¶åˆ°, æ¥å—è€…ç¡®è®¤é€šçŸ¥, æ¥å—è€…ç¡®è®¤é€è¾¾&lt;/li&gt;
&lt;li&gt;å¿ƒè·³æ¶ˆæ¯: å®¢æˆ·ç«¯å¿ƒè·³, æœåŠ¡ç«¯å¿ƒè·³&lt;/li&gt;
&lt;li&gt;API æ¶ˆæ¯: ä»¤ç‰Œè®¤è¯, é€€å‡ºç­‰&lt;/li&gt;
&lt;li&gt;é€šçŸ¥æ¶ˆæ¯: æ–°è”ç³»äºº, kickout, å¤šç«¯ç™»å½•ç­‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;èŠå¤©å†…å®¹æ¶ˆæ¯ç±»å‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å›¾ç‰‡&lt;/li&gt;
&lt;li&gt;æ–‡æœ¬&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¶ˆæ¯ç±»å‹ç”±å®¢æˆ·ç«¯å®šä¹‰åŠå¤„ç†, äºŒè¿›åˆ¶æ¶ˆæ¯ä¾‹å¦‚è¯­éŸ³, å›¾ç‰‡åˆ™ä¸Šä¼ åˆ°æœåŠ¡å™¨å†å‘é€ URL. ä¾‹å¦‚çº¢åŒ…è¿™ç§äº’åŠ¨å‹æ¶ˆæ¯, ä¸€æ ·å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•.&lt;/p&gt;
&lt;p&gt;å®¢æˆ·ç«¯ä¹‹é—´å®šä¹‰çº¦å®šæ¶ˆæ¯ç±»å‹å³æ–¹ä¾¿äº†åæœŸæ·»åŠ æ¶ˆæ¯ç±»å‹, ä¹Ÿæ–¹ä¾¿äº†åç«¯ç»´æŠ¤, åç«¯å¹¶ä¸éœ€è¦çŸ¥é“æ¶ˆæ¯å†…å®¹çš„ç±»å‹.&lt;/p&gt;
&lt;h3 data-id=&quot;heading-32&quot;&gt;3.2 é€è¾¾æœºåˆ¶&lt;/h3&gt;
&lt;p&gt;è™½è¯´ TCP æ˜¯å¯é ä¼ è¾“, ä½†åœ¨æ¶ˆæ¯ä¼ é€’è¿‡ç¨‹å¹¶ä¸æ˜¯ä¸‡æ— ä¸€å¤±çš„, ä¾‹å¦‚, æ¥å—è€…åœ¨çº¿ä½†ç½‘ç»œä¸å¥½, å®¢æˆ·ç«¯åœ¨é‡è¿, åˆ™æ¶ˆæ¯å¯èƒ½ä¸èƒ½åŠæ—¶é€è¾¾æ¥å—è€…, è®¾è®¡ä¸€ä¸ªé€è¾¾æœºåˆ¶æé«˜é€è¾¾ç‡æ˜¯å¿…è¦çš„. GlideIM é‡‡ç”¨äº†å•æ¡æ¶ˆæ¯ä¸¤æ¬¡ç¡®è®¤(æœåŠ¡ç«¯å’Œæ¥æ”¶è€…)çš„é€è¾¾æœºåˆ¶.&lt;/p&gt;
&lt;p&gt;A å‘é€ä¸€æ¡æ¶ˆæ¯ç»™ B, å¦‚æœ B åœ¨çº¿, æœåŠ¡ç«¯åˆ™å›å¤ A ä¸€æ¡æœåŠ¡ç«¯ç¡®è®¤æ”¶åˆ°æ¶ˆæ¯å‘Šè¯‰ A æœåŠ¡ç«¯å·²æ”¶åˆ°, å·²ç»å…¥åº“ä¿å­˜äº†, ç„¶åæœåŠ¡ç«¯å‘é€ç»™ B, B æ”¶åˆ°åˆ™å‘é€ä¸€æ¡ç¡®è®¤æ”¶åˆ°æ¶ˆæ¯ç»™æœåŠ¡ç«¯, æœåŠ¡ç«¯æ”¶åˆ°åå†å‘é€ä¸€æ¡ç¡®è®¤é€è¾¾æ¶ˆæ¯ç»™ A, è‹¥ B ä¸åœ¨çº¿åˆ™ç›´æ¥å‘é€ç»™ A ç¡®è®¤é€è¾¾,  A æ­¤æ—¶å°±çŸ¥é“è¿™æ¡æ¶ˆæ¯ä¸€å®šè¢« B æ”¶åˆ°äº†, åœ¨æ­¤è¿‡ç¨‹ä¸­ A å¦‚æœæ²¡æœ‰æ”¶åˆ° B ç¡®è®¤æ”¶åˆ°åˆ™å¤šæ¬¡é‡è¯•.&lt;/p&gt;
&lt;p&gt;åœ¨å®¢æˆ·ç«¯åšé‡å‘é¿å…äº†æœåŠ¡ç«¯é€»è¾‘å¤æ‚åŒ–, è€Œå®¢æˆ·ç«¯åšåˆ™å¤§å¤§ç®€åŒ–äº†é€»è¾‘. æœ‰äº†è¿™ä¸ªé€è¾¾æœºåˆ¶, ä¸ç®¡æ˜¯æ¶ˆæ¯ä¸¢äº†è¿˜æ˜¯ç½‘ç»œç¯å¢ƒä¸å¥½çš„æ—¶å€™, éƒ½èƒ½æé«˜é€è¾¾ç‡å’Œæ¶ˆæ¯åŠæ—¶ç‡, å†è€…è‹¥æˆ‘ä»¬ä½¿ç”¨ UDP, æœ‰äº†è¿™ä¸ªæœºåˆ¶ä¹Ÿå¯ä»¥ç¡®ä¿æ¶ˆæ¯çš„é€è¾¾ç‡.&lt;/p&gt;
&lt;p&gt;GlideIM æ¶ˆæ¯ ACK æœºåˆ¶å‡ ç§æ¶ˆæ¯ä¸¢å¤±æƒ…å†µä¸‹çš„æ—¶åºå›¾å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3e9b002e69ef403dac81265e1a2280ae~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?&quot; alt=&quot;message_ack.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šåªæ˜¯ GlideIM ä¿éšœé€è¾¾çš„ä¸€éƒ¨åˆ†, å®é™…ä¸Šè¿˜æœ‰æ¥æ”¶ç«¯æ ¹æ® Seq åˆ¤æ–­æ˜¯å¦æ¶ˆæ¯ç¼ºå¤±ç­‰å…¶ä»–æªæ–½.&lt;/p&gt;
&lt;h3 data-id=&quot;heading-33&quot;&gt;3.3 æ¶ˆæ¯è·¯ç”±&lt;/h3&gt;
&lt;p&gt;åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹, ç”¨æˆ·è¿æ¥åˆ°ä¸åŒçš„ç½‘å…³ä¸Š, æˆ‘ä»¬å¿…é¡»çŸ¥é“ç”¨æˆ·æ‰€åœ¨çš„ç½‘å…³æ‰èƒ½å‡†ç¡®çš„æŠ•é€’æ¶ˆæ¯, å› æ­¤, å¿…é¡»åœ¨ç”¨æˆ·è¿æ¥åˆ°ç½‘å…³çš„æ—¶å€™ç¼“å­˜æ‰€åœ¨ç½‘å…³ä¿¡æ¯, åœ¨æŠ•é€’æ¶ˆæ¯çš„æ—¶å€™æ‰èƒ½å‡†ç¡®åœ°æŠ•é€’åˆ°ç”¨æˆ·æ‰€åœ¨ç½‘å…³.&lt;/p&gt;
&lt;p&gt;GlideIM çš„è®¾è®¡æ˜¯åœ¨ç”¨æˆ·ç™»å½•æ—¶åœ¨ Redis ä¸­ç¼“å­˜ç½‘å…³ä¿¡æ¯, æˆ‘ä»¬å½“ç„¶ä¸èƒ½æ¯æ¬¡å‘æ¶ˆæ¯éƒ½æŸ¥è¯¢ Redis, å¯ä»¥åœ¨å†…å­˜ä¸­ç¼“å­˜ä¸€ä»½, å†…å­˜ä¸­æ²¡æœ‰åˆ™æŸ¥è¯¢ Redis. ç”¨æˆ·ç™»å½•èŠå¤©æœåŠ¡åæ ¹æ®è”ç³»äººåˆ—è¡¨æ‰€åœ¨ä¸åŒç½‘å…³, é€šçŸ¥ç½‘å…³æ›´æ–°è‡ªå·±çš„è·¯ç”±ä¿¡æ¯.&lt;/p&gt;
&lt;p&gt;ä¸ºäº†é¿å…å®¢æˆ·ç«¯é¢‘ç¹åˆ‡æ¢ç½‘å…³, å®¢æˆ·ç«¯æ¥å…¥ç½‘å…³ç”±æœåŠ¡ç«¯åœ¨ç”¨æˆ·ç™»å½•æ—¶è¿”å›, è¿™æ ·åšè¿˜å¯ä»¥ä¸ºåˆ¶å®šè´Ÿè½½å‡è¡¡ç­–ç•¥, å¤šç«¯ç™»å½•è¿æ¥åŒç½‘å…³ç­‰åšè€ƒè™‘.&lt;/p&gt;
&lt;h3 data-id=&quot;heading-34&quot;&gt;3.4 ä¿æ´»æœºåˆ¶&lt;/h3&gt;
&lt;p&gt;TCP è™½æœ‰ KeepAlive, ä½†å…¶é»˜è®¤æ—¶é—´å¤ªé•¿, ä¸”ä¸èƒ½åˆ¤æ–­æœåŠ¡æ˜¯å¦å¯ç”¨æˆ–å®¢æˆ·ç«¯æ˜¯å¦å¯ç”¨, KeepAlive ä»…ä»…ä¿è¯ TCP å¤„äºè¿æ¥çŠ¶æ€, å¦‚æœåº”ç”¨å±‚å‘ç”Ÿé”™è¯¯, æœåŠ¡ç«¯è¿æ¥å´ä¾æ—§é€šç•…æ˜æ˜¾æ˜¯ä¸è¡Œçš„.&lt;/p&gt;
&lt;p&gt;å¿ƒè·³åˆ†ä¸ºæœåŠ¡ç«¯å¿ƒè·³å’Œå®¢æˆ·ç«¯å¿ƒè·³, å¤§éƒ¨åˆ†æƒ…å†µæ˜¯å®¢æˆ·ç«¯ä¾§ç½‘ç»œä¸é€šç•…, ä¾‹å¦‚è¿›ç”µæ¢¯, æ¯å±çœç”µæ¨¡å¼, è€ŒæœåŠ¡ç«¯ä¸€èˆ¬åªä¼šåœ¨å®•æœºçš„æƒ…å†µæ‰ä¼šç½‘ç»œä¸é€šç•…, å› æ­¤ GlideIM åœ¨å®¢æˆ·ç«¯è¿›è¡Œä¸»åŠ¨å¿ƒè·³, è‹¥åœ¨æŒ‡å®šæ—¶é—´å†…æœåŠ¡ç«¯æœªæ”¶åˆ°å¿ƒè·³åˆ™æœåŠ¡ç«¯å¼€å§‹å‘é€å¿ƒè·³åŒ…, æŒ‡å®šæ¬¡æ•°æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯å¿ƒè·³åˆ™æ–­å¼€è¿æ¥.&lt;/p&gt;
&lt;p&gt;å®¢æˆ·ç«¯å¿ƒè·³ä¸º 30s, ä½†å¹¶ä¸æ˜¯æ¯éš”30séƒ½å‘å¿ƒè·³, è€Œæ˜¯ 30s å†…å®¢æˆ·ç«¯æ²¡æœ‰ä¸»åŠ¨å‘é€ä»»ä½•æ¶ˆæ¯, åˆ™è¿›è¡Œä¸€æ¬¡å¿ƒè·³, æœåŠ¡ç«¯ä¹Ÿæ˜¯æ ¹æ®è¿™ä¸ªè§„åˆ™åˆ¤æ–­, è¿™æ ·å‡å°‘äº†å¿ƒè·³çš„æ¬¡æ•°çš„åŒæ—¶ä¹Ÿèƒ½ç¡®ä¿å­˜æ´».&lt;/p&gt;
&lt;h3 data-id=&quot;heading-35&quot;&gt;3.5 æ¶ˆæ¯åè®®&lt;/h3&gt;
&lt;p&gt;æ¶ˆæ¯åè®®éœ€è¦è€ƒè™‘åˆ°æ¶ˆæ¯ç¼–ç åçš„å¤§å°, å¯è¯»æ€§, ç¼–ç é€Ÿåº¦, æ”¯æŒçš„è¯­è¨€ç­‰. å¯ä»¥é€‰æ‹©äºŒè¿›åˆ¶åè®®å’Œæ–‡æœ¬åè®®ä¸¤ç§, äºŒè¿›åˆ¶ä¾‹å¦‚ Protobuff, æˆ–è€…è‡ªå®šä¹‰, æ–‡æœ¬åè®®ä¾‹å¦‚ JSON, XML.&lt;/p&gt;
&lt;p&gt;GlideIM åŒæ—¶å®ç°äº† Protobuff å’Œ JSON ä¸¤ç§æ¶ˆæ¯åè®®. å®¢æˆ·ç«¯å¯ä»¥è‡ªç”±é€‰æ‹©ä½¿ç”¨å“ªç§åè®®, åœ¨æµ‹è¯•ç»“æœä¸­æ˜¾ç¤º Protobuff æ¯” JSON è‡³å°‘å¿« 10 å€, åœ¨ä½¿ç”¨JSONæ—¶æ•´ä¸ªæµç¨‹ä¸­, æ¶ˆæ¯è§£æå ç”¨äº†å¾ˆå¤§ä¸€éƒ¨åˆ†æ—¶é—´.&lt;/p&gt;
&lt;h3 data-id=&quot;heading-36&quot;&gt;3.6 æ¶ˆæ¯å»é‡å’Œæ’åº&lt;/h3&gt;
&lt;p&gt;GlideIM çš„æ¶ˆæ¯å»é‡ä¾é å…¨å±€æ¶ˆæ¯ ID, æ¶ˆæ¯IDæš‚æ—¶ä½¿ç”¨ Redis Incr, åé¢ä¼šä½¿ç”¨ç¾å›¢ Leaf, åœ¨ GlideIM ä¸­æ›¿æ¢æ¶ˆæ¯ ID ç”Ÿæˆç­–ç•¥éå¸¸ç®€å•, æ¶ˆæ¯ ID ç”±å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯æ—¶è·å–, å‘é€æ—¶é™„å¸¦è¯¥ ID ä»¥å®ç°å»é‡, å’Œå‘é€æ–¹æ¶ˆæ¯çš„æ’åº.&lt;/p&gt;
&lt;p&gt;åœ¨ä¸€å¯¹ä¸€å•èŠçš„æƒ…å†µ, GlideIM åªä¿éšœå‘é€æ–¹æœ‰åº, è€Œä¸€ä¸ªä¼šè¯å†…çš„æ‰€æœ‰æ¶ˆæ¯æ˜¯ä¸å¿…ä¿éšœé¡ºåºçš„, ç›¸å¯¹å…¶ä»˜å‡ºçš„ä»£ä»·å’Œå¸¦æ¥çš„æ”¶ç›Š. è€Œç¾¤èŠåˆ™æ˜¯ä¿éšœæ‰€æœ‰æ¶ˆæ¯æœ‰åºçš„, ç¾¤æ¶ˆæ¯ä¸‹å‘ä¼šé™„å¸¦å½“å‰ç¾¤çš„è¿ç»­é€’å¢ Seq, æ”¶åˆ°ç¾¤æ¶ˆæ¯æ ¹æ® Seq æ’åº, è‹¥å‘ç°ä¸è¿ç»­åˆ™æ‹‰å–ä¸è¿ç»­éƒ¨åˆ†çš„æ¶ˆæ¯.&lt;/p&gt;
&lt;h2 data-id=&quot;heading-37&quot;&gt;å››. æ€§èƒ½æµ‹è¯•&lt;/h2&gt;
&lt;p&gt;GlideIM æ¶ˆæ¯é¢å¯¹é«˜å¹¶å‘ååé‡å‹åŠ›æµ‹è¯•:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ceb50b69363340159cd814f1bb17348e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp&quot; alt=&quot;P&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h3 data-id=&quot;heading-38&quot;&gt;4.1 æµ‹è¯•ç»“æœ&lt;/h3&gt;
&lt;p&gt;å•å®ä¾‹éƒ¨ç½²æ¨¡å¼ä¸‹, 4H8G, 100Mbps å®½å¸¦ç†è®ºä¸Šæ”¯æŒ 20w æ´»è·ƒç”¨æˆ·åœ¨çº¿åŒæ—¶èŠå¤©, æ­¤æ—¶å¸¦å®½æ˜¯æ€§èƒ½çš„ç“¶é¢ˆ.&lt;/p&gt;
&lt;h3 data-id=&quot;heading-39&quot;&gt;4.2 æµ‹è¯•è¿‡ç¨‹&lt;/h3&gt;
&lt;p&gt;æœåŠ¡ç«¯é…ç½®&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs language-yaml&quot; lang=&quot;yaml&quot;&gt;&lt;span class=&quot;hljs-string&quot;&gt;Windows&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;
&lt;span class=&quot;hljs-string&quot;&gt;AMD&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;R5&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3600 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;æ ¸12çº¿ç¨‹&lt;/span&gt; 
&lt;span class=&quot;hljs-string&quot;&gt;16GB&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;å†…å­˜&lt;/span&gt;
&lt;span class=&quot;hljs-string&quot;&gt;100Mbps&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;ç½‘å¡&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 data-id=&quot;heading-40&quot;&gt;æ¡ˆä¾‹ 1 æµ‹è¯•è¿‡ç¨‹&lt;/h4&gt;
&lt;p&gt;A æœºå™¨è¿è¡ŒæœåŠ¡ç«¯, Bæ¨¡æ‹Ÿå®¢æˆ·ç«¯è¿æ¥ç™»å½•å‘æ¶ˆæ¯çš„è¿‡ç¨‹, å¹¶è¿è¡Œæ•°æ®åº“&lt;/p&gt;
&lt;p&gt;åŒæ—¶æ¨¡æ‹Ÿ 2000 å®¢æˆ·ç«¯, æ¯é—´éš” 60ms-200ms å‘é€ä¸€æ¡æ¶ˆæ¯, æ¯ä¸ªå®¢æˆ·ç«¯å‘é€ 600 æ¡æ¶ˆæ¯, å…±è®¡ 1200_000 æ¡æ¶ˆæ¯.&lt;/p&gt;
&lt;p&gt;ç½‘å¡è´Ÿè½½å¹³å‡ 90% (100Mbps), æ¯ç§’çº¦ 30_000 æ¡æ¶ˆæ¯ååé‡, æ¯ç§’ä¸Šä¸‹è¡Œå„ 15k æ¡, é€è¾¾ç‡ 100%, æ‰€æœ‰æ¶ˆæ¯å»¶æ—¶&amp;lt;=20ms, å‚è€ƒç»“æœ1å›¾.&lt;/p&gt;
&lt;p&gt;æµ‹è¯•æƒ…å†µ:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs language-erlang&quot; lang=&quot;erlang&quot;&gt;ç½‘ç»œ &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;hljs-comment&quot;&gt;%&lt;/span&gt;
&lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt; è¿æ¥
&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;-&lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;æ¡æ¶ˆæ¯/ç§’/è¿æ¥
&lt;span class=&quot;hljs-number&quot;&gt;30&lt;/span&gt;kæ¶ˆæ¯/tps
é€è¾¾ç‡ &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;hljs-comment&quot;&gt;%&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 data-id=&quot;heading-41&quot;&gt;æ¡ˆä¾‹ 2 æµ‹è¯•è¿‡ç¨‹&lt;/h4&gt;
&lt;p&gt;è¿™ä¸ªæ¡ˆä¾‹åªä¸ºäº†æµ‹è¯•ç¨‹åºåœ¨é«˜å¹¶å‘æƒ…å†µä¸‹çš„è¿è¡Œæƒ…å†µ, å‚è€ƒä»·å€¼ä¹Ÿä»…é™äºç¨‹åºæœ¬èº«çš„çŸ­æ¿å’Œä»£ç é€»è¾‘æé™, åœ¨å®é™…æƒ…å†µä¸­æˆ‘ä»¬æ— æ³•å¿½ç•¥ç½‘ç»œé€Ÿç‡ç­‰å› ç´ çš„å½±å“.&lt;/p&gt;
&lt;p&gt;ç”±äºéœ€è¦å»é™¤ç½‘å¡é€Ÿç‡é™åˆ¶, æœåŠ¡å’Œæ¨¡æ‹Ÿå®¢æˆ·ç«¯éƒ½åœ¨åŒä¸€å°è®¾å¤‡ä¸Šè¿è¡Œåˆ™ä¸å—ç½‘ç»œå› ç´ å½±å“, æ¨¡æ‹Ÿ10000ä¸ªé“¾æ¥, æ¯ä¸ªè¿æ¥ 50ms-100ms å‘é€ä¸€æ¡æ¶ˆæ¯, æ€»å…±å‘é€ 800 æ¡.&lt;/p&gt;
&lt;p&gt;æ­¤æ¡ˆä¾‹æ¶ˆæ¯ååé‡æé™ä¸º 28w, æ­¤æ—¶å·²è¾¾åˆ° cpu æ€§èƒ½æé™, å ç”¨ç‡çº¦98%, å®¢æˆ·ç«¯æ¨¡æ‹Ÿ cpu å ç”¨ç‡é«˜äºæœåŠ¡ç«¯, ä½†æ— å…³ç´§è¦.&lt;/p&gt;
&lt;p&gt;æµ‹è¯•æ¡ˆä¾‹ pprof CPUä½¿ç”¨æƒ…å†µåˆ†ææ•°æ®: &lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FGlide-IM%2FGlide-IM%2Fraw%2Fmaster%2F_art%2Fcpu_pprof_msg_io_no_db.out&quot; target=&quot;_blank&quot; title=&quot;https://github.com/Glide-IM/Glide-IM/raw/master/_art/cpu_pprof_msg_io_no_db.out&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;cpu.out&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æµ‹è¯•æƒ…å†µ:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs language-erlang&quot; lang=&quot;erlang&quot;&gt;CPU &lt;span class=&quot;hljs-number&quot;&gt;98&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;%&lt;/span&gt;
å†…å­˜çº¦ &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; GB
&lt;span class=&quot;hljs-number&quot;&gt;10000&lt;/span&gt; è¿æ¥å³°å€¼, æ¯ &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;ms å¼€å§‹ä¸€ä¸ªè¿æ¥
&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;-&lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;æ¡æ¶ˆæ¯/ç§’/è¿æ¥, ç´¯è®¡å‘é€&lt;span class=&quot;hljs-number&quot;&gt;800&lt;/span&gt;æ¡
&lt;span class=&quot;hljs-number&quot;&gt;280&lt;/span&gt;kæ¶ˆæ¯/tps å³°å€¼
é€è¾¾ç‡ &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;hljs-comment&quot;&gt;%&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 data-id=&quot;heading-42&quot;&gt;æµ‹è¯•ç¯å¢ƒé™åˆ¶&lt;/h4&gt;
&lt;p&gt;ç”±äºæµ‹è¯•åªæœ‰ä¸¤å°ç”µè„‘, å­˜åœ¨ç«¯å£æ•°é™åˆ¶(éƒ¨ç½²åˆ°æœåŠ¡å™¨, ç”¨æˆ·è¿æ¥ä¸å­˜åœ¨è¿™ä¸ªé™åˆ¶), ä¸ºäº†æé«˜ MySQL è¿æ¥æ± çš„å¤§å°æé«˜å¹¶å‘, å¿…é¡»å°½é‡ç”¨æ›´å°‘çš„è¿æ¥æ•°å’Œæ¯ä¸ªè¿æ¥æ›´å¯†é›†çš„å‘é€æ¶ˆæ¯æ¥è¿›è¡Œæµ‹è¯•&lt;/p&gt;
&lt;p&gt;ç™¾å…†ç½‘å¡ä¸Šé™é€Ÿç‡åªæœ‰ 12.5MB/s, ä¸€æ¡æ¶ˆæ¯åŒ…å« 20 ä¸ªæ±‰å­—åˆ™è‡³å°‘éœ€è¦ 40B, å†åŠ ä¸ŠæŠ¥å¤´å…¶ä»–å ç”¨, å‡è®¾ 100B, åˆ™å®é™…ç™¾å…†ç½‘å¡æœ€å¤§çš„æ¶ˆæ¯å¹¶å‘æ˜¯ 12.5 x 1024 x 1024 / 100 = 13w æ¡, è€Œå»é™¤
ACK, å†ä¸Šä¸‹è¡Œæ¶ˆæ¯æ•°é‡å¯¹åŠ, å®é™…å¯èƒ½å°± 6w/s æ¶ˆæ¯å°±æ˜¯ GlideIM åœ¨ 100Mbps ç¯å¢ƒä¸‹çš„ç†è®ºæé™.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-43&quot;&gt;æµ‹è¯•ä»£ç &lt;/h4&gt;
&lt;p&gt;å•æœºæ€§èƒ½æµ‹è¯•&lt;/p&gt;
&lt;p&gt;æµ‹è¯•ä»£ç è·¯å¾„: &lt;a href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FGlide-IM%2FGlide-IM%2Ftree%2Fmaster%2Fcmd%2Fperformance_test&quot; target=&quot;_blank&quot; title=&quot;https://github.com/Glide-IM/Glide-IM/tree/master/cmd/performance_test&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;/cmd/performance_test/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;1.å¯åŠ¨æœåŠ¡å™¨&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs language-shell&quot; lang=&quot;shell&quot;&gt;go test -v -run=TestServerPerf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2.å¼€å§‹ç”¨æˆ·æ¨¡æ‹Ÿ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs language-shell&quot; lang=&quot;shell&quot;&gt;go test -v -run=TestRunClient
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 data-id=&quot;heading-44&quot;&gt;4.3 æ€§èƒ½å‚è€ƒæŒ‡æ ‡è¯´æ˜&lt;/h3&gt;
&lt;h4 data-id=&quot;heading-45&quot;&gt;è¿æ¥æ•°&lt;/h4&gt;
&lt;p&gt;å¾ˆå¤š IM é¡¹ç›®å–œæ¬¢ç”¨ç±»ä¼¼äº &quot;ç™¾ä¸‡è¿æ¥&quot; ä¹‹ç±»çš„å­—çœ¼, å¾ˆå¤šäººå¯èƒ½æ˜¯å—å¸¸è§„ HTTP æœåŠ¡ &quot;ç™¾ä¸‡å¹¶å‘&quot; çš„å½±å“, è®¤ä¸ºç™¾ä¸‡è¿æ¥ä¸ç™¾ä¸‡å¹¶å‘å…·æœ‰ä¸€è‡´çš„æ€§èƒ½å‚è€ƒä»·å€¼, å¼€å‘è€…ä¸ºäº†å¸å¼•çœ¼çƒä½¿ç”¨ç™¾ä¸‡è¿æ¥çš„å­—çœ¼, ä¹Ÿç¡®å®æ”¯æŒç™¾ä¸‡é“¾æ¥.&lt;/p&gt;
&lt;p&gt;äº‹å®ä¸Š, TCP(æˆ–WS) è¿æ¥æ•°çš„é™åˆ¶å¹¶ä¸åœ¨äºç¨‹åºæœ¬èº«, ç³»ç»Ÿæœ€å¤§å¯æ‰“å¼€ æ–‡ä»¶æè¿°ç¬¦ å’Œ å†…å­˜ é™åˆ¶äº†æœ€å¤§è¿æ¥æ•°, ä¸€ä¸ª TCP è¿æ¥å¤§çº¦éœ€è¦å ç”¨ 4-10KB å†…å­˜, ä¸€å° 16GB çš„æœåŠ¡å™¨ç†è®ºä¸Šæœ€å¤§æ”¯æŒçº¦ 16 * 1024 *
1024 / 5 â‰ˆ 335w è¿æ¥.&lt;/p&gt;
&lt;p&gt;æ´»è·ƒç”¨æˆ·æ•°åˆ™æ¯”å•çº¯çš„è¿æ¥æ•°æ›´æœ‰å‚è€ƒä»·å€¼, ä¾‹å¦‚æ”¯æŒ 100w æ´»è·ƒè¿æ¥, æ¯ä¸ªæ´»è·ƒè¿æ¥10så‘é€ä¸€æ¡æ¶ˆæ¯.&lt;/p&gt;
&lt;h4 data-id=&quot;heading-46&quot;&gt;æ¶ˆæ¯ååé‡&lt;/h4&gt;
&lt;p&gt;ç›¸æ¯”è¿æ¥æ•°, æ¶ˆæ¯ååé‡æ›´å…·æœ‰å‚è€ƒä»·å€¼, æ¶ˆæ¯ååé‡éœ€è¦ç»“åˆç½‘ç»œé€Ÿç‡åšå‚è€ƒ. æ¶ˆæ¯ååé‡å—é™ç‚¹ä¸»è¦æœ‰ä¸€ä¸‹å‡ ä¸ª:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¶ˆæ¯é€è¾¾ä¿éšœæœºåˆ¶çš„æ€§èƒ½(å³ä¿éšœé€è¾¾åˆä¸å†—ä½™)&lt;/li&gt;
&lt;li&gt;æ¶ˆæ¯æ•°æ®ä¼ è¾“åè®®çš„æ€§èƒ½(å•æ¡æ¶ˆæ¯å°½å¯èƒ½å‡å°ä½“ç§¯)&lt;/li&gt;
&lt;li&gt;éç”¨æˆ·æ¶ˆæ¯çš„æ•°æ®åŒ…æ•°é‡æ§åˆ¶(ä¾‹å¦‚å¿ƒè·³åŒ…, å†…å®¹åŒæ­¥åŒ…ç­‰)&lt;/li&gt;
&lt;li&gt;ç½‘ç»œé€Ÿç‡å’Œè´¨é‡(å¤–éƒ¨å› ç´ )&lt;/li&gt;
&lt;li&gt;ç¨‹åºæœ¬èº«æ¶ˆæ¯ä¸‹å‘è®¾è®¡ç¼ºé™·&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 data-id=&quot;heading-47&quot;&gt;å…¶ä»–æŒ‡æ ‡&lt;/h4&gt;
&lt;p&gt;è€ƒé‡ä¸€æ¬¾ IM çš„æ€§èƒ½çš„æ„ä¹‰å¤§éƒ¨åˆ†å¯èƒ½åªåœ¨äºæ­ç¤ºå®ƒè‡ªèº«çš„æ€§èƒ½çŸ­æ¿, æ¨ªå‘å¯¹æ¯”å…¶ä»–é¡¹ç›®åœ¨å¤§éƒ¨åˆ†æƒ…å†µéƒ½æ— æ³•å¾—å‡ºæ­£ç¡®çš„å¯¹æ¯”ç»“æœ, å•é¡¹æŒ‡æ ‡ä¹Ÿä¸èƒ½å®Œå…¨è¡¡é‡æ•´ä¸ªé¡¹ç›®çš„ä¼˜åŠ£, æˆ‘ä»¬åº”è¯¥ç»“åˆå…¶ä¸šåŠ¡é€»è¾‘, è®¾è®¡æ€æƒ³, å­¦ä¹ å…¶ä¼˜ç‚¹æ‰èƒ½æœ‰æ‰€æ”¶è·.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¶ˆæ¯é€è¾¾ç‡&lt;/li&gt;
&lt;li&gt;æ¶ˆæ¯å»¶è¿Ÿå’Œæ¶ˆæ¯é¡ºåºçš„å‡†ç¡®æ€§&lt;/li&gt;
&lt;li&gt;é“¾æ¥ä¿æ´»å’Œå»æ­»é“¾(å¿ƒè·³)&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 data-id=&quot;heading-48&quot;&gt;4.4 æ€§èƒ½æŒ‡æ ‡ä¼°ç®—&lt;/h3&gt;
&lt;p&gt;1.è¿æ¥æ•°&lt;/p&gt;
&lt;p&gt;å‡è®¾è®¾å†…å­˜ä¸º M GB&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs language-text&quot; lang=&quot;text&quot;&gt;ç†è®ºè¿æ¥æ•°  = M * 1024m * 1024k / (4k/tcp)

ä¿å®ˆä¼°ç®—è¿æ¥æ•° = M * 1024m * 1024k / (10k/tcp)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2.æ¶ˆæ¯ååé‡ä¼°ç®—&lt;/p&gt;
&lt;p&gt;è®¾ç½‘å¡é€Ÿç‡ä¸º S Mbps, å¹³å‡æ¯æ¡æ¶ˆæ¯ä¸º K å­—èŠ‚(å†™å…¥ TCP è¿æ¥æ—¶çš„æ€»å¤§å°).&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs language-text&quot; lang=&quot;text&quot;&gt;æ¶ˆæ¯ååé‡ = S / 8 * 1024k * 1024b / K
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3.æ´»è·ƒç”¨æˆ·æ•°ä¼°ç®—&lt;/p&gt;
&lt;p&gt;è®¾ååé‡ T, è®¾å¹³å‡æ¯ä¸ªç”¨æˆ·æ¯ N ç§’å‘é€ä¸€æ¡æ¶ˆæ¯.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ç¡®è®¤é€è¾¾æœºåˆ¶ä¸‹ (æ¯æ¡æ¶ˆæ¯çš„å‘é€, å‡è®¾æ”¶å‘åŒæ–¹è¯»åœ¨çº¿, æœåŠ¡ç«¯å®¢æˆ·éƒ½éœ€ACK, å…±éœ€è¦ 5 æ¡æ¶ˆæ¯ä¸Šä¸‹è¡Œ)&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;hljs language-text&quot; lang=&quot;text&quot;&gt;æ´»è·ƒç”¨æˆ·æ•° = T / 5 * N
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;ä»…ç¡®è®¤é€è¾¾æœåŠ¡ç«¯&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;hljs language-text&quot; lang=&quot;text&quot;&gt;æ´»è·ƒç”¨æˆ·æ•° = T / 3 * N
&lt;/code&gt;&lt;/pre&gt;</description><link>https://juejin.cn/post/7088262766779170853</link><guid isPermaLink="false">https://juejin.cn/post/7088262766779170853</guid><pubDate>Tue, 19 Apr 2022 10:40:15 GMT</pubDate><author>dengzi</author><category>åç«¯</category><category>Go</category></item><item><title>SQL æŸ¥æ‰¾æ˜¯å¦â€œå­˜åœ¨â€œï¼Œåˆ«å† count äº†ï¼Œå¾ˆè€—è´¹æ—¶é—´çš„ï¼</title><description>&lt;ul&gt;
&lt;li&gt;ç›®å‰å¤šæ•°äººçš„å†™æ³•&lt;/li&gt;
&lt;li&gt;ä¼˜åŒ–æ–¹æ¡ˆ&lt;/li&gt;
&lt;li&gt;æ€»ç»“&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ ¹æ®æŸä¸€æ¡ä»¶ä»æ•°æ®åº“è¡¨ä¸­æŸ¥è¯¢ ã€æœ‰ã€ä¸ã€æ²¡æœ‰ã€ï¼Œåªæœ‰ä¸¤ç§çŠ¶æ€ï¼Œé‚£ä¸ºä»€ä¹ˆåœ¨å†™SQLçš„æ—¶å€™ï¼Œè¿˜è¦SELECT count(*) å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æ— è®ºæ˜¯åˆšå…¥é“çš„ç¨‹åºå‘˜æ–°æ˜Ÿï¼Œè¿˜æ˜¯ç²¾æ¹›æ²™åœºå¤šå¹´çš„ç¨‹åºå‘˜è€ç™½ï¼Œéƒ½æ˜¯ä¸€å¦‚æ—¢å¾€çš„count
ç›®å‰å¤šæ•°äººçš„å†™æ³•
å¤šæ¬¡REVIEWä»£ç æ—¶ï¼Œå‘ç°å¦‚ç°ç°è±¡ï¼š
ä¸šåŠ¡ä»£ç ä¸­ï¼Œéœ€è¦æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ï¼ŒæŸ¥è¯¢æ˜¯å¦å­˜åœ¨è®°å½•ï¼Œä¸å…³å¿ƒæœ‰å¤šå°‘æ¡è®°å½•ã€‚æ™®éçš„SQLåŠä»£ç å†™æ³•å¦‚ä¸‹&lt;/p&gt;
&lt;h4 data-id=&quot;heading-0&quot;&gt;SQLå†™æ³•:&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&quot;hljs language-sql&quot; lang=&quot;sql&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;WHERE&lt;/span&gt; a &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;AND&lt;/span&gt; b &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 data-id=&quot;heading-1&quot;&gt;Javaå†™æ³•:&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&quot;hljs language-csharp&quot; lang=&quot;csharp&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; nums = xxDao.countXxxxByXxx(&lt;span class=&quot;hljs-keyword&quot;&gt;params&lt;/span&gt;);
&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ( nums &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; ) {
  &lt;span class=&quot;hljs-comment&quot;&gt;//å½“å­˜åœ¨æ—¶ï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç &lt;/span&gt;
} &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {
  &lt;span class=&quot;hljs-comment&quot;&gt;//å½“ä¸å­˜åœ¨æ—¶ï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç &lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆOKï¼Œæ²¡æœ‰ä»€ä¹ˆé—®é¢˜
ä¼˜åŒ–æ–¹æ¡ˆ
æ¨èå†™æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;h4 data-id=&quot;heading-2&quot;&gt;SQLå†™æ³•:&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&quot;hljs language-css&quot; lang=&quot;css&quot;&gt;SELECT &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;table&lt;/span&gt; WHERE &lt;span class=&quot;hljs-selector-tag&quot;&gt;a&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; AND &lt;span class=&quot;hljs-selector-tag&quot;&gt;b&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; LIMIT &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 data-id=&quot;heading-3&quot;&gt;Javaå†™æ³•:&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&quot;hljs language-arduino&quot; lang=&quot;arduino&quot;&gt;Integer exist = xxDao.&lt;span class=&quot;hljs-built_in&quot;&gt;existXxxxByXxx&lt;/span&gt;(params);
&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ( exist != &lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt; ) {
  &lt;span class=&quot;hljs-comment&quot;&gt;//å½“å­˜åœ¨æ—¶ï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç &lt;/span&gt;
} &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {
  &lt;span class=&quot;hljs-comment&quot;&gt;//å½“ä¸å­˜åœ¨æ—¶ï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç &lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;SQLä¸å†ä½¿ç”¨countï¼Œè€Œæ˜¯æ”¹ç”¨LIMIT 1ï¼Œè®©æ•°æ®åº“æŸ¥è¯¢æ—¶é‡åˆ°ä¸€æ¡å°±è¿”å›ï¼Œä¸è¦å†ç»§ç»­æŸ¥æ‰¾è¿˜æœ‰å¤šå°‘æ¡äº†
ä¸šåŠ¡ä»£ç ä¸­ç›´æ¥åˆ¤æ–­æ˜¯å¦éç©ºå³å¯&lt;/p&gt;
&lt;h4 data-id=&quot;heading-4&quot;&gt;æ€»ç»“&lt;/h4&gt;
&lt;p&gt;æ ¹æ®æŸ¥è¯¢æ¡ä»¶æŸ¥å‡ºæ¥çš„æ¡æ•°è¶Šå¤šï¼Œæ€§èƒ½æå‡çš„è¶Šæ˜æ˜¾ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿˜å¯ä»¥å‡å°‘è”åˆç´¢å¼•çš„åˆ›å»ºã€‚&lt;/p&gt;</description><link>https://juejin.cn/post/6933481147699560455</link><guid isPermaLink="false">https://juejin.cn/post/6933481147699560455</guid><pubDate>Fri, 26 Feb 2021 08:08:20 GMT</pubDate><author>ç å†œçªå›´</author><category>åç«¯</category><category>MySQL</category></item><item><title>å¦‚ä½•åƒspring ä¸€æ ·ä½¿ç”¨vertx</title><description>&lt;h1 class=&quot;heading&quot; data-id=&quot;heading-0&quot;&gt;å¦‚ä½•åƒspring ä¸€æ ·ä½¿ç”¨vertx&lt;/h1&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-1&quot;&gt;ä»€ä¹ˆæ˜¯vertx&lt;/h2&gt;
&lt;p&gt;EclipseVert.xæ˜¯äº‹ä»¶é©±åŠ¨å’Œéé˜»å¡çš„ã€‚è¿™æ„å‘³ç€æ‚¨çš„åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨å°‘é‡çš„å†…æ ¸çº¿ç¨‹å¤„ç†å¤§é‡å¹¶å‘ã€‚Vert.xè®©ä½ çš„åº”ç”¨ç¨‹åºå¯ä»¥ç”¨æœ€å°‘çš„ç¡¬ä»¶æ‰©å±•,Vert.xä¸å¤šç§è¯­è¨€ä¸€èµ·ä½¿ç”¨ï¼ŒåŒ…æ‹¬Javaã€Kotlinã€JavaScriptã€Groovyã€Rubyå’ŒScalaã€‚&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/25/171b1c3a8d2d8eda~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;
&lt;figure&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/25/171b1c3c5af49169~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;
æŠ€æœ¯æ— å¥½å,åªæœ‰é€‚åˆä¸é€‚åˆ.&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Vertxï¼Œæ˜¯ä¸€ä¸ªåŸºäºJVMã€è½»é‡çº§ã€é«˜æ€§èƒ½çš„åº”ç”¨å¹³å°ï¼Œéå¸¸é€‚ç”¨äºç§»åŠ¨ç«¯åå°ã€äº’è”ç½‘ã€ä¼ä¸šåº”ç”¨æ¶æ„ã€‚&lt;/p&gt;
&lt;p&gt;Vertxï¼ŒåŸºäºNettyå…¨å¼‚æ­¥é€šä¿¡ï¼Œå¹¶æ‰©å±•å‡ºäº†å¾ˆå¤šæœ‰ç”¨çš„ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;Vertxï¼Œæ˜¯åŸºäºäº‹ä»¶æ€»çº¿è®¾è®¡çš„é«˜æ€§èƒ½æ¶æ„ï¼Œä¿è¯åº”ç”¨ä¸­ä¸åŒéƒ¨åˆ†ä»¥ä¸€ç§éå µå¡çš„çº¿ç¨‹å®‰å…¨æ–¹å¼é€šè®¯ã€‚&lt;/p&gt;
&lt;p&gt;Vertxï¼Œæ˜¯å€Ÿé‰´Erlangå’ŒAkkaæ¶æ„è®¾è®¡ï¼Œèƒ½å……åˆ†åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨æ€§èƒ½å¹¶å®ç°é«˜å¹¶å‘ç¼–ç¨‹éœ€æ±‚çš„æ¡†æ¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Vertxç‰¹ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç›®å‰æ”¯æŒJavaã€JavaScriptã€Rubyã€Pythonã€Groovyã€Clojureã€Ceylonç­‰ï¼Œå¹¶æä¾›å‹å¥½çš„APIæ¥å£ã€‚ä»¥ä¸ŠæŠ€æœ¯æ ˆçš„å·¥ç¨‹å¸ˆå¯ä»¥éå¸¸å®¹æ˜“çš„å­¦ä¹ å’Œä½¿ç”¨Vert.x æ¶æ„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¼‚æ­¥æ— é”ç¼–ç¨‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç»å…¸çš„å¤šçº¿ç¨‹ç¼–ç¨‹æ¨¡å‹èƒ½æ»¡è¶³å¾ˆå¤šWebå¼€å‘åœºæ™¯ï¼Œä½†éšç€ç§»åŠ¨äº’è”ç½‘å¹¶å‘è¿æ¥æ•°çš„çŒ›å¢ï¼Œå¤šçº¿ç¨‹å¹¶å‘æ§åˆ¶æ¨¡å‹æ€§èƒ½éš¾ä»¥æ‰©å±•ï¼ŒåŒæ—¶è¦æƒ³æ§åˆ¶å¥½å¹¶å‘é”éœ€è¦è¾ƒé«˜çš„æŠ€å·§ï¼Œç›®å‰Reactorå¼‚æ­¥ç¼–ç¨‹æ¨¡å‹å¼€å§‹è·‘é©¬åœˆåœ°ï¼Œè€ŒVert.xå°±æ˜¯è¿™ç§å¼‚æ­¥æ— é”ç¼–ç¨‹çš„ä¸€ä¸ªé¦–é€‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯¹å„ç§IOçš„ä¸°å¯Œæ”¯æŒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç›®å‰Vert.xçš„å¼‚æ­¥æ¨¡å‹å·²æ”¯æŒTCPã€UDPã€FileSystemã€DNSã€EventBusã€Sockjsç­‰ï¼ŒåŸºæœ¬æ»¡è¶³ç»å¤§å¤šæ•°ç³»ç»Ÿæ¶æ„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ†å¸ƒå¼æ¶ˆæ¯ä¼ è¾“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Vert.xåŸºäºåˆ†å¸ƒå¼Busæ¶ˆæ¯æœºåˆ¶å®ç°å…¶Actoræ¨¡å‹ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘å¦‚æœä¾èµ–å…¶ä»–Actoråˆ™é€šè¿‡Busç®€å•çš„å°†æ¶ˆæ¯å‘é€å‡ºå»å°±å¯ä»¥äº†ã€‚EventBusäº‹ä»¶æ€»çº¿ï¼Œå¯ä»¥è½»æ¾ç¼–å†™åˆ†å¸ƒå¼è§£è€¦çš„ç¨‹åºï¼Œå…·æœ‰å¾ˆå¥½çš„æ‰©å±•æ€§ã€‚&lt;/p&gt;
&lt;p&gt;EventBusä¹Ÿæ˜¯Vert.xæ¶æ„çš„çµé­‚æ‰€åœ¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”Ÿæ€ä½“ç³»æ—¥è¶‹æˆç†Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Vertxå½’å…¥EclipseåŸºé‡‘ä¼šé—¨ä¸‹ï¼Œå¼‚æ­¥é©±åŠ¨å·²ç»æ”¯æŒäº†Postgresã€MySQLã€MongoDBã€Redisç­‰å¸¸ç”¨ç»„ä»¶ï¼Œå¹¶ä¸”æœ‰è‹¥å¹²Vertxåœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„åº”ç”¨æ¡ˆä¾‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/25/171b1c44076db37b~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Vertxæ˜¯è½»é‡çº§çš„&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;vertxçš„æ ¸å¿ƒä»£ç åŒ…åªæœ‰650kBå·¦å³ï¼ŒåŒæ—¶æä¾›ä¸°å¯Œçš„æ‰©å±•æ’ä»¶ï¼Œæ»¡è¶³å„ç±»éœ€æ±‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¨¡å—åŒ–&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Vertxæœ¬èº«å†…ç½®å¼ºå¤§çš„æ¨¡å—ç®¡ç†æœºåˆ¶,å½“ä½ å†™å®Œä¸€ä¸ªVert.xä¸šåŠ¡é€»è¾‘çš„æ—¶å€™,ä½ å¯ä»¥å°†å…¶æ‰“åŒ…æˆmodule,ç„¶åéƒ¨ç½²åˆ°åŸºäºMavençš„ä»“åº“é‡Œ,ä¸ç°æœ‰ä¸»æµçš„å¼€å‘è¿‡ç¨‹æ— ç¼ç»“åˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ”¯æŒWebSocket&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ”¯æŒWebSocketåè®®å…¼å®¹SockJS ï¼Œ å¯ä»¥éå¸¸æ–¹ä¾¿çš„å®ç°webå‰ç«¯å’ŒæœåŠ¡åç«¯é•¿è¿æ¥é€šä¿¡ï¼Œæ˜¯è½»é‡çº§webèŠå¤©å®¤åº”ç”¨é¦–é€‰è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ç®€å•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„ç®€å•æ„å‘³ç€ä½ ç¼–å†™çš„ä»£ç æ˜¯å®Œå…¨åŸºäºå¼‚æ­¥äº‹ä»¶çš„,ç±»ä¼¼Node.JS,ä¸æ­¤åŒæ—¶.ä½ ä¸éœ€è¦å…³æ³¨çº¿ç¨‹ä¸Šçš„åŒæ­¥,ä¸é”ä¹‹ç±»çš„æ¦‚å¿µ,æ‰€æœ‰çš„ç¨‹åºéƒ½æ˜¯å¼‚æ­¥æ‰§è¡Œå¹¶ä¸”é€šä¿¡æ˜¯æ— é˜»å¡çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è‰¯å¥½çš„æ‰©å±•æ€§&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å› ä¸ºåŸºäºActoræ¨¡å‹,æ‰€ä»¥ä½ çš„ç¨‹åºéƒ½æ˜¯ä¸€ä¸ªç‚¹ä¸€ä¸ªç‚¹çš„å•ç‹¬åœ¨è·‘,ä¸€ç¾¤ç‚¹å¯ä»¥ç»„æˆä¸€ä¸ªæœåŠ¡,æŸä¸ªç‚¹éƒ½æ˜¯å¯ä»¥æ°´å¹³æ‰©å±•,åŠ¨æ€æ›¿æ¢,è¿™æ ·ä½ çš„ç¨‹åº,åŸºæœ¬å°±å¯ä»¥è¾¾åˆ°æ— é™åˆ¶çš„æ°´å¹³æ‰©å±•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é«˜å¹¶å‘æ€§&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;vert.xæ˜¯ä¸€ä¸ªäº‹ä»¶é©±åŠ¨éé˜»å¡çš„å¼‚æ­¥ç¼–ç¨‹æ¡†æ¶ï¼Œä½ å¯ä»¥åœ¨æå°‘çš„æ ¸å¿ƒçº¿ç¨‹é‡Œå ç”¨æœ€å°é™åº¦çš„ç¡¬ä»¶èµ„æºå¤„ç†å¤§é‡çš„é«˜å¹¶å‘è¯·æ±‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬æ¦‚å¿µ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;handler: äº‹ä»¶å¤„ç†å™¨
event loop:äº‹ä»¶å¾ªç¯(çº¿ç¨‹)(åŒnetty)
verticle: Vert.x åŸºæœ¬ç»„ä»¶,æ¨¡å—ã€‚
worker: å·¥ä½œçº¿ç¨‹
event bus: äº‹ä»¶æ€»çº¿&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬çœ‹ä¸‹vertx çš„javaå¼€å‘æµç¨‹&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs java&quot; lang=&quot;java&quot;&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; io.vertx.core.AbstractVerticle;
&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Server&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;AbstractVerticle&lt;/span&gt; &lt;/span&gt;{
  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{
    vertx.createHttpServer().requestHandler(req -&amp;gt; {
      req.response()
        .putHeader(&lt;span class=&quot;hljs-string&quot;&gt;&quot;content-type&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;text/plain&quot;&lt;/span&gt;)
        .end(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Hello from Vert.x!&quot;&lt;/span&gt;);
    }).listen(&lt;span class=&quot;hljs-number&quot;&gt;8080&lt;/span&gt;);
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/25/171b1c46a13224db~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;ä½†åŒæ—¶vertxä¹Ÿæœ‰ä»–çš„ç¼ºç‚¹,å°±æ‹¿vertx-webç›¸æ¯”springmvcæ¥è¯´,vertxæ›´åŠ çµæ´»,ä½†åŒæ—¶ä¹Ÿéœ€è¦å¼€å‘äººå‘˜webaåŸç”Ÿå¼€å‘æœ‰æ›´æ·±åˆ»çš„äº†è§£,åŒ…æ‹¬å„ç§è¯·æ±‚è¿”å›å¤´çš„æ·»åŠ ,ä»¥åŠå„ç§æ‹¦æˆªå™¨,è‡ªå®šä¹‰æ¶ˆæ¯è½¬æ¢ç­‰çš„å¤„ç†,éƒ½éœ€è¦å¼€å‘äººå‘˜è‡ªè¡Œé…ç½®,è¿™æ˜¾ç„¶æ˜¯å¤§éƒ¨åˆ†å¼€å‘äººå‘˜æ‰€ä¸æ„¿æ„çš„,æ‰€ä»¥å¯¼è‡´äº†vertxç›®å‰å¹¶ä¸æ€ä¹ˆæµè¡Œ,ä½†è¿™äº›å¹¶ä¸å½±å“ä¸€ä¸ªæ¡†æ¶æœ¬èº«çš„é­…åŠ›.å½“ç„¶è¿˜æœ‰å¾ˆå¤šè½»é‡çº§çš„webå¼€å‘æ¡†æ¶,jfinal,playç­‰ç­‰å°ä¼—æ¡†æ¶.&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-2&quot;&gt;ä»€ä¹ˆæ˜¯vertx-web-springmvc?&lt;/h2&gt;
&lt;p&gt;vertx-web-springmvc  æ˜¯åŸºäºvertx -web ç±»ä¼¼springmvcçš„å¼€å‘é£æ ¼çš„webæ¡†æ¶,æ–¹ä¾¿åŸspringå¼€å‘äººå‘˜æ— ç¼è¿ç§»&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;springmvc é£æ ¼å¼€å‘&lt;/li&gt;
&lt;li&gt;ç»Ÿä¸€å¼‚å¸¸å¤„ç†&lt;/li&gt;
&lt;li&gt;æ‹¦æˆªå™¨&lt;/li&gt;
&lt;li&gt;ç»Ÿä¸€ç»“æœå¤„ç†&lt;/li&gt;
&lt;li&gt;springmvc é£æ ¼æ¨¡æ¿æ¸²æŸ“&lt;/li&gt;
&lt;li&gt;é™æ€èµ„æº&lt;/li&gt;
&lt;li&gt;æ”¯æŒspringå®¹å™¨&lt;/li&gt;
&lt;li&gt;è·¨åŸŸæ”¯æŒ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;springmvc é£æ ¼æ³¨è§£ä»‹ç»&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ³¨è§£&lt;/th&gt;
&lt;th&gt;ç”¨æ³•&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;TemplateBody&lt;/td&gt;
&lt;td&gt;ç±»ä¼¼springmvcçš„@ ResponseBodyæ ‡è®°æ¨¡æ¿æ¸²æŸ“ é˜»å¡æ‰§è¡Œ,é…åˆ VertxTemplateEngineæ ‡è®°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ResponseBody&lt;/td&gt;
&lt;td&gt;ç±»ä¼¼springmvcçš„ @ResponseBody æ ‡è®°æ¶ˆæ¯è½¬æ¢ (ä¾èµ– MessageConverter)é˜»å¡æ‰§è¡Œ,é…åˆ VertxMessageConverteræ ‡è®°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RouteHandler&lt;/td&gt;
&lt;td&gt;ç±»ä¼¼springmvcçš„ @Controller&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RouteMapping&lt;/td&gt;
&lt;td&gt;ç±»ä¼¼springmvcçš„ @RequestMapping&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Interceptor&lt;/td&gt;
&lt;td&gt;vertx æ‹¦æˆªå™¨æ ‡è®°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RouterAdvice&lt;/td&gt;
&lt;td&gt;ç±»ä¼¼springmvcçš„ @ControllerAdvice&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ExceptionHandler&lt;/td&gt;
&lt;td&gt;ç±»ä¼¼springmvcçš„ @ExceptionHandler å¼‚å¸¸å¤„ç†&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-3&quot;&gt;vertx-web-springmvc å¼€å‘ç¤ºä¾‹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;json,æ¨¡æ¿æ¸²æŸ“,vertx-web åŸç”Ÿå¼€å‘ç¤ºä¾‹&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;hljs java&quot; lang=&quot;java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;package&lt;/span&gt; com.taoyuanx.vertxdemo.withspring.web;

&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; com.taoyuanx.springmvc.vertx.core.anno.route.ResponseBody;
&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; com.taoyuanx.springmvc.vertx.core.anno.route.RouteHandler;
&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; com.taoyuanx.springmvc.vertx.core.anno.route.RouteMapping;
&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; com.taoyuanx.springmvc.vertx.core.core.template.TemplateBody;
&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; io.vertx.core.Handler;
&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; io.vertx.core.http.HttpMethod;
&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; io.vertx.core.json.JsonObject;
&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; io.vertx.ext.web.RoutingContext;
&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; org.springframework.stereotype.Component;

&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.concurrent.TimeUnit;

&lt;span class=&quot;hljs-comment&quot;&gt;/**
 * &lt;span class=&quot;hljs-doctag&quot;&gt;@author&lt;/span&gt; dushitaoyuan
 * &lt;span class=&quot;hljs-doctag&quot;&gt;@date&lt;/span&gt; 2020/4/21
 */&lt;/span&gt;
&lt;span class=&quot;hljs-meta&quot;&gt;@RouteHandler&lt;/span&gt;(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;api&quot;&lt;/span&gt;)

&lt;span class=&quot;hljs-meta&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;RouteHandlerDemo&lt;/span&gt; &lt;/span&gt;{
    &lt;span class=&quot;hljs-meta&quot;&gt;@RouteMapping&lt;/span&gt;(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;demo&quot;&lt;/span&gt;, method = HttpMethod.GET)
    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Handler&amp;lt;RoutingContext&amp;gt; &lt;span class=&quot;hljs-title&quot;&gt;handle&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ctx -&amp;gt; {
            ctx.response().end(&lt;span class=&quot;hljs-string&quot;&gt;&quot;demo&quot;&lt;/span&gt;);
            System.out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;demo&quot;&lt;/span&gt;);
        };
    }

    &lt;span class=&quot;hljs-meta&quot;&gt;@RouteMapping&lt;/span&gt;(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;blockDemo&quot;&lt;/span&gt;, method = HttpMethod.GET, blocked = &lt;span class=&quot;hljs-keyword&quot;&gt;true&lt;/span&gt;)
    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Handler&amp;lt;RoutingContext&amp;gt; &lt;span class=&quot;hljs-title&quot;&gt;blockHande&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ctx -&amp;gt; {
            &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {
                TimeUnit.SECONDS.sleep(&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;);
                System.out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;blockDemo&quot;&lt;/span&gt;);
                ctx.response().end(&lt;span class=&quot;hljs-string&quot;&gt;&quot;blockDemo&quot;&lt;/span&gt;);
            } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
                &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(e);
            }

        };
    }
  
    &lt;span class=&quot;hljs-meta&quot;&gt;@RouteMapping&lt;/span&gt;(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;jsonMessage&quot;&lt;/span&gt;, method = HttpMethod.GET)
    &lt;span class=&quot;hljs-meta&quot;&gt;@ResponseBody&lt;/span&gt;
    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; JsonObject &lt;span class=&quot;hljs-title&quot;&gt;jsonMessage&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(RoutingContext ctx)&lt;/span&gt; &lt;/span&gt;{
        JsonObject jsonObject=&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; JsonObject();
        jsonObject.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;spring json&quot;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;json&quot;&lt;/span&gt;);
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; jsonObject;
    }

    &lt;span class=&quot;hljs-meta&quot;&gt;@RouteMapping&lt;/span&gt;(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;template&quot;&lt;/span&gt;, method = HttpMethod.GET)
    &lt;span class=&quot;hljs-meta&quot;&gt;@TemplateBody&lt;/span&gt;
    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; String &lt;span class=&quot;hljs-title&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(RoutingContext ctx,JsonObject dataModel)&lt;/span&gt;
    &lt;/span&gt;{
        dataModel.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;hello&quot;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;dushitaoyuan say hi to you! thymeleaf&quot;&lt;/span&gt;);
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;index.html&quot;&lt;/span&gt;;
    }

    &lt;span class=&quot;hljs-meta&quot;&gt;@RouteMapping&lt;/span&gt;(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;template2&quot;&lt;/span&gt;, method = HttpMethod.GET)
    &lt;span class=&quot;hljs-meta&quot;&gt;@TemplateBody&lt;/span&gt;
    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; String &lt;span class=&quot;hljs-title&quot;&gt;template2&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(RoutingContext ctx,JsonObject dataModel)&lt;/span&gt;
    &lt;/span&gt;{
        dataModel.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;hello&quot;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;dushitaoyuan say hi to you! freemarker&quot;&lt;/span&gt;);
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;index.ftl&quot;&lt;/span&gt;;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¼‚å¸¸å¤„ç†&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs java&quot; lang=&quot;java&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;@RouterAdvice&lt;/span&gt;
&lt;span class=&quot;hljs-meta&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;RouteAdviceDemo&lt;/span&gt; &lt;/span&gt;{
    &lt;span class=&quot;hljs-meta&quot;&gt;@ExceptionHandler&lt;/span&gt;(value = MyException.class)
    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Handler&amp;lt;RoutingContext&amp;gt; &lt;span class=&quot;hljs-title&quot;&gt;handle&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ctx -&amp;gt; {
            MyException failure = (MyException) ctx.failure();
            ResponseUtil.responseJson(ctx, &lt;span class=&quot;hljs-number&quot;&gt;500&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; JsonObject().put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;errorMsg&quot;&lt;/span&gt;,failure.getMessage()));
        };
    }
}

&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è‡ªå®šä¹‰æ¨¡æ¿å¼•æ“&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;hljs java&quot; lang=&quot;java&quot;&gt;    ThymeleafTemplateEngine thymeleafTemplateEngine = ThymeleafTemplateEngine.create(serverConfig.getVertx());
            FreeMarkerTemplateEngine freeMarkerTemplateEngine = FreeMarkerTemplateEngine.create(serverConfig.getVertx());
            springMvcRouterHandler.registVertxTemplateEngine(&lt;span class=&quot;hljs-string&quot;&gt;&quot;myTemplate&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;templates/&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;html&quot;&lt;/span&gt;, thymeleafTemplateEngine);
            springMvcRouterHandler.registVertxTemplateEngine(&lt;span class=&quot;hljs-string&quot;&gt;&quot;myTemplate2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;templates/&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;ftl&quot;&lt;/span&gt;, freeMarkerTemplateEngine);
           
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è‡ªå®šä¹‰æ‹¦æˆªå™¨&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs java&quot; lang=&quot;java&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;@Interceptor&lt;/span&gt;(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/api/*&quot;&lt;/span&gt;)
&lt;span class=&quot;hljs-meta&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;RouteInterceptorDemo&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;IRequestInterceptor&lt;/span&gt;, &lt;span class=&quot;hljs-title&quot;&gt;Order&lt;/span&gt; &lt;/span&gt;{


    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;pre&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(RoutingContext routingContext)&lt;/span&gt; &lt;/span&gt;{
        System.out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;pre1&quot;&lt;/span&gt;);
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;true&lt;/span&gt;;
    }

    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;after&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(RoutingContext routingContext)&lt;/span&gt; &lt;/span&gt;{
        &lt;span class=&quot;hljs-comment&quot;&gt;/**
         * end å ä¸æ‰§è¡Œ
         */&lt;/span&gt;
        System.out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;after1&quot;&lt;/span&gt;);
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;true&lt;/span&gt;;
    }

    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;order&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;;
    }
}

&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è‡ªå®šä¹‰jsonè§£æ(é»˜è®¤å†…ç½®)&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs java&quot; lang=&quot;java&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;@VertxMessageConverter&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;JsonMessageConverter&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;MessageConverter&lt;/span&gt; &lt;/span&gt;{


    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;support&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Object source)&lt;/span&gt; &lt;/span&gt;{
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;true&lt;/span&gt;;
    }

    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Handler&amp;lt;RoutingContext&amp;gt; &lt;span class=&quot;hljs-title&quot;&gt;convertTo&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Object source)&lt;/span&gt; &lt;/span&gt;{
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ctx -&amp;gt; {
            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (source &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; JsonObject) {
                ResponseUtil.responseJson(ctx, HttpResponseStatus.OK.code(), ((JsonObject) source).encode());
                &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;
            }
            ResponseUtil.responseJson(ctx, HttpResponseStatus.OK.code(), JSONUtil.toJsonString(source));
        };
    }
}

&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/25/171b1c4a028b61c9~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;ä»£ç ä»“åº“åœ°å€:&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fdushitaoyuan%2Fvertx-web-springmvc&quot; title=&quot;https://github.com/dushitaoyuan/vertx-web-springmvc&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;github.com/dushitaoyuaâ€¦&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å®˜æ–¹ä¾‹å­ä»“åº“:&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fvert-x3%2Fvertx-examples&quot; title=&quot;https://github.com/vert-x3/vertx-examples&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;github.com/vert-x3/verâ€¦&lt;/a&gt;&lt;/p&gt;
</description><link>https://juejin.cn/post/6844904137918775303</link><guid isPermaLink="false">https://juejin.cn/post/6844904137918775303</guid><pubDate>Sat, 25 Apr 2020 14:37:54 GMT</pubDate><author>éƒ½å¸‚æ¡ƒæº</author><category>åç«¯</category><category>Java</category></item><item><title>reactæºç -äº‹ä»¶ç›‘å¬</title><description>&lt;p&gt;æœ¬æ–‡ä»¥ React v16.5.2 ä¸ºåŸºç¡€è¿›è¡Œæºç åˆ†æ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬æµç¨‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ reactæºç çš„ react-dom/src/events/ReactBrowserEventEmitter.jsæ–‡ä»¶çš„å¼€å¤´ï¼Œæœ‰è¿™ä¹ˆä¸€å¤§æ®µæ³¨é‡Šï¼š&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/14/16ab505e4e6299f3~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;äº‹ä»¶å§”æ‰˜æ˜¯å¾ˆå¸¸ç”¨çš„ä¸€ç§æµè§ˆå™¨äº‹ä»¶ä¼˜åŒ–ç­–ç•¥ï¼Œäºæ˜¯ Reactå°±æ¥ç®¡äº†è¿™ä»¶äº‹æƒ…ï¼Œå¹¶ä¸”è¿˜è´´å¿ƒåœ°æ¶ˆé™¤äº†æµè§ˆå™¨é—´çš„å·®å¼‚ï¼Œèµ‹äºˆå¼€å‘è€…è·¨æµè§ˆå™¨çš„å¼€å‘ä½“éªŒï¼Œä¸»è¦æ˜¯ä½¿ç”¨ EventPluginHubè¿™ä¸ªä¸œè¥¿æ¥è´Ÿè´£è°ƒåº¦äº‹ä»¶çš„å­˜å‚¨ï¼Œåˆæˆäº‹ä»¶å¹¶ä»¥å¯¹è±¡æ± çš„æ–¹å¼å®ç°åˆ›å»ºå’Œé”€æ¯ï¼Œè‡³äºä¸‹é¢çš„ç»“æ„å›¾å½¢ï¼Œåˆ™æ˜¯å¯¹äº‹ä»¶æœºåˆ¶çš„ä¸€ä¸ªå›¾å½¢åŒ–æè¿°&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Reactäº‹ä»¶ä½¿ç”¨äº†äº‹ä»¶å§”æ‰˜çš„æœºåˆ¶ï¼Œä¸€èˆ¬äº‹ä»¶å§”æ‰˜çš„ä½œç”¨éƒ½æ˜¯ä¸ºäº†å‡å°‘é¡µé¢çš„æ³¨å†Œäº‹ä»¶æ•°é‡ï¼Œå‡å°‘å†…å­˜å¼€é”€ï¼Œä¼˜åŒ–æµè§ˆå™¨æ€§èƒ½ï¼ŒReactè¿™ä¹ˆåšä¹Ÿæ˜¯æœ‰è¿™ä¹ˆä¸€ä¸ªç›®çš„ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿæ˜¯ä¸ºäº†èƒ½å¤Ÿæ›´å¥½çš„ç®¡ç†äº‹ä»¶ï¼Œå®é™…ä¸Šï¼ŒReactä¸­æ‰€æœ‰çš„äº‹ä»¶æœ€åéƒ½æ˜¯è¢«å§”æ‰˜åˆ°äº† documentè¿™ä¸ªé¡¶çº§DOMä¸Š&lt;/li&gt;
&lt;li&gt;æ—¢ç„¶æ‰€æœ‰çš„äº‹ä»¶éƒ½è¢«å§”æ‰˜åˆ°äº† documentä¸Šï¼Œé‚£ä¹ˆè‚¯å®šæœ‰ä¸€å¥—ç®¡ç†æœºåˆ¶ï¼Œæ‰€æœ‰çš„äº‹ä»¶éƒ½æ˜¯ä»¥ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—æ–¹å¼è¿›è¡Œè§¦å‘ä¸å›è°ƒ&lt;/li&gt;
&lt;li&gt;æ—¢ç„¶éƒ½å·²ç»æ¥ç®¡äº‹ä»¶äº†ï¼Œé‚£ä¹ˆä¸å¯¹äº‹ä»¶åšäº›é¢å¤–çš„äº‹æƒ…æœªå…æœ‰äº›æµªè´¹ï¼Œäºæ˜¯ Reactä¸­å°±å­˜åœ¨äº†è‡ªå·±çš„ åˆæˆäº‹ä»¶(SyntheticEvent)ï¼Œåˆæˆäº‹ä»¶ç”±å¯¹åº”çš„ EventPluginè´Ÿè´£åˆæˆï¼Œä¸åŒç±»å‹çš„äº‹ä»¶ç”±ä¸åŒçš„ pluginåˆæˆï¼Œä¾‹å¦‚ SimpleEvent Pluginã€TapEvent Pluginç­‰&lt;/li&gt;
&lt;li&gt;ä¸ºäº†è¿›ä¸€æ­¥æå‡äº‹ä»¶çš„æ€§èƒ½ï¼Œä½¿ç”¨äº† EventPluginHubè¿™ä¸ªä¸œè¥¿æ¥è´Ÿè´£åˆæˆäº‹ä»¶å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;#å¼€å§‹&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;&amp;lt;button onClick={this.autoFocus}&amp;gt;ç‚¹å‡»èšç„¦&amp;lt;/button&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ˜¯æˆ‘ä»¬åœ¨Reactä¸­ç»‘å®šäº‹ä»¶çš„å¸¸è§„å†™æ³•ã€‚ç»ç”±JSXè§£æï¼Œbuttonä¼šè¢«å½“åšç»„ä»¶æŒ‚è½½ã€‚è€ŒonClickè¿™æ—¶å€™ä¹Ÿåªæ˜¯ä¸€ä¸ªæ™®é€šçš„propsã€‚
ReactDOMComponentåœ¨è¿›è¡Œç»„ä»¶åŠ è½½(mountComponent)ã€æ›´æ–°(updateComponent)çš„æ—¶å€™ï¼Œéœ€è¦å¯¹propsè¿›è¡Œå¤„ç†(_updateDOMProperties):&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-0&quot;&gt;äº‹ä»¶æ³¨å†Œ&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;ReactDOMComponent.Mixin = {
    mountComponent:&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;function&lt;/span&gt;&lt;/span&gt;(){},
    _createOpenTagMarkupAndPutListeners:&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;function&lt;/span&gt;&lt;/span&gt;(){},
    ....,
    
    // æ–¹æ³•ä¸­æœ‰æŒ‡å‘ä¸Šæ¬¡å±æ€§å€¼å¾—lastProp,
    // nextPropæ˜¯å½“å‰å±æ€§å€¼ï¼Œè¿™é‡ŒnextPropæ˜¯æˆ‘ä»¬ç»‘å®šç»™ç»„ä»¶çš„onclickäº‹ä»¶å¤„ç†å‡½æ•°ã€‚
  //  nextProp ä¸ä¸ºç©ºè°ƒç”¨enqueuePutListenerç»‘å®šäº‹ä»¶,ä¸ºç©ºåˆ™æ³¨é”€äº‹ä»¶ç»‘å®šã€‚
     _updateDOMProperties:&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(lastProps, nextProps, transaction){
         &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (propKey &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; lastProps) {}   //çœç•¥ã€‚ã€‚ã€‚
         &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (propKey &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; nextProps) {
         // åˆ¤æ–­æ˜¯å¦ä¸ºäº‹ä»¶å±æ€§
             &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (registrationNameModules.hasOwnProperty(propKey))  {
          enqueuePutListener(this, propKey, nextProp, transaction);
              }
         }
         
     }
}


//è¿™é‡Œè¿›è¡Œäº‹ä»¶ç»‘å®š

é¦–å…ˆåˆ¤æ–­äº† rootContainerElementæ˜¯ä¸æ˜¯ä¸€ä¸ª documentæˆ–è€… Fragment(æ–‡æ¡£ç‰‡æ®µèŠ‚ç‚¹)

enqueuePutListener è¿™ä¸ªæ–¹æ³•åªåœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹æ‰§è¡Œï¼Œä¼ ç»™listenToå‚æ•°åˆ†åˆ«æ˜¯äº‹ä»¶åç§°&lt;span class=&quot;hljs-string&quot;&gt;&#39;onclick&#39;&lt;/span&gt;å’Œä»£ç†äº‹ä»¶çš„ç»‘
     å®šdomã€‚å¦‚æœæ˜¯fragement å°±æ˜¯æ ¹èŠ‚ç‚¹ï¼ˆåœ¨reactDom.renderæŒ‡å®šçš„ï¼‰ï¼Œä¸æ˜¯çš„è¯å°±æ˜¯documentã€‚listenTo
     ç”¨äºç»‘å®šäº‹ä»¶åˆ° document ï¼Œä¸‹é¢äº¤ç”±äº‹åŠ¡å¤„ç†çš„æ˜¯å›è°ƒå‡½æ•°çš„å­˜å‚¨ï¼Œä¾¿äºè°ƒç”¨ã€‚
     ReactBrowserEventEmitter æ–‡ä»¶ä¸­çš„ listenTo çœ‹åšäº‹ä»¶å¤„ç†çš„æºå¤´ã€‚
     è¿™é‡Œè·å–äº†å½“å‰ç»„ä»¶ï¼ˆå…¶å®è¿™æ—¶å€™å°±æ˜¯buttonï¼‰æ‰€åœ¨çš„document
     
     
&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; enqueuePutListener(inst, registrationName, listener, transaction) {
    ...
    var containerInfo = inst._hostContainerInfo;
    var isDocumentFragment = containerInfo._node &amp;amp;&amp;amp; containerInfo._node.nodeType === DOC_FRAGMENT_TYPE;
    var doc = isDocumentFragment ? containerInfo._node : containerInfo._ownerDocument;
    
     
     
      listenTo(registrationName, doc);
      
     ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç»‘å®šçš„é‡ç‚¹æ˜¯è¿™é‡Œçš„listenToæ–¹æ³•ã€‚çœ‹æºç (ReactBrowerEventEmitter)&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;//registrationName:éœ€è¦ç»‘å®šçš„äº‹ä»¶
//å½“å‰componentæ‰€å±çš„documentï¼Œå³äº‹ä»¶éœ€è¦ç»‘å®šçš„ä½ç½®

    listenTo: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (registrationName, contentDocumentHandle) {
    var mountAt = contentDocumentHandle;
       //è·å–å½“å‰documentä¸Šå·²ç»ç»‘å®šçš„äº‹ä»¶
    var isListening = getListeningForDocument(mountAt);
    // è·å– registrationNameï¼ˆæ³¨å†Œäº‹ä»¶åç§°ï¼‰çš„topLevelEventï¼ˆé¡¶çº§äº‹ä»¶ç±»å‹ï¼‰
    var dependencies = EventPluginRegistry.registrationNameDependencies[registrationName];

    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (var i = 0; i &amp;lt; dependencies.length; i++) {
      var dependency = dependencies[i];
      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!(isListening.hasOwnProperty(dependency) &amp;amp;&amp;amp; isListening[dependency])) {
        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (dependency === &lt;span class=&quot;hljs-string&quot;&gt;&#39;topWheel&#39;&lt;/span&gt;) {
           ...         
        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (dependency === &lt;span class=&quot;hljs-string&quot;&gt;&#39;topScroll&#39;&lt;/span&gt;) {
               ...
        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (dependency === &lt;span class=&quot;hljs-string&quot;&gt;&#39;topFocus&#39;&lt;/span&gt; || dependency === &lt;span class=&quot;hljs-string&quot;&gt;&#39;topBlur&#39;&lt;/span&gt;) {
                ...
        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (topEventMapping.hasOwnProperty(dependency)) {
        // è·å– topLevelEvent å¯¹åº”çš„æµè§ˆå™¨åŸç”Ÿäº‹ä»¶
          //å†’æ³¡å¤„ç†  
          ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(dependency, topEventMapping[dependency], mountAt);
        }
        isListening[dependency] = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;
      }
    }
  },

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯¹äºåŒä¸€ä¸ªäº‹ä»¶ï¼Œä¾‹å¦‚clickæœ‰ä¸¤ä¸ªäº‹ä»¶ onClickï¼ˆåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ï¼‰ onClickCaptureï¼ˆåœ¨æ•è·é˜¶æ®µè§¦å‘ï¼‰ä¸¤ä¸ªäº‹ä»¶åï¼Œè¿™ä¸ªå†’æ³¡å’Œæ•è·éƒ½æ˜¯reactäº‹ä»¶æ¨¡æ‹Ÿå‡ºæ¥çš„ã€‚ç»‘å®šåˆ° documentä¸Šé¢çš„äº‹ä»¶åŸºæœ¬ä¸Šéƒ½æ˜¯åœ¨å†’æ³¡é˜¶æ®µï¼ˆå¯¹ whell, focus, scroll æœ‰é¢å¤–å¤„ç†ï¼‰,å¦‚ä¸‹å›¾ click äº‹ä»¶ç»‘å®šæ‰§è¡Œçš„å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åå¤„ç†ï¼ˆEventListenerçš„listenå’Œcaptureä¸­ï¼‰&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;//eventType:äº‹ä»¶ç±»å‹,target: documentå¯¹è±¡ï¼Œ
//callback:æ˜¯å›ºå®šçš„ï¼Œå§‹ç»ˆæ˜¯ReactEventListenerçš„dispatchæ–¹æ³•
&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (target.addEventListener) {
      target.addEventListener(eventType, callback, &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;);
      &lt;span class=&quot;hljs-built_in&quot;&gt;return&lt;/span&gt; {
        remove: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;remove&lt;/span&gt;&lt;/span&gt;() {
          target.removeEventListener(eventType, callback, &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;);
        }
      };
    }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰€æœ‰äº‹ä»¶ç»‘å®šåœ¨documentä¸Š&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥äº‹ä»¶è§¦å‘çš„éƒ½æ˜¯ReactEventListenerçš„dispatchæ–¹æ³•&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-1&quot;&gt;å›è°ƒå‚¨å­˜&lt;/h2&gt;
&lt;p&gt;çœ‹åˆ°è¿™è¾¹ä½ å¯èƒ½ç–‘æƒ‘ï¼Œæ‰€æœ‰å›è°ƒéƒ½æ‰§è¡Œçš„ReactEventListenerçš„dispatchæ–¹æ³•ï¼Œé‚£æˆ‘å†™çš„å›è°ƒå¹²å˜›å»äº†ã€‚åˆ«æ€¥ï¼Œæ¥ç€çœ‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; enqueuePutListener(inst, registrationName, listener, transaction) {
  ...
  //æ³¨æ„è¿™é‡Œï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼
  //è¿™é‡Œè·å–äº†å½“å‰ç»„ä»¶ï¼ˆå…¶å®è¿™æ—¶å€™å°±æ˜¯buttonï¼‰æ‰€åœ¨çš„document
  var doc = isDocumentFragment ? containerInfo._node : containerInfo._ownerDocument;
  //äº‹ä»¶ç»‘å®š
  listenTo(registrationName, doc);
 //è¿™æ®µä»£ç è¡¨ç¤ºå°†putListeneræ”¾å…¥å›è°ƒåºåˆ—ï¼Œå½“ç»„ä»¶æŒ‚è½½å®Œæˆæ˜¯ä¼šä¾æ¬¡æ‰§è¡Œåºåˆ—ä¸­çš„å›è°ƒã€‚putListenerä¹Ÿæ˜¯åœ¨é‚£æ—¶å€™æ‰§è¡Œçš„ã€‚
 //ä¸æ˜ç™½çš„å¯ä»¥çœ‹çœ‹æœ¬ä¸“æ ä¸­å‰ä¸¤ç¯‡å…³äºtransactionå’ŒæŒ‚è½½æœºåˆ¶çš„è®²è§£
  transaction.getReactMountReady().enqueue(putListener, {
    inst: inst,
    registrationName: registrationName,
    listener: listener
  });
  //ä¿å­˜å›è°ƒ
  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;putListener&lt;/span&gt;&lt;/span&gt;() {
    var listenerToPut = this;
    EventPluginHub.putListener(listenerToPut.inst, listenerToPut.registrationName, listenerToPut.listener);
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿˜æ˜¯è¿™æ®µä»£ç ï¼Œäº‹ä»¶ç»‘å®šæˆ‘ä»¬ä»‹ç»è¿‡ï¼Œä¸»è¦æ˜¯listenToæ–¹æ³•ã€‚
å½“ç»‘å®šå®Œæˆä»¥åä¼šæ‰§è¡ŒputListenerã€‚è¯¥æ–¹æ³•ä¼šåœ¨ReactReconcileTransactionäº‹åŠ¡çš„closeé˜¶æ®µæ‰§è¡Œï¼Œå…·ä½“ç”±EventPluginHubæ¥è¿›è¡Œç®¡ç†&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;//
var listenerBank = {};
var getDictionaryKey = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (inst) {
//instä¸ºç»„å»ºçš„å®ä¾‹åŒ–å¯¹è±¡
//_rootNodeIDä¸ºç»„ä»¶çš„å”¯ä¸€æ ‡è¯†
  &lt;span class=&quot;hljs-built_in&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#39;.&#39;&lt;/span&gt; + inst._rootNodeID;
}
var EventPluginHub = {
//instä¸ºç»„å»ºçš„å®ä¾‹åŒ–å¯¹è±¡
//registrationNameä¸ºäº‹ä»¶åç§°
//listnerä¸ºæˆ‘ä»¬å†™çš„å›è°ƒå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯åˆ—å­ä¸­çš„this.autoFocus
  putListener: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (inst, registrationName, listener) {
    ...
    var key = getDictionaryKey(inst);
    var bankForRegistrationName = listenerBank[registrationName] || (listenerBank[registrationName] = {});
    bankForRegistrationName[key] = listener;
    ...
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;EventPluginHubåœ¨æ¯ä¸ªé¡¹ç›®ä¸­åªå®ä¾‹åŒ–ä¸€æ¬¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé¡¹ç›®ç»„æ‰€æœ‰äº‹ä»¶çš„å›è°ƒéƒ½ä¼šå‚¨å­˜åœ¨å”¯ä¸€çš„listenerBankä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æ˜¯ä¸æ˜¯æœ‰ç‚¹æ™•ï¼Œæ”¾ä¸Šæµç¨‹å›¾ï¼Œä»”ç»†å›å¿†ä¸€ä¸‹&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/14/16ab5481db9ffc4c~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-2&quot;&gt;äº‹ä»¶è§¦å‘&lt;/h2&gt;
&lt;p&gt;æ³¨å†Œäº‹ä»¶æ—¶æˆ‘ä»¬è¯´è¿‡ï¼Œæ‰€æœ‰çš„äº‹ä»¶éƒ½æ˜¯ç»‘å®šåœ¨Documentä¸Šã€‚å›è°ƒç»Ÿä¸€æ˜¯ReactEventListenerçš„dispatchæ–¹æ³•ã€‚
ç”±äºå†’æ³¡æœºåˆ¶ï¼Œæ— è®ºæˆ‘ä»¬ç‚¹å‡»å“ªä¸ªDOMï¼Œæœ€åéƒ½æ˜¯ç”±documentå“åº”ï¼ˆå› ä¸ºå…¶ä»–DOMæ ¹æœ¬æ²¡æœ‰äº‹ä»¶ç›‘å¬ï¼‰ã€‚ä¹Ÿå³æ˜¯è¯´éƒ½ä¼šè§¦å‘dispatch&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;dispatchEvent: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(topLevelType, nativeEvent) {
    //å®é™…è§¦å‘äº‹ä»¶çš„DOMå¯¹è±¡
    var nativeEventTarget = getEventTarget(nativeEvent);
    //nativeEventTargetå¯¹åº”çš„virtual DOM
    var targetInst = ReactDOMComponentTree.getClosestInstanceFromNode(
      nativeEventTarget,
    );
    ...
    //åˆ›å»ºbookKeepingå®ä¾‹ï¼Œä¸ºhandleTopLevelImplå›è°ƒå‡½æ•°ä¼ é€’äº‹ä»¶åå’ŒåŸç”Ÿäº‹ä»¶å¯¹è±¡
    //å…¶å®å°±æ˜¯æŠŠä¸‰ä¸ªå‚æ•°å°è£…æˆä¸€ä¸ªå¯¹è±¡
    var bookKeeping = getTopLevelCallbackBookKeeping(
      topLevelType,
      nativeEvent,
      targetInst,
    );

    try {
    //è¿™é‡Œå¼€å¯ä¸€ä¸ªtransactIonï¼Œperformä¸­æ‰§è¡Œäº†
    //handleTopLevelImpl(bookKeeping)
      ReactGenericBatching.batchedUpdates(handleTopLevelImpl, bookKeeping);
    } finally {
      releaseTopLevelCallbackBookKeeping(bookKeeping);
    }
  },
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; handleTopLevelImpl(bookKeeping) {
//è§¦å‘äº‹ä»¶çš„çœŸå®DOM
  var nativeEventTarget = getEventTarget(bookKeeping.nativeEvent);
  //nativeEventTargetå¯¹åº”çš„ReactElement
  var targetInst = ReactDOMComponentTree.getClosestInstanceFromNode(nativeEventTarget);
  //bookKeeping.ancestorsä¿å­˜çš„æ˜¯ç»„ä»¶ã€‚
  var ancestor = targetInst;
  &lt;span class=&quot;hljs-keyword&quot;&gt;do&lt;/span&gt; {
    bookKeeping.ancestors.push(ancestor);
    ancestor = ancestor &amp;amp;&amp;amp; findParent(ancestor);
  } &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (ancestor);

  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (var i = 0; i &amp;lt; bookKeeping.ancestors.length; i++) {
    targetInst = bookKeeping.ancestors[i];
    //å…·ä½“å¤„ç†é€»è¾‘
    ReactEventListener._handleTopLevel(bookKeeping.topLevelType, targetInst, bookKeeping.nativeEvent, getEventTarget(bookKeeping.nativeEvent));
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;//è¿™å°±æ˜¯æ ¸å¿ƒçš„å¤„ç†äº†
handleTopLevel: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (topLevelType, targetInst, nativeEvent, nativeEventTarget) {
//é¦–å…ˆå°è£…eventäº‹ä»¶
    var events = EventPluginHub.extractEvents(topLevelType, targetInst, nativeEvent, nativeEventTarget);
    //å‘é€åŒ…è£…å¥½çš„event
    runEventQueueInBatch(events);
  }
&lt;/code&gt;&lt;/pre&gt;&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-3&quot;&gt;äº‹ä»¶å°è£…&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆæ˜¯EventPluginHubçš„extractEvents&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;extractEvents: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (topLevelType, targetInst, nativeEvent, nativeEventTarget) {
    var events;
    var plugins = EventPluginRegistry.plugins;
    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (var i = 0; i &amp;lt; plugins.length; i++) {
      // Not every plugin &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; the ordering may be loaded at runtime.
      var possiblePlugin = plugins[i];
      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (possiblePlugin) {
      //ä¸»è¦çœ‹è¿™è¾¹
        var extractedEvents = possiblePlugin.extractEvents(topLevelType, targetInst, nativeEvent, nativeEventTarget);
        ......
      }
    }
    &lt;span class=&quot;hljs-built_in&quot;&gt;return&lt;/span&gt; events;
  },
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¥ç€çœ‹SimpleEventPluginçš„æ–¹æ³•&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;extractEvents: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (topLevelType, targetInst, nativeEvent, nativeEventTarget) {
    ......
    //è¿™é‡Œæ˜¯å¯¹äº‹ä»¶çš„å°è£…ï¼Œä½†æ˜¯ä¸æ˜¯æˆ‘ä»¬å…³æ³¨çš„é‡ç‚¹
    var event = EventConstructor.getPooled(dispatchConfig, targetInst, nativeEvent, nativeEventTarget);
    //é‡ç‚¹çœ‹è¿™è¾¹
    EventPropagators.accumulateTwoPhaseDispatches(event);
    &lt;span class=&quot;hljs-built_in&quot;&gt;return&lt;/span&gt; event;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¥ä¸‹æ¥æ˜¯æ–¹æ³•ä¸­çš„å„ç§å¼•ç”¨ï¼Œè·³å•Šè·³ï¼Œè½¬å•Šè½¬ï¼Œæˆ‘ä»¬æ¥åˆ°äº†ReactDOMTraversalä¸­çš„traverseTwoPhaseæ–¹æ³•&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;//instæ˜¯è§¦å‘äº‹ä»¶çš„targetçš„ReactElement
//fnï¼šEventPropagatorçš„accumulateDirectionalDispatches
//arg: å°±æ˜¯ä¹‹å‰éƒ¨åˆ†å°è£…å¥½çš„eventï¼ˆä¹‹æ‰€ä»¥è¯´æ˜¯éƒ¨åˆ†ï¼Œæ˜¯å› ä¸ºç°åœ¨ä¹Ÿæ˜¯åœ¨å¤„ç†Eventï¼Œè¿™è¾¹å¤„ç†å®Œæ‰æ˜¯å°è£…å®Œæˆï¼‰
&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; traverseTwoPhase(inst, fn, arg) {
  var path = [];
  &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (inst) {
   //æ³¨æ„pathï¼Œè¿™é‡Œä»¥ReactElementçš„å½¢å¼å†’æ³¡ç€ï¼Œ
   //æŠŠè§¦å‘äº‹ä»¶çš„çˆ¶èŠ‚ç‚¹ä¾æ¬¡ä¿å­˜ä¸‹æ¥
    path.push(inst);
    //è·å–çˆ¶èŠ‚ç‚¹
    inst = inst._hostParent;
  }
  var i;
  //æ•æ‰ï¼Œä¾æ¬¡å¤„ç†
  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (i = path.length; i-- &amp;gt; 0;) {
    fn(path[i], &lt;span class=&quot;hljs-string&quot;&gt;&#39;captured&#39;&lt;/span&gt;, arg);
  }
  //å†’æ³¡ï¼Œä¾æ¬¡å¤„ç†
  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (i = 0; i &amp;lt; path.length; i++) {
    fn(path[i], &lt;span class=&quot;hljs-string&quot;&gt;&#39;bubbled&#39;&lt;/span&gt;, arg);
  }
}

&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;//åˆ¤æ–­çˆ¶ç»„ä»¶æ˜¯å¦ä¿å­˜äº†è¿™ä¸€ç±»äº‹ä»¶
&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; accumulateDirectionalDispatches(inst, phase, event) {
//è·å–åˆ°å›è°ƒ
  var listener = listenerAtPhase(inst, event, phase);
  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (listener) {
  //å¦‚æœæœ‰å›è°ƒï¼Œå°±æŠŠåŒ…å«è¯¥ç±»å‹äº‹ä»¶ç›‘å¬çš„DOMä¸å¯¹åº”çš„å›è°ƒä¿å­˜è¿›Eventã€‚
  //accumulateIntoå¯ä»¥ç†è§£æˆ_.assign
  //è®°ä½è¿™ä¸¤ä¸ªå±æ€§ï¼Œå¾ˆé‡è¦ã€‚
    event._dispatchListeners = accumulateInto(event._dispatchListeners, listener);
    event._dispatchInstances = accumulateInto(event._dispatchInstances, inst);
  }
}

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;listenerAtPhaseé‡Œé¢æ‰§è¡Œçš„æ˜¯EventPluginHubçš„getListenerå‡½æ•°&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;getListener: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (inst, registrationName) {
    //è¿˜è®°å¾—ä¹‹å‰ä¿å­˜å›è°ƒçš„listenerBankå§ï¼Ÿ
    var bankForRegistrationName = listenerBank[registrationName];
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (shouldPreventMouseEvent(registrationName, inst._currentElement.type, inst._currentElement.props)) {
      &lt;span class=&quot;hljs-built_in&quot;&gt;return&lt;/span&gt; null;
    }
    //è·å–instçš„_rootNodeId
    var key = getDictionaryKey(inst);
    //è·å–å¯¹åº”çš„å›è°ƒ
    &lt;span class=&quot;hljs-built_in&quot;&gt;return&lt;/span&gt; bankForRegistrationName &amp;amp;&amp;amp; bankForRegistrationName[key];
  },
&lt;/code&gt;&lt;/pre&gt;&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-4&quot;&gt;äº‹ä»¶åˆ†å‘&lt;/h2&gt;
&lt;p&gt;runEventQueueInBatchä¸»è¦è¿›è¡Œäº†ä¸¤æ­¥æ“ä½œ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; runEventQueueInBatch(events) {
//å°†eventäº‹ä»¶åŠ å…¥processEventQueueåºåˆ—
  EventPluginHub.enqueueEvents(events);
  //å‰ä¸€æ­¥ä¿å­˜å¥½çš„processEventQueueä¾æ¬¡æ‰§è¡Œ
//executeDispatchesAndRelease
  EventPluginHub.processEventQueue(&lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;);
}

  processEventQueue: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (simulated) {
    var processingEventQueue = eventQueue;
    eventQueue = null;
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (simulated) {
      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;EachAccumulated(processingEventQueue, executeDispatchesAndReleaseSimulated);
    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {
    //é‡ç‚¹çœ‹è¿™é‡Œ
    //&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;EachAccumulatedå¯ä»¥çœ‹æˆ&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;Eachçš„å°è£…
    //é‚£ä¹ˆè¿™é‡Œå°±æ˜¯processingEventQueueä¿å­˜çš„eventä¾æ¬¡æ‰§è¡ŒexecuteDispatchesAndReleaseTopLevelï¼ˆeventï¼‰
      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;EachAccumulated(processingEventQueue, executeDispatchesAndReleaseTopLevel);
    }
  },
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;executeDispatchesAndReleaseTopLevelï¼ˆeventï¼‰åˆæ˜¯å„ç§å‡½æ•°åŒ…è£…ï¼Œæœ€åå¹²æ´»çš„æ˜¯&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; executeDispatchesInOrder(event, simulated) {
  //å¯¹åº”çš„å›è°ƒå‡½æ•°æ•°ç»„
  var dispatchListeners = event._dispatchListeners;
  //æœ‰eventTypeå±æ€§çš„ReactElementæ•°ç»„
  var dispatchInstances = event._dispatchInstances;
  
  ......
  
  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (Array.isArray(dispatchListeners)) {
    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (var i = 0; i &amp;lt; dispatchListeners.length; i++) {
      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (event.isPropagationStopped()) {
        &lt;span class=&quot;hljs-built_in&quot;&gt;break&lt;/span&gt;;
      }
      executeDispatch(event, simulated, dispatchListeners[i], dispatchInstances[i]);
    }
  } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (dispatchListeners) {
    executeDispatch(event, simulated, dispatchListeners, dispatchInstances);
  }
  event._dispatchListeners = null;
  event._dispatchInstances = null;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;OKï¼Œè¿™é‡Œæ€»ç®—å‡ºç°äº†è€ç†Ÿäººï¼Œåœ¨å°è£…nativeEventæ—¶æˆ‘ä»¬ä¿å­˜åœ¨eventé‡Œçš„ä¸¤ä¸ªå±æ€§ï¼ŒdispatchListenersä¸dispatchInstancesï¼Œåœ¨è¿™é‡Œèµ·ä½œç”¨ã€‚
ä»£ç å¾ˆç®€å•ï¼Œå¦‚æœæœ‰å¤„ç†è¿™ä¸ªäº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼Œå°±ä¸€æ¬¡è¿›è¡Œå¤„ç†ã€‚ç»†èŠ‚æˆ‘ä»¬ç¨åè®¨è®ºï¼Œå…ˆçœ‹çœ‹è¿™é‡Œæ˜¯æ€ä¹ˆå¤„ç†çš„å§&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; executeDispatch(event, simulated, listener, inst) {
//&lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt;æ˜¯äº‹ä»¶ç±»å‹
  var &lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt; = event.type || &lt;span class=&quot;hljs-string&quot;&gt;&#39;unknown-event&#39;&lt;/span&gt;;
  //è¿™æ˜¯è§¦å‘äº‹ä»¶çš„çœŸå®DOMï¼Œä¹Ÿå°±æ˜¯åˆ—å­ä¸­çš„button
  event.currentTarget = EventPluginUtils.getNodeFromInstance(inst);
  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (simulated) {
    ReactErrorUtils.invokeGuardedCallbackWithCatch(&lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt;, listener, event);
  } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {
  //çœ‹è¿™é‡Œçœ‹è¿™é‡Œ
    ReactErrorUtils.invokeGuardedCallback(&lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt;, listener, event);
  }
  event.currentTarget = null;
}

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç»ˆäºæ¥åˆ°æœ€åäº†,ä»£ç ä½äºReactErrorUtilä¸­
ï¼ˆä¸ºäº†å¸®åŠ©å¼€å‘ï¼ŒReacté€šè¿‡æ¨¡æ‹ŸçœŸæ­£çš„æµè§ˆå™¨äº‹ä»¶æ¥è·å¾—æ›´å¥½çš„devtoolsé›†æˆã€‚è¿™æ®µä»£ç åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿è¡Œï¼‰&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;    //åˆ›é€ ä¸€ä¸ªä¸´æ—¶DOM
    var fakeNode = document.createElement(&lt;span class=&quot;hljs-string&quot;&gt;&#39;react&#39;&lt;/span&gt;);
    ReactErrorUtils.invokeGuardedCallback = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (name, func, a) {
    //ç»‘å®šå›è°ƒå‡½æ•°çš„ä¸Šä¸‹æ–‡
      var boundFunc = func.bind(null, a);
      //å®šä¹‰äº‹ä»¶ç±»å‹
      var evtType = &lt;span class=&quot;hljs-string&quot;&gt;&#39;react-&#39;&lt;/span&gt; + name;
      //ç»‘å®šäº‹ä»¶
      fakeNode.addEventListener(evtType, boundFunc, &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;);
      //ç”ŸæˆåŸç”Ÿäº‹ä»¶
      var evt = document.createEvent(&lt;span class=&quot;hljs-string&quot;&gt;&#39;Event&#39;&lt;/span&gt;);
      //å°†åŸç”Ÿäº‹ä»¶å¤„ç†æˆæˆ‘ä»¬éœ€è¦çš„ç±»å‹
      evt.initEvent(evtType, &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;);
      //å‘å¸ƒäº‹ä»¶---è¿™é‡Œä¼šæ‰§è¡Œå›è°ƒ
      fakeNode.dispatchEvent(evt);
      //ç§»å‡ºäº‹ä»¶ç›‘å¬
      fakeNode.removeEventListener(evtType, boundFunc, &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;);
    };

&lt;/code&gt;&lt;/pre&gt;&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-5&quot;&gt;æµç¨‹å›¾&lt;/h2&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/14/16ab557e7313cf2e~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
</description><link>https://juejin.cn/post/6844903843545743374</link><guid isPermaLink="false">https://juejin.cn/post/6844903843545743374</guid><pubDate>Tue, 14 May 2019 07:57:10 GMT</pubDate><author>å—æœæ¢¨</author><category>å‰ç«¯</category><category>React.js</category></item><item><title>ä¸€æ­¥ä¸€æ­¥ï¼Œç»Ÿä¸€é¡¹ç›®ä¸­çš„ç¼–ç è§„èŒƒï¼ˆvue, vscode, vetur, prettier, eslintï¼‰</title><description>&lt;p&gt;å›¢é˜Ÿå¼€å‘ä¸­ï¼Œå¤šäººå¼€å‘åŒä¸€ä¸ªé¡¹ç›®ï¼Œç”±äºä¸ªäººç¼–ç ä¹ æƒ¯ä¸åŒï¼Œä¸€ä¸ªé¡¹ç›®ä¸­æœ€ç»ˆçš„ä»£ç é£æ ¼å¯èƒ½å·®åˆ«å¾ˆå¤§ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡å·¥å…·è¿›è¡Œçº¦æŸæ¥ä¿è¯ä»£ç é£æ ¼çš„ç»Ÿä¸€ã€‚åŒæ—¶ä¹Ÿå¸Œæœ›é€šè¿‡å·¥å…·å°½å¯èƒ½çš„å‡å°‘ä½çº§é”™è¯¯å‡ºç°ï¼Œå¹¶ä¸”èƒ½å¸®åŠ©ä¿®æ­£ï¼Œæ‰€ä»¥æœ‰äº†å„ç§å„æ ·çš„ lint å’Œ formatterã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡çš„ç›®æ ‡æ˜¯ä½¿ç”¨ vscode ç¼–è¾‘å™¨ï¼Œä½¿ç”¨ prettier æ’ä»¶ï¼Œç»“åˆä½¿ç”¨ eslint å¯¹ä»£ç è¿›è¡Œæ ¡éªŒå’Œä¿®æ­£ï¼Œå¹¶ä½¿ç”¨ eslint-config-airbnb-base è§„åˆ™æ¥å®ç°ä»£ç é£æ ¼çš„ç»Ÿä¸€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°å…¬å¸ã€å° team å¯èƒ½æ²¡æœ‰èƒ½åŠ›å’Œç²¾åŠ›æ¥åˆ¶è®¢ä¸€å¥—è¯¦å°½è§„åˆ™ï¼Œé‚£ä¹ˆé‡‡ç”¨å¤§å‚å·²ç»åˆ¶è®¢å¥½çš„è§„åˆ™å°±æ˜¯å¾ˆè‡ªç„¶çš„é€‰æ‹©ï¼ˆåŒæ—¶ä¹Ÿå¿…è¦äº‰è®ºä½ çš„å¥½è¿˜æ˜¯æˆ‘çš„å¥½äº†ï¼Œäººå®¶å¤§å‚éƒ½è¿™ä¹ˆå¹²äº†ï¼Œæˆ‘ä»¬å°±æŒ‰äººå®¶æ¥å§ï¼:)ï¼‰&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-0&quot;&gt;åè¯è§£é‡Š&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;vscode&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ &lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fcode.visualstudio.com%2F&quot; title=&quot;https://code.visualstudio.com/&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;code.visualstudio.com/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;prettier&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;vscode æ’ä»¶ï¼Œå®˜æ–¹çš„è¯´æ˜æ˜¯ï¼šOpinionated Code Formatter&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;eslint&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»£ç æ ¡éªŒå’Œä¿®å¤å·¥å…·ï¼Œå®˜æ–¹è¯´æ˜æ˜¯ï¼šThe pluggable linting utility for JavaScript and JSX&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;eslint-config-airbnb-base&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸€ç»„é¢„å…ˆå®šä¹‰å¥½çš„ eslint è§„åˆ™ï¼Œå®˜æ–¹è¯´æ˜æ˜¯ï¼šThis package provides Airbnb&#39;s base JS .eslintrc (without React plugins) as an extensible shared config.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸‹é¢ä¸€æ­¥ä¸€æ­¥ï¼Œé€šè¿‡ vscode çš„æ ¼å¼åŒ–çš„ä½¿ç”¨ï¼Œåˆ°å’Œ prettier çš„ç»“åˆï¼Œeslint ä½¿ç”¨ï¼Œ prettier ç»“åˆ eslint å¯¹ js å’Œ vue æ–‡ä»¶æ ¡éªŒï¼Œå®Œæˆå¯¹é¡¹ç›®ä»£ç æ ¡éªŒå’Œ fixï¼ŒåŠ›æ±‚èƒ½ä»¥æœ€ç®€æ´çš„æ–¹å¼æŠŠé—®é¢˜è¯´æ¸…æ¥šã€‚&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-1&quot;&gt;vscode å¼€ç®±å³ç”¨çš„ code formatter åŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;vscode æä¾›å¼€ç®±å³ç”¨çš„ä»£ç æ ·å¼åŒ–åŠŸèƒ½ï¼ˆæ²¡æœ‰ css æ ¼å¼åŒ–åŠŸèƒ½ï¼‰ï¼Œä¸‹é¢åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºæµ‹è¯•æ–‡ä»¶ï¼š&lt;code&gt;./src/demo.html&lt;/code&gt;ã€&lt;code&gt;./src/fun.js&lt;/code&gt;ã€&lt;code&gt;./src/style.css&lt;/code&gt;ï¼Œæ ¼å¼åŒ–ä»£ç çš„å¿«æ·é”®æ˜¯(win)ï¼šalt + shift + f&lt;/p&gt;
&lt;p&gt;HTML æ ¼å¼åŒ–å‰ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs html&quot; lang=&quot;html&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;lang&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;en&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;meta&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;charset&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;meta&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;viewport&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;content&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;width=device-width, initial-scale=1.0&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;meta&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;http-equiv&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;X-UA-Compatible&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;content&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;ie=edge&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;Demo page&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;This is a test page&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;Page content&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ ¼å¼åŒ–åï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs html&quot; lang=&quot;html&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;lang&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;en&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;

&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;meta&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;charset&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;meta&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;viewport&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;content&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;width=device-width, initial-scale=1.0&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;meta&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;http-equiv&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;X-UA-Compatible&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;content&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;ie=edge&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;Demo page&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;

&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;This is a test page&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;Page content&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;

&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;JS æ ¼å¼åŒ–å‰ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;getUserInfo&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;name&lt;/span&gt;) &lt;/span&gt;{&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; HelloStr = &lt;span class=&quot;hljs-string&quot;&gt;&quot;Hello, your name is: &quot;&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; HelloStr + name
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ ¼å¼åŒ–åï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;getUserInfo&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;name&lt;/span&gt;) &lt;/span&gt;{
    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; HelloStr = &lt;span class=&quot;hljs-string&quot;&gt;&quot;Hello, your name is: &quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; HelloStr + name
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;CSS:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;CSS æ–‡ä»¶çš„æ ¼å¼åŒ–&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/4/24/16a4d7d10616b385~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼ŒCSS æ–‡ä»¶é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸èƒ½è¢«æ ¼å¼åŒ–çš„ï¼Œè¿™ä¸ªæ—¶é—´è½®åˆ° prettier ç™»åœº~&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-2&quot;&gt;ç”¨ prettier å¯¹ä»£ç è¿›è¡Œæ ¼å¼åŒ–&lt;/h2&gt;
&lt;p&gt;prettier çš„å®˜æ–¹è§£é‡Šæ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;An opinionated code formatter&lt;/li&gt;
&lt;li&gt;Supports many languages&lt;/li&gt;
&lt;li&gt;Integrates with most editors&lt;/li&gt;
&lt;li&gt;Has few options&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®ƒèƒ½å’Œå¤šç§ç¼–è¾‘å™¨ç»“åˆï¼Œå¯¹å¤šç§è¯­è¨€è¿›è¡Œ formatï¼Œæ‰€ä»¥ css ä¹Ÿä¸æ˜¯è¯ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äº vscode é»˜è®¤æœ‰æ ¼å¼åŒ–çš„åŠŸèƒ½ï¼Œå®‰è£…äº† prettier æ’ä»¶åï¼Œprettier ä¹Ÿæœ‰æ ¼å¼åŒ–çš„åŠŸèƒ½ä»¥ä¼šé€ æˆå†²çªï¼ˆå¯¹äºhtml, jsï¼‰ï¼Œè¿™é‡Œç¼–è¾‘å™¨ä¼šæç¤ºä½ ï¼Œå¯ä»¥è¿›è¡Œé…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;Prettier æ ¼å¼åŒ– html&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/4/24/16a4e2b56f9e97ab~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œvscode å’Œ prettier ä¼šæœ‰å¾ˆå¤šé»˜è®¤é…ç½®ï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;CTRL + ,&lt;/code&gt; å¿«æ·é”®è¿›å…¥é…ç½®ç•Œé¢è¿›è¡Œç®¡ç†ï¼Œæ‰€æœ‰ä¿®æ”¹åçš„ç»“æœä¼šä¿å­˜åœ¨ &lt;code&gt;settings.json&lt;/code&gt; æ–‡ä»¶é‡Œã€‚&lt;/p&gt;
&lt;p&gt;åˆšåˆšç”±äº vscode é»˜è®¤çš„æ ¼å¼åŒ–ç¨‹åºå’Œ prettier å†²çªï¼Œç»è¿‡é€‰æ‹©åå½¢æˆé…ç½®æ–‡ä»¶å¹¶å†™å…¥ &lt;code&gt;settings.json&lt;/code&gt;ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs json&quot; lang=&quot;json&quot;&gt;{
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;[html]&quot;&lt;/span&gt;: {
        &lt;span class=&quot;hljs-attr&quot;&gt;&quot;editor.defaultFormatter&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;esbenp.prettier-vscode&quot;&lt;/span&gt;
    },
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;[javascript]&quot;&lt;/span&gt;: {
        &lt;span class=&quot;hljs-attr&quot;&gt;&quot;editor.defaultFormatter&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;esbenp.prettier-vscode&quot;&lt;/span&gt;
    },
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;[jsonc]&quot;&lt;/span&gt;: {
        &lt;span class=&quot;hljs-attr&quot;&gt;&quot;editor.defaultFormatter&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;esbenp.prettier-vscode&quot;&lt;/span&gt;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šé¢æ˜¯æŒ‡é’ˆä¸åŒç±»å‹çš„æ–‡ä»¶ï¼Œåˆ†åˆ«æŒ‡å®š formatterï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸€æ¬¡æ€§æŒ‡å®š&lt;strong&gt;æ‰€æœ‰ç±»å‹&lt;/strong&gt;æ–‡ä»¶çš„ formatterï¼Œä¿®æ”¹åçš„é…ç½®æ–‡ä»¶ &lt;code&gt;settings.json&lt;/code&gt; å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs json&quot; lang=&quot;json&quot;&gt;{
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;editor.defaultFormatter&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;esbenp.prettier-vscode&quot;&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç»è¿‡å¦‚ä¸Šé…ç½®ï¼Œ &lt;code&gt;css&lt;/code&gt; åŠå…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œæ‹¥æœ‰äº†é€šè¿‡ prettier è¿›è¡Œæ ¼å¼åŒ–çš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-3&quot;&gt;ç”¨ eslint å¯¹ javascript ä»£ç è¿›è¡Œæ ¡éªŒ&lt;/h2&gt;
&lt;p&gt;ç»è¿‡å¦‚ä¸Šé…ç½®ï¼Œå¯ä»¥å¯¹ä»£ç è¿›è¡Œæ ¼å¼åŒ–äº†ï¼Œä½†æ˜¯å¦‚æœè¦æƒ³å»ä»£ç é£æ ¼è¿›è¡Œæ ¡éªŒå’Œä¿®å¤ï¼Œå°±è¦ç”¨åˆ° eslint äº†ï¼Œä¸‹é¢åˆ†ä¸¤æ­¥å°† eslint åŠŸèƒ½é›†æˆäº†é¡¹ç›®ä¸­ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨é¡¹ç›®å†…å®‰è£… eslint åŠç›¸å…³çš„åŒ…&lt;/li&gt;
&lt;li&gt;ç»™ vscode å®‰è£… eslint æ’ä»¶&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‹é¢åˆ†åˆ«æ¥è¯´&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-4&quot;&gt;åœ¨é¡¹ç›®å†…å®‰è£… eslint åŠç›¸å…³çš„åŒ…&lt;/h3&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;å®‰è£… eslint&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/4/24/16a4e2b56fc91f2a~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;ç»è¿‡ä¸Šé¢çš„æ“ä½œï¼Œå°† eslint åŠç›¸å…³çš„åŒ…å®‰è£…åˆ°é¡¹ç›®é‡Œäº† &lt;code&gt;package.json&lt;/code&gt;å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs json&quot; lang=&quot;json&quot;&gt;{
  ...
  &quot;dependencies&quot;: {
    &quot;eslint-plugin-vue&quot;: &quot;^5.2.2&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;eslint&quot;: &quot;^5.16.0&quot;
  }
  ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é¡¹ç›®ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ª eslint çš„é…ç½®æ–‡ä»¶ &lt;code&gt;.eslintrc.js&lt;/code&gt; :&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;module&lt;/span&gt;.exports = {
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;env&quot;&lt;/span&gt;: {
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;browser&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;es6&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;
    },
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;extends&quot;&lt;/span&gt;: [
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;eslint:recommended&quot;&lt;/span&gt;,
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;plugin:vue/essential&quot;&lt;/span&gt;
    ],
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;globals&quot;&lt;/span&gt;: {
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;Atomics&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;readonly&quot;&lt;/span&gt;,
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;SharedArrayBuffer&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;readonly&quot;&lt;/span&gt;
    },
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;parserOptions&quot;&lt;/span&gt;: {
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;ecmaVersion&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2018&lt;/span&gt;,
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;sourceType&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;module&quot;&lt;/span&gt;
    },
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;plugins&quot;&lt;/span&gt;: [
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;vue&quot;&lt;/span&gt;
    ],
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;rules&quot;&lt;/span&gt;: {
    }
};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªé…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œæ˜¯é€šè¿‡ &lt;code&gt;npx eslint --init&lt;/code&gt; è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨é…ç½®ï¼Œæ‰€æœ‰çš„é€‰é¡¹è¿™é‡Œéƒ½æœ‰ä¸­æ–‡è¯´æ˜ï¼š&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Feslint.cn%2Fdocs%2Fuser-guide%2Fconfiguring&quot; title=&quot;http://eslint.cn/docs/user-guide/configuring&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;eslint.cn/docs/user-gâ€¦&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥å°±å¯ä»¥æ‰‹åŠ¨æ‰§è¡Œæ ¡éªŒäº†ï¼š&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;eslint lint&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/4/24/16a4e2b56fa87b6a~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ‰§è¡Œçš„æ—¶å€™å¯èƒ½ä¼šæœ‰åŒ…æœªå®‰è£…çš„æç¤º&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Failed to load plugin vue: Cannot find module &#39;eslint-plugin-vue&#39;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹å°±å¥½äº†ï¼Œä»æ‰§è¡Œç»“æœæ¥çœ‹ï¼Œfuns.js æ–‡ä»¶æœ‰ä¸€ä¸ªé”™è¯¯æç¤ºï¼Œè¯´æ˜æ ¡éªŒç¨‹åºå·²ç»èƒ½æ­£å¸¸è·‘è¿›æ¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨é‡‡ç”¨çš„è§„åˆ™æ˜¯ &lt;code&gt;eslint:recommended&lt;/code&gt; ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯é‡‡ç”¨ &#39;eslint-config-airbnb-base&#39;ï¼Œæ‰€ä»¥å†å®‰è£…ç›¸åº”çš„åŒ…ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;npm i -D eslint-config-airbnb-base eslint-plugin-import
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åå¯¹ &lt;code&gt;.eslintrc.js&lt;/code&gt; è¿›è¡Œé…ç½®ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;module&lt;/span&gt;.exports = {
  &lt;span class=&quot;hljs-attr&quot;&gt;env&lt;/span&gt;: {
    &lt;span class=&quot;hljs-attr&quot;&gt;browser&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;es6&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,
  },
  &lt;span class=&quot;hljs-attr&quot;&gt;extends&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&#39;airbnb-base&#39;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;globals&lt;/span&gt;: {
    &lt;span class=&quot;hljs-attr&quot;&gt;Atomics&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&#39;readonly&#39;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;SharedArrayBuffer&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&#39;readonly&#39;&lt;/span&gt;,
  },
  &lt;span class=&quot;hljs-attr&quot;&gt;parserOptions&lt;/span&gt;: {
    &lt;span class=&quot;hljs-attr&quot;&gt;ecmaVersion&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2018&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;sourceType&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&#39;module&#39;&lt;/span&gt;,
  },
  &lt;span class=&quot;hljs-attr&quot;&gt;plugins&lt;/span&gt;: [
    &lt;span class=&quot;hljs-string&quot;&gt;&#39;vue&#39;&lt;/span&gt;,
  ],
  &lt;span class=&quot;hljs-attr&quot;&gt;rules&lt;/span&gt;: {
    &lt;span class=&quot;hljs-string&quot;&gt;&#39;linebreak-style&#39;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;error&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;windows&quot;&lt;/span&gt;]
  },
};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å†è¿›è¡Œæ ¡éªŒï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;D:\works\secoo\&lt;span class=&quot;hljs-built_in&quot;&gt;test&lt;/span&gt;\code-formatter&amp;gt; npx eslint .\src\funs.js

D:\works\secoo\&lt;span class=&quot;hljs-built_in&quot;&gt;test&lt;/span&gt;\code-formatter\src\funs.js
  1:10  error  &lt;span class=&quot;hljs-string&quot;&gt;&#39;getUserInfo&#39;&lt;/span&gt; is defined but never used              no-unused-vars
  2:7   error  &lt;span class=&quot;hljs-string&quot;&gt;&#39;HelloStr&#39;&lt;/span&gt; is never reassigned. Use &lt;span class=&quot;hljs-string&quot;&gt;&#39;const&#39;&lt;/span&gt; instead  prefer-const
  3:7   error  &lt;span class=&quot;hljs-string&quot;&gt;&#39;age&#39;&lt;/span&gt; is assigned a value but never used             no-unused-vars
  3:7   error  &lt;span class=&quot;hljs-string&quot;&gt;&#39;age&#39;&lt;/span&gt; is never reassigned. Use &lt;span class=&quot;hljs-string&quot;&gt;&#39;const&#39;&lt;/span&gt; instead       prefer-const
  3:15  error  Missing semicolon                                    semi

âœ– 5 problems (5 errors, 0 warnings)
  3 errors and 0 warnings potentially fixable with the `--fix` option.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°æ˜æ˜¾æ¯”ä¹‹å‰çš„é”™è¯¯è¦å¤šï¼ŒAribnb çš„è§„åˆ™ç›¸å¯¹è¾ƒä¸ºä¸¥æ ¼ï¼Œå¯ä»¥è§„é¿å¾ˆå¤šä½çº§é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œè¦é‡ç‚¹è¯´ä¸€ä¸‹çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨ &lt;code&gt;.eslintrc.js&lt;/code&gt; çš„ &lt;code&gt;rules&lt;/code&gt; é‡ŒåŠ äº† &lt;code&gt;&#39;linebreak-style&#39;: [&quot;error&quot;, &quot;windows&quot;]&lt;/code&gt;ï¼Œæ˜¯ç”±äºä¸åŒç³»ç»Ÿé—´å¯¹æ¢è¡Œçš„å¤„ç†ä¸åŒå¯¼è‡´çš„ï¼ŒåŠ è¿™ä¸ªè§„åˆ™æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-5&quot;&gt;ç»™ vscode å®‰è£… eslint æ’ä»¶&lt;/h3&gt;
&lt;p&gt;èµ°åˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»å¯ä»¥æ ¡éªŒ js æ–‡ä»¶äº†ï¼Œé€šè¿‡æ ¡éªŒä¹Ÿå‘ç°äº†å¾ˆå¤šé—®é¢˜ï¼Œä½†åœ¨ vscodeé‡Œå¹¶æ²¡æœ‰é”™è¯¯æç¤ºï¼Œè¿™å°±ç”¨åˆ°äº† &lt;strong&gt;&lt;code&gt;vscode&lt;/code&gt;&lt;/strong&gt; çš„å¦ä¸€ä¸ªæ’ä»¶ &lt;code&gt;eslint&lt;/code&gt;ï¼Œå®‰è£…å®Œæ’ä»¶ä»¥åï¼Œåœ¨ vscode é‡Œå¯ä»¥çœ‹åˆ°é”™è¯¯æç¤ºäº†ï¼š&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;eslint lint&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/4/24/16a4e2b56fb1182b~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;èµ°åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ç¦»æˆåŠŸå·²ç»å¾ˆè¿‘å•¦ï¼&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-6&quot;&gt;è®© pretter æ ¹æ® eslint æ ¡éªŒç»“æœï¼Œå¯¹ä»£ç è¿›è¡Œæ ·å¼åŒ–&lt;/h2&gt;
&lt;p&gt;åˆ°ç›®å‰ä¸ºä¸Šï¼Œå·²ç»å¯ä»¥å¯¹ js æ–‡ä»¶è¿›è¡Œæ ¡éªŒï¼Œç”šè‡³å¯ä»¥å¯¹ js æ–‡ä»¶æŒ‰è§„åˆ™è¿›è¡Œä¿®å¤äº†ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;D:\works\secoo\&lt;span class=&quot;hljs-built_in&quot;&gt;test&lt;/span&gt;\code-formatter&amp;gt; npx eslint --fix .\src\funs.js

D:\works\secoo\&lt;span class=&quot;hljs-built_in&quot;&gt;test&lt;/span&gt;\code-formatter\src\funs.js
  1:10  error  &lt;span class=&quot;hljs-string&quot;&gt;&#39;getUserInfo&#39;&lt;/span&gt; is defined but never used   no-unused-vars
  3:9   error  &lt;span class=&quot;hljs-string&quot;&gt;&#39;age&#39;&lt;/span&gt; is assigned a value but never used  no-unused-vars

âœ– 2 problems (2 errors, 0 warnings)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½†æ˜¯å¦‚æœä½ ç”¨ vscodeï¼ˆå¦‚å‰è¿°ï¼Œvscode ä½¿ç”¨ prettierï¼‰ è¿›è¡Œä¿®å¤ï¼Œå‘ç°å¹¶æ²¡æœ‰åº”ç”¨ Airbnb çš„è§„åˆ™ï¼Œè¿™é‡Œéœ€è¦æ‰‹åŠ¨é…ç½®ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;CTRL + ,&lt;/code&gt; æ‰“å¼€é…ç½®ç•Œé¢&lt;/li&gt;
&lt;li&gt;æ‰©å±• -&amp;gt; Prettier é‡Œæ‰“åˆ° Eslint Integration å¹¶å‹¾é€‰
å¾—åˆ° vscode çš„é…ç½®æ–‡ä»¶ &lt;code&gt;settings.json&lt;/code&gt; å¦‚ä¸‹&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;hljs json&quot; lang=&quot;json&quot;&gt;{
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;editor.defaultFormatter&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;esbenp.prettier-vscode&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;prettier.eslintIntegration&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ—¶å†å¯¹ js æ–‡ä»¶è¿›è¡Œæ ¼å¼åŒ–ï¼Œå°±èƒ½æŒ‰ç…§æŒ‡å®šçš„è§„åˆ™æ‰§è¡Œäº†ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;prettier format follow eslint&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/4/24/16a4ee945b11b14b~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-7&quot;&gt;æ ¡éªŒå¹¶ä¸”æ ¼å¼åŒ– vue ä»£ç &lt;/h2&gt;
&lt;p&gt;è¿™éƒ¨åˆ†æ˜¯æœ€éº»çƒ¦çš„ï¼Œå¾ˆå¤šåŒå­¦éƒ½åœ¨è¿™é‡Œç¿»è½¦......&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œè¦æƒ³ &lt;code&gt;vscode&lt;/code&gt; è®¤è¯† &lt;code&gt;vue&lt;/code&gt; æ–‡ä»¶ï¼Œéœ€è¦å®‰è£…æ’ä»¶ &lt;code&gt;vetur&lt;/code&gt;ï¼ŒåŸºæœ¬ä¸Šå®‰è£…å¥½æ­¤æ’ä»¶åå°±å¯ä»¥å¼€å¿ƒçš„æ’¸ vue ä»£ç äº†ï¼Œvetur çš„é»˜è®¤é…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs json&quot; lang=&quot;json&quot;&gt;{
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;vetur.format.defaultFormatter.html&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;prettyhtml&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;vetur.format.defaultFormatter.css&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;prettier&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;vetur.format.defaultFormatter.postcss&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;prettier&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;vetur.format.defaultFormatter.scss&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;prettier&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;vetur.format.defaultFormatter.less&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;prettier&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;vetur.format.defaultFormatter.stylus&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;stylus-supremacy&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;vetur.format.defaultFormatter.js&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;prettier&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;vetur.format.defaultFormatter.ts&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;prettier&quot;&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»¥ä¸Šæ˜¯é»˜è®¤é…ç½®ï¼Œçœ‹ç€å¾ˆå¼€ä»¥çš„ä»¥ä¸ºå¯ä»¥æŒ‰ç€å¦‚ä¸‹æ–¹å¼å¯¹ä»£ç è¿›è¡Œæ ¼å¼åŒ–ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;å‘å‡ºæ ¼å¼åŒ–å‘½ä»¤
    |
    | next
    |
vetur æ”¶åˆ°å‘½ä»¤ å°†æ ¼å¼åŒ–ä»»åŠ¡è½¬äº¤ç»™ prettier
    |
    | next
    |
prettier æ”¶åˆ°å‘½ä»¤ å°†æ ¼å¼åŒ–ä»»åŠ¡è½¬äº¤ç»™ eslint
    |
    | next
    |
eslint æ”¶åˆ°å‘½ä»¤ï¼Œå°†ä»£ç æ ¼å¼åŒ–
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;çœ‹ä¼¼ç¾å¥½çš„ç»“å±€è¢«ç°å®æ‰“ç ´ï¼Œå½“æˆ‘ä»¬å¯¹ vue æ–‡ä»¶è¿›è¡Œæ ¼å¼åŒ–çš„æ—¶å€™ï¼Œå‘å®ƒå‚è€ƒçš„è§„åˆ™æ˜¯ prettier è§„åˆ™ï¼Œè€Œé eslint è§„åˆ™ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæƒ³æŒ‰ç€ä¸Šè¿°è§„åˆ™å¯¹ vue è¿›è¡Œæ ¼å¼åŒ–éœ€è¦åšä¸¤ä¸ªäº‹ï¼š
&lt;code&gt;settings.json&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°† vetur ä¸­ js çš„ formatter è®¾ç½®ä¸º prettier-eslint&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;hljs json&quot; lang=&quot;json&quot;&gt;{
  ...
  &quot;vetur.format.defaultFormatter.js&quot;: &quot;prettier-eslint&quot;
  ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;å®‰è£… prettier-eslint åŒ…&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;npm i -D prettier-eslint
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œprettier-eslint &lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fprettier%2Fprettier-eslint&quot; title=&quot;https://github.com/prettier/prettier-eslint&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;å®˜ç½‘&lt;/a&gt;ä¸Šè¯´çš„å¾ˆæ¸…æ¥šï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This formats your code via prettier, and then passes the result of that to eslint --fix. This way you can get the benefits of prettier&#39;s superior formatting capabilities, but also benefit from the configuration capabilities of eslint.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½†å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘åœ¨ç½‘ä¸Šçœ‹æŠŠæ— æ•°çš„åŒå­¦ç»•è¿›å»äº†ï¼Œç¡®å®ç›´çº¿ç†è§£çš„è¯ä¼šæœ‰ä¸¤ä¸ªå‘ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;prettier ä¸æ˜¯å·²ç»æŒ‰ç€ eslint æ¥æ ¼å¼åŒ– js äº†å—ï¼Œvetur æŒ‡ç»™ prettier æŒ‰è¯´æ²¡é—®é¢˜å•Šï¼ç°å®æ˜¯éœ€è¦ä¼ é€’ç»™ &lt;code&gt;prettier-eslint&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¾ˆå¤šåŒå­¦è·¨è¿‡äº†ç¬¬ä¸€é“åï¼Œä½†ä¸æ›¾æƒ³ &lt;code&gt;prettier-eslint&lt;/code&gt; éœ€è¦æ‰‹åŠ¨å®‰è£…ä¸€ä¸ªåŒ…å•Šï¼&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ‰€ä»¥å¯¼è‡´åœ¨æœ€åä¸€æ­¥èµ°ä¸ä¸‹å»äº†ã€‚&lt;/p&gt;
&lt;p&gt;è‡³æ­¤é…ç½®åŸºæœ¬å·²ç»å®Œæˆï¼Œæ•ˆæœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;eslint-vue-fix&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/4/24/16a4f08c6f302185~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-8&quot;&gt;æœ€åæ€»ç»“&lt;/h2&gt;
&lt;p&gt;æœ€åæ€»ç»“ä¸€ä¸‹ï¼Œæ€»å…±éœ€è¦åšé‚£äº›å·¥ä½œ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£… vscode æ’ä»¶ &lt;code&gt;eslint&lt;/code&gt;ã€ &lt;code&gt;prettier&lt;/code&gt;ã€ &lt;code&gt;vetur&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;é…ç½® eslint è§„åˆ™&lt;/li&gt;
&lt;li&gt;é…ç½® prettier ï¼Œä½¿å…¶æŒ‰ç€ eslint å·¥ä½œ&lt;/li&gt;
&lt;li&gt;é…ç½® vetur&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æœ€ç»ˆçš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š
settings.json&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs json&quot; lang=&quot;json&quot;&gt;{
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;extensions.autoUpdate&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;eslint.validate&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;javascript&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;javascriptreact&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;vue&quot;&lt;/span&gt;],
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;prettier.eslintIntegration&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;vetur.format.defaultFormatterOptions&quot;&lt;/span&gt;: {
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;prettier&quot;&lt;/span&gt;: {
      &lt;span class=&quot;hljs-attr&quot;&gt;&quot;eslintIntegration&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;
    }
  },
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;vetur.format.defaultFormatter.js&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;prettier-eslint&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;[javascript]&quot;&lt;/span&gt;: {
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;editor.defaultFormatter&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;esbenp.prettier-vscode&quot;&lt;/span&gt;
  },
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;[jsonc]&quot;&lt;/span&gt;: {
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;editor.defaultFormatter&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;esbenp.prettier-vscode&quot;&lt;/span&gt;
  },
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;vetur.format.defaultFormatter.html&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;prettier&quot;&lt;/span&gt;
}

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;.eslintrc.js&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;module&lt;/span&gt;.exports = {
  &lt;span class=&quot;hljs-attr&quot;&gt;env&lt;/span&gt;: {
    &lt;span class=&quot;hljs-attr&quot;&gt;browser&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;es6&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;
  },
  &lt;span class=&quot;hljs-attr&quot;&gt;extends&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&#39;airbnb-base&#39;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&#39;plugin:vue/recommended&#39;&lt;/span&gt;],
  &lt;span class=&quot;hljs-attr&quot;&gt;globals&lt;/span&gt;: {
    &lt;span class=&quot;hljs-attr&quot;&gt;Atomics&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&#39;readonly&#39;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;SharedArrayBuffer&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&#39;readonly&#39;&lt;/span&gt;
  },
  &lt;span class=&quot;hljs-attr&quot;&gt;parserOptions&lt;/span&gt;: {
    &lt;span class=&quot;hljs-attr&quot;&gt;ecmaVersion&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2018&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;sourceType&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&#39;module&#39;&lt;/span&gt;
  },
  &lt;span class=&quot;hljs-attr&quot;&gt;plugins&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&#39;vue&#39;&lt;/span&gt;],
  &lt;span class=&quot;hljs-attr&quot;&gt;rules&lt;/span&gt;: {
    &lt;span class=&quot;hljs-string&quot;&gt;&#39;linebreak-style&#39;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&#39;error&#39;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&#39;windows&#39;&lt;/span&gt;],
    &lt;span class=&quot;hljs-string&quot;&gt;&#39;comma-dangle&#39;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&#39;error&#39;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&#39;never&#39;&lt;/span&gt;], &lt;span class=&quot;hljs-comment&quot;&gt;// ä¿®æ­£ eslint-plugin-vue å¸¦æ¥çš„é—®é¢˜&lt;/span&gt;
  }
};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æºä»£ç åœ¨ &lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fwfzong%2Fvue-vscode-format&quot; title=&quot;https://github.com/wfzong/vue-vscode-format&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;è¿™é‡Œ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å‚è€ƒæ–‡ç« ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fvuejs.github.io%2Fvetur%2Fformatting.html&quot; title=&quot;https://vuejs.github.io/vetur/formatting.html&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;Vetur å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fprettier%2Fprettier-eslint&quot; title=&quot;https://github.com/prettier/prettier-eslint&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;prettier-eslint github rep&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Feslint.cn%2Fdocs%2Fuser-guide%2Fconfiguring&quot; title=&quot;http://eslint.cn/docs/user-guide/configuring&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;eslint configuring&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Feslint.cn%2Fdocs%2Frules%2F&quot; title=&quot;http://eslint.cn/docs/rules/&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;eslint rules&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgit-scm.com%2Fdocs%2Fgitignore&quot; title=&quot;https://git-scm.com/docs/gitignore&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;gitignore&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fprettier.io%2Fdocs%2Fen%2Fintegrating-with-linters.html&quot; title=&quot;https://prettier.io/docs/en/integrating-with-linters.html&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;Prettier Integrating with Linters&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Fstariveer.coding.me%2Ffe-doc%2F&quot; title=&quot;http://stariveer.coding.me/fe-doc/&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;He Xing çš„ blog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fblog.jongallant.com%2F2019%2F02%2Fvuejs-vetur-vscode-format-eslint-issues%2F&quot; title=&quot;https://blog.jongallant.com/2019/02/vuejs-vetur-vscode-format-eslint-issues/&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;How I Resolved Vue.js, VSCode, Vetur, Prettyhtml, and Prettier Formatting and ES Lint Issues&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fbeautify-web%2Fjs-beautify&quot; title=&quot;https://github.com/beautify-web/js-beautify&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;js-beautify github rep åŠè¯´æ˜&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Tips&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;ç”±äº vetur æœ€æ–°ç‰ˆæœ¬å‡ºç° bugï¼Œéœ€è¦å›é€€åˆ°  0.18.1 ç‰ˆæœ¬ï¼Œå…·ä½“ä¿¡æ¯è§ï¼š&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fvetur%2Fissues%2F1220&quot; title=&quot;https://github.com/vuejs/vetur/issues/1220&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;github.com/vuejs/veturâ€¦&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description><link>https://juejin.cn/post/6844903829956214791</link><guid isPermaLink="false">https://juejin.cn/post/6844903829956214791</guid><pubDate>Wed, 24 Apr 2019 11:09:42 GMT</pubDate><author>wfz</author><category>å‰ç«¯</category><category>ä»£ç è§„èŒƒ</category></item><item><title>æ”¯æ’‘æ—¥æ´»ç™¾ä¸‡ç”¨æˆ·çš„é«˜å¹¶å‘ç³»ç»Ÿï¼Œåº”è¯¥å¦‚ä½•è®¾è®¡å…¶æ•°æ®åº“æ¶æ„ï¼Ÿã€çŸ³æ‰çš„æ¶æ„ç¬”è®°ã€‘</title><description>&lt;p&gt;æ¬¢è¿å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šçŸ³æ‰çš„æ¶æ„ç¬”è®°ï¼ˆidï¼šshishan100ï¼‰&lt;/p&gt;
&lt;h1 data-id=&quot;heading-0&quot;&gt;ç›®å½•ï¼š&lt;/h1&gt;
&lt;p&gt;1.ç”¨ä¸€ä¸ªåˆ›ä¸šå…¬å¸çš„å‘å±•ä½œä¸ºèƒŒæ™¯å¼•å…¥
2.ç”¨å¤šå°æœåŠ¡å™¨æ¥åˆ†åº“æ”¯æ’‘é«˜å¹¶å‘è¯»å†™
3.å¤§é‡åˆ†è¡¨æ¥ä¿è¯æµ·é‡æ•°æ®ä¸‹æŸ¥è¯¢æ€§èƒ½
4.è¯»å†™åˆ†ç¦»æ¥æ”¯æ’‘æŒ‰éœ€æ‰©å®¹åŠæ€§èƒ½æå‡
5.é«˜å¹¶å‘ä¸‹çš„æ•°æ®åº“æ¶æ„è®¾è®¡æ€»ç»“&lt;/p&gt;
&lt;p&gt;â€œ è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬æ¥èŠä¸€ä¸‹å¯¹äºä¸€ä¸ªæ”¯æ’‘æ—¥æ´»ç™¾ä¸‡ç”¨æˆ·çš„é«˜å¹¶ç³»ç»Ÿï¼Œä»–çš„æ•°æ®åº“æ¶æ„åº”è¯¥å¦‚ä½•è®¾è®¡ï¼Ÿ&lt;/p&gt;
&lt;p&gt;çœ‹åˆ°è¿™ä¸ªé¢˜ç›®ï¼Œå¾ˆå¤šäººç¬¬ä¸€ååº”å°±æ˜¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åˆ†åº“åˆ†è¡¨å•Šï¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å®é™…ä¸Šï¼Œæ•°æ®åº“å±‚é¢çš„åˆ†åº“åˆ†è¡¨åˆ°åº•æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„ï¼Œä»–çš„ä¸åŒçš„ä½œç”¨å¦‚ä½•åº”å¯¹ä¸åŒçš„åœºæ™¯ï¼Œæˆ‘è§‰å¾—å¾ˆå¤šåŒå­¦å¯èƒ½éƒ½æ²¡ææ¸…æ¥šã€‚&lt;/p&gt;
&lt;h1 data-id=&quot;heading-1&quot;&gt;ï¼ˆ1ï¼‰ç”¨ä¸€ä¸ªåˆ›ä¸šå…¬å¸çš„å‘å±•ä½œä¸ºèƒŒæ™¯å¼•å…¥&lt;/h1&gt;
&lt;p&gt;å‡å¦‚æˆ‘ä»¬ç°åœ¨æ˜¯ä¸€ä¸ªå°åˆ›ä¸šå…¬å¸ï¼Œæ³¨å†Œç”¨æˆ·å°±20ä¸‡ï¼Œæ¯å¤©æ´»è·ƒç”¨æˆ·å°±1ä¸‡ï¼Œæ¯å¤©å•è¡¨æ•°æ®é‡å°±1000ï¼Œç„¶åé«˜å³°æœŸæ¯ç§’é’Ÿå¹¶å‘è¯·æ±‚æœ€å¤šå°±10ã€‚&lt;/p&gt;
&lt;p&gt;å¤©å“ªï¼å°±è¿™ç§ç³»ç»Ÿï¼Œéšä¾¿æ‰¾ä¸€ä¸ªæœ‰å‡ å¹´å·¥ä½œç»éªŒçš„é«˜çº§å·¥ç¨‹å¸ˆï¼Œç„¶åå¸¦å‡ ä¸ªå¹´è½»å·¥ç¨‹å¸ˆï¼Œéšä¾¿å¹²å¹²éƒ½å¯ä»¥åšå‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºè¿™æ ·çš„ç³»ç»Ÿï¼Œå®é™…ä¸Šä¸»è¦å°±æ˜¯åœ¨å‰æœŸå¿«é€Ÿçš„è¿›è¡Œä¸šåŠ¡åŠŸèƒ½çš„å¼€å‘ï¼Œæä¸€ä¸ªå•å—ç³»ç»Ÿéƒ¨ç½²åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œç„¶åè¿æ¥ä¸€ä¸ªæ•°æ®åº“å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ç€å¤§å®¶å°±æ˜¯ä¸åœçš„åœ¨ä¸€ä¸ªå·¥ç¨‹é‡Œå¡«å……è¿›å»å„ç§ä¸šåŠ¡ä»£ç ï¼Œå°½å¿«æŠŠå…¬å¸çš„ä¸šåŠ¡æ”¯æ’‘èµ·æ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/19/169017ef22738959~tplv-t2oaga2asx-zoom-in-crop-mark:1512:0:0:0.awebp&quot; alt=&quot;&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç»“æœå‘¢ï¼Œæ²¡æƒ³åˆ°æˆ‘ä»¬è¿æ°”è¿™ä¹ˆå¥½ï¼Œç¢°ä¸Šä¸ªä¼˜ç§€çš„CEOå¸¦ç€æˆ‘ä»¬èµ°ä¸Šäº†åº·åº„å¤§é“ï¼&lt;/p&gt;
&lt;p&gt;å…¬å¸ä¸šåŠ¡å‘å±•è¿…çŒ›ï¼Œè¿‡äº†å‡ ä¸ªæœˆï¼Œæ³¨å†Œç”¨æˆ·æ•°è¾¾åˆ°äº†2000ä¸‡ï¼æ¯å¤©æ´»è·ƒç”¨æˆ·æ•°100ä¸‡ï¼æ¯å¤©å•è¡¨æ–°å¢æ•°æ®é‡è¾¾åˆ°50ä¸‡æ¡ï¼é«˜å³°æœŸæ¯ç§’è¯·æ±‚é‡è¾¾åˆ°1ä¸‡ï¼&lt;/p&gt;
&lt;p&gt;åŒæ—¶å…¬å¸è¿˜é¡ºå¸¦ç€èèµ„äº†ä¸¤è½®ï¼Œä¼°å€¼è¾¾åˆ°äº†æƒŠäººçš„å‡ äº¿ç¾é‡‘ï¼ä¸€åªæœæ°”è“¬å‹ƒçš„å¹¼å¹´ç‹¬è§’å…½çš„èŠ‚å¥ï¼&lt;/p&gt;
&lt;p&gt;å¥½å§ï¼Œç°åœ¨å¤§å®¶æ„Ÿè§‰å‹åŠ›å·²ç»æœ‰ç‚¹å¤§äº†ï¼Œä¸ºå•¥å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å› ä¸ºæ¯å¤©å•è¡¨æ–°å¢50ä¸‡æ¡æ•°æ®ï¼Œä¸€ä¸ªæœˆå°±å¤š1500ä¸‡æ¡æ•°æ®ï¼Œä¸€å¹´ä¸‹æ¥å•è¡¨ä¼šè¾¾åˆ°ä¸Šäº¿æ¡æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;ç»è¿‡ä¸€æ®µæ—¶é—´çš„è¿è¡Œï¼Œç°åœ¨å’±ä»¬å•è¡¨å·²ç»ä¸¤ä¸‰åƒä¸‡æ¡æ•°æ®äº†ï¼Œå‹‰å¼ºè¿˜èƒ½æ”¯æ’‘ç€ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œçœ¼è§ç€ç³»ç»Ÿè®¿é—®æ•°æ®åº“çš„æ€§èƒ½æ€ä¹ˆè¶Šæ¥è¶Šå·®å‘¢ï¼Œå•è¡¨æ•°æ®é‡è¶Šæ¥è¶Šå¤§ï¼Œæ‹–å®äº†ä¸€äº›å¤æ‚æŸ¥è¯¢SQLçš„æ€§èƒ½å•Šï¼&lt;/p&gt;
&lt;p&gt;ç„¶åé«˜å³°æœŸè¯·æ±‚ç°åœ¨æ˜¯æ¯ç§’1ä¸‡ï¼Œå’±ä»¬çš„ç³»ç»Ÿåœ¨çº¿ä¸Šéƒ¨ç½²äº†20å°æœºå™¨ï¼Œå¹³å‡æ¯å°æœºå™¨æ¯ç§’æ”¯æ’‘500è¯·æ±‚ï¼Œè¿™ä¸ªè¿˜èƒ½æŠ—ä½ï¼Œæ²¡å•¥å¤§é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æ•°æ®åº“å±‚é¢å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¦‚æœè¯´æ­¤æ—¶ä½ è¿˜æ˜¯ä¸€å°æ•°æ®åº“æœåŠ¡å™¨åœ¨æ”¯æ’‘æ¯ç§’ä¸Šä¸‡çš„è¯·æ±‚ï¼Œè´Ÿè´£ä»»çš„å‘Šè¯‰ä½ ï¼Œæ¯æ¬¡é«˜å³°æœŸä¼šå‡ºç°ä¸‹è¿°é—®é¢˜ï¼š&lt;/p&gt;
&lt;p&gt;ä½ çš„æ•°æ®åº“æœåŠ¡å™¨çš„ç£ç›˜IOã€ç½‘ç»œå¸¦å®½ã€CPUè´Ÿè½½ã€å†…å­˜æ¶ˆè€—ï¼Œéƒ½ä¼šè¾¾åˆ°éå¸¸é«˜çš„æƒ…å†µï¼Œæ•°æ®åº“æ‰€åœ¨æœåŠ¡å™¨çš„æ•´ä½“è´Ÿè½½ä¼šéå¸¸é‡ï¼Œç”šè‡³éƒ½å¿«ä¸å ªé‡è´Ÿäº†&lt;/p&gt;
&lt;p&gt;é«˜å³°æœŸæ—¶ï¼Œæœ¬æ¥ä½ å•è¡¨æ•°æ®é‡å°±å¾ˆå¤§ï¼ŒSQLæ€§èƒ½å°±ä¸å¤ªå¥½ï¼Œè¿™æ—¶åŠ ä¸Šä½ çš„æ•°æ®åº“æœåŠ¡å™¨è´Ÿè½½å¤ªé«˜å¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œå°±ä¼šå‘ç°ä½ çš„SQLæ€§èƒ½æ›´å·®äº†&lt;/p&gt;
&lt;p&gt;æœ€æ˜æ˜¾çš„ä¸€ä¸ªæ„Ÿè§‰ï¼Œå°±æ˜¯ä½ çš„ç³»ç»Ÿåœ¨é«˜å³°æœŸå„ä¸ªåŠŸèƒ½éƒ½è¿è¡Œçš„å¾ˆæ…¢ï¼Œç”¨æˆ·ä½“éªŒå¾ˆå·®ï¼Œç‚¹ä¸€ä¸ªæŒ‰é’®å¯èƒ½è¦å‡ åç§’æ‰å‡ºæ¥ç»“æœ&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ è¿æ°”ä¸å¤ªå¥½ï¼Œæ•°æ®åº“æœåŠ¡å™¨çš„é…ç½®ä¸æ˜¯ç‰¹åˆ«çš„é«˜çš„è¯ï¼Œå¼„ä¸å¥½ä½ è¿˜ä¼šç»å†æ•°æ®åº“å®•æœºçš„æƒ…å†µï¼Œå› ä¸ºè´Ÿè½½å¤ªé«˜å¯¹æ•°æ®åº“å‹åŠ›å¤ªå¤§äº†&lt;/p&gt;
&lt;h1 data-id=&quot;heading-2&quot;&gt;ï¼ˆ2ï¼‰å¤šå°æœåŠ¡å™¨åˆ†åº“æ”¯æ’‘é«˜å¹¶å‘è¯»å†™&lt;/h1&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬å…ˆè€ƒè™‘ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæ•°æ®åº“æ¯ç§’ä¸Šä¸‡çš„å¹¶å‘è¯·æ±‚åº”è¯¥å¦‚ä½•æ¥æ”¯æ’‘å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è¦ææ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œå…ˆå¾—æ˜ç™½ä¸€èˆ¬æ•°æ®åº“éƒ¨ç½²åœ¨ä»€ä¹ˆé…ç½®çš„æœåŠ¡å™¨ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;é€šå¸¸æ¥è¯´ï¼Œå‡å¦‚ä½ ç”¨æ™®é€šé…ç½®çš„æœåŠ¡å™¨æ¥éƒ¨ç½²æ•°æ®åº“ï¼Œé‚£ä¹Ÿèµ·ç æ˜¯16æ ¸32Gçš„æœºå™¨é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§éå¸¸æ™®é€šçš„æœºå™¨é…ç½®éƒ¨ç½²çš„æ•°æ®åº“ï¼Œä¸€èˆ¬çº¿ä¸Šçš„ç»éªŒæ˜¯ï¼šä¸è¦è®©å…¶æ¯ç§’è¯·æ±‚æ”¯æ’‘è¶…è¿‡2000ï¼Œä¸€èˆ¬æ§åˆ¶åœ¨2000å·¦å³ã€‚&lt;/p&gt;
&lt;p&gt;æ§åˆ¶åœ¨è¿™ä¸ªç¨‹åº¦ï¼Œä¸€èˆ¬æ•°æ®åº“è´Ÿè½½ç›¸å¯¹åˆç†ï¼Œä¸ä¼šå¸¦æ¥å¤ªå¤§çš„å‹åŠ›ï¼Œæ²¡æœ‰å¤ªå¤§çš„å®•æœºé£é™©ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥é¦–å…ˆç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯åœ¨ä¸Šä¸‡å¹¶å‘è¯·æ±‚çš„åœºæ™¯ä¸‹ï¼Œéƒ¨ç½²ä¸ª5å°æœåŠ¡å™¨ï¼Œæ¯å°æœåŠ¡å™¨ä¸Šéƒ½éƒ¨ç½²ä¸€ä¸ªæ•°æ®åº“å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæ¯ä¸ªæ•°æ®åº“å®ä¾‹é‡Œï¼Œéƒ½åˆ›å»ºä¸€ä¸ªä¸€æ ·çš„åº“ï¼Œæ¯”å¦‚è¯´è®¢å•åº“ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶åœ¨5å°æœåŠ¡å™¨ä¸Šéƒ½æœ‰ä¸€ä¸ªè®¢å•åº“ï¼Œåå­—å¯ä»¥ç±»ä¼¼ä¸ºï¼šdb_order_01ï¼Œdb_order_02ï¼Œç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæ¯ä¸ªè®¢å•åº“é‡Œï¼Œéƒ½æœ‰ä¸€ä¸ªç›¸åŒçš„è¡¨ï¼Œæ¯”å¦‚è¯´è®¢å•åº“é‡Œæœ‰è®¢å•ä¿¡æ¯è¡¨ï¼Œé‚£ä¹ˆæ­¤æ—¶5ä¸ªè®¢å•åº“é‡Œéƒ½æœ‰ä¸€ä¸ªè®¢å•ä¿¡æ¯è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚db_order_01åº“é‡Œå°±æœ‰ä¸€ä¸ªtb_order_01è¡¨ï¼Œdb_order_02åº“é‡Œå°±æœ‰ä¸€ä¸ªtb_order_02è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°±å®ç°äº†ä¸€ä¸ªåŸºæœ¬çš„åˆ†åº“åˆ†è¡¨çš„æ€è·¯ï¼ŒåŸæ¥çš„ä¸€å°æ•°æ®åº“æœåŠ¡å™¨å˜æˆäº†5å°æ•°æ®åº“æœåŠ¡å™¨ï¼ŒåŸæ¥çš„ä¸€ä¸ªåº“å˜æˆäº†5ä¸ªåº“ï¼ŒåŸæ¥çš„ä¸€å¼ è¡¨å˜æˆäº†5ä¸ªè¡¨ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åä½ åœ¨å†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦å€ŸåŠ©æ•°æ®åº“ä¸­é—´ä»¶ï¼Œæ¯”å¦‚sharding-jdbcï¼Œæˆ–è€…æ˜¯mycatï¼Œéƒ½å¯ä»¥ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥æ ¹æ®æ¯”å¦‚è®¢å•idæ¥hashåæŒ‰5å–æ¨¡ï¼Œæ¯”å¦‚æ¯å¤©è®¢å•è¡¨æ–°å¢50ä¸‡æ•°æ®ï¼Œæ­¤æ—¶å…¶ä¸­10ä¸‡æ¡æ•°æ®ä¼šè½å…¥db_order_01åº“çš„tb_order_01è¡¨ï¼Œå¦å¤–10ä¸‡æ¡æ•°æ®ä¼šè½å…¥db_order_02åº“çš„tb_order_02è¡¨ï¼Œä»¥æ­¤ç±»æ¨ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·å°±å¯ä»¥æŠŠæ•°æ®å‡åŒ€åˆ†æ•£åœ¨5å°æœåŠ¡å™¨ä¸Šäº†ï¼ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è®¢å•idæ¥hashå–æ¨¡ï¼Œå»å¯¹åº”çš„æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“é‡Œï¼Œä»å¯¹åº”çš„è¡¨é‡ŒæŸ¥è¯¢é‚£æ¡æ•°æ®å‡ºæ¥å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¾æ®è¿™ä¸ªæ€è·¯ç”»å‡ºçš„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/19/1690182818c8d80d~tplv-t2oaga2asx-zoom-in-crop-mark:1512:0:0:0.awebp&quot; alt=&quot;&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;åšè¿™ä¸€æ­¥æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªå¥½å¤„ï¼ŒåŸæ¥æ¯”å¦‚è®¢å•è¡¨å°±ä¸€å¼ è¡¨ï¼Œè¿™ä¸ªæ—¶å€™ä¸å°±æˆäº†5å¼ è¡¨äº†ä¹ˆï¼Œé‚£ä¹ˆæ¯ä¸ªè¡¨çš„æ•°æ®å°±å˜æˆ1/5äº†ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾è®¢å•è¡¨ä¸€å¹´æœ‰1äº¿æ¡æ•°æ®ï¼Œæ­¤æ—¶5å¼ è¡¨é‡Œæ¯å¼ è¡¨ä¸€å¹´å°±2000ä¸‡æ•°æ®äº†ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå‡è®¾å½“å‰è®¢å•è¡¨é‡Œå·²ç»æœ‰2000ä¸‡æ•°æ®äº†ï¼Œæ­¤æ—¶åšäº†ä¸Šè¿°æ‹†åˆ†ï¼Œæ¯ä¸ªè¡¨é‡Œå°±åªæœ‰400ä¸‡æ•°æ®äº†ã€‚&lt;/p&gt;
&lt;p&gt;è€Œä¸”æ¯å¤©æ–°å¢50ä¸‡æ•°æ®çš„è¯ï¼Œé‚£ä¹ˆæ¯ä¸ªè¡¨æ‰æ–°å¢10ä¸‡æ•°æ®ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯åˆæ­¥ç¼“è§£äº†å•è¡¨æ•°æ®é‡è¿‡å¤§å½±å“ç³»ç»Ÿæ€§èƒ½çš„é—®é¢˜ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¦å¤–å°±æ˜¯æ¯ç§’1ä¸‡è¯·æ±‚åˆ°5å°æ•°æ®åº“ä¸Šï¼Œæ¯å°æ•°æ®åº“å°±æ‰¿è½½æ¯ç§’2000çš„è¯·æ±‚ï¼Œæ˜¯ä¸æ˜¯ä¸€ä¸‹å­æŠŠæ¯å°æ•°æ®åº“æœåŠ¡å™¨çš„å¹¶å‘è¯·æ±‚é™ä½åˆ°äº†å®‰å…¨èŒƒå›´å†…ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è¿™æ ·ï¼Œé™ä½äº†æ•°æ®åº“çš„é«˜å³°æœŸè´Ÿè½½ï¼ŒåŒæ—¶è¿˜ä¿è¯äº†é«˜å³°æœŸçš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h1 data-id=&quot;heading-3&quot;&gt;ï¼ˆ3ï¼‰å¤§é‡åˆ†è¡¨æ¥ä¿è¯æµ·é‡æ•°æ®ä¸‹çš„æŸ¥è¯¢æ€§èƒ½&lt;/h1&gt;
&lt;p&gt;ä½†æ˜¯ä¸Šè¿°çš„æ•°æ®åº“æ¶æ„è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯å•è¡¨æ•°æ®é‡è¿˜æ˜¯è¿‡å¤§ï¼Œç°åœ¨è®¢å•è¡¨æ‰åˆ†ä¸ºäº†5å¼ è¡¨ï¼Œé‚£ä¹ˆå¦‚æœè®¢å•ä¸€å¹´æœ‰1äº¿æ¡ï¼Œæ¯ä¸ªè¡¨å°±æœ‰2000ä¸‡æ¡ï¼Œè¿™ä¹Ÿè¿˜æ˜¯å¤ªå¤§äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥è¿˜åº”è¯¥ç»§ç»­åˆ†è¡¨ï¼Œå¤§é‡åˆ†è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚å¯ä»¥æŠŠè®¢å•è¡¨ä¸€å…±æ‹†åˆ†ä¸º1024å¼ è¡¨ï¼Œè¿™æ ·1äº¿æ•°æ®é‡çš„è¯ï¼Œåˆ†æ•£åˆ°æ¯ä¸ªè¡¨é‡Œä¹Ÿå°±æ‰10ä¸‡é‡çº§çš„æ•°æ®é‡ï¼Œç„¶åè¿™ä¸Šåƒå¼ è¡¨åˆ†æ•£åœ¨5å°æ•°æ®åº“é‡Œå°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦åšä¸¤æ¬¡è·¯ç”±ï¼Œå…ˆå¯¹è®¢å•id hashåå¯¹æ•°æ®åº“çš„æ•°é‡å–æ¨¡ï¼Œå¯ä»¥è·¯ç”±åˆ°ä¸€å°æ•°æ®åº“ä¸Šï¼Œç„¶åå†å¯¹é‚£å°æ•°æ®åº“ä¸Šçš„è¡¨æ•°é‡å–æ¨¡ï¼Œå°±å¯ä»¥è·¯ç”±åˆ°æ•°æ®åº“ä¸Šçš„ä¸€ä¸ªè¡¨é‡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡è¿™ä¸ªæ­¥éª¤ï¼Œå°±å¯ä»¥è®©æ¯ä¸ªè¡¨é‡Œçš„æ•°æ®é‡éå¸¸å°ï¼Œæ¯å¹´1äº¿æ•°æ®å¢é•¿ï¼Œä½†æ˜¯åˆ°æ¯ä¸ªè¡¨é‡Œæ‰10ä¸‡æ¡æ•°æ®å¢é•¿ï¼Œè¿™ä¸ªç³»ç»Ÿè¿è¡Œ10å¹´ï¼Œæ¯ä¸ªè¡¨é‡Œå¯èƒ½æ‰ç™¾ä¸‡çº§çš„æ•°æ®é‡ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·å¯ä»¥ä¸€æ¬¡æ€§ä¸ºç³»ç»Ÿæœªæ¥çš„è¿è¡Œåšå¥½å……è¶³çš„å‡†å¤‡ï¼Œçœ‹ä¸‹é¢çš„å›¾ï¼Œä¸€èµ·æ¥æ„Ÿå—ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/19/1690182a76438055~tplv-t2oaga2asx-zoom-in-crop-mark:1512:0:0:0.awebp&quot; alt=&quot;&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;h1 data-id=&quot;heading-4&quot;&gt;ï¼ˆ4ï¼‰è¯»å†™åˆ†ç¦»æ¥æ”¯æ’‘æŒ‰éœ€æ‰©å®¹ä»¥åŠæ€§èƒ½æå‡&lt;/h1&gt;
&lt;p&gt;è¿™ä¸ªæ—¶å€™æ•´ä½“æ•ˆæœå·²ç»æŒºä¸é”™äº†ï¼Œå¤§é‡åˆ†è¡¨çš„ç­–ç•¥ä¿è¯å¯èƒ½æœªæ¥10å¹´ï¼Œæ¯ä¸ªè¡¨çš„æ•°æ®é‡éƒ½ä¸ä¼šå¤ªå¤§ï¼Œè¿™å¯ä»¥ä¿è¯å•è¡¨å†…çš„SQLæ‰§è¡Œæ•ˆç‡å’Œæ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åå¤šå°æ•°æ®åº“çš„æ‹†åˆ†æ–¹å¼ï¼Œå¯ä»¥ä¿è¯æ¯å°æ•°æ®åº“æœåŠ¡å™¨æ‰¿è½½ä¸€éƒ¨åˆ†çš„è¯»å†™è¯·æ±‚ï¼Œé™ä½æ¯å°æœåŠ¡å™¨çš„è´Ÿè½½ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æ­¤æ—¶è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå‡å¦‚è¯´æ¯å°æ•°æ®åº“æœåŠ¡å™¨æ‰¿è½½æ¯ç§’2000çš„è¯·æ±‚ï¼Œç„¶åå…¶ä¸­400è¯·æ±‚æ˜¯å†™å…¥ï¼Œ1600è¯·æ±‚æ˜¯æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ï¼Œå¢åˆ æ”¹çš„SQLæ‰å åˆ°äº†20%çš„æ¯”ä¾‹ï¼Œ80%çš„è¯·æ±‚æ˜¯æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶å‡å¦‚è¯´éšç€ç”¨æˆ·é‡è¶Šæ¥è¶Šå¤§ï¼Œå‡å¦‚è¯´åˆå˜æˆæ¯å°æœåŠ¡å™¨æ‰¿è½½4000è¯·æ±‚äº†ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå…¶ä¸­800è¯·æ±‚æ˜¯å†™å…¥ï¼Œ3200è¯·æ±‚æ˜¯æŸ¥è¯¢ï¼Œå¦‚æœè¯´ä½ æŒ‰ç…§ç›®å‰çš„æƒ…å†µæ¥æ‰©å®¹ï¼Œå°±éœ€è¦å¢åŠ ä¸€å°æ•°æ®åº“æœåŠ¡å™¨.&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æ­¤æ—¶å¯èƒ½å°±ä¼šæ¶‰åŠåˆ°è¡¨çš„è¿ç§»ï¼Œå› ä¸ºéœ€è¦è¿ç§»ä¸€éƒ¨åˆ†è¡¨åˆ°æ–°çš„æ•°æ®åº“æœåŠ¡å™¨ä¸Šå»ï¼Œæ˜¯ä¸æ˜¯å¾ˆéº»çƒ¦ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å…¶å®å®Œå…¨æ²¡å¿…è¦ï¼Œæ•°æ®åº“ä¸€èˆ¬éƒ½æ”¯æŒè¯»å†™åˆ†ç¦»ï¼Œä¹Ÿå°±æ˜¯åšä¸»ä»æ¶æ„ã€‚&lt;/p&gt;
&lt;p&gt;å†™å…¥çš„æ—¶å€™å†™å…¥ä¸»æ•°æ®åº“æœåŠ¡å™¨ï¼ŒæŸ¥è¯¢çš„æ—¶å€™è¯»å–ä»æ•°æ®åº“æœåŠ¡å™¨ï¼Œå°±å¯ä»¥è®©ä¸€ä¸ªè¡¨çš„è¯»å†™è¯·æ±‚åˆ†å¼€è½åœ°åˆ°ä¸åŒçš„æ•°æ®åº“ä¸Šå»æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·çš„è¯ï¼Œå‡å¦‚å†™å…¥ä¸»åº“çš„è¯·æ±‚æ˜¯æ¯ç§’400ï¼ŒæŸ¥è¯¢ä»åº“çš„è¯·æ±‚æ˜¯æ¯ç§’1600ï¼Œé‚£ä¹ˆå›¾å¤§æ¦‚å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/19/1690182d93a231a3~tplv-t2oaga2asx-zoom-in-crop-mark:1512:0:0:0.awebp&quot; alt=&quot;&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;å†™å…¥ä¸»åº“çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åŒæ­¥æ•°æ®åˆ°ä»åº“ä¸Šå»ï¼Œä¿è¯ä¸»åº“å’Œä»åº“æ•°æ®ä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæŸ¥è¯¢çš„æ—¶å€™éƒ½æ˜¯èµ°ä»åº“å»æŸ¥è¯¢çš„ï¼Œè¿™å°±é€šè¿‡æ•°æ®åº“çš„ä¸»ä»æ¶æ„å®ç°äº†è¯»å†™åˆ†ç¦»çš„æ•ˆæœäº†ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨çš„å¥½å¤„å°±æ˜¯ï¼Œå‡å¦‚è¯´ç°åœ¨ä¸»åº“å†™è¯·æ±‚å¢åŠ åˆ°800ï¼Œè¿™ä¸ªæ— æ‰€è°“ï¼Œä¸éœ€è¦æ‰©å®¹ã€‚ç„¶åä»åº“çš„è¯»è¯·æ±‚å¢åŠ åˆ°äº†3200ï¼Œéœ€è¦æ‰©å®¹äº†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ—¶ï¼Œä½ ç›´æ¥ç»™ä¸»åº“å†æŒ‚è½½ä¸€ä¸ªæ–°çš„ä»åº“å°±å¯ä»¥äº†ï¼Œä¸¤ä¸ªä»åº“ï¼Œæ¯ä¸ªä»åº“æ”¯æ’‘1600çš„è¯»è¯·æ±‚ï¼Œä¸éœ€è¦å› ä¸ºè¯»è¯·æ±‚å¢é•¿æ¥æ‰©å®¹ä¸»åº“ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šçº¿ä¸Šç”Ÿäº§ä½ ä¼šå‘ç°ï¼Œè¯»è¯·æ±‚çš„å¢é•¿é€Ÿåº¦è¿œè¿œé«˜äºå†™è¯·æ±‚ï¼Œæ‰€ä»¥è¯»å†™åˆ†ç¦»ä¹‹åï¼Œå¤§éƒ¨åˆ†æ—¶å€™å°±æ˜¯æ‰©å®¹ä»åº“æ”¯æ’‘æ›´é«˜çš„è¯»è¯·æ±‚å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;è€Œä¸”å¦å¤–ä¸€ç‚¹ï¼Œå¯¹åŒä¸€ä¸ªè¡¨ï¼Œå¦‚æœä½ æ—¢å†™å…¥æ•°æ®ï¼ˆæ¶‰åŠåŠ é”ï¼‰ï¼Œè¿˜ä»è¯¥è¡¨æŸ¥è¯¢æ•°æ®ï¼Œå¯èƒ½ä¼šç‰µæ‰¯åˆ°é”å†²çªç­‰é—®é¢˜ï¼Œæ— è®ºæ˜¯å†™æ€§èƒ½è¿˜æ˜¯è¯»æ€§èƒ½ï¼Œéƒ½ä¼šæœ‰å½±å“ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ä¸€æ—¦è¯»å†™åˆ†ç¦»ä¹‹åï¼Œå¯¹ä¸»åº“çš„è¡¨å°±ä»…ä»…æ˜¯å†™å…¥ï¼Œæ²¡ä»»ä½•æŸ¥è¯¢ä¼šå½±å“ä»–ï¼Œå¯¹ä»åº“çš„è¡¨å°±ä»…ä»…æ˜¯æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;h1 data-id=&quot;heading-5&quot;&gt;ï¼ˆ5ï¼‰é«˜å¹¶å‘ä¸‹çš„æ•°æ®åº“æ¶æ„è®¾è®¡æ€»ç»“&lt;/h1&gt;
&lt;p&gt;å…¶å®ä»å¤§çš„ä¸€ä¸ªç®€åŒ–çš„è§’åº¦æ¥è¯´ï¼Œé«˜å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œæ•°æ®åº“å±‚é¢çš„æ¶æ„è‚¯å®šæ˜¯éœ€è¦ç»è¿‡ç²¾å¿ƒçš„è®¾è®¡çš„ã€‚&lt;/p&gt;
&lt;p&gt;å°¤å…¶æ˜¯æ¶‰åŠåˆ°åˆ†åº“æ¥æ”¯æ’‘é«˜å¹¶å‘çš„è¯·æ±‚ï¼Œå¤§é‡åˆ†è¡¨ä¿è¯æ¯ä¸ªè¡¨çš„æ•°æ®é‡åˆ«å¤ªå¤§ï¼Œè¯»å†™åˆ†ç¦»å®ç°ä¸»åº“å’Œä»åº“æŒ‰éœ€æ‰©å®¹ä»¥åŠæ€§èƒ½ä¿è¯ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« å°±æ˜¯ä»ä¸€ä¸ªå¤§çš„è§’åº¦æ¥æ¢³ç†äº†ä¸€ä¸‹æ€è·¯ï¼Œå„ä½åŒå­¦å¯ä»¥ç»“åˆè‡ªå·±å…¬å¸çš„ä¸šåŠ¡å’Œé¡¹ç›®æ¥è€ƒè™‘è‡ªå·±çš„ç³»ç»Ÿå¦‚ä½•åšåˆ†åº“åˆ†è¡¨åº”è¯¥æ€ä¹ˆåšã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–å°±æ˜¯ï¼Œå…·ä½“çš„åˆ†åº“åˆ†è¡¨è½åœ°çš„æ—¶å€™ï¼Œéœ€è¦å€ŸåŠ©æ•°æ®åº“ä¸­é—´ä»¶æ¥å®ç°åˆ†åº“åˆ†è¡¨å’Œè¯»å†™åˆ†ç¦»ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å‚è€ƒ sharding-jdbc æˆ–è€… mycat çš„å®˜ç½‘å³å¯ï¼Œé‡Œé¢çš„æ–‡æ¡£éƒ½æœ‰è¯¦ç»†çš„ä½¿ç”¨æè¿°ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆå°é¢å›¾æºç½‘ç»œï¼Œä¾µæƒåˆ é™¤ï¼‰&lt;/p&gt;
&lt;h2 data-id=&quot;heading-6&quot;&gt;END&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/18/169007e734f5d1b5~tplv-t2oaga2asx-zoom-in-crop-mark:1512:0:0:0.awebp&quot; alt=&quot;&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœ‰æ”¶è·ï¼Œè¯·å¸®å¿™è½¬å‘ï¼Œæ‚¨çš„é¼“åŠ±æ˜¯ä½œè€…æœ€å¤§çš„åŠ¨åŠ›ï¼Œè°¢è°¢ï¼&lt;/p&gt;
&lt;p&gt;ä¸€å¤§æ³¢å¾®æœåŠ¡ã€åˆ†å¸ƒå¼ã€é«˜å¹¶å‘ã€é«˜å¯ç”¨çš„åŸåˆ›ç³»åˆ—æ–‡ç« æ­£åœ¨è·¯ä¸Š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ¬¢è¿æ‰«æä¸‹æ–¹äºŒç»´ç ï¼ŒæŒç»­å…³æ³¨ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/1/9/16833096471eb0ef~tplv-t2oaga2asx-zoom-in-crop-mark:1512:0:0:0.awebp&quot; alt=&quot;&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/p&gt;
&lt;p&gt;çŸ³æ‰çš„æ¶æ„ç¬”è®°ï¼ˆid:shishan100ï¼‰&lt;/p&gt;
&lt;p&gt;åä½™å¹´BATæ¶æ„ç»éªŒå€¾å›Šç›¸æˆ&lt;/p&gt;
&lt;p&gt;æ¨èé˜…è¯»ï¼š&lt;/p&gt;
&lt;p&gt;1ã€&lt;a href=&quot;https://juejin.im/post/6844903705553174541&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903705553174541&quot;&gt;æ‹œæ‰˜ï¼é¢è¯•è¯·ä¸è¦å†é—®æˆ‘Spring Cloudåº•å±‚åŸç†&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;2ã€&lt;a href=&quot;https://juejin.im/post/6844903710301093896&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903710301093896&quot;&gt;ã€åŒ11ç‹‚æ¬¢çš„èƒŒåã€‘å¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒå¦‚ä½•æ‰¿è½½å¤§å‹ç³»ç»Ÿçš„åƒä¸‡çº§è®¿é—®ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;3ã€&lt;a href=&quot;https://juejin.im/post/6844903711660064781&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903711660064781&quot;&gt;ã€æ€§èƒ½ä¼˜åŒ–ä¹‹é“ã€‘æ¯ç§’ä¸Šä¸‡å¹¶å‘ä¸‹çš„Spring Cloudå‚æ•°ä¼˜åŒ–å®æˆ˜&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;4ã€&lt;a href=&quot;https://juejin.im/post/6844903712431800327&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903712431800327&quot;&gt;å¾®æœåŠ¡æ¶æ„å¦‚ä½•ä¿éšœåŒ11ç‹‚æ¬¢ä¸‹çš„99.99%é«˜å¯ç”¨&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;5ã€&lt;a href=&quot;https://juejin.im/post/6844903713211940877&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903713211940877&quot;&gt;å…„å¼Ÿï¼Œç”¨å¤§ç™½è¯å‘Šè¯‰ä½ å°ç™½éƒ½èƒ½å¬æ‡‚çš„Hadoopæ¶æ„åŸç†&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;6ã€&lt;a href=&quot;https://juejin.im/post/6844903713966915598&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903713966915598&quot;&gt;å¤§è§„æ¨¡é›†ç¾¤ä¸‹Hadoop NameNodeå¦‚ä½•æ‰¿è½½æ¯ç§’ä¸Šåƒæ¬¡çš„é«˜å¹¶å‘è®¿é—®&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;7ã€&lt;a href=&quot;https://juejin.im/post/6844903714797387783&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903714797387783&quot;&gt;ã€æ€§èƒ½ä¼˜åŒ–çš„ç§˜å¯†ã€‘Hadoopå¦‚ä½•å°†TBçº§å¤§æ–‡ä»¶çš„ä¸Šä¼ æ€§èƒ½ä¼˜åŒ–ä¸Šç™¾å€&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;8ã€&lt;a href=&quot;https://juejin.im/post/6844903716089233416&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903716089233416&quot;&gt;æ‹œæ‰˜ï¼Œé¢è¯•è¯·ä¸è¦å†é—®æˆ‘TCCåˆ†å¸ƒå¼äº‹åŠ¡çš„å®ç°åŸç†ï¼&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;9ã€&lt;a href=&quot;https://juejin.im/post/6844903717007785998&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903717007785998&quot;&gt;ã€å‘çˆ¹å‘€ï¼ã€‘æœ€ç»ˆä¸€è‡´æ€§åˆ†å¸ƒå¼äº‹åŠ¡å¦‚ä½•ä¿éšœå®é™…ç”Ÿäº§ä¸­99.99%é«˜å¯ç”¨ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;10ã€&lt;a href=&quot;https://juejin.im/post/6844903717641142285&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903717641142285&quot;&gt;æ‹œæ‰˜ï¼Œé¢è¯•è¯·ä¸è¦å†é—®æˆ‘Redisåˆ†å¸ƒå¼é”çš„å®ç°åŸç†ï¼&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;11ã€&lt;a href=&quot;https://juejin.im/post/6844903718324797453&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903718324797453&quot;&gt;ã€çœ¼å‰ä¸€äº®ï¼ã€‘çœ‹Hadoopåº•å±‚ç®—æ³•å¦‚ä½•ä¼˜é›…çš„å°†å¤§è§„æ¨¡é›†ç¾¤æ€§èƒ½æå‡10å€ä»¥ä¸Šï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;12ã€&lt;a href=&quot;https://juejin.im/post/6844903721793486861&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903721793486861&quot;&gt;äº¿çº§æµé‡ç³»ç»Ÿæ¶æ„ä¹‹å¦‚ä½•æ”¯æ’‘ç™¾äº¿çº§æ•°æ®çš„å­˜å‚¨ä¸è®¡ç®—&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;13ã€&lt;a href=&quot;https://juejin.im/post/6844903725249593358&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903725249593358&quot;&gt;äº¿çº§æµé‡ç³»ç»Ÿæ¶æ„ä¹‹å¦‚ä½•è®¾è®¡é«˜å®¹é”™åˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;14ã€&lt;a href=&quot;https://juejin.im/post/6844903726050705422&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903726050705422&quot;&gt;äº¿çº§æµé‡ç³»ç»Ÿæ¶æ„ä¹‹å¦‚ä½•è®¾è®¡æ‰¿è½½ç™¾äº¿æµé‡çš„é«˜æ€§èƒ½æ¶æ„&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;15ã€&lt;a href=&quot;https://juejin.im/post/6844903726835073031&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903726835073031&quot;&gt;äº¿çº§æµé‡ç³»ç»Ÿæ¶æ„ä¹‹å¦‚ä½•è®¾è®¡æ¯ç§’åä¸‡æŸ¥è¯¢çš„é«˜å¹¶å‘æ¶æ„&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;16ã€&lt;a href=&quot;https://juejin.im/post/6844903727699230734&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903727699230734&quot;&gt;äº¿çº§æµé‡ç³»ç»Ÿæ¶æ„ä¹‹å¦‚ä½•è®¾è®¡å…¨é“¾è·¯99.99%é«˜å¯ç”¨æ¶æ„&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;17ã€&lt;a href=&quot;https://juejin.im/post/6844903729406148622&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903729406148622&quot;&gt;ä¸ƒå¼ å›¾å½»åº•è®²æ¸…æ¥šZooKeeperåˆ†å¸ƒå¼é”çš„å®ç°åŸç†&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;18ã€&lt;a href=&quot;https://juejin.im/post/6844903730303746061&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903730303746061&quot;&gt;å¤§ç™½è¯èŠèŠJavaå¹¶å‘é¢è¯•é—®é¢˜ä¹‹volatileåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;19ã€&lt;a href=&quot;https://juejin.im/post/6844903731234865160&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903731234865160&quot;&gt;å¤§ç™½è¯èŠèŠJavaå¹¶å‘é¢è¯•é—®é¢˜ä¹‹Java 8å¦‚ä½•ä¼˜åŒ–CASæ€§èƒ½ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;20ã€&lt;a href=&quot;https://juejin.im/post/6844903732061159437&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903732061159437&quot;&gt;å¤§ç™½è¯èŠèŠJavaå¹¶å‘é¢è¯•é—®é¢˜ä¹‹è°ˆè°ˆä½ å¯¹AQSçš„ç†è§£ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;21ã€&lt;a href=&quot;https://juejin.im/post/6844903732883226637&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903732883226637&quot;&gt;å¤§ç™½è¯èŠèŠJavaå¹¶å‘é¢è¯•é—®é¢˜ä¹‹å…¬å¹³é”ä¸éå…¬å¹³é”æ˜¯å•¥ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;22ã€&lt;a href=&quot;https://juejin.im/post/6844903734267510798&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903734267510798&quot;&gt;å¤§ç™½è¯èŠèŠJavaå¹¶å‘é¢è¯•é—®é¢˜ä¹‹å¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒçš„è¯»å†™é”ä¼˜åŒ–&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;23ã€&lt;a href=&quot;https://juejin.im/post/6844903734930046989&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903734930046989&quot;&gt;äº’è”ç½‘å…¬å¸çš„é¢è¯•å®˜æ˜¯å¦‚ä½•360Â°æ— æ­»è§’è€ƒå¯Ÿå€™é€‰äººçš„ï¼Ÿï¼ˆä¸Šç¯‡ï¼‰&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;24ã€&lt;a href=&quot;https://juejin.im/post/6844903735655661581&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903735655661581&quot;&gt;äº’è”ç½‘å…¬å¸é¢è¯•å®˜æ˜¯å¦‚ä½•360Â°æ— æ­»è§’è€ƒå¯Ÿå€™é€‰äººçš„ï¼Ÿï¼ˆä¸‹ç¯‡ï¼‰&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;25ã€&lt;a href=&quot;https://juejin.im/post/6844903736444207117&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903736444207117&quot;&gt;Javaè¿›é˜¶é¢è¯•ç³»åˆ—ä¹‹ä¸€ï¼šå“¥ä»¬ï¼Œä½ ä»¬çš„ç³»ç»Ÿæ¶æ„ä¸­ä¸ºä»€ä¹ˆè¦å¼•å…¥æ¶ˆæ¯ä¸­é—´ä»¶ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;26ã€&lt;a href=&quot;https://juejin.im/post/6844903737123667975&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903737123667975&quot;&gt;ã€Javaè¿›é˜¶é¢è¯•ç³»åˆ—ä¹‹äºŒã€‘ï¼šå“¥ä»¬ï¼Œé‚£ä½ è¯´è¯´ç³»ç»Ÿæ¶æ„å¼•å…¥æ¶ˆæ¯ä¸­é—´ä»¶æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;27ã€&lt;a href=&quot;https://juejin.im/post/6844903741213130765&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903741213130765&quot;&gt;ã€è¡Œèµ°çš„Offeræ”¶å‰²æœºã€‘è®°ä¸€ä½æœ‹å‹æ–©è·BATæŠ€æœ¯ä¸“å®¶Offerçš„é¢è¯•ç»å†&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;28ã€&lt;a href=&quot;https://juejin.im/post/6844903742114906125&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903742114906125&quot;&gt;ã€Javaè¿›é˜¶é¢è¯•ç³»åˆ—ä¹‹ä¸‰ã€‘å“¥ä»¬ï¼Œæ¶ˆæ¯ä¸­é—´ä»¶åœ¨ä½ ä»¬é¡¹ç›®é‡Œæ˜¯å¦‚ä½•è½åœ°çš„ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;29ã€&lt;a href=&quot;https://juejin.im/post/6844903742928601095&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903742928601095&quot;&gt;ã€Javaè¿›é˜¶é¢è¯•ç³»åˆ—ä¹‹å››ã€‘æ‰å¿ƒï¼çº¿ä¸ŠæœåŠ¡å®•æœºæ—¶ï¼Œå¦‚ä½•ä¿è¯æ•°æ®100%ä¸ä¸¢å¤±ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;30ã€&lt;a href=&quot;https://juejin.im/post/6844903743712935944&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903743712935944&quot;&gt;ä¸€æ¬¡JVM FullGCçš„èƒŒåï¼Œç«Ÿéšè—ç€æƒŠå¿ƒåŠ¨é­„çš„çº¿ä¸Šç”Ÿäº§äº‹æ•…ï¼&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;31ã€&lt;a href=&quot;https://juejin.im/post/6844903744514031624&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903744514031624&quot;&gt;ã€é«˜å¹¶å‘ä¼˜åŒ–å®è·µã€‘10å€è¯·æ±‚å‹åŠ›æ¥è¢­ï¼Œä½ çš„ç³»ç»Ÿä¼šè¢«å‡»å®å—ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;32ã€&lt;a href=&quot;https://juejin.im/post/6844903746636349453&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903746636349453&quot;&gt;ã€Javaè¿›é˜¶é¢è¯•ç³»åˆ—ä¹‹äº”ã€‘æ¶ˆæ¯ä¸­é—´ä»¶é›†ç¾¤å´©æºƒï¼Œå¦‚ä½•ä¿è¯ç™¾ä¸‡ç”Ÿäº§æ•°æ®ä¸ä¸¢å¤±ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;33ã€&lt;a href=&quot;https://juejin.im/post/6844903747345219598&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903747345219598&quot;&gt;äº¿çº§æµé‡ç³»ç»Ÿæ¶æ„ä¹‹å¦‚ä½•åœ¨ä¸Šä¸‡å¹¶å‘åœºæ™¯ä¸‹è®¾è®¡å¯æ‰©å±•æ¶æ„ï¼ˆä¸Šï¼‰ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;34ã€&lt;a href=&quot;https://juejin.im/post/6844903747903029261&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903747903029261&quot;&gt;äº¿çº§æµé‡ç³»ç»Ÿæ¶æ„ä¹‹å¦‚ä½•åœ¨ä¸Šä¸‡å¹¶å‘åœºæ™¯ä¸‹è®¾è®¡å¯æ‰©å±•æ¶æ„ï¼ˆä¸­ï¼‰ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;35ã€&lt;a href=&quot;https://juejin.im/post/6844903748565745678&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903748565745678&quot;&gt;äº¿çº§æµé‡ç³»ç»Ÿæ¶æ„ä¹‹å¦‚ä½•åœ¨ä¸Šä¸‡å¹¶å‘åœºæ™¯ä¸‹è®¾è®¡å¯æ‰©å±•æ¶æ„ï¼ˆä¸‹ï¼‰ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;36ã€&lt;a href=&quot;https://juejin.im/post/6844903752030240782&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903752030240782&quot;&gt;äº¿çº§æµé‡æ¶æ„ç¬¬äºŒå¼¹ï¼šä½ çš„ç³»ç»ŸçœŸçš„æ— æ‡ˆå¯å‡»å—ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;37ã€&lt;a href=&quot;https://juejin.im/post/6844903753489858568&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903753489858568&quot;&gt;äº¿çº§æµé‡ç³»ç»Ÿæ¶æ„ä¹‹å¦‚ä½•ä¿è¯ç™¾äº¿æµé‡ä¸‹çš„æ•°æ®ä¸€è‡´æ€§ï¼ˆä¸Šï¼‰&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;38ã€&lt;a href=&quot;https://juejin.im/post/6844903757055016968&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903757055016968&quot;&gt;äº¿çº§æµé‡ç³»ç»Ÿæ¶æ„ä¹‹å¦‚ä½•ä¿è¯ç™¾äº¿æµé‡ä¸‹çš„æ•°æ®ä¸€è‡´æ€§ï¼ˆä¸­ï¼‰ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;39ã€&lt;a href=&quot;https://juejin.im/post/6844903757830946829&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903757830946829&quot;&gt;äº¿çº§æµé‡ç³»ç»Ÿæ¶æ„ä¹‹å¦‚ä½•ä¿è¯ç™¾äº¿æµé‡ä¸‹çš„æ•°æ®ä¸€è‡´æ€§ï¼ˆä¸‹ï¼‰ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;40ã€&lt;a href=&quot;https://juejin.im/post/6844903758510424072&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903758510424072&quot;&gt;äº’è”ç½‘é¢è¯•å¿…æ€ï¼šå¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸­é—´ä»¶å…¨é“¾è·¯æ•°æ®100%ä¸ä¸¢å¤±ï¼ˆ1ï¼‰&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;41ã€&lt;a href=&quot;https://juejin.im/post/6844903759324119053&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903759324119053&quot;&gt;äº’è”ç½‘é¢è¯•å¿…æ€ï¼šå¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸­é—´ä»¶å…¨é“¾è·¯æ•°æ®100%ä¸ä¸¢å¤±ï¼ˆ2&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;p&gt;42ã€&lt;a href=&quot;https://juejin.im/post/6844903760561438727&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903760561438727&quot;&gt;é¢è¯•å¤§æ€å™¨ï¼šæ¶ˆæ¯ä¸­é—´ä»¶å¦‚ä½•å®ç°æ¶ˆè´¹ååé‡çš„ç™¾å€ä¼˜åŒ–ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;43ã€&lt;a href=&quot;https://juejin.im/post/6844903761194778631&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903761194778631&quot;&gt;é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¦‚ä½•ä¿è¯ç”Ÿäº§è€…æŠ•é€’åˆ°æ¶ˆæ¯ä¸­é—´ä»¶çš„æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;44ã€&lt;a href=&quot;https://juejin.im/post/6844903761899601933&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903761899601933&quot;&gt;å…„å¼Ÿï¼Œç”¨å¤§ç™½è¯ç»™ä½ è®²å°ç™½éƒ½èƒ½çœ‹æ‡‚çš„åˆ†å¸ƒå¼ç³»ç»Ÿå®¹é”™æ¶æ„&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;45ã€&lt;a href=&quot;https://juejin.im/post/6844903762562121736&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903762562121736&quot;&gt;ä»å›¢é˜Ÿè‡ªç ”çš„ç™¾ä¸‡å¹¶å‘ä¸­é—´ä»¶ç³»ç»Ÿçš„å†…æ ¸è®¾è®¡çœ‹Javaå¹¶å‘æ€§èƒ½ä¼˜åŒ–&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;46ã€&lt;a href=&quot;https://juejin.im/post/6844903764499890190&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903764499890190&quot;&gt;ã€éå¹¿å‘Šï¼Œçº¯å¹²è´§ã€‘è‹±è¯­å·®çš„ç¨‹åºå‘˜å¦‚ä½•æ‰èƒ½æ— éšœç¢é˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;47ã€&lt;a href=&quot;https://juejin.im/post/6844903765733015559&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903765733015559&quot;&gt;å¦‚æœ20ä¸‡ç”¨æˆ·åŒæ—¶è®¿é—®ä¸€ä¸ªçƒ­ç‚¹ç¼“å­˜ï¼Œå¦‚ä½•ä¼˜åŒ–ä½ çš„ç¼“å­˜æ¶æ„ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;48ã€&lt;a href=&quot;https://juejin.im/post/6844903766626402311&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903766626402311&quot;&gt;ã€éå¹¿å‘Šï¼Œçº¯å¹²è´§ã€‘ä¸­å°å…¬å¸çš„Javaå·¥ç¨‹å¸ˆåº”è¯¥å¦‚ä½•é€†è¢­å†²è¿›BATï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;49ã€&lt;a href=&quot;https://juejin.im/post/6844903767180050446&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903767180050446&quot;&gt;æ‹œæ‰˜ï¼Œé¢è¯•è¯·ä¸è¦å†é—®æˆ‘åˆ†å¸ƒå¼æœç´¢å¼•æ“çš„æ¶æ„åŸç†ï¼&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;50ã€&lt;a href=&quot;https://juejin.im/post/6844903775744819208&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903775744819208&quot;&gt;ã€é‡‘ä¸‰é“¶å››è·³æ§½å­£ã€‘Javaå·¥ç¨‹å¸ˆå¦‚ä½•åœ¨1ä¸ªæœˆå†…åšå¥½é¢è¯•å‡†å¤‡ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;51ã€&lt;a href=&quot;https://juejin.im/post/1&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/1&quot;&gt;ã€offeræ”¶å‰²æœºå¿…å¤‡ã€‘æˆ‘ç®€å†ä¸Šçš„Javaé¡¹ç›®éƒ½å¥½lowï¼Œæ€ä¹ˆåŠï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;52ã€&lt;a href=&quot;https://juejin.im/post/6844903777099595789&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903777099595789&quot;&gt;ã€offerå»å“ªäº†ã€‘æˆ‘ä¸€è¿é¢è¯•äº†åä¸ªJavaå²—ï¼Œç»Ÿç»ŸçŸ³æ²‰å¤§æµ·ï¼&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä½œè€…ï¼šçŸ³æ‰çš„æ¶æ„ç¬”è®°
é“¾æ¥ï¼š&lt;a href=&quot;https://juejin.im/post/6844903749199069198&quot; target=&quot;_blank&quot; title=&quot;https://juejin.im/post/6844903749199069198&quot;&gt;juejin.im/post/684490â€¦&lt;/a&gt;
æ¥æºï¼šæ˜é‡‘
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼&lt;/p&gt;</description><link>https://juejin.cn/post/6844903779079290894</link><guid isPermaLink="false">https://juejin.cn/post/6844903779079290894</guid><pubDate>Tue, 19 Feb 2019 00:28:40 GMT</pubDate><author>çŸ³æ‰çš„æ¶æ„ç¬”è®°</author><category>åç«¯</category><category>æ¶æ„</category><category>Java</category></item><item><title>æˆ‘ä¸Microtasksçš„å‰ä¸–ä»Šç”Ÿä¹‹ä¸€çœ¼æœ›ç©¿åƒå¹´</title><description>&lt;blockquote&gt;
&lt;p&gt;è½¬è‡ªIMWebç¤¾åŒºï¼Œä½œè€…ï¼šå­™ä¸–å‰ï¼Œ&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Fimweb.io%2Ftopic%2F5bb9fd3779ddc80f36592f47&quot; title=&quot;http://imweb.io/topic/5bb9fd3779ddc80f36592f47&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;åŸæ–‡é“¾æ¥&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ¬æ–‡æœ‰æ ‡é¢˜å…šä¹‹å«Œï¼Œå†…å«å¤§é‡Microtaksç›¸å…³æ€»ç»“æ€§ä¿¡æ¯ï¼Œè¯·è°¨æ…æœç”¨ã€‚&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-0&quot;&gt;Google Developer Day China 2018 by Jake Archibald&lt;/h2&gt;
&lt;p&gt;2018å¹´9æœˆ21æ—¥ï¼Œè™½ç„¶æ²¡æœ‰å‚åŠ è¯¥åœºGDDï¼Œä½†æ˜¯ä¹Ÿæœ‰å¹¸æ‹œè¯»äº†ç™¾åº¦@å°è˜‘è‡å°å“¥æ€»ç»“çš„æ–‡ç« &lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F45111890&quot; title=&quot;https://zhuanlan.zhihu.com/p/45111890&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;æ·±å…¥æµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯(GDD@2018)&lt;/a&gt;,é…æ³¨çš„è¯´æ˜æ’å›¾å½¢è±¡ç”ŸåŠ¨ï¼Œæ–‡ç»ˆçš„clickä»£ç ä¹Ÿå¾ˆæœ‰æ„æ€ï¼Œæ¨èå¤§å®¶é˜…è¯»ã€‚è¿™é‡Œå°±å…ˆæ¬ä¸çŸ¥è€»çš„å°†è¯¥æ–‡çš„ç²¾åä»¥åŠä¸€äº›è‡ªå·±çš„æ€»ç»“é™ˆåˆ—å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/10/26/166aeb3cc1b575e5~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¼‚æ­¥ä»»åŠ¡&lt;/th&gt;
&lt;th&gt;ç‰¹ç‚¹&lt;/th&gt;
&lt;th&gt;å¸¸è§äº§ç”Ÿå¤„&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Tasks (Macrotasks)&lt;/td&gt;
&lt;td&gt;- å½“æ¬¡äº‹ä»¶å¾ªç¯æ‰§è¡Œé˜Ÿåˆ—å†…çš„ä¸€ä¸ªä»»åŠ¡&lt;br&gt;- å½“æ¬¡äº‹ä»¶å¾ªç¯äº§ç”Ÿçš„æ–°ä»»åŠ¡ä¼šåœ¨æŒ‡å®šæ—¶æœºåŠ å…¥ä»»åŠ¡é˜Ÿåˆ—ç­‰å¾…æ‰§è¡Œ&lt;/td&gt;
&lt;td&gt;- setTimeout&lt;br&gt;- setInterval&lt;br&gt;- setImmediate&lt;br&gt;- I/O&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Animation callbacks&lt;/td&gt;
&lt;td&gt;- æ¸²æŸ“è¿‡ç¨‹(Structure-Layout-Paint)å‰æ‰§è¡Œ&lt;br&gt;- å½“æ¬¡äº‹ä»¶å¾ªç¯&lt;strong&gt;æ‰§è¡Œé˜Ÿåˆ—é‡Œçš„æ‰€æœ‰ä»»åŠ¡&lt;/strong&gt;&lt;br&gt;- å½“æ¬¡äº‹ä»¶å¾ªç¯&lt;strong&gt;äº§ç”Ÿçš„æ–°ä»»åŠ¡ä¼šåœ¨ä¸‹ä¸€æ¬¡å¾ªç¯æ‰§è¡Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;- rAF&lt;br&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Microtasks&lt;/td&gt;
&lt;td&gt;- å½“æ¬¡äº‹ä»¶å¾ªç¯çš„ç»“å°¾ç«‹å³æ‰§è¡Œçš„ä»»åŠ¡&lt;br&gt;- å½“æ¬¡äº‹ä»¶å¾ªç¯&lt;strong&gt;æ‰§è¡Œé˜Ÿåˆ—é‡Œçš„æ‰€æœ‰ä»»åŠ¡&lt;/strong&gt;&lt;br&gt;- å½“æ¬¡äº‹ä»¶å¾ªç¯&lt;strong&gt;äº§ç”Ÿçš„æ–°ä»»åŠ¡ä¼šç«‹å³æ‰§è¡Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;- Promise&lt;br&gt;- Object.observe&lt;br&gt;- MutationObserver&lt;br&gt;- process.nextTick&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-1&quot;&gt;ç›´è§‚çš„æ„Ÿå—ä¸€ä¸‹Macrotaskså’ŒMicrotasks&lt;/h2&gt;
&lt;p&gt;çœ‹è¿‡ä¸€ç¯‡å…¬ä¼—å·æ–‡ç« ä¸‹é¢çš„ç•™è¨€:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é‚£ä¸ªæ‰€è°“çš„mtaskå’Œtaskçš„åŒºåˆ«æˆ‘å¹¶ä¸è®¤åŒ...ï¼Œæˆ‘è®¤ä¸ºäº‹ä»¶å¯¹åˆ—åªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯taskã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç‰¹åˆ«æ˜¯å¯¹äºJSå¼‚æ­¥ç¼–ç¨‹æ€ç»´è¿˜ä¸å¤ªç†Ÿæ‚‰çš„åŒå­¦ï¼Œæ¯”å¦‚ä¸¤å¹´å‰ä»javaè½¬æˆjavascriptåçš„æˆ‘ï¼Œå¯¹äºè¿™ç§å¼‚æ­¥çš„è°ƒç”¨é¡ºåºå…¶å®å¾ˆéš¾ç†è§£ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡æœ‰ä¸€ä¸ªç‰¹åˆ«èƒ½è¯´æ˜Macrotaskså’ŒMicrotasksçš„ä¾‹å­:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// æ™®é€šçš„é€’å½’, é€ æˆæ­»å¾ªç¯, é¡µé¢æ— å“åº”&lt;/span&gt;
&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;callback&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;{
    &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;&#39;callback&#39;&lt;/span&gt;);
    callback();
}
callback();
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šé¢çš„ä»£ç ç›¸ä¿¡å¤§å®¶éå¸¸å¥½ç†è§£ï¼Œä¸€ä¸ªå¾ˆç®€å•çš„é€’å½’ï¼Œç”±äºäº‹ä»¶å¾ªç¯å¾—ä¸åˆ°é‡Šæ”¾ï¼ŒUIæ¸²æŸ“æ— æ³•è¿›è¡Œå¯¼è‡´é¡µé¢æ— å“åº”ã€‚&lt;/p&gt;
&lt;p&gt;é€šå¸¸æˆ‘ä»¬å¯ä»¥ä½¿ç”¨setTimeoutæ¥è¿›è¡Œæ”¹é€ ï¼Œæˆ‘ä»¬æŠŠä¸‹ä¸€æ¬¡æ‰§è¡Œæ”¾åˆ°å¼‚æ­¥é˜Ÿåˆ—é‡Œé¢ï¼Œä¸ä¼šæŒä¹…çš„å ç”¨è®¡ç®—èµ„æºï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¯´çš„Macrotasks:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Macrotasksï¼Œä¸ä¼šé€ æˆæ­»å¾ªç¯&lt;/span&gt;
&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;callback&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;&#39;callback&#39;&lt;/span&gt;);
  setTimeout(callbackï¼Œ&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);
}

callback();
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½†æ˜¯Promiseå›è°ƒäº§ç”Ÿçš„Microtaskså‘¢ï¼Œå¦‚ä¸‹ä»£ç ï¼ŒåŒæ ·ä¼šé€ æˆæ­»å¾ªç¯ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä¸Šæ–‡æˆ‘ä»¬ä¹Ÿå¯ä»¥çŸ¥é“&lt;strong&gt;å½“æ¬¡äº‹ä»¶å¾ªç¯äº§ç”Ÿçš„æ–°Microtasksä¼šç«‹å³æ‰§è¡Œ&lt;/strong&gt;ï¼ŒåŒæ—¶å½“æ¬¡äº‹ä»¶å¾ªç¯è¦ç­‰åˆ°æ‰€æœ‰Microtasksé˜Ÿåˆ—æ‰§è¡Œå®Œæ¯•åæ‰ä¼šç»“æŸã€‚æ‰€ä»¥å½“æˆ‘ä»¬çš„Microtasksåœ¨äº§ç”Ÿæ–°çš„ä»»åŠ¡çš„åŒæ—¶ï¼Œä¼šå¯¼è‡´Microtasksé˜Ÿåˆ—ä¸€ç›´æœ‰ä»»åŠ¡ç­‰å¾…æ‰§è¡Œï¼Œè¿™æ¬¡äº‹ä»¶å¾ªç¯æ°¸è¿œä¸ä¼šé€€å‡ºï¼Œä¹Ÿå°±å¯¼è‡´äº†æˆ‘ä»¬çš„æ­»å¾ªç¯ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Microtasksï¼ŒåŒæ ·ä¼šé€ æˆæ­»å¾ªç¯ï¼Œé¡µé¢æ— å“åº”&lt;/span&gt;
&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;callback&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;&#39;callback&#39;&lt;/span&gt;);
  &lt;span class=&quot;hljs-built_in&quot;&gt;Promise&lt;/span&gt;.resolve().then(callback);
}
callback();
&lt;/code&gt;&lt;/pre&gt;&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-2&quot;&gt;Microtasks ä¸ Promise A+&lt;/h2&gt;
&lt;p&gt;å½“ç„¶ï¼Œä¸Šæ–‡è§£å†³äº†æœ¬äººå…³äºMicrotasksçš„ç›¸å…³ç–‘è™‘ (&lt;s&gt;ç‰¹åˆ«æ˜¯æœ‰äººæ‹¿å‡ºä¸€æ®µå‚æ‚setTimeoutå’ŒPromiseçš„ä»£ç è®©ä½ çœ‹ä»£ç è¾“å‡ºé¡ºåºæ—¶&lt;/s&gt;) çš„åŒæ—¶ï¼Œä¹Ÿè®©æˆ‘å›å¿†èµ·ä¼¼ä¹æ›¾å‡ ä½•æ—¶ä¹Ÿåœ¨å“ªé‡Œçœ‹åˆ°è¿‡å…³äºMicrotaskçš„å­—çœ¼ã€‚&lt;/p&gt;
&lt;p&gt;ç»è¿‡å¤šæ—¥çš„å¯»æ‰¾ï¼Œç»ˆäºåœ¨ä»¥å‰å†™è¿‡çš„ä¸€ç‰‡å…³äºPromiseçš„æ€»ç»“æ–‡ç«  &lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Fimweb.io%2Ftopic%2F57a0760393d9938132cc8da9&quot; title=&quot;http://imweb.io/topic/57a0760393d9938132cc8da9&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;æ‰“å¼€Promiseçš„æ­£ç¡®å§¿åŠ¿&lt;/a&gt; é‡Œæ‰¾åˆ°äº†ã€‚è¯¥æ–‡é€šè¿‡ä¸€ä¸ªå®ä¾‹è¯´æ˜äº†æ–°å»ºPromiseçš„ä»£ç æ˜¯ä¼šç«‹å³æ‰§è¡Œçš„ï¼Œå¹¶ä¸ä¼šæ”¾åˆ°å¼‚æ­¥é˜Ÿåˆ—é‡Œ:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; d = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Date&lt;/span&gt;();

&lt;span class=&quot;hljs-comment&quot;&gt;// åˆ›å»ºä¸€ä¸ªpromiseå®ä¾‹ï¼Œè¯¥å®ä¾‹åœ¨2ç§’åè¿›å…¥fulfilledçŠ¶æ€&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; promise1 = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;resolveï¼Œreject&lt;/span&gt;) &lt;/span&gt;{
  setTimeout(resolveï¼Œ&lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;ï¼Œ&lt;span class=&quot;hljs-string&quot;&gt;&#39;resolve from promise 1&#39;&lt;/span&gt;);
});

&lt;span class=&quot;hljs-comment&quot;&gt;// åˆ›å»ºä¸€ä¸ªpromiseå®ä¾‹ï¼Œè¯¥å®ä¾‹åœ¨1ç§’åè¿›å…¥fulfilledçŠ¶æ€&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; promise2 = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;resolveï¼Œreject&lt;/span&gt;) &lt;/span&gt;{
  setTimeout(resolveï¼Œ&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;ï¼Œpromise1); &lt;span class=&quot;hljs-comment&quot;&gt;// resolve(promise1)&lt;/span&gt;
});

promise2.then(
  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;result&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;&#39;result:&#39;&lt;/span&gt;ï¼Œresultï¼Œ&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Date&lt;/span&gt;() - d),
  error =&amp;gt; &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;&#39;error:&#39;&lt;/span&gt;ï¼Œerror)
)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šé¢çš„ä»£ç è¾“å‡º&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;result: resolve from promise 1 2002
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬å¾—åˆ°ä¸¤ç‚¹ç»“è®º:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éªŒè¯äº†Promise/A+ä¸­çš„&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fpromisesaplus.com%2F%23point-49&quot; title=&quot;https://promisesaplus.com/#point-49&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;2.3.2è§„èŒƒ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;æ–°å»ºPromiseçš„ä»£ç æ—¶ä¼šç«‹å³æ‰§è¡Œçš„ (è¿è¡Œæ—¶é—´æ˜¯2ç§’è€Œä¸æ˜¯3ç§’)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½†æ˜¯å½“æ—¶æœ¬äººå¿½ç•¥äº†Promise/A+çš„ç›¸å…³&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fpromisesaplus.com%2F%23point-67&quot; title=&quot;https://promisesaplus.com/#point-67&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;æ³¨è§£å†…å®¹&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Here â€œplatform codeâ€ means engineï¼Œenvironmentï¼Œand promise implementation code. In practiceï¼Œthis requirement ensures that &lt;code&gt;onFulfilled&lt;/code&gt; and &lt;code&gt;onRejected&lt;/code&gt; execute asynchronouslyï¼Œafter the event loop turn in which &lt;code&gt;then&lt;/code&gt; is calledï¼Œand with a fresh stack. This can be implemented with either a â€œmacro-taskâ€ mechanism such as &lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fhtml.spec.whatwg.org%2Fmultipage%2Fwebappapis.html%23timers&quot; title=&quot;https://html.spec.whatwg.org/multipage/webappapis.html#timers&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code&gt;setTimeout&lt;/code&gt;&lt;/a&gt; or &lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fdvcs.w3.org%2Fhg%2Fwebperf%2Fraw-file%2Ftip%2Fspecs%2FsetImmediate%2FOverview.html%23processingmodel&quot; title=&quot;https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/setImmediate/Overview.html#processingmodel&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code&gt;setImmediate&lt;/code&gt;&lt;/a&gt;ï¼Œor with a â€œmicro-taskâ€ mechanism such as &lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fdom.spec.whatwg.org%2F%23interface-mutationobserver&quot; title=&quot;https://dom.spec.whatwg.org/#interface-mutationobserver&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code&gt;MutationObserver&lt;/code&gt;&lt;/a&gt; or &lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Fnodejs.org%2Fapi%2Fprocess.html%23process_process_nexttick_callback&quot; title=&quot;http://nodejs.org/api/process.html#process_process_nexttick_callback&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code&gt;process.nextTick&lt;/code&gt;&lt;/a&gt;. Since the promise implementation is considered platform codeï¼Œit may itself contain a task-scheduling queue or â€œtrampolineâ€ in which the handlers are called.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ˜¯çš„ï¼Œè¿™å°±æ˜¯æœ¬äººä¸MicroTasksçš„ç¬¬ä¸€æ¬¡ç›¸é‡ï¼Œæ²¡æœ‰ä¸€è§é’Ÿæƒ…è¿˜çœŸæ˜¯éå¸¸æŠ±æ­‰å•Šã€‚&lt;/p&gt;
&lt;p&gt;è¯¥æ³¨è§£è¯´æ˜äº†Promiseçš„ &lt;code&gt;onFulfilled&lt;/code&gt; å’Œ &lt;code&gt;onRejected&lt;/code&gt; å›è°ƒçš„æ‰§è¡Œåªè¦ç¡®ä¿æ˜¯åœ¨ &lt;code&gt;then&lt;/code&gt;è¢«è°ƒç”¨åå¼‚æ­¥æ‰§è¡Œå°±å¯ä»¥äº†ã€‚å…·ä½“å®ç°æˆ &lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fhtml.spec.whatwg.org%2Fmultipage%2Fwebappapis.html%23timers&quot; title=&quot;https://html.spec.whatwg.org/multipage/webappapis.html#timers&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code&gt;setTimeout&lt;/code&gt;&lt;/a&gt; ä¼¼çš„ macrotasks æœºåˆ¶æˆ–è€… &lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Fnodejs.org%2Fapi%2Fprocess.html%23process_process_nexttick_callback&quot; title=&quot;http://nodejs.org/api/process.html#process_process_nexttick_callback&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code&gt;process.nextTick&lt;/code&gt;&lt;/a&gt; ä¼¼çš„microtasksæœºåˆ¶éƒ½å¯ä»¥ï¼Œå…·ä½“è§†å¹³å°ä»£ç è€Œå®šã€‚&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-3&quot;&gt;ä¸ºä»€ä¹ˆéœ€è¦Microtasks&lt;/h2&gt;
&lt;p&gt;æœç´¢å¼•æ“èƒ½æ‰¾åˆ°çš„ç›¸å…³æ–‡ç« åŸºæœ¬éƒ½æŒ‡å‘äº†ä¸€ç¯‡&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fjakearchibald.com%2F2015%2Ftasks-microtasks-queues-and-schedules%2F%3Futm_source%3Dhtml5weekly&quot; title=&quot;https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/?utm_source=html5weekly&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;ã€ŠTasksï¼Œmicrotasksï¼Œqueues and schedulesã€‹&lt;/a&gt;ï¼Œä¹Ÿè®¸è¿™å°±æ˜¯ä¼ è¯´ä¸­åŸç½ªçš„å‘æºä¹‹åœ°å§ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Microtasks&lt;/strong&gt; are usually scheduled for things that should happen straight after the currently executing scriptï¼Œsuch as reacting to a batch of actionsï¼Œor to make something async without taking the penalty of a whole new task.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¸Œæœ›å¯¹ä¸€ç³»åˆ—çš„ä»»åŠ¡åšå‡ºå›åº”æˆ–è€…æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œä½†æ˜¯åˆä¸æƒ³é¢å¤–ä»˜å‡ºä¸€æ•´ä¸ªå¼‚æ­¥ä»»åŠ¡çš„ä»£ä»·ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒMicrotaskså°±å¯ä»¥ç”¨æ¥è°ƒåº¦è¿™äº›&lt;strong&gt;åº”å½“åœ¨å½“å‰æ‰§è¡Œè„šæœ¬ç»“æŸåç«‹é©¬æ‰§è¡Œçš„ä»»åŠ¡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The microtask queue is processed after callbacks as long as no other JavaScript is mid-executionï¼Œand at the end of each task. Any additional microtasks queued during microtasks are added to the end of the queue and also processed.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å•ç‹¬çœ‹Macrotaskså’Œ Microtasksï¼Œæ‰§è¡Œé¡ºåºå¯ä»¥æ€»ç»“å¦‚ä¸‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å–å‡ºMacrotasksä»»åŠ¡é˜Ÿåˆ—çš„ä¸€ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œ;&lt;/li&gt;
&lt;li&gt;å–å‡ºMicrotasksä»»åŠ¡é˜Ÿåˆ—çš„æ‰€æœ‰ä»»åŠ¡ï¼Œä¾æ¬¡æ‰§è¡Œ;&lt;/li&gt;
&lt;li&gt;æœ¬æ¬¡äº‹ä»¶å¾ªç¯ç»“æŸï¼Œç­‰å¾…ä¸‹æ¬¡äº‹ä»¶å¾ªç¯;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»è¿™ä¸ªæ–¹é¢æˆ‘ä»¬ä¹Ÿå¯ä»¥ç†è§£ä¸ºä»€ä¹ˆPromise.thenè¦è¢«å®ç°æˆMicrotasksï¼Œå›è°ƒåœ¨å®ç°Promise/A+è§„èŒƒ (å¿…é¡»æ˜¯å¼‚æ­¥æ‰§è¡Œ)çš„åŸºç¡€ä¸Šï¼Œä¹Ÿä¿è¯èƒ½å¤Ÿæ›´å¿«çš„è¢«æ‰§è¡Œï¼Œè€Œä¸æ˜¯è·ŸMacrotasksä¸€æ ·å¿…é¡»ç­‰åˆ°ä¸‹æ¬¡äº‹ä»¶å¾ªç¯æ‰èƒ½æ‰§è¡Œã€‚å¤§å®¶å¯ä»¥é‡æ–°æ‰§è¡Œä¸€ä¸‹ä¸Šæ–‡å¯¹æ¯”Macrotaskså’ŒMicrotasksæ—¶ä¸¾çš„ä¾‹å­ï¼Œä¹Ÿä¼šå‘ç°ä»–ä»¬ä¸¤çš„å•ä½æ—¶é—´å†…çš„æ‰§è¡Œæ¬¡æ•°æ˜¯ä¸ä¸€æ ·çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥è¯•æƒ³ä¸€äº›ç»¼åˆäº†å¼‚æ­¥ä»»åŠ¡å’ŒåŒæ­¥ä»»åŠ¡çš„çš„Promiseå®ä¾‹ï¼ŒMicrotaskså¯ä»¥ä¿è¯å®ƒä»¬æ›´å¿«çš„å¾—åˆ°æ‰§è¡Œèµ„æºï¼Œä¾‹å¦‚:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;resolve&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {
  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-comment&quot;&gt;/* æ£€æŸ¥èµ„æºæ˜¯å¦éœ€è¦å¼‚æ­¥åŠ è½½ */&lt;/span&gt;) {
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; asyncAction().then(resolve);
  }
  &lt;span class=&quot;hljs-comment&quot;&gt;// ç›´æ¥è¿”å›åŠ è½½å¥½çš„å¼‚æ­¥èµ„æº&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; syncResource;
});
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœä¸Šé¢çš„ä»£ç æ˜¯ä¸ºäº†åŠ è½½è¿œç¨‹çš„èµ„æºï¼Œé‚£ä¹ˆåªæœ‰ç¬¬ä¸€æ¬¡éœ€è¦æ‰§è¡Œå¼‚æ­¥åŠ è½½ï¼Œåé¢çš„æ‰€æœ‰æ‰§è¡Œéƒ½å¯ä»¥ç›´æ¥åŒæ­¥è¯»å–ç¼“å­˜å†…å®¹ã€‚å¦‚æœä½¿ç”¨Microtasksï¼Œæˆ‘ä»¬ä¹Ÿå°±ä¸ç”¨æ¯æ¬¡éƒ½ç­‰å¾…å¤šä¸€æ¬¡çš„äº‹ä»¶å¾ªç¯æ¥è·å–è¯¥èµ„æºï¼ŒPromiseå®ä¾‹çš„æ–°å»ºè¿‡ç¨‹æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼ŒåŒæ—¶&lt;code&gt;onFulfilled&lt;/code&gt;å›è°ƒä¹Ÿæ˜¯åœ¨æœ¬æ¬¡äº‹ä»¶å¾ªç¯ä¸­å…¨éƒ¨æ‰§è¡Œå®Œæ¯•çš„ï¼Œå‡å°‘äº†åˆ‡æ¢ä¸Šä¸‹æ–‡çš„æˆæœ¬ï¼Œæé«˜äº†æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å‘¢ï¼Œä»ä¸Šæ–‡å…³äºPromise/A+è§„èŒƒçš„å¼•ç”¨ä¸­æˆ‘ä»¬å·²ç»çŸ¥é“ä¸åŒæµè§ˆå™¨å¯¹äºè¯¥å®ç°æ˜¯ä¸ä¸€è‡´çš„ã€‚éƒ¨åˆ†æµè§ˆå™¨ (è¶Šæ¥è¶Šå°‘) å°†Promiseçš„å›è°ƒå‡½æ•°å®ç°æˆäº†Macrotasksï¼ŒåŸå› å°±åœ¨äºPromiseçš„å®šä¹‰æ¥è‡ªECMAScriptè€Œä¸æ˜¯HTMLã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A Job is an abstract operation that initiates an ECMAScript computation when no other ECMAScript computation is currently in progress. A Job abstract operation may be defined to accept an arbitrary set of job parameters.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æŒ‰ç…§&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Ftc39.github.io%2Fecma262%2F%23sec-jobs-and-job-queues&quot; title=&quot;https://tc39.github.io/ecma262/#sec-jobs-and-job-queues&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;ECMAScriptçš„è§„èŒƒ&lt;/a&gt;ï¼Œæ˜¯æ²¡æœ‰Microtasksçš„ç›¸å…³å®šä¹‰çš„ï¼Œç±»ä¼¼çš„æœ‰ä¸€ä¸ª&lt;code&gt;jobs&lt;/code&gt; çš„æ¦‚å¿µï¼Œå’ŒMicrotaskså¾ˆç›¸ä¼¼.&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-4&quot;&gt;ç›¸å…³åº”ç”¨&lt;/h2&gt;
&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fvue%2Fblob%2Fdev%2Fsrc%2Fcore%2Futil%2Fnext-tick.js&quot; title=&quot;https://github.com/vuejs/vue/blob/dev/src/core/util/next-tick.js&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;Vue - src/core/utils/next-tick.js&lt;/a&gt; ä¸­ä¹Ÿæœ‰ç›¸å…³Macrotaskå’ŒMicrotaskçš„å®ç°&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; microTimerFunc
&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; macroTimerFunc
&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; setImmediate !== &lt;span class=&quot;hljs-string&quot;&gt;&#39;undefined&#39;&lt;/span&gt; &amp;amp;&amp;amp; isNative(setImmediate)) {
  macroTimerFunc = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; {
    setImmediate(flushCallbacks)
  }
} &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; MessageChannel !== &lt;span class=&quot;hljs-string&quot;&gt;&#39;undefined&#39;&lt;/span&gt; &amp;amp;&amp;amp; (
  isNative(MessageChannel) ||
  &lt;span class=&quot;hljs-comment&quot;&gt;// PhantomJS&lt;/span&gt;
  MessageChannel.toString() === &lt;span class=&quot;hljs-string&quot;&gt;&#39;[object MessageChannelConstructor]&#39;&lt;/span&gt;
)) {
  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; channel = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; MessageChannel()
  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; port = channel.port2
  channel.port1.onmessage = flushCallbacks
  macroTimerFunc = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; {
    port.postMessage(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;)
  }
} &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {
  &lt;span class=&quot;hljs-comment&quot;&gt;/* istanbul ignore next */&lt;/span&gt;
  macroTimerFunc = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; {
    setTimeout(flushCallbacksï¼Œ&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)
  }
}
&lt;span class=&quot;hljs-comment&quot;&gt;// Determine microtask defer implementation.&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;/* istanbul ignore nextï¼Œ$flow-disable-line */&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Promise&lt;/span&gt; !== &lt;span class=&quot;hljs-string&quot;&gt;&#39;undefined&#39;&lt;/span&gt; &amp;amp;&amp;amp; isNative(&lt;span class=&quot;hljs-built_in&quot;&gt;Promise&lt;/span&gt;)) {
  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; p = &lt;span class=&quot;hljs-built_in&quot;&gt;Promise&lt;/span&gt;.resolve()
  microTimerFunc = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; {
    p.then(flushCallbacks)
    &lt;span class=&quot;hljs-comment&quot;&gt;// in problematic UIWebViewsï¼ŒPromise.then doesn&#39;t completely breakï¼Œbut&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;// it can get stuck in a weird state where callbacks are pushed into the&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;// microtask queue but the queue isn&#39;t being flushedï¼Œuntil the browser&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;// needs to do some other workï¼Œe.g. handle a timer. Therefore we can&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;// &quot;force&quot; the microtask queue to be flushed by adding an empty timer.&lt;/span&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (isIOS) setTimeout(noop)
  }
} &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {
  &lt;span class=&quot;hljs-comment&quot;&gt;// fallback to macro&lt;/span&gt;
  microTimerFunc = macroTimerFunc
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-5&quot;&gt;æ¨èé˜…è¯»&lt;/h2&gt;
&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F45111890&quot; title=&quot;https://zhuanlan.zhihu.com/p/45111890&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;æµè§ˆå™¨çš„ Event Loop&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Fimweb.io%2Ftopic%2F57a0760393d9938132cc8da9&quot; title=&quot;http://imweb.io/topic/57a0760393d9938132cc8da9&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;æ‰“å¼€Promiseçš„æ­£ç¡®å§¿åŠ¿&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fpromisesaplus.com&quot; title=&quot;https://promisesaplus.com&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;Promise/A+&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fjakearchibald.com%2F2015%2Ftasks-microtasks-queues-and-schedules%2F%3Futm_source%3Dhtml5weekly&quot; title=&quot;https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/?utm_source=html5weekly&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;Tasksï¼Œmicrotasksï¼Œqueues and schedules&lt;/a&gt;&lt;/p&gt;
</description><link>https://juejin.cn/post/6844903699911819272</link><guid isPermaLink="false">https://juejin.cn/post/6844903699911819272</guid><pubDate>Fri, 26 Oct 2018 04:49:18 GMT</pubDate><author>è…¾è®¯IMWebå›¢é˜Ÿ</author><category>å‰ç«¯</category><category>Promise</category><category>JavaScript</category><category>Vue.js</category></item><item><title>å‰ç«¯ç»„ä»¶è®¾è®¡--ä½è¿ç®—çš„å¦™ç”¨</title><description>&lt;blockquote&gt;
&lt;p&gt;Helloå¥½ä¹…ä¸è§ã€‚è·³æ§½ä¹‹åä¸€ç›´æ²¡ä»€ä¹ˆæ—¶é—´æ€»ç»“è®°å½•è¿™æ®µæ—¶é—´çš„è§é—»æˆ–å®è·µï¼Œå¥½ä¸å®¹æ˜“æŒ¤å‡ºç‚¹æ—¶é—´ï¼Œä»Šå¤©æƒ³è®°å½•ä¸€ä¸‹æœ€è¿‘çš„ä¸€ä¸ªç»„ä»¶è®¾è®¡&amp;amp;å¼€å‘å†ç¨‹ï¼Œ&lt;strong&gt;è¯¥ç»„ä»¶çš„å¼€å‘ç¯å¢ƒæ˜¯å°ç¨‹åº&lt;/strong&gt;ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºè¿™ä¸ªæ€ç»´æ˜¯é€šç”¨çš„~&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ¬æ–‡å¯èƒ½æ¶‰åŠå†…å®¹--&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éœ€æ±‚ç®€ä»‹&lt;/li&gt;
&lt;li&gt;ä½è¿ç®—ä¸è¡¨å•ç»„ä»¶çš„ç»“åˆ&lt;/li&gt;
&lt;li&gt;ç»„ä»¶è®¾è®¡å°ç»“&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-0&quot;&gt;éœ€æ±‚ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å¤§æ¦‚éœ€è¦å®Œæˆè¿™æ ·ä¸€ä¸ªè¡¨å•ç»„ä»¶â†“â†“&lt;/p&gt;
&lt;img width=&quot;50%&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/10/24/166a5c386b119458~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;
&lt;p&gt;ç”±å›¾å¤§è‡´å¯ä»¥åˆ¤æ–­ï¼Œæˆ‘ä»¬åº”è¯¥å°†æ­¤ç»„ä»¶æ‹†æˆä¸¤å—ï¼Œä¸€ä¸ªæ˜¯tabé€‰é¡¹åŒºï¼Œä¸€ä¸ªæ˜¯ä¸‹æ–¹çš„é™„åŠ é€‰é¡¹åŒºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆéœ€è¦åˆ†æ‹†ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æœ€ä¸»è¦çš„åŸå› æ˜¯é¡¹ç›®è‡ªèº«åŸå› ï¼Œä¹‹å‰å°±æœ‰tabçš„ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å¼•ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“ç„¶ï¼Œå°±ç®—æˆ‘ä»¬è‡ªèº«é¡¹ç›®æ²¡æœ‰è¿™ä¸ªç»„ä»¶ï¼Œæˆ‘ä¹Ÿæ˜¯å»ºè®®æ‹†åˆ†å¼€æ¥ï¼Œå› ä¸ºåœ¨è¡¨å•çš„å¼€å‘ä¸­ï¼Œè¿™ç§tabé€‰æ‹©çš„å½¢å¼å¯ä»¥è¯´å¤ªå¸¸è§äº†ï¼Œæ‹†åˆ†å¼€æ¥è‚¯å®šæ˜¯æœ‰ç›Šçš„ï¼Œå¹¶ä¸”å®ƒçš„åŠŸèƒ½ååˆ†å•ä¸€ï¼Œå¾ˆé€‚åˆä½œä¸ºä¸€ä¸ªç‹¬ç«‹ç»„ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å¦‚ä½•ç”¨æ•°æ®ç»“æ„æè¿°ç»„ä»¶ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é™æ€ç»“æ„å¤§æ¦‚æ˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ€ä¹ˆç”¨æ•°æ®æ¥æè¿°è¿™ä¸ªç»„ä»¶å‘¢ï¼Ÿæ¥ä¸‹æ¥å°±æ¥è€ƒè™‘ä¸€ä¸‹ç»„ä»¶çš„æ•°æ®ç»“æ„ï¼Œå¼€å§‹ä¹‹å‰å…ˆæ˜ç¡®å‡ ä¸ªå‰æ--&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ã€Œtabæ•°ç›®ä¸å®šã€tabä¸é™„åŠ é¡¹å†…å®¹æœ‰è”åŠ¨ã€é™„åŠ é¡¹æ•°ç›®ä¸å®šã€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img width=&quot;50%&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/10/24/166a5c3d14e49cf9~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;
&lt;p&gt;ä¸Šå›¾æ˜¯æˆ‘åœ¨ç¬¬ä¸€ç‰ˆä¸­æ„æ€çš„æ•°æ®ç»“æ„ï¼Œåˆ¶å®šè¯¥è§„åˆ™çš„åŸå› å¦‚ä¸‹--&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç”±äºtabæ•°ç›®ä¸å®šï¼Œæ‰€ä»¥é…ç½®æˆæ•°ç»„ç”±å‰ç«¯è¿›è¡Œåˆ—è¡¨æ¸²æŸ“æœ€ä¸ºåˆé€‚(é™„åŠ é¡¹çš„è®¾å®šä¹ŸåŒç†)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å› ä¸º&lt;strong&gt;tabä¸é™„åŠ é¡¹å†…å®¹æœ‰è”åŠ¨&lt;/strong&gt;ï¼Œæ‰€ä»¥æˆ‘å°†é™„åŠ é¡¹ç›´æ¥ä¸tabå†…è”ï¼Œåˆ‡æ¢tabçš„æ—¶å€™ç›´æ¥åˆ‡æ¢ç›¸åº”çš„é™„åŠ é¡¹æ•°æ®å³å¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”±äºå­˜åœ¨å¤šä¸ªtabå’Œå¤šä¸ªé™„åŠ é¡¹ï¼Œæ‰€ä»¥å¿…å®šä¼šæœ‰ç»„åˆæ’åˆ—çš„é—®é¢˜ã€‚åœ¨ç¬¬ä¸€ç‰ˆæ–¹æ¡ˆä¸­ï¼Œæˆ‘é‡‡ç”¨çš„æ˜¯mapçš„å¤„ç†æ–¹å¼ï¼Œå°†é€‰ä¸­çš„valueå€¼æ‹¼æ¥åˆ°ä¸€èµ·ï¼Œç„¶ååœ¨valueMapä¸­è·å–æœ€ç»ˆçš„valueå€¼ã€‚(ä¸åŒä¸šåŠ¡ä¸åŒæ–¹å¼ï¼Œå¦‚æœä¸éœ€è¦å¤„ç†ç»„åˆé—®é¢˜ï¼Œå¯ç›´æ¥è¾“å‡ºæ‰€é€‰çš„æ‰€æœ‰valueå€¼)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¥ä¸‹æ¥é€»è¾‘å°±å¾ˆé¡ºç•…å•¦ï¼Œæˆ‘ä»¬åªéœ€è¦è·å–ç”¨æˆ·æœ€ç»ˆé€‰æ‹©çš„valueæ‹¼æ¥å€¼å°±å¯ä»¥åœ¨valueMapä¸­å¾—åˆ°ç›®æ ‡æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è¿™ä¸ªæ–¹æ¡ˆæ˜¯æœ‰ç‘•ç–µçš„ï¼Œæˆ‘å¿½ç•¥äº†&lt;strong&gt;é…ç½®å¤æ‚åº¦&lt;/strong&gt;ï¼Œè¿™æ ·åœ¨å‰ç«¯ä»£ç ä¸­å¯ä»¥å¾ˆè½»æ¾çš„å¤„ç†é€»è¾‘ã€‚ä½†æ˜¯ä¼šä¸ºåç»­çš„é…ç½®å¸¦æ¥æ— ç©·åæ‚£ï¼Œéšç€æ–¹æ¡ˆæ•°é‡çš„å¢åŠ ï¼Œç»„åˆçš„æƒ…å†µä¼šé£é€Ÿå¢é•¿ã€‚ä¸ºäº†é¿å…è¿™ä¸ªå‘ï¼Œæˆ‘éœ€è¦å¯¹valueMapåšäº›ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;valueMapçš„ä¼˜åŒ–æ–¹æ¡ˆ&lt;/strong&gt;&lt;/p&gt;
&lt;img width=&quot;50%&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/10/24/166a5c435ead31a4~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;
&lt;p&gt;å¦‚å›¾ä¸­ä»£ç æ‰€ç¤ºï¼Œæ‘ˆå¼ƒåŸæ¥é”®å€¼ä¸€ä¸€å¯¹åº”çš„æ–¹å¼ï¼Œé‡‡ç”¨æ ¹æ®tabé¡¹å¸¦å‡ºvalueå¯é€‰èŒƒå›´çš„æ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åé€šè¿‡å¯¹é€‰ä¸­é€‰é¡¹çš„å¤„ç†å¾—å‡ºvalueå¯é€‰èŒƒå›´æ•°ç»„çš„ä¸‹æ ‡ã€‚è¿™æ ·åœ¨é…ç½®èµ·æ¥ä¼šæ¯”ä¸Šä¸€ç§æ–¹æ¡ˆå¥½ä¸€ç‚¹ï¼Œç›¸å¯¹å‰ç«¯çš„é€»è¾‘ä¼šç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œä½†å‰ç«¯çš„ä»£ç åªéœ€è¦æˆ‘ä»¬å†™ä¸€æ¬¡ï¼Œè€Œé…ç½®åˆ™å¯èƒ½æ˜¯æ— æ•°æ¬¡ã€‚&lt;/p&gt;
&lt;img width=&quot;50%&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/10/24/166a5c47601713da~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;
&lt;p&gt;æ–°æ–¹æ¡ˆçš„å‰ç«¯é€»è¾‘å¤§æ¦‚æ˜¯è¿™æ ·ï¼Œç­‰ç­‰...æ€ä¹ˆçœ‹èµ·æ¥è¿™ä¹ˆåˆ«æ‰­ï¼Ÿè¿™æ®µé€»è¾‘ç«Ÿç„¶å®Œå…¨å’Œä¸šåŠ¡æ…åœ¨ä¸€èµ·äº†ï¼Œä¸‡ä¸€æ–°å¢é™„åŠ é¡¹ç›®å²‚ä¸æ˜¯çˆ†ç‚¸äº†ï¼Ÿä¸‡ä¸€é™„åŠ æ–¹æ¡ˆé—´ä¹Ÿå‡ºç°äº†ç»„åˆæƒ…å†µä¸ä¹Ÿçˆ†ç‚¸äº†:(&lt;/p&gt;
&lt;p&gt;é‚£å²‚ä¸æ˜¯ä»£è¡¨è¿™ç§æ–¹æ¡ˆæ›´ä¸é è°±ï¼Ÿ&lt;strong&gt;æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥è¯•è¯•å°†å…¶ä¸ä¸šåŠ¡è§£è€¦ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-1&quot;&gt;ä½è¿ç®—ä¸è¡¨å•ç»„ä»¶çš„ç»“åˆ&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;JavaScriptä½è¿ç®—ç®€ä»‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½è¿ç®—å°±æ˜¯ç›´æ¥å¯¹æ•´æ•°åœ¨å†…å­˜ä¸­çš„äºŒè¿›åˆ¶ä½è¿›è¡Œæ“ä½œï¼Œä¸æ˜¯å¦å¤„äºJavaScriptç¯å¢ƒå¹¶æ²¡æœ‰ä»€ä¹ˆå…³è”ï¼Œä½†æˆ‘ä»¬å¯ä»¥å€ŸåŠ©ä¸€ä¸‹è¿™ç§ä½è¿ç®—çš„æ€ç»´ã€‚&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2FBitwise_Operators&quot; title=&quot;https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;æœ‰å…³JavaScriptä½è¿ç®—çš„ç›¸å…³æ–‡æ¡£&lt;/a&gt;ï¼Œåœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬ä¸»è¦ä¼šä½¿ç”¨æŒ‰ä½ç§»åŠ¨çš„æ“ä½œç¬¦æ¥è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¦‚ä½•å°†äºŒè€…ç»“åˆä¸€èµ·ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;img width=&quot;50%&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/10/24/166a5c4c0335dea4~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;
&lt;p&gt;ç›´æ¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬çœ‹å›¾è¯´è¯--&lt;/p&gt;
&lt;p&gt;åœ¨æ–°çš„é€»è¾‘ä¸­ï¼Œæˆ‘ä»¬å·²ç»çœ‹ä¸åˆ°å¯¹addoné¡¹valueçš„ä¾èµ–ï¼Œå–è€Œä»£ä¹‹æ˜¯äºŒè¿›åˆ¶å½¢å¼çš„ä½ç½®ä¸‹æ ‡ã€‚å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªæ•°ç»„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;let A = [A-value-0, A-value-1, A-value-2, A-value-3]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åˆ†åˆ«å¯¹è¿™ç§å››ç§é€‰æ‹©æƒ…å†µçš„å–å€¼--&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é€‰æ‹©æƒ…å†µ&lt;/th&gt;
&lt;th&gt;å€¼&lt;/th&gt;
&lt;th&gt;æ•°ç»„ä¸‹æ ‡&lt;/th&gt;
&lt;th&gt;äºŒè¿›åˆ¶ä¸‹æ ‡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ä¸é€‰&lt;/td&gt;
&lt;td&gt;A-value-0&lt;/td&gt;
&lt;td&gt;A[0]&lt;/td&gt;
&lt;td&gt;00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é€‰æ‹©ç¬¬ä¸€ä¸ª&lt;/td&gt;
&lt;td&gt;A-value-1&lt;/td&gt;
&lt;td&gt;A[1]&lt;/td&gt;
&lt;td&gt;01&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é€‰æ‹©ç¬¬äºŒä¸ª&lt;/td&gt;
&lt;td&gt;A-value-2&lt;/td&gt;
&lt;td&gt;A[2]&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å…¨é€‰&lt;/td&gt;
&lt;td&gt;A-value-3&lt;/td&gt;
&lt;td&gt;A[3]&lt;/td&gt;
&lt;td&gt;11&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;è¿™æ ·å°±å¾ˆç®€å•æ˜äº†äº†ï¼Œçœ‹äºŒè¿›åˆ¶ä¸‹æ ‡é‚£ä¸€åˆ—ä¸éš¾å‘ç°ï¼Œå…¶ä¸­0è¡¨ç¤ºæœªé€‰ï¼Œ1è¡¨ç¤ºå·²é€‰ï¼Œå¹¶ä¸”å¯é€šè¿‡1çš„ä½ç½®ï¼ŒçŸ¥é“å·²é€‰æˆ–æœªé€‰çš„é¡¹ç›®æ˜¯å“ªä¸€é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;å†çœ‹çœ‹æ•°ç»„ä¸‹æ ‡ä¸äºŒè¿›åˆ¶ä¸‹æ ‡çš„å…³ç³»ï¼Œå°†äºŒè¿›åˆ¶ä¸‹æ ‡è½¬ä¸ºåè¿›åˆ¶åï¼Œæ­£å¥½å°±æ˜¯æ‰€éœ€çš„æ•°ç»„ä¸‹æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;å›å¤´çœ‹çœ‹å›¾ä¸­çš„ä»£ç ï¼Œä¸Šè¿°çš„å–å€¼æ€è·¯æ­£æ˜¯forEachå†…éƒ¨æ‰€å¹²çš„äº‹æƒ…ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;éå†addonæ•°ç»„ä¸­è¢«checkedçš„é¡¹ï¼Œæ ¹æ®å…¶indexå¾—å‡ºå±äºè¯¥é¡¹çš„äºŒè¿›åˆ¶ä¸‹æ ‡ï¼Œå†å°†éå†è€Œæ¥çš„æ‰€æœ‰äºŒè¿›åˆ¶ä¸‹æ ‡åšORè¿ç®—å¾—å‡ºæœ€ç»ˆçš„äºŒè¿›åˆ¶ä¸‹æ ‡ï¼Œåè½¬ä¸ºçœŸæ­£çš„æ•°ç»„ä¸‹æ ‡ï¼Œä»è€Œå¾—å‡ºæœ€ç»ˆçš„valueå€¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é€šè¿‡è¿™ç§æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®Œå…¨ä¸å…³å¿ƒaddonListä¸­çš„é¡¹ä¸ªæ•°æˆ–æ˜¯æ¯é¡¹å€¼çš„æƒ…å†µä¸‹ï¼Œå¾—å‡ºæˆ‘ä»¬æƒ³è¦çš„ç»„åˆä»¥åŠå–åˆ°è¯¥ç»„åˆå¯¹åº”çš„å€¼ï¼Œåœ¨æˆ‘ä»¬é…ç½®é¡¹ç›®çš„æ—¶å€™åªéœ€è¦ç•™å¿ƒæ¯ä¸ªvalueçš„é¡ºåºå³å¯ï¼Œæ— è®ºé…ç½®å¤šå°‘é¡¹å¯¹å‰ç«¯çš„é€»è¾‘ä¹Ÿä¸ä¼šäº§ç”Ÿå½±å“ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°†æ­¤æ¡ˆä¾‹ä¸­çš„addonListä¸ªæ•°æ›´æ”¹ä¹Ÿæ˜¯ä¸€æ ·å¯è¡Œçš„ï¼Œæ¯”å¦‚æœ‰3é¡¹çš„æƒ…å†µï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é€‰æ‹©æƒ…å†µ&lt;/th&gt;
&lt;th&gt;å€¼&lt;/th&gt;
&lt;th&gt;æ•°ç»„ä¸‹æ ‡&lt;/th&gt;
&lt;th&gt;äºŒè¿›åˆ¶ä¸‹æ ‡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ä¸é€‰&lt;/td&gt;
&lt;td&gt;A-value-0&lt;/td&gt;
&lt;td&gt;A[0]&lt;/td&gt;
&lt;td&gt;000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é€‰ä¸€&lt;/td&gt;
&lt;td&gt;A-value-1&lt;/td&gt;
&lt;td&gt;A[1]&lt;/td&gt;
&lt;td&gt;001&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é€‰äºŒ&lt;/td&gt;
&lt;td&gt;A-value-2&lt;/td&gt;
&lt;td&gt;A[2]&lt;/td&gt;
&lt;td&gt;010&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¸€ã€äºŒ&lt;/td&gt;
&lt;td&gt;A-value-3&lt;/td&gt;
&lt;td&gt;A[3]&lt;/td&gt;
&lt;td&gt;011&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é€‰ä¸‰&lt;/td&gt;
&lt;td&gt;A-value-4&lt;/td&gt;
&lt;td&gt;A[4]&lt;/td&gt;
&lt;td&gt;100&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¸€ã€ä¸‰&lt;/td&gt;
&lt;td&gt;A-value-5&lt;/td&gt;
&lt;td&gt;A[5]&lt;/td&gt;
&lt;td&gt;101&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;äºŒã€ä¸‰&lt;/td&gt;
&lt;td&gt;A-value-6&lt;/td&gt;
&lt;td&gt;A[6]&lt;/td&gt;
&lt;td&gt;110&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å…¨é€‰&lt;/td&gt;
&lt;td&gt;A-value-7&lt;/td&gt;
&lt;td&gt;A[7]&lt;/td&gt;
&lt;td&gt;111&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-2&quot;&gt;ç»„ä»¶è®¾è®¡æ€»ç»“&lt;/h2&gt;
&lt;p&gt;é€šè¿‡è¿™æ¬¡çš„è¡¨å•ç»„ä»¶è®¾è®¡ï¼Œå¯¹å‰ç«¯çš„ç»„ä»¶è®¾è®¡æœ‰ä¸€ç‚¹ç‚¹æ€è€ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‹¬ç«‹
&lt;ul&gt;
&lt;li&gt;ç»„ä»¶åŠŸèƒ½å•ä¸€ï¼Œradioå°±åº”è¯¥è´Ÿè´£radioé€‰æ‹©ï¼Œä¸è¦åŠ ä¸Šä¸€äº›ä¸ä¸šåŠ¡ç›¸å…³çš„é€»è¾‘æˆ–æ–‡æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;ç»„ä»¶å°½é‡ä¸è¦è¿‡äºå¤æ‚ï¼Œæ—¢ç„¶åˆ†æ‹†äº†ç»„ä»¶å°±ä¸è¦æƒ³ç€ä¸€ä¸ªç»„ä»¶èƒ½å®Œæˆæ‰€æœ‰çš„äº‹æƒ…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¯å¤ç”¨
&lt;ul&gt;
&lt;li&gt;åœ¨è®¾è®¡ç»„ä»¶çš„æ—¶å€™é™¤äº†æ»¡è¶³å½“å‰çš„éœ€æ±‚ï¼Œæœ€å¥½è¿˜è¦è€ƒè™‘å…¶é€šç”¨æ€§ã€‚å€˜è‹¥å‘ç°å®ƒä¸å…·æœ‰é€šç”¨æ€§ï¼Œå°±ä¸å¦‚å†™åœ¨ä¸šåŠ¡é‡Œï¼Œä¸éœ€è¦å•ç‹¬æŠ½ç¦»ã€‚&lt;/li&gt;
&lt;li&gt;å½“ç„¶ï¼Œåœ¨è®¾è®¡ç»„ä»¶æ—¶ä¸å¯èƒ½è¦æ±‚ä½¿ç”¨ç»„ä»¶çš„åœºæ™¯è¦ç™¾åˆ†ç™¾ä¸€è‡´ï¼Œè®©ç»„ä»¶çš„é€‚åº”ã€æ‹“å±•èƒ½åŠ›å˜å¼ºï¼Œæœ‰åŠ©äºç»„ä»¶çš„å¥å£®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¸­ç«‹
&lt;ul&gt;
&lt;li&gt;å°½å¯èƒ½çš„å°‘äºä¸šåŠ¡è€¦åˆ--ä¿è¯ç»„ä»¶ä¸­ç«‹ã€‚&lt;/li&gt;
&lt;li&gt;è¿™ä¸€ç‚¹çœ‹çœ‹å°±å¥½ï¼Œä¸€èˆ¬éƒ½æ˜¯éª¨æ„Ÿçš„ç°å®:)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ˜“ç”¨
&lt;ul&gt;
&lt;li&gt;å°½é‡èƒ½åšåˆ°ä½¿ç”¨è€…åªéœ€è¦è€ƒè™‘è¾“å…¥ä»¥åŠè¾“å‡ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å…³äºæ¡ˆä¾‹ä»£ç ï¼Œä¹Ÿä¸ç¡®å®šå¤§å®¶æ˜¯å¦éœ€è¦ã€‚å¦‚æœæœ‰éœ€æ±‚çš„è¯ï¼Œåé¢ä¼šè¡¥ä¸Šä¸€ä¸ªå®Œæ•´ç‰ˆçš„ç»„ä»¶ä»£ç ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;img width=&quot;50%&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/10/24/166a5c5da14df81f~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;
</description><link>https://juejin.cn/post/6844903699463012366</link><guid isPermaLink="false">https://juejin.cn/post/6844903699463012366</guid><pubDate>Thu, 25 Oct 2018 10:25:16 GMT</pubDate><author>mykurisu</author><category>å‰ç«¯</category><category>JavaScript</category></item><item><title>è®°å½•ä¸€æ¬¡åŸºäºvueã€typescriptã€pwaçš„é¡¹ç›®ç”±å¼€å‘åˆ°éƒ¨ç½²</title><description>&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-0&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ€è¿‘ç§‹æ‹›ä¹‹ä½™ç©ºå‡ºæ—¶é—´æ¥æŒ‰è‡ªå·±çš„å…´è¶£åŠ¨æ‰‹åšäº†ä¸€ä¸ªé¡¹ç›®ï¼Œä¸€ä¸ªåŸºäº&lt;code&gt;vueï¼Œtypescriptï¼Œpwa&lt;/code&gt;çš„å®éªŒæµè§ˆç§»åŠ¨ç«¯webappï¼Œç°åœ¨è¶çƒ­æ‰“é“ï¼Œå°†è¿™ä¸ªé¡¹ç›®ä»å¼€å‘åˆ°éƒ¨ç½²æ•´ä¸ªè¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œå¹¶å°†ä»è¿™ä¸ªé¡¹ç›®ä¸­å­¦ä¹ åˆ°çš„ä¸œè¥¿åˆ†äº«å‡ºæ¥ï¼Œå¦‚æœå¤§å®¶æœ‰ä»€ä¹ˆæ„è§æˆ–è¡¥å……ä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºã€‚å…ˆä»‹ç»ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-1&quot;&gt;é¡¹ç›®ä»‹ç»&lt;/h2&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;browseexp&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/21/165f7ec4f3a3927c~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;åŸºäºvueï¼Œtypescriptï¼Œpwaçš„ä¸€ä¸ªç§»åŠ¨ç«¯webappï¼Œå–åå«browseExpï¼Œä¸»è¦åŠŸèƒ½æ˜¯æµè§ˆå­¦æ ¡å¿ƒç†å­¦é™¢éƒ¨åˆ†å®éªŒä¿¡æ¯ã€‚ï¼ˆä¸Šå›¾æ˜¯æ·»åŠ åˆ°æ¡Œé¢çš„ä¸€çº§å…¥å£ï¼‰ã€‚è¿™ä¸ªé¡¹ç›®å·²ç»éƒ¨ç½²åˆ°äº†æœåŠ¡å™¨ä¸Šï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹é¡¹ç›®æœ€ç»ˆåœ¨å®¢æˆ·ç«¯è¿è¡Œçš„æ ·å­&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;show&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/21/165f7ec4f3b79206~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°æˆ‘é€šè¿‡æ¡Œé¢ä¸Šçš„ä¸€çº§å…¥å£ï¼Œè¿›å…¥äº†æˆ‘ä»¬çš„webappï¼Œå¹¶ä¸”åœ¨æ–­ç½‘çš„æ¡ä»¶ä¸‹è¿›è¡Œã€‚è¿™å°±æ˜¯pwaçš„ä½œç”¨ï¼Œä¸‹é¢å¼€å§‹åˆ†äº«è¿™æ¬¡çš„å¼€å‘åˆ°éƒ¨ç½²çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-2&quot;&gt;ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªé¡¹ç›®å‘¢ï¼Ÿ&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;pwa åœ¨å›½å†…å·²ç»ç«è¿‡ä¸€æ®µæ—¶é—´äº†ï¼Œä½†æ˜¯è‡ªå·±è¿˜æ²¡åšè¿‡ä¸€æ¬¾pwaåº”ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;vue-cli 3.0 å¢åŠ äº†å¯¹pwaçš„æ”¯æŒ&lt;/li&gt;
&lt;li&gt;vue2.5åå¢åŠ äº†å¯¹tsçš„æ”¯æŒ&lt;/li&gt;
&lt;li&gt;æƒ³æäº‹æƒ…ï¼&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-3&quot;&gt;å¼€å‘è¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ªé¡¹ç›®çš„åœ°å€ä¸º: &lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FHolyZheng%2FBrowseExp&quot; title=&quot;https://github.com/HolyZheng/BrowseExp&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;browseExp pwa&lt;/a&gt;ï¼Œæƒ³è¦æŸ¥çœ‹ä»£ç çš„åŒå­¦å¯ä»¥çœ‹ä¸€ä¸‹ã€‚è¿™ä¸ªé¡¹ç›®è¦æ³¨æ„çš„ç‚¹ä¸»è¦æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨vueä¸­ä½¿ç”¨ts&lt;/li&gt;
&lt;li&gt;ç®€å•éª¨æ¶å±çš„è¿ç”¨&lt;/li&gt;
&lt;li&gt;é¦–å±åŠ è½½æ—¶é—´å’Œseoçš„ä¼˜åŒ–&lt;/li&gt;
&lt;li&gt;pwaç›¸å…³ç‰¹æ€§çš„å®ç°&lt;/li&gt;
&lt;li&gt;ç§»åŠ¨ç«¯çš„ä¸€äº›é—®é¢˜è§£å†³&lt;/li&gt;
&lt;li&gt;å¦‚ä½•éƒ¨ç½²é¡¹ç›®&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åé¢çš„å†…å®¹ä¹Ÿå›´ç»•ç€è¿™äº›ç‚¹æ¥å±•å¼€ã€‚&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-4&quot;&gt;vueä¸­ä½¿ç”¨ts&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨tsä¸»è¦æ˜¯å› ä¸ºtsç»™æˆ‘ä»¬å¸¦æ¥äº†ç±»å‹ç³»ç»Ÿï¼Œå¯ä»¥è®©æˆ‘ä»¬å†™å‡ºå¥å£®çš„ä»£ç ï¼Œå®ƒçš„ä½œç”¨åœ¨å¤§å‹é¡¹ç›®ä¸­å°¤å…¶çªå‡ºï¼Œæ‰€ä»¥è¿˜æ˜¯éå¸¸é¼“åŠ±å¤§å®¶å»ä½¿ç”¨çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨tsè¿›è¡Œå¼€å‘ä¸€èˆ¬æ˜¯ç¼–å†™åŸºäºç±»çš„vueç»„ä»¶ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨å®˜æ–¹ç»´æŠ¤çš„&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fvue-class-component&quot; title=&quot;https://github.com/vuejs/vue-class-component&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;vue-class-component&lt;/a&gt;æˆ–è€…&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fkaorun343%2Fvue-property-decorator&quot; title=&quot;https://github.com/kaorun343/vue-property-decorator&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;vue-property-decorator&lt;/a&gt;ï¼Œvue-cli3.0ä¹Ÿç»™æˆ‘ä»¬æä¾›äº†å¼€ç®±å³ç”¨çš„typescriptæ”¯æŒï¼Œå¼€å‘ä½“éªŒè¿˜æ˜¯ç›¸å½“å‹å¥½çš„ã€‚ä¸€ä¸ªvueç»„ä»¶demoï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;import { Component, Vue, Prop } from &lt;span class=&quot;hljs-string&quot;&gt;&#39;vue-property-decorator&#39;&lt;/span&gt;;
@Component
&lt;span class=&quot;hljs-built_in&quot;&gt;export&lt;/span&gt; default class Name extends Vue {
  @Prop() private name!: string;
  private complete!: boolean;
  private &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;data&lt;/span&gt;&lt;/span&gt;() {
    &lt;span class=&quot;hljs-built_in&quot;&gt;return&lt;/span&gt; {
      complete: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;,
    };
  }
  private &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;myMethod&lt;/span&gt;&lt;/span&gt;() {
    // ...
  }
  private &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;created&lt;/span&gt;&lt;/span&gt;() {
    // ...
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦å¤–ï¼Œåœ¨vue-cli3.0æä¾›çš„è„šæ‰‹æ¶ä¸‹ï¼Œå¯ä»¥åœ¨&lt;code&gt;shims-tsx.d.ts&lt;/code&gt;æ–‡ä»¶ä¸‹æ·»åŠ å…¨å±€æ¥å£æˆ–å˜é‡ç­‰ï¼Œåœ¨&lt;code&gt;shims-vue.d.ts&lt;/code&gt;å®šä¹‰ç¬¬ä¸‰æ–¹åŒ…çš„ç±»å‹å£°æ˜ã€‚&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-5&quot;&gt;éª¨æ¶å±çš„ç®€å•è¿ç”¨&lt;/h3&gt;
&lt;p&gt;éª¨æ¶å±ï¼ˆskeleton screenï¼‰å·²ç»ä¸æ˜¯ä»€ä¹ˆæ–°å¥‡çš„æ¦‚å¿µï¼Œä»–çš„ä¸»è¦ä½œç”¨å°±æ˜¯ç”¨æ¥è¿‡æ¸¡é¡µé¢çš„ç©ºç™½çŠ¶æ€ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼Œæ¯”å¦‚é¡µé¢è·³è½¬ç­‰å¾…ï¼Œæ•°æ®åŠ è½½ç­‰å¾…ç­‰ï¼Œä¼ ç»Ÿçš„éª¨æ¶å¹³å®ç°æ–¹æ¡ˆæœ‰ æœåŠ¡ç«¯æ¸²æŸ“å’Œé¢„æ¸²æŸ“ç­‰ï¼Œè€Œè¿™ä¸ªé¡¹ç›®ä¸­å¼•å…¥éª¨æ¶å±ä¸»è¦æ˜¯æƒ³è¿‡æ¸¡æ•°æ®åŠ è½½æ—¶é¡µé¢çš„å±€éƒ¨ç©ºç™½çŠ¶æ€ï¼Œæ‰€ä»¥å°±ç›´æ¥é‡‡ç”¨ç¼–å†™ä¸€ä¸ªéª¨æ¶å±ç»„ä»¶&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FHolyZheng%2FBrowseExp%2Fblob%2Fmaster%2Fsrc%2Fcomponents%2FSkeleton%2FSkeletonExp.vue&quot; title=&quot;https://github.com/HolyZheng/BrowseExp/blob/master/src/components/Skeleton/SkeletonExp.vue&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;SkeletonExp.vue&lt;/a&gt;çš„æ–¹å¼æ¥è¿‡æ¸¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;skeletonOne&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/21/165f7ec4f70c294f~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;
&lt;figure&gt;&lt;img alt=&quot;skeletonOne&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/21/165f7ec506e60b45~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ å¯¹éª¨æ¶å±æœ‰æ›´å¤§çš„éœ€æ±‚ï¼Œå¯ä»¥åœ¨ç½‘ä¸Šæœåˆ°æ›´å¤šçš„æ•™ç¨‹ï¼Œè¿™é‡Œå°±ä¸åˆ—ä¸¾äº†ã€‚&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-6&quot;&gt;é¦–å±åŠ è½½é€Ÿåº¦å’Œseoçš„ä¼˜åŒ–&lt;/h3&gt;
&lt;p&gt;å•é¡µåº”ç”¨ï¼ˆsingle page web applicationï¼ŒSPAï¼‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯é¦–æ¬¡åŠ è½½éœ€è¦åŠ è½½è¾ƒå¤šçš„å†…å®¹ï¼Œæ‰€ä»¥é¦–å±åŠ è½½æ—¶é—´å°±ä¼šæ¯”è¾ƒé•¿ã€‚å¦å¤–ï¼Œå•é¡µåº”ç”¨å› ä¸ºæ•°æ®å‰ç½®åˆ°äº†å‰ç«¯ï¼Œä¸åˆ©äºæœç´¢å¼•æ“çš„æŠ“å–ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹è‡ªå·±çš„å•é¡µåº”ç”¨è¿›è¡Œä¸€äº›ä¼˜åŒ–ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†&lt;code&gt;prerender-spa-plugin&lt;/code&gt;è¿™ä¸ªwebpackæ’ä»¶ï¼Œä»–çš„ä½œç”¨å°±æ˜¯å°†æˆ‘ä»¬æŒ‡å®šçš„è·¯ç”±è¿›è¡Œé¢„æ¸²æŸ“åˆ°htmlï¼Œè¿›è€Œè§£å†³é¦–æ¬¡åŠ è½½ç™½å±æ—¶é—´é•¿é—®é¢˜ï¼Œä»¥åŠä¸€å®šç¨‹åº¦ä¸Šè§£å†³seoé—®é¢˜ã€‚åœ¨vue-cli3.0ä¸­ï¼Œæˆ‘ä»¬çš„ç›¸å…³é…ç½®æ˜¯è¢«éšè—èµ·æ¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡vue.config.jsæ¥å°†æˆ‘ä»¬çš„é…ç½®åˆå¹¶åˆ°é»˜è®¤é…ç½®ä¸­ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;// vue.config.js

const path = require(&lt;span class=&quot;hljs-string&quot;&gt;&#39;path&#39;&lt;/span&gt;)
const PrerenderSPAPlugin = require(&lt;span class=&quot;hljs-string&quot;&gt;&#39;prerender-spa-plugin&#39;&lt;/span&gt;)

module.exports = {
  configureWebpack(config) {
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (process.env.NODE_ENV !== &lt;span class=&quot;hljs-string&quot;&gt;&#39;production&#39;&lt;/span&gt;) &lt;span class=&quot;hljs-built_in&quot;&gt;return&lt;/span&gt;;
    &lt;span class=&quot;hljs-built_in&quot;&gt;return&lt;/span&gt;  {
      plugins: [
        new PrerenderSPAPlugin({
          // Required - The path to the webpack-outputted app to prerender.
          staticDir: path.join(__dirname, &lt;span class=&quot;hljs-string&quot;&gt;&#39;dist&#39;&lt;/span&gt;),
          // Required - Routes to render.
          routes: [&lt;span class=&quot;hljs-string&quot;&gt;&#39;/&#39;&lt;/span&gt;],
        })
      ]
    }
  },
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ•ˆæœï¼š
&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;prerender&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/21/165f7ec4f70c055a~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šå›¾æ˜¯è¯¥appåœ¨ç½‘ç»œç¯å¢ƒä¸º&lt;code&gt;slow 3G&lt;/code&gt;ä¸‹é¦–æ¬¡æ‰“å¼€æ—¶çš„æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°æ•´ä¸ªè¿‡ç¨‹ï¼Œå…ˆç”±è°·æ­Œé¡µé¢è·³è‡³browseExpï¼Œé¦–å…ˆå¼•å…¥çœ¼å¸˜çš„æ˜¯æˆ‘ä»¬çš„é¢„æ¸²æŸ“é¡µé¢ï¼Œå®ƒä»£æ›¿æˆ‘ç½‘å€è·³è½¬ååº”ç”¨åŠ è½½çš„ç™½å±æ—¶é—´ï¼Œï¼ˆå‰é¢çš„å°æ®µç™½å±æ˜¯é¡µé¢è·³è½¬çš„ç™½å±ï¼Œä¸æ˜¯åº”ç”¨åŠ è½½çš„ç™½å±ï¼‰ç„¶ååŠ è½½å®Œæ¯•åå°±ä¼šå»è¯·æ±‚æˆ‘ä»¬çš„æ•°æ®ï¼Œè¿™æ—¶å€™éª¨æ¶å±å°±å‡ºç°äº†ï¼Œè¿‡æ¸¡è¿™æ®µé¡µé¢å±€éƒ¨ç™½å±çš„æ—¶é—´ï¼Œæœ€åä¸ºçœŸå®çš„é¡µé¢ã€‚
&lt;strong&gt;é¢„æ¸²æŸ“ä¹Ÿæœ‰å®ƒçš„ç¼ºç‚¹&lt;/strong&gt;ï¼šé‚£å°±æ˜¯é¢„æ¸²æŸ“çš„é¡µé¢å†…å®¹å¯èƒ½ä¸çœŸå®å†…å®¹ç”±ä¸€å®šå‡ºå…¥ï¼Œè€Œä¸”è¿˜æ— æ³•äº¤äº’ã€‚æ‰€ä»¥å¦‚æœåº”ç”¨çš„å†…å®¹å…·æœ‰å¾ˆå¼ºçš„å®æ—¶æ€§å’Œäº¤äº’æ€§çš„è¯ï¼Œå¯ä»¥è€ƒè™‘é‡‡ç”¨éª¨æ¶å±çš„æ–¹å¼æ¥è¿›è¡Œé¦–å±åŠ è½½çš„ç™½å±è¿‡æ¸¡ï¼Œä½†æ˜¯è¿™æ ·å°±æ— æ³•ä¼˜åŒ–seoäº†ï¼Œæ‰€ä»¥æŒ‰è‡ªå·±çš„å®é™…åœºæ™¯æ¥åšé€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¦å¤–&lt;/strong&gt;å¯¹äºé¦–å±åŠ è½½é€Ÿåº¦è¿˜å¯ä»¥é€šè¿‡&lt;strong&gt;ç»„ä»¶æ‡’åŠ è½½&lt;/strong&gt;çš„æ–¹å¼ï¼Œå¯¹ç»„ä»¶è¿›è¡Œæ‡’åŠ è½½ï¼Œåªæœ‰å½“éœ€è¦é»˜å†™ç»„ä»¶çš„æ—¶å€™æ‰å»åŠ è½½ä»–ä»¬ï¼Œä¹Ÿå¯ä»¥å‡å°‘é¦–å±åŠ è½½éœ€è¦åŠ è½½çš„æ–‡ä»¶å¤§å°ï¼Œæé«˜é¦–å±åŠ è½½é€Ÿåº¦ï¼Œä¹Ÿæœ‰åˆ©äºservice workerå¯¹app shellè¿›è¡Œé¢—ç²’åº¦æ›´å°çš„ç¼“å­˜ã€‚ç»“åˆVueçš„å¼‚æ­¥ç»„ä»¶å’Œwebpackçš„ä»£ç åˆ†å‰²åŠŸèƒ½ï¼Œè½»æ¾å®ç°è·¯ç”±ç»„ä»¶çš„æ‡’åŠ è½½ï¼Œä¾‹å¦‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs JS&quot; lang=&quot;JS&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// router.jsé€šè¿‡åŠ¨æ€importæ¥å¼•å…¥ç»„ä»¶ï¼Œå…¶ä»–&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; Vue &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#39;vue&#39;&lt;/span&gt;;
&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; Router &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#39;vue-router&#39;&lt;/span&gt;;
&lt;span class=&quot;hljs-comment&quot;&gt;// è¿™é‡Œç”¨ç»„ä»¶homeæ¥åšä¾‹å­&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; Home = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&#39;./views/Home/Home.vue&#39;&lt;/span&gt;);

Vue.use(Router);

&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; Router({
  &lt;span class=&quot;hljs-attr&quot;&gt;routes&lt;/span&gt;: [
    {
      &lt;span class=&quot;hljs-attr&quot;&gt;path&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&#39;/&#39;&lt;/span&gt;,
      &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&#39;Home&#39;&lt;/span&gt;,
      &lt;span class=&quot;hljs-attr&quot;&gt;component&lt;/span&gt;: Home,
  ],
});
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·å°±å¯ä»¥å¯¹æˆ‘ä»¬çš„è·¯ç”±ç»„ä»¶è¿›è¡Œæ‡’åŠ è½½äº†ï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬çš„ä»£ç ä¼šæŒ‰ç»„ä»¶ä¸ºå•ä½æ‰“åŒ…æˆäº†å¤šä¸ªjsæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-7&quot;&gt;å°†é¡¹ç›®å‡çº§ä¸º pwa&lt;/h2&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬çš„é¡¹ç›®åŸºæœ¬æˆå‹ä¹‹åï¼Œå¯ä»¥è€ƒè™‘å°†å…¶å‡çº§ä¸ºpwaäº†ã€‚å…³äºpwaæ˜¯ä»€ä¹ˆï¼Œæˆ‘ç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“ï¼Œè¿™ç©æ„åœ¨å›½å¤–å·²ç»ç«äº†å‡ ç™¾å¹´äº†ï¼Œä½†å›½å†…é™¤äº†å‡ å®¶å¤§å…¬å¸ï¼Œè²Œä¼¼æ²¡å¤šå°‘äººå»å°è¯•å®ƒï¼Œä¸è¿‡åœ¨ä¸Šä¸€å¹´å¼€å§‹ï¼Œpwaåœ¨å›½å†…è¿˜æ˜¯çƒ­äº†ä¸€ä¸‹çš„ã€‚pwaæ˜¯æˆ‘ä»¬åœ¨è¿½æ±‚webappä¾¿æ·å’ŒåŸç”Ÿåº”ç”¨è‰¯å¥½ä½“éªŒç»“åˆçš„è¿‡ç¨‹ä¸­çš„äº§ç‰©ï¼Œç›®å‰å…¼å®¹æ€§æ˜¯æœ€å¤§éšœç¢ï¼Œä½†ç›¸ä¿¡å®ƒåœ¨å›½å†…çš„å‰æ™¯è¿˜æ˜¯æ˜æœ—çš„ã€‚pwaçš„ç‰¹æ€§æœ‰å¯ç¦»çº¿ã€æ·»åŠ åˆ°æ¡Œé¢ï¼ˆä¸€çº§å…¥å£ï¼‰ã€åå°åŒæ­¥ã€æœåŠ¡ç«¯æ¨é€ç­‰ç­‰ï¼Œè¿™ä¸ªé¡¹ç›®çš„è¯å®ç°äº†å¯ç¦»çº¿å’Œæ·»åŠ åˆ°æ¡Œé¢è¿™ä¸¤ä¸ªåŠŸèƒ½ã€‚èµ·åˆå¬é—»pwaæ—¶ä»¥ä¸ºä¼šå¾ˆå¤æ‚ï¼Œå®è·µåå‘ç°å¾ˆç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;ps: å¼€å‘è¿‡ç¨‹åœ¨æ§åˆ¶å°çš„Applicationä¸­å¯è°ƒè¯•å¯¹åº”å†…å®¹&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/21/165f7ec4f7179c2c~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-8&quot;&gt;workbox&lt;/h3&gt;
&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fdevelopers.google.com%2Fweb%2Ftools%2Fworkbox%2F&quot; title=&quot;https://developers.google.com/web/tools/workbox/&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;workbox&lt;/a&gt; æ˜¯pwaçš„ä¸€ä¸ªå·¥å…·é›†åˆï¼Œå›´ç»•å®ƒçš„è¿˜æœ‰ä¸€äº›åˆ—å·¥å…·ï¼Œå¦‚ workbox-cliã€gulp-workboxã€workbox-webpack-plagin ç­‰ç­‰ï¼Œworkboxæœ¬èº«ç›¸å½“äº&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fdevelopers.google.com%2Fweb%2Ffundamentals%2Fprimers%2Fservice-workers%2F&quot; title=&quot;https://developers.google.com/web/fundamentals/primers/service-workers/&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;service worker&lt;/a&gt;çš„ä¸€ä¸ªæ¡†æ¶ï¼Œå°è£…äº†å„ç§apiï¼Œå’Œç¼“å­˜ç­–ç•¥ï¼Œå¯ä»¥è®©æˆ‘ä»¬æ›´åŠ ä¾¿æ·çš„ä½¿ç”¨service workerã€‚vue-cli3.0é›†æˆçš„æ˜¯workbox-webpack-plaginï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡vue.config.jsçš„pwaé…ç½®é¡¹è¿›è¡Œé…ç½®
é¦–å…ˆï¼Œåœ¨vue.config.jsæ–‡ä»¶ä¸­çš„è¿›è¡Œé…ç½®ï¼Œæ›´è¯¦ç»†çš„&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fvue-cli%2Ftree%2Fdev%2Fpackages%2F%2540vue%2Fcli-plugin-pwa&quot; title=&quot;https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-pwa&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;é…ç½®é¡¹&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;// vue.config.js

module.exports = {
  pwa: {
    // ä¸€äº›åŸºç¡€é…ç½®
    name: &lt;span class=&quot;hljs-string&quot;&gt;&#39;Browsing-Exp&#39;&lt;/span&gt;,
    themeColor: &lt;span class=&quot;hljs-string&quot;&gt;&#39;#6476DB&#39;&lt;/span&gt;,
    msTileColor: &lt;span class=&quot;hljs-string&quot;&gt;&#39;#000000&#39;&lt;/span&gt;,
    appleMobileWebAppCapable: &lt;span class=&quot;hljs-string&quot;&gt;&#39;yes&#39;&lt;/span&gt;,
    appleMobileWebAppStatusBarStyle: &lt;span class=&quot;hljs-string&quot;&gt;&#39;black&#39;&lt;/span&gt;,

/*
* ä¸¤ä¸ªæ¨¡å¼ï¼ŒGenerateSWï¼ˆé»˜è®¤ï¼‰å’Œ InjectManifest
* GenerateSW åœ¨æˆ‘ä»¬buildé¡¹ç›®æ—¶å€™ï¼Œæ¯æ¬¡éƒ½ä¼šæ–°å»ºä¸€ä¸ªservice workeræ–‡ä»¶
* InjectManifest å¯ä»¥è®©æˆ‘ä»¬ç¼–è¾‘ä¸€ä¸ªè‡ªå®šä¹‰çš„service workeræ–‡ä»¶ï¼Œå®ç°æ›´å¤šçš„åŠŸèƒ½ï¼Œå¹¶ä¸”å¯ä»¥
* æ‹¿åˆ°é¢„ç¼“å­˜åˆ—è¡¨
*/
    workboxPluginMode: &lt;span class=&quot;hljs-string&quot;&gt;&#39;InjectManifest&#39;&lt;/span&gt;,
    workboxOptions: {
      // è‡ªå®šä¹‰çš„service workeræ–‡ä»¶çš„ä½ç½®
      swSrc: &lt;span class=&quot;hljs-string&quot;&gt;&#39;src/service-worker.js&#39;&lt;/span&gt;,
      // ...other Workbox options...
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åæˆ‘ä»¬éœ€è¦åœ¨srcæ–‡ä»¶ç›®å½•ä¸‹é¢æ–°å»ºä¸€ä¸ªservice-worker.jsï¼Œè¿™é‡Œæ‹¿æ­¤é¡¹ç›®åšä¾‹å­ï¼Œworkboxçš„å¸¸ç”¨æ¥å£æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;workbox.precaching å¯¹é™æ€æ”¯æ´è¿›è¡Œç¼“å­˜&lt;/li&gt;
&lt;li&gt;workbox.routing è¿›è¡Œè·¯ç”±æ§åˆ¶&lt;/li&gt;
&lt;li&gt;workbox.strategies æä¾›ç¼“å­˜ç­–ç•¥&lt;/li&gt;
&lt;li&gt;ç­‰ç­‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ›´è¯¦ç»†çš„ &lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fdevelopers.google.com%2Fweb%2Ftools%2Fworkbox%2Fmodules%2Fworkbox-webpack-plugin&quot; title=&quot;https://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;æ¥å£å’Œé…ç½®æ•™ç¨‹&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;// src/service-worker.js

// è®¾ç½®ç›¸åº”ç¼“å­˜çš„åå­—çš„å‰ç¼€å’Œåç¼€
workbox.core.setCacheNameDetails({
  prefix: &lt;span class=&quot;hljs-string&quot;&gt;&#39;browse-exp&#39;&lt;/span&gt;,
  suffix: &lt;span class=&quot;hljs-string&quot;&gt;&#39;v1.0.0&#39;&lt;/span&gt;,
});
// è®©æˆ‘ä»¬çš„service workerå°½å¿«çš„å¾—åˆ°æ›´æ–°å’Œè·å–é¡µé¢çš„æ§åˆ¶æƒ
workbox.skipWaiting();
workbox.clientsClaim();

/*
* vue-cli3.0é€šè¿‡workbox-webpack-plagin æ¥å®ç°ç›¸å…³åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦åŠ å…¥
* ä»¥ä¸‹è¯­å¥æ¥è·å–é¢„ç¼“å­˜åˆ—è¡¨å’Œé¢„ç¼“å­˜ä»–ä»¬ï¼Œä¹Ÿå°±æ˜¯æ‰“åŒ…é¡¹ç›®åç”Ÿäº§çš„htmlï¼Œjsï¼Œcssç­‰* é™æ€æ–‡ä»¶
*/
workbox.precaching.precacheAndRoute(self.__precacheManifest || []);

// å¯¹æˆ‘ä»¬è¯·æ±‚çš„æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œè¿™é‡Œé‡‡ç”¨ networkFirst ç­–ç•¥
workbox.routing.registerRoute(
  new RegExp(&lt;span class=&quot;hljs-string&quot;&gt;&#39;.*experiments\?.*&#39;&lt;/span&gt;), 
  workbox.strategies.networkFirst()
);
workbox.routing.registerRoute(
  new RegExp(&lt;span class=&quot;hljs-string&quot;&gt;&#39;.*experiments/\\d&#39;&lt;/span&gt;),
  workbox.strategies.networkFirst()  
)
workbox.routing.registerRoute(
  new RegExp(&lt;span class=&quot;hljs-string&quot;&gt;&#39;.*experiment_types.*&#39;&lt;/span&gt;),
  workbox.strategies.networkFirst()
)

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¿™é‡Œï¼Œé¦–å…ˆé€šè¿‡&lt;code&gt;workbox.precaching.precacheAndRoute&lt;/code&gt;é…ç½®app shellçš„é¢„ç¼“å­˜ï¼Œç„¶åå°±æ˜¯é€šè¿‡&lt;code&gt;workbox.routing.registerRoute&lt;/code&gt;å¯¹è¯·æ±‚æ•°æ®çš„ç¼“å­˜ï¼Œå› ä¸ºå¯¹äºè¯·æ±‚çš„æ•°æ®æœ‰ä¸€å®šçš„å®æ—¶æ€§è¦æ±‚ï¼Œæ‰€ä»¥é‡‡ç”¨ç½‘ç»œä¼˜å…ˆç­–ç•¥ networkFirst ï¼Œè¿™é‡Œéšä¾¿æä¸€ä¸‹ç›¸å…³çš„ç­–ç•¥ï¼š&lt;/p&gt;
&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-9&quot;&gt;networkFirst&lt;/h4&gt;
&lt;p&gt;ç½‘ç»œä¼˜å…ˆç­–ç•¥ï¼Œä¼˜å…ˆå°è¯•é€šè¿‡ç½‘ç»œè¯·æ±‚æ¥è·å–æ•°æ®ï¼Œæ‹¿åˆ°æ•°æ®åå°†æ•°æ®è¿”å›ç»™ç”¨æˆ·ï¼Œå¹¶æ›´æ–°ç¼“å­˜ï¼Œè·å–æ•°æ®å¤±è´¥å°±ä½¿ç”¨ç¼“å­˜ä¸­çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-10&quot;&gt;cacheFirst&lt;/h4&gt;
&lt;p&gt;ç¼“å­˜ä¼˜å…ˆç­–ç•¥ï¼Œä¼˜å…ˆè·å–ç¼“å­˜ä¸­çš„èµ„æºï¼Œå¦‚æœç¼“å­˜ä¸­æ²¡æœ‰ç›¸å…³èµ„æºï¼Œé‚£ä¹ˆå°±å‘èµ·ç½‘ç»œè¯·æ±‚ã€‚&lt;/p&gt;
&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-11&quot;&gt;networkOnly&lt;/h4&gt;
&lt;p&gt;é¡¾åæ€ä¹‰ï¼Œåªä½¿ç”¨ç½‘ç»œè¯·æ±‚è·å–çš„èµ„æº&lt;/p&gt;
&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-12&quot;&gt;cacheOnly&lt;/h4&gt;
&lt;p&gt;é¡¾åæ€ä¹‰ï¼Œåªä½¿ç”¨ç¼“å­˜ä¸­çš„èµ„æº&lt;/p&gt;
&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-13&quot;&gt;stateWhileRevalidate&lt;/h4&gt;
&lt;p&gt;æ­¤ç­–ç•¥ä¼šç›´æ¥è¿”å›ç¼“å­˜ä¸­çš„èµ„æºï¼Œç¡®ä¿è·å–èµ„æºçš„é€Ÿåº¦ï¼Œç„¶åå†å‘èµ·ç½‘ç»œè¯·æ±‚è·å–æ•°æ®å»æ›´æ–°ç¼“å­˜ä¸­çš„èµ„æºã€‚å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰å¯¹åº”èµ„æºçš„è¯å°±ä¼šå‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œå¹¶ç¼“å­˜èµ„æºã€‚&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-14&quot;&gt;å¦‚ä½•æŸ¥çœ‹æ•ˆæœå‘¢&lt;/h3&gt;
&lt;p&gt;è¿™äº›é…ç½®å¯ä»¥è®©æˆ‘ä»¬çš„å¾—ä»¥åœ¨ç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œï¼Œä½†æ˜¯è¿™äº›é…ç½®éƒ½æ˜¯ç›¸å¯¹äºæ‰“åŒ…å‡ºæ¥çš„é¡¹ç›®æ–‡ä»¶çš„ï¼Œä¹Ÿå°±æ˜¯distæ–‡ä»¶é‡Œçš„å†…å®¹ã€‚æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹çš„devæ¨¡å¼æ˜¯ä½“éªŒä¸åˆ°æ•ˆæœçš„ï¼Œæˆ‘ä»¬æ€ä¹ˆæŸ¥çœ‹æ•ˆæœå‘¢ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–¹æ¡ˆ1ï¼šç¼–å†™ä¸€ä¸ªåå°æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡node.jsç­‰ç¼–å†™ä¸€ä¸ªåå°æœåŠ¡å»è®¿é—®æˆ‘ä»¬çš„åº”ç”¨ï¼Œservice workeræœ¬æ¥éœ€è¦åœ¨httpsç¯å¢ƒä¸‹è¿è¡Œï¼Œä½†æ˜¯å¦‚æœæ˜¯æœ¬åœ° localhost ç¯å¢ƒçš„è¯ï¼Œservice workerå¯ä»¥åœ¨httpåè®®ä¸Šè¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;æ–¹æ¡ˆ2ï¼šå€ŸåŠ©googleæä¾›çš„chromeæ‰©å±•åº”ç”¨&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fchrome.google.com%2Fwebstore%2Fdetail%2Fweb-server-for-chrome%2Fofhbbkphhbklhfoeikjpcbhemlocgigb&quot; title=&quot;https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;Web Server for Chrome&lt;/a&gt;ä¸ºæˆ‘ä»¬çš„åº”ç”¨å¯åŠ¨ä¸€ä¸ªæœåŠ¡ï¼Œæ¯”è¾ƒçµæ´»ï¼Œæ‰€ä»¥æˆ‘é‡‡ç”¨äº†è¿™ç§æ–¹å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-15&quot;&gt;Web Server for Chrome&lt;/h4&gt;
&lt;p&gt;ç‚¹å‡»&lt;code&gt;choose foloer&lt;/code&gt;é€‰æ‹©æˆ‘ä»¬çš„distæ–‡ä»¶å¤¹ï¼Œå‹¾é€‰&lt;code&gt;Automatically show index.html&lt;/code&gt;å¼€å¯æœåŠ¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¸‹é¢çš„é“¾æ¥è®¿é—®åº”ç”¨äº†ï¼Œé€šè¿‡å‹¾é€‰&lt;code&gt;Accessible on local network&lt;/code&gt;è¿˜å¯ä»¥ç”Ÿæˆå¦ä¸€ä¸ªåœ°å€ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨æ‰‹æœºç«¯è®¿é—®åº”ç”¨ã€‚
&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;webserver1&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/21/165f7ec5691f72fb~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;webserver2&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/21/165f7ec583c890fa~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-16&quot;&gt;manifest.json ç½‘ç»œåº”ç”¨æ¸…å•&lt;/h3&gt;
&lt;p&gt;manifest.json æä¾›äº†å°†webapp æ·»åŠ åˆ°è®¾å¤‡ä¸»å±å¹•çš„åŠŸèƒ½ï¼Œæ›´è¯¦ç»†çš„&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fdevelopers.google.com%2Fweb%2Ffundamentals%2Fweb-app-manifest%2F&quot; title=&quot;https://developers.google.com/web/fundamentals/web-app-manifest/&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;é…ç½®å†…å®¹&lt;/a&gt;åœ¨æ­¤æŸ¥çœ‹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒç»™æˆ‘ä»¬çš„åº”ç”¨è®¾ç½®å›¾æ ‡ï¼Œå¯åŠ¨åŠ¨ç”»ï¼ŒèƒŒæ™¯é¢œè‰²ç­‰ç­‰ã€‚å®ƒåœ¨æˆ‘ä»¬é¡¹ç›®çš„publicä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs JSON&quot; lang=&quot;JSON&quot;&gt;// public/manifest.json
// æœ€åŸºæœ¬çš„é…ç½®å†…å®¹

{
  &quot;name&quot;: &quot;æµè§ˆæˆ‘ä»¬çš„å®éªŒå§ï¼&quot;,
  &quot;short_name&quot;: &quot;BrowseExp&quot;,
  &quot;icons&quot;: [
    {
      &quot;src&quot;: &quot;/img/icons/icon-192x192.png&quot;,
      &quot;sizes&quot;: &quot;192x192&quot;,
      &quot;type&quot;: &quot;image/png&quot;
    },
    {
      &quot;src&quot;: &quot;/img/icons/icon-512x512.png&quot;,
      &quot;sizes&quot;: &quot;512x512&quot;,
      &quot;type&quot;: &quot;image/png&quot;
    }
  ],
  &quot;start_url&quot;: &quot;/index.html&quot;,
  &quot;display&quot;: &quot;standalone&quot;,
  &quot;background_color&quot;: &quot;#000000&quot;,
  &quot;theme_color&quot;: &quot;#4DBA87&quot;
}

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å½“æµè§ˆå™¨ï¼ˆæ”¯æŒæ­¤åŠŸèƒ½çš„æµè§ˆå™¨ï¼‰æ£€æµ‹åˆ°ç›®å½•ä¸­çš„manifest.jsonæ–‡ä»¶æ—¶ï¼Œå°±ä¼šè¯»å–å…¶ä¸­çš„å†…å®¹ã€‚åœ¨é€‚å½“çš„æ—¶æœºå¼¹å‡ºè¯¢é—®æ¡†ï¼Œè¯¢é—®æ˜¯å¦å°†åº”ç”¨æ·»åŠ åˆ°æ¡Œé¢ã€‚æ³¨æ„å®ƒä¸ä¼šåœ¨ç¬¬ä¸€æ¬¡è®¿é—®å°±å¼¹å‡ºï¼Œè€Œæ˜¯å‘ç°ç”¨æˆ·åœ¨ä¸€å®šæ—¶é—´å†…å¤šæ¬¡è®¿é—®è¯¥ç½‘ç«™æ—¶æ‰ä¼šå¼¹å‡ºã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥ç‚¹å‡»Application -&amp;gt; Manifest -&amp;gt; Add to homescreen è§¦å‘å¼¹æ¡†å¼¹å‡ºã€‚&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-17&quot;&gt;ç§»åŠ¨ç«¯å…¶ä»–å°é—®é¢˜&lt;/h2&gt;
&lt;p&gt;ä½œä¸ºç§»åŠ¨ç«¯web appï¼Œæˆ‘ä»¬éœ€è¦è§£å†³ä¸€äº›å¸¸è§çš„å°é—®é¢˜ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å„æµè§ˆå™¨é—´æ ·å¼ç»Ÿä¸€é—®é¢˜&lt;/li&gt;
&lt;li&gt;ç§»åŠ¨ç«¯ç‚¹å‡»300mså»¶è¿Ÿé—®é¢˜&lt;/li&gt;
&lt;li&gt;ç‚¹é€äº‹ä»¶&lt;/li&gt;
&lt;li&gt;remçš„è¿ç”¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-18&quot;&gt;1.å„æµè§ˆå™¨é—´æ ·å¼ç»Ÿä¸€é—®é¢˜&lt;/h4&gt;
&lt;p&gt;å¸¸è§åšæ³•å°±æ˜¯å¼•å…¥&lt;code&gt;normalize.css&lt;/code&gt;é‡ç½®æˆ‘ä»¬è®¾å¤‡çš„é»˜è®¤æ ·å¼ï¼Œä½¿å¾—å„æµè§ˆå™¨çš„é»˜è®¤æ ·å¼é«˜åº¦ä¸€è‡´ï¼Œé¿å…æˆ‘ä»¬çš„å¸ƒå±€å‡ºç°æ„æƒ³ä¸åˆ°çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-19&quot;&gt;2.ç‚¹å‡»300mså»¶è¿Ÿå’Œç‚¹é€äº‹ä»¶&lt;/h4&gt;
&lt;p&gt;å› ä¸ºæˆ‘ä»¬çš„ç§»åŠ¨ç«¯çš„æµè§ˆå™¨éœ€è¦åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æƒ³è¦åŒå‡»æ”¾å¤§ï¼Œæ‰€ä»¥ä¼šæœ‰ä¸€ä¸ª300msçš„å»¶è¿Ÿæ¥æŸ¥çœ‹ç”¨æˆ·æ˜¯å¦åŒå‡»å±å¹•ï¼›ç‚¹é€äº‹ä»¶å°±æ˜¯å½“æˆ‘ä»¬æ··ç”¨touchå’Œclickäº‹ä»¶çš„æ—¶å€™ï¼Œåœ¨touchäº‹ä»¶å“åº”åï¼Œå¦‚æœè¯¥å…ƒç´ éšè—æ‰ï¼Œé‚£ä¹ˆ300msååŒä¸€ä½ç½®çš„åº•å±‚å…ƒç´ çš„clickäº‹ä»¶å°±ä¼šè¢«è§¦å‘ã€‚å¯¹äºå®ƒä»¬å¸¸ç”¨çš„è§£å†³æ–¹æ³•å°±æ˜¯å¼•å…¥ &lt;code&gt;fastclick.js&lt;/code&gt;ï¼Œè¿™ä¸ªåº“çš„åŸç†å°±æ˜¯ï¼šä¿®æ”¹æµè§ˆå™¨çš„touchäº‹ä»¶æ¥æ¨¡æ‹Ÿä¸€ä¸ªclickäº‹ä»¶ï¼Œå¹¶æŠŠæµè§ˆå™¨åœ¨300msä¹‹åçš„clickäº‹ä»¶é˜»æ­¢æ‰ã€‚è®©å‰ç«¯å¼€å‘äººå‘˜å¯ä»¥ä»¥ç†Ÿæ‚‰çš„clickæ¥ä¹¦å†™ä»£ç &lt;/p&gt;
&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-20&quot;&gt;3.remçš„è¿ç”¨&lt;/h4&gt;
&lt;p&gt;ç§»åŠ¨ç«¯æˆ‘ä»¬å¸¸å¸¸ä¼šä½¿ç”¨åˆ°remæ¥è¿›è¡Œå“åº”å¼çš„å¸ƒå±€ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†&lt;code&gt;html&lt;/code&gt;çš„&lt;code&gt;font-size&lt;/code&gt;è®¾ç½®ä¸º &lt;code&gt;62.5%&lt;/code&gt;ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ 1rem = 10pxï¼Œä¾¿äºæˆ‘ä»¬çš„å•ä½è½¬æ¢ã€‚&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-21&quot;&gt;é¡¹ç›®éƒ¨ç½²&lt;/h2&gt;
&lt;p&gt;å¼€å‘å®Œæ¯•åï¼Œå°±éœ€è¦æŠŠæˆ‘ä»¬çš„é¡¹ç›®éƒ¨ç½²åˆ°è‡ªå·±çš„æœåŠ¡å™¨ä¸Šé¢å»&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-22&quot;&gt;ç¼–å†™ä¸€ä¸ªæœåŠ¡&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåç«¯æœåŠ¡ï¼Œè®©æˆ‘ä»¬å¯ä»¥è®¿é—®åˆ°é¡¹ç›®çš„index.htmlæ–‡ä»¶ï¼Œè¿™é‡Œé‡‡ç”¨expressèµ·ä¸ªæœåŠ¡ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;// browse-exp.js
const fs = require(&lt;span class=&quot;hljs-string&quot;&gt;&#39;fs&#39;&lt;/span&gt;)
const path = require(&lt;span class=&quot;hljs-string&quot;&gt;&#39;path&#39;&lt;/span&gt;)
const express = require(&lt;span class=&quot;hljs-string&quot;&gt;&#39;express&#39;&lt;/span&gt;)

const app = express();

app.use(express.static(path.resolve(__dirname, &lt;span class=&quot;hljs-string&quot;&gt;&#39;./dist&#39;&lt;/span&gt;)))
app.get(&lt;span class=&quot;hljs-string&quot;&gt;&#39;*&#39;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(req, res) {
  const html = fs.readFileSync(path.resolve(__dirname, &lt;span class=&quot;hljs-string&quot;&gt;&#39;./dist/index.html&#39;&lt;/span&gt;), &lt;span class=&quot;hljs-string&quot;&gt;&#39;utf-8&#39;&lt;/span&gt;)
  res.send(html)
})

app.listen(3002, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;function&lt;/span&gt;&lt;/span&gt;() {
  console.log(&lt;span class=&quot;hljs-string&quot;&gt;&#39;server listening on port 3002!&#39;&lt;/span&gt;)
})

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åå°†é¡¹ç›®é€šè¿‡æ¯”å¦‚ftpç­‰å·¥å…·ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæˆ‘ç”¨çš„æœåŠ¡å™¨æ˜¯nginxï¼Œå®ƒçš„ç‰¹ç‚¹å°±æ˜¯è½»é‡çº§ï¼Œé«˜å¹¶å‘ï¼Œå¯é…ç½®åå‘ä»£ç†ã€‚ç„¶åéœ€è¦é…ç½®ä¸ªä»£ç†å°†æˆ‘ä»¬å¯¹æœåŠ¡å™¨çš„è®¿é—®ä»£ç†åˆ°è¯¥é¡¹ç›®ã€‚åœ¨&lt;code&gt;etc/nginx/conf.d&lt;/code&gt;ç›®å½•ä¸‹åˆ›å»ºæˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ &lt;code&gt;holyzheng-top-3002.conf&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot; lang=&quot;bash&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;# etc/nginx/conf.d/holyzheng-top-3002.conf&lt;/span&gt;

&lt;span class=&quot;hljs-comment&quot;&gt;# å®ä¾‹ï¼Œä»£è¡¨æˆ‘ä»¬çš„åº”ç”¨&lt;/span&gt;
upstream browseexp {
  server 127.0.0.1:3002; 
}
&lt;span class=&quot;hljs-comment&quot;&gt;# å°†ä»¥httpåè®®å¯¹æˆ‘ä»¬é¡¹ç›®çš„è®¿é—®è½¬åˆ°httpsåè®®&lt;/span&gt;
server {
  listen 80; &lt;span class=&quot;hljs-comment&quot;&gt;# httpç›‘å¬çš„ç«¯å£&lt;/span&gt;
  server_name browseexp.holyzheng.top; &lt;span class=&quot;hljs-comment&quot;&gt;# æˆ‘è¦ä½¿ç”¨çš„ipåŸŸå&lt;/span&gt;
  error_page 405 =200 @405; &lt;span class=&quot;hljs-comment&quot;&gt;# å…è®¸å¯¹é™æ€èµ„æºè¿›è¡ŒPOSTè¯·æ±‚&lt;/span&gt;
  location @405 {
    proxy_pass http://browseexp;
  }
  rewrite ^(.*) https://&lt;span class=&quot;hljs-variable&quot;&gt;$host&lt;/span&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$1&lt;/span&gt; permanent;
}

&lt;span class=&quot;hljs-comment&quot;&gt;# é…ç½®ä»£ç†ï¼Œå°†å¯¹åŸŸåbrowseexp.holyzheng.topçš„è®¿é—®ä»£ç†åˆ°æœåŠ¡ç«¯çš„127.0.0.1:3002&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;# ä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„åº”ç”¨&lt;/span&gt;
server {
  listen 443;
  server_name browseexp.holyzheng.top;
&lt;span class=&quot;hljs-comment&quot;&gt;# è·Ÿè¯ä¹¦æœ‰å…³çš„é…ç½®ï¼Œåœ¨ç”³è¯·è¯ä¹¦çš„æ—¶å€™ä¼šæœ‰æç¤ºè¿™éƒ¨åˆ†é…ç½®&lt;/span&gt;
  ssl on;
  ssl_certificate /etc/nginx/cert/1538045542271.pem;
  ssl_certificate_key /etc/nginx/cert/1538045542271.key;
  ssl_session_timeout 5m;
  ssl_protocols SSLv2 SSLv3 TLSv1;
  ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;
  ssl_prefer_server_ciphers on;

  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$ssl_protocol&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;) { &lt;span class=&quot;hljs-comment&quot;&gt;# åˆ¤æ–­ç”¨æˆ·æ˜¯å¦è¾“å…¥åè®®&lt;/span&gt;
    rewrite ^(.*) https://&lt;span class=&quot;hljs-variable&quot;&gt;$host&lt;/span&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$1&lt;/span&gt; permanent;
  }

  location / {
    proxy_set_header X-Real-IP &lt;span class=&quot;hljs-variable&quot;&gt;$remote_addr&lt;/span&gt;;
    proxy_set_header X-Forward-For &lt;span class=&quot;hljs-variable&quot;&gt;$proxy_add_x_forwarded_for&lt;/span&gt;;

    proxy_set_header Host &lt;span class=&quot;hljs-variable&quot;&gt;$http_host&lt;/span&gt;;
    proxy_set_header X-Nginx-Proxy &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;

    proxy_pass http://browseexp; &lt;span class=&quot;hljs-comment&quot;&gt;# è¦ä»£ç†çš„å®ä¾‹&lt;/span&gt;
  }
}

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å¯¹äºåŸŸåæ¥è®¿é—®äº†æ¥è®¿é—®è¯¥é¡¹ç›®äº†ã€‚è¿™é‡Œç»™å‡ºå¯¹åº”äºŒç»´ç ï¼Œå¯ä»¥è¿›è¡Œè®¿é—®æŸ¥çœ‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;qrcore&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/21/165f7ec5c5b7377c~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯åœ¨å®‰å“ç«¯UCæµè§ˆå™¨è®¿é—®çš„ç»“æœï¼ˆUCå¯¹pwaçš„æ”¯æŒååˆ†å¥½ï¼‰ï¼Œåœ¨å‡ æ¬¡è®¿é—®æˆ‘ä»¬çš„åº”ç”¨åå°±å¼¹å‡ºäº†ç›¸å…³çš„æç¤ºï¼Œç‚¹å‡»â€œå¥½çš„â€å°±å¯ä»¥æ·»åŠ åˆ°ä¸»å±å¹•äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;pwademo1&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/21/165f7ec5c3d79026~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-23&quot;&gt;ç»“è¯­&lt;/h2&gt;
&lt;p&gt;æˆ‘éå¸¸äº«å—å°è¯•æ–°äº‹ç‰©ï¼ˆè‡ªå·±æ²¡åšè¿‡ï¼‰çš„è¿™ä¸ªè¿‡ç¨‹ï¼Œè¿™æ¬¡è®°å½•ä¸‹æ¥å¹¶åˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œå¦‚æœå¤§å®¶çœ‹åæœ‰ä»€ä¹ˆè¡¥å……æˆ–æ„è§çš„è¯ï¼Œæ¬¢è¿è¯„è®ºåŒºæå‡ºã€‚é¡¹ç›®åœ°å€ï¼š&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FHolyZheng%2FBrowseExp&quot; title=&quot;https://github.com/HolyZheng/BrowseExp&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;browse-Exp&lt;/a&gt;&lt;/p&gt;
</description><link>https://juejin.cn/post/6844903682618687496</link><guid isPermaLink="false">https://juejin.cn/post/6844903682618687496</guid><pubDate>Thu, 20 Sep 2018 17:02:55 GMT</pubDate><author>holyZhengs</author><category>å‰ç«¯</category><category>Vue.js</category><category>TypeScript</category><category>PWA</category><category>æœåŠ¡å™¨</category></item><item><title>Javascriptè£…é¥°å™¨çš„å¦™ç”¨</title><description>&lt;p&gt;æœ€è¿‘æ–°å¼€äº†ä¸€ä¸ªNodeé¡¹ç›®ï¼Œé‡‡ç”¨TypeScriptæ¥å¼€å‘ï¼Œåœ¨æ•°æ®åº“åŠè·¯ç”±ç®¡ç†æ–¹é¢ç”¨äº†ä¸å°‘çš„è£…é¥°å™¨ï¼Œå‘è§‰è¿™çš„ç¡®æ˜¯ä¸€ä¸ªå¥½ä¸œè¥¿ã€‚&lt;br&gt;
è£…é¥°å™¨æ˜¯ä¸€ä¸ªè¿˜å¤„äºè‰æ¡ˆä¸­çš„ç‰¹æ€§ï¼Œç›®å‰æœ¨æœ‰ç›´æ¥æ”¯æŒè¯¥è¯­æ³•çš„ç¯å¢ƒï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ babel ä¹‹ç±»çš„è¿›è¡Œè½¬æ¢ä¸ºæ—§è¯­æ³•æ¥å®ç°æ•ˆæœï¼Œæ‰€ä»¥åœ¨TypeScriptä¸­ï¼Œå¯ä»¥æ”¾å¿ƒçš„ä½¿ç”¨&lt;code&gt;@Decorator&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-0&quot;&gt;ä»€ä¹ˆæ˜¯è£…é¥°å™¨&lt;/h2&gt;
&lt;p&gt;è£…é¥°å™¨æ˜¯å¯¹ç±»ã€å‡½æ•°ã€å±æ€§ä¹‹ç±»çš„ä¸€ç§è£…é¥°ï¼Œå¯ä»¥é’ˆå¯¹å…¶æ·»åŠ ä¸€äº›é¢å¤–çš„è¡Œä¸ºã€‚&lt;br&gt;
é€šä¿—çš„ç†è§£å¯ä»¥è®¤ä¸ºå°±æ˜¯åœ¨åŸæœ‰ä»£ç å¤–å±‚åŒ…è£…äº†ä¸€å±‚å¤„ç†é€»è¾‘ã€‚&lt;br&gt;
ä¸ªäººè®¤ä¸ºè£…é¥°å™¨æ˜¯ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œè€Œå¹¶éæ˜¯ç‹­ä¹‰çš„&lt;code&gt;@Decorator&lt;/code&gt;ï¼Œåè€…ä»…ä»…æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ç½¢äº†ã€‚&lt;/p&gt;
&lt;p&gt;è£…é¥°å™¨åœ¨èº«è¾¹çš„ä¾‹å­éšå¤„å¯è§ï¼Œä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ°´é¾™å¤´ä¸Šè¾¹çš„èµ·æ³¡å™¨å°±æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œåœ¨è£…ä¸Šä»¥åå°±ä¼šæŠŠç©ºæ°”æ··å…¥æ°´æµä¸­ï¼Œæºæ‚å¾ˆå¤šæ³¡æ³¡åœ¨æ°´é‡Œã€‚&lt;br&gt;
ä½†æ˜¯èµ·æ³¡å™¨å®‰è£…ä¸å¦å¯¹æ°´é¾™å¤´æœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆå½±å“ï¼Œå³ä½¿æ‹†æ‰èµ·æ³¡å™¨ï¼Œä¹Ÿä¼šç…§æ ·å·¥ä½œï¼Œæ°´é¾™å¤´çš„ä½œç”¨åœ¨äºé˜€é—¨çš„æ§åˆ¶ï¼Œè‡³äºæ°´ä¸­æºä¸æºæ‚æ°”æ³¡åˆ™ä¸æ˜¯æ°´é¾™å¤´éœ€è¦å…³å¿ƒçš„ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œå¯¹äºè£…é¥°å™¨ï¼Œå¯ä»¥ç®€å•åœ°ç†è§£ä¸ºæ˜¯éä¾µå…¥å¼çš„è¡Œä¸ºä¿®æ”¹ã€‚&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-1&quot;&gt;ä¸ºä»€ä¹ˆè¦ç”¨è£…é¥°å™¨&lt;/h2&gt;
&lt;p&gt;å¯èƒ½æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå¯¹ä¼ å…¥å‚æ•°çš„ç±»å‹åˆ¤æ–­ã€å¯¹è¿”å›å€¼çš„æ’åºã€è¿‡æ»¤ï¼Œå¯¹å‡½æ•°æ·»åŠ èŠ‚æµã€é˜²æŠ–æˆ–å…¶ä»–çš„åŠŸèƒ½æ€§ä»£ç ï¼ŒåŸºäºå¤šä¸ªç±»çš„ç»§æ‰¿ï¼Œå„ç§å„æ ·çš„ä¸å‡½æ•°é€»è¾‘æœ¬èº«æ— å…³çš„ã€é‡å¤æ€§çš„ä»£ç ã€‚&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-2&quot;&gt;å‡½æ•°ä¸­çš„ä½œç”¨&lt;/h3&gt;
&lt;p&gt;å¯ä»¥æƒ³åƒä¸€ä¸‹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå·¥å…·ç±»ï¼Œæä¾›äº†ä¸€ä¸ªè·å–æ•°æ®çš„å‡½æ•°ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Model1&lt;/span&gt; &lt;/span&gt;{
  getData() {
    &lt;span class=&quot;hljs-comment&quot;&gt;// æ­¤å¤„çœç•¥è·å–æ•°æ®çš„é€»è¾‘&lt;/span&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [{
      &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,
      &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&#39;Niko&#39;&lt;/span&gt;
    }, {
      &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,
      &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&#39;Bellic&#39;&lt;/span&gt;
    }]
  }
}

&lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; Model1().getData())     &lt;span class=&quot;hljs-comment&quot;&gt;// [ { id: 1, name: &#39;Niko&#39;}, { id: 2, name: &#39;Bellic&#39; } ]&lt;/span&gt;
&lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(Model1.prototype.getData()) &lt;span class=&quot;hljs-comment&quot;&gt;// [ { id: 1, name: &#39;Niko&#39;}, { id: 2, name: &#39;Bellic&#39; } ]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç°åœ¨æˆ‘ä»¬æƒ³è¦æ·»åŠ ä¸€ä¸ªåŠŸèƒ½ï¼Œè®°å½•è¯¥å‡½æ•°æ‰§è¡Œçš„è€—æ—¶ã€‚&lt;br&gt;
å› ä¸ºè¿™ä¸ªå‡½æ•°è¢«å¾ˆå¤šäººä½¿ç”¨ï¼Œåœ¨è°ƒç”¨æ–¹æ·»åŠ è€—æ—¶ç»Ÿè®¡é€»è¾‘æ˜¯ä¸å¯å–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨&lt;code&gt;Model1&lt;/code&gt;ä¸­è¿›è¡Œä¿®æ”¹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs diff&quot; lang=&quot;diff&quot;&gt;class Model1 {
  getData() {
&lt;span class=&quot;hljs-addition&quot;&gt;+   let start = new Date().valueOf()&lt;/span&gt;
&lt;span class=&quot;hljs-addition&quot;&gt;+   try {&lt;/span&gt;
      // æ­¤å¤„çœç•¥è·å–æ•°æ®çš„é€»è¾‘
      return [{
        id: 1,
        name: &#39;Niko&#39;
      }, {
        id: 2,
        name: &#39;Bellic&#39;
      }]
&lt;span class=&quot;hljs-addition&quot;&gt;+   } finally {&lt;/span&gt;
&lt;span class=&quot;hljs-addition&quot;&gt;+     let end = new Date().valueOf()&lt;/span&gt;
&lt;span class=&quot;hljs-addition&quot;&gt;+     console.log(`start: ${start} end: ${end} consume: ${end - start}`)&lt;/span&gt;
&lt;span class=&quot;hljs-addition&quot;&gt;+   }&lt;/span&gt;
  }
}

// start: XXX end: XXX consume: XXX
console.log(new Model1().getData())     // [ { id: 1, name: &#39;Niko&#39;}, { id: 2, name: &#39;Bellic&#39; } ]
// start: XXX end: XXX consume: XXX
console.log(Model1.prototype.getData()) // [ { id: 1, name: &#39;Niko&#39;}, { id: 2, name: &#39;Bellic&#39; } ]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·åœ¨è°ƒç”¨æ–¹æ³•åæˆ‘ä»¬å°±å¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°è€—æ—¶çš„è¾“å‡ºäº†ã€‚&lt;br&gt;
ä½†æ˜¯è¿™æ ·ç›´æ¥ä¿®æ”¹åŸå‡½æ•°ä»£ç æœ‰ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç»Ÿè®¡è€—æ—¶çš„ç›¸å…³ä»£ç ä¸å‡½æ•°æœ¬èº«é€»è¾‘å¹¶æ— ä¸€ç‚¹å…³ç³»ï¼Œå½±å“åˆ°äº†å¯¹åŸå‡½æ•°æœ¬èº«çš„ç†è§£ï¼Œå¯¹å‡½æ•°ç»“æ„é€ æˆäº†ç ´åæ€§çš„ä¿®æ”¹&lt;/li&gt;
&lt;li&gt;å¦‚æœåæœŸè¿˜æœ‰æ›´å¤šç±»ä¼¼çš„å‡½æ•°éœ€è¦æ·»åŠ ç»Ÿè®¡è€—æ—¶çš„ä»£ç ï¼Œåœ¨æ¯ä¸ªå‡½æ•°ä¸­éƒ½æ·»åŠ è¿™æ ·çš„ä»£ç æ˜¾ç„¶æ˜¯ä½æ•ˆçš„ï¼Œç»´æŠ¤æˆæœ¬å¤ªé«˜&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œä¸ºäº†è®©ç»Ÿè®¡è€—æ—¶çš„é€»è¾‘å˜å¾—æ›´åŠ çµæ´»ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–°çš„å·¥å…·å‡½æ•°ï¼Œç”¨æ¥åŒ…è£…éœ€è¦è®¾ç½®ç»Ÿè®¡è€—æ—¶çš„å‡½æ•°ã€‚&lt;br&gt;
é€šè¿‡å°†&lt;code&gt;Class&lt;/code&gt;ä¸ç›®æ ‡å‡½æ•°çš„&lt;code&gt;name&lt;/code&gt;ä¼ é€’åˆ°å‡½æ•°ä¸­ï¼Œå®ç°äº†é€šç”¨çš„è€—æ—¶ç»Ÿè®¡ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;wrap&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;Model, key&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-comment&quot;&gt;// è·å–Classå¯¹åº”çš„åŸå‹&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; target = Model.prototype

  &lt;span class=&quot;hljs-comment&quot;&gt;// è·å–å‡½æ•°å¯¹åº”çš„æè¿°ç¬¦&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; descriptor = &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.getOwnPropertyDescriptor(target, key)

  &lt;span class=&quot;hljs-comment&quot;&gt;// ç”Ÿæˆæ–°çš„å‡½æ•°ï¼Œæ·»åŠ è€—æ—¶ç»Ÿè®¡é€»è¾‘&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; log = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;...arg&lt;/span&gt;) &lt;/span&gt;{
    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; start = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Date&lt;/span&gt;().valueOf()
    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; descriptor.value.apply(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;, arg) &lt;span class=&quot;hljs-comment&quot;&gt;// è°ƒç”¨ä¹‹å‰çš„å‡½æ•°&lt;/span&gt;
    } &lt;span class=&quot;hljs-keyword&quot;&gt;finally&lt;/span&gt; {
      &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; end = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Date&lt;/span&gt;().valueOf()
      &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;`start: &lt;span class=&quot;hljs-subst&quot;&gt;${start}&lt;/span&gt; end: &lt;span class=&quot;hljs-subst&quot;&gt;${end}&lt;/span&gt; consume: &lt;span class=&quot;hljs-subst&quot;&gt;${end - start}&lt;/span&gt;`&lt;/span&gt;)
    }
  }

  &lt;span class=&quot;hljs-comment&quot;&gt;// å°†ä¿®æ”¹åçš„å‡½æ•°é‡æ–°å®šä¹‰åˆ°åŸå‹é“¾ä¸Š&lt;/span&gt;
  &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.defineProperty(target, key, {
    ...descriptor,
    &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: log      &lt;span class=&quot;hljs-comment&quot;&gt;// è¦†ç›–æè¿°ç¬¦é‡çš„value&lt;/span&gt;
  })
}

wrap(Model1, &lt;span class=&quot;hljs-string&quot;&gt;&#39;getData&#39;&lt;/span&gt;)
wrap(Model2, &lt;span class=&quot;hljs-string&quot;&gt;&#39;getData&#39;&lt;/span&gt;)

&lt;span class=&quot;hljs-comment&quot;&gt;// start: XXX end: XXX consume: XXX&lt;/span&gt;
&lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; Model1().getData())     &lt;span class=&quot;hljs-comment&quot;&gt;// [ { id: 1, name: &#39;Niko&#39;}, { id: 2, name: &#39;Bellic&#39; } ]&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;// start: XXX end: XXX consume: XXX&lt;/span&gt;
&lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(Model2.prototype.getData()) &lt;span class=&quot;hljs-comment&quot;&gt;// [ { id: 1, name: &#39;Niko&#39;}, { id: 2, name: &#39;Bellic&#39; } ]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æƒ³æ§åˆ¶å…¶ä¸­ä¸€ä¸ª&lt;code&gt;Model&lt;/code&gt;çš„å‡½æ•°ä¸å¯è¢«å…¶ä»–äººä¿®æ”¹è¦†ç›–ï¼Œæ‰€ä»¥è¦æ·»åŠ ä¸€äº›æ–°çš„é€»è¾‘ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;wrap&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;Model, key&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-comment&quot;&gt;// è·å–Classå¯¹åº”çš„åŸå‹&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; target = Model.prototype

  &lt;span class=&quot;hljs-comment&quot;&gt;// è·å–å‡½æ•°å¯¹åº”çš„æè¿°ç¬¦&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; descriptor = &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.getOwnPropertyDescriptor(target, key)

  &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.defineProperty(target, key, {
    ...descriptor,
    &lt;span class=&quot;hljs-attr&quot;&gt;writable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;      &lt;span class=&quot;hljs-comment&quot;&gt;// è®¾ç½®å±æ€§ä¸å¯è¢«ä¿®æ”¹&lt;/span&gt;
  })
}

wrap(Model1, &lt;span class=&quot;hljs-string&quot;&gt;&#39;getData&#39;&lt;/span&gt;)

Model1.prototype.getData = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// æ— æ•ˆ&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œä¸¤ä¸ª&lt;code&gt;wrap&lt;/code&gt;å‡½æ•°ä¸­æœ‰ä¸å°‘é‡å¤çš„åœ°æ–¹ï¼Œè€Œä¿®æ”¹ç¨‹åºè¡Œä¸ºçš„é€»è¾‘ï¼Œå®é™…ä¸Šä¾èµ–çš„æ˜¯&lt;code&gt;Object.defineProperty&lt;/code&gt;ä¸­ä¼ é€’çš„ä¸‰ä¸ªå‚æ•°ã€‚&lt;br&gt;
æ‰€ä»¥ï¼Œæˆ‘ä»¬é’ˆå¯¹&lt;code&gt;wrap&lt;/code&gt;åœ¨è¿›è¡Œä¸€æ¬¡ä¿®æ”¹ï¼Œå°†å…¶å˜ä¸ºä¸€ä¸ªé€šç”¨ç±»çš„è½¬æ¢ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;wrap&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;decorator&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;Model, key&lt;/span&gt;) &lt;/span&gt;{
    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; target = Model.prototype
    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; dscriptor = &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.getOwnPropertyDescriptor(target, key)

    decorator(target, key, descriptor)
  }
}

&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; log = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;target, key, descriptor&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-comment&quot;&gt;// å°†ä¿®æ”¹åçš„å‡½æ•°é‡æ–°å®šä¹‰åˆ°åŸå‹é“¾ä¸Š&lt;/span&gt;
  &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.defineProperty(target, key, {
    ...descriptor,
    &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;...arg&lt;/span&gt;) &lt;/span&gt;{
      &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; start = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Date&lt;/span&gt;().valueOf()
      &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; descriptor.value.apply(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;, arg) &lt;span class=&quot;hljs-comment&quot;&gt;// è°ƒç”¨ä¹‹å‰çš„å‡½æ•°&lt;/span&gt;
      } &lt;span class=&quot;hljs-keyword&quot;&gt;finally&lt;/span&gt; {
        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; end = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Date&lt;/span&gt;().valueOf()
        &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;`start: &lt;span class=&quot;hljs-subst&quot;&gt;${start}&lt;/span&gt; end: &lt;span class=&quot;hljs-subst&quot;&gt;${end}&lt;/span&gt; consume: &lt;span class=&quot;hljs-subst&quot;&gt;${end - start}&lt;/span&gt;`&lt;/span&gt;)
      }
    }
  })
}

&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; seal = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;target, key, descriptor&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.defineProperty(target, key, {
    ...descriptor,
    &lt;span class=&quot;hljs-attr&quot;&gt;writable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;
  })
}

&lt;span class=&quot;hljs-comment&quot;&gt;// å‚æ•°çš„è½¬æ¢å¤„ç†&lt;/span&gt;
log = wrap(log)
seal = warp(seal)

&lt;span class=&quot;hljs-comment&quot;&gt;// æ·»åŠ è€—æ—¶ç»Ÿè®¡&lt;/span&gt;
log(Model1, &lt;span class=&quot;hljs-string&quot;&gt;&#39;getData&#39;&lt;/span&gt;)
log(Model2, &lt;span class=&quot;hljs-string&quot;&gt;&#39;getData&#39;&lt;/span&gt;)

&lt;span class=&quot;hljs-comment&quot;&gt;// è®¾ç½®å±æ€§ä¸å¯è¢«ä¿®æ”¹&lt;/span&gt;
seal(Model1, &lt;span class=&quot;hljs-string&quot;&gt;&#39;getData&#39;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ°äº†è¿™ä¸€æ­¥ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç§°&lt;code&gt;log&lt;/code&gt;å’Œ&lt;code&gt;seal&lt;/code&gt;ä¸ºè£…é¥°å™¨äº†ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„è®©æˆ‘ä»¬å¯¹ä¸€äº›å‡½æ•°æ·»åŠ è¡Œä¸ºã€‚&lt;br&gt;
è€Œæ‹†åˆ†å‡ºæ¥çš„è¿™äº›åŠŸèƒ½å¯ä»¥ç”¨äºæœªæ¥å¯èƒ½ä¼šæœ‰éœ€è¦çš„åœ°æ–¹ï¼Œè€Œä¸ç”¨é‡æ–°å¼€å‘ä¸€éç›¸åŒçš„é€»è¾‘ã€‚&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-3&quot;&gt;Class ä¸­çš„ä½œç”¨&lt;/h3&gt;
&lt;p&gt;å°±åƒä¸Šè¾¹æåˆ°äº†ï¼Œç°é˜¶æ®µåœ¨JSä¸­ç»§æ‰¿å¤šä¸ª&lt;code&gt;Class&lt;/code&gt;æ˜¯ä¸€ä»¶å¤´ç–¼çš„äº‹æƒ…ï¼Œæ²¡æœ‰ç›´æ¥çš„è¯­æ³•èƒ½å¤Ÿç»§æ‰¿å¤šä¸ª Classã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;A&lt;/span&gt; &lt;/span&gt;{ say () { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; } }
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;B&lt;/span&gt; &lt;/span&gt;{ hi () { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; } }
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;C&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;A&lt;/span&gt;, &lt;span class=&quot;hljs-title&quot;&gt;B&lt;/span&gt; &lt;/span&gt;{}        &lt;span class=&quot;hljs-comment&quot;&gt;// Error&lt;/span&gt;
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;C&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;A&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;B&lt;/span&gt; &lt;/span&gt;{} &lt;span class=&quot;hljs-comment&quot;&gt;// Error&lt;/span&gt;

&lt;span class=&quot;hljs-comment&quot;&gt;// è¿™æ ·æ‰æ˜¯å¯ä»¥çš„&lt;/span&gt;
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;C&lt;/span&gt; &lt;/span&gt;{}
&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; key &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.getOwnPropertyNames(A.prototype)) {
  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (key === &lt;span class=&quot;hljs-string&quot;&gt;&#39;constructor&#39;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;continue&lt;/span&gt;
  &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.defineProperty(C.prototype, key, &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.getOwnPropertyDescriptor(A.prototype, key))
}
&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; key &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.getOwnPropertyNames(B.prototype)) {
  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (key === &lt;span class=&quot;hljs-string&quot;&gt;&#39;constructor&#39;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;continue&lt;/span&gt;
  &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.defineProperty(C.prototype, key, &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.getOwnPropertyDescriptor(B.prototype, key))
}

&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; c = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; C()
&lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(c.say(), c.hi()) &lt;span class=&quot;hljs-comment&quot;&gt;// 1, 2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰€ä»¥ï¼Œåœ¨&lt;code&gt;React&lt;/code&gt;ä¸­å°±æœ‰äº†ä¸€ä¸ª&lt;code&gt;mixin&lt;/code&gt;çš„æ¦‚å¿µï¼Œç”¨æ¥å°†å¤šä¸ª&lt;code&gt;Class&lt;/code&gt;çš„åŠŸèƒ½å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„&lt;code&gt;Class&lt;/code&gt;ä¸Šã€‚&lt;br&gt;
å¤§è‡´æ€è·¯å°±æ˜¯ä¸Šè¾¹åˆ—å‡ºæ¥çš„ï¼Œä½†æ˜¯è¿™ä¸ª&lt;code&gt;mixin&lt;/code&gt;æ˜¯&lt;code&gt;React&lt;/code&gt;ä¸­å†…ç½®çš„ä¸€ä¸ªæ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è½¬æ¢ä¸ºæ›´æ¥è¿‘è£…é¥°å™¨çš„å®ç°ã€‚&lt;br&gt;
åœ¨ä¸ä¿®æ”¹åŸ&lt;code&gt;Class&lt;/code&gt;çš„æƒ…å†µä¸‹ï¼Œå°†å…¶ä»–&lt;code&gt;Class&lt;/code&gt;çš„å±æ€§å¤åˆ¶è¿‡æ¥ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;mixin&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;constructor&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;...args&lt;/span&gt;) &lt;/span&gt;{
    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; arg &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; args) {
      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; key &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.getOwnPropertyNames(arg.prototype)) {
        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (key === &lt;span class=&quot;hljs-string&quot;&gt;&#39;constructor&#39;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;continue&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// è·³è¿‡æ„é€ å‡½æ•°&lt;/span&gt;
        &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.defineProperty(&lt;span class=&quot;hljs-keyword&quot;&gt;constructor&lt;/span&gt;.prototype, key, Object.getOwnPropertyDescriptor(arg.prototype, key))
      }
    }
  }
}

mixin(C)(A, B)

let c = new C()
console.log(c.say(), c.hi()) // 1, 2
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»¥ä¸Šï¼Œå°±æ˜¯è£…é¥°å™¨åœ¨å‡½æ•°ã€&lt;code&gt;Class&lt;/code&gt;ä¸Šçš„å®ç°æ–¹æ³•ï¼ˆè‡³å°‘ç›®å‰æ˜¯çš„ï¼‰ï¼Œä½†æ˜¯è‰æ¡ˆä¸­è¿˜æœ‰ä¸€é¢—ç‰¹åˆ«ç”œçš„è¯­æ³•ç³–ï¼Œä¹Ÿå°±æ˜¯&lt;code&gt;@Decorator&lt;/code&gt;äº†ã€‚&lt;br&gt;
èƒ½å¤Ÿå¸®ä½ çœå»å¾ˆå¤šç¹ççš„æ­¥éª¤æ¥ç”¨ä¸Šè£…é¥°å™¨ã€‚&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-4&quot;&gt;@Decoratorçš„ä½¿ç”¨æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;è‰æ¡ˆä¸­çš„è£…é¥°å™¨ã€æˆ–è€…å¯ä»¥è¯´æ˜¯TSå®ç°çš„è£…é¥°å™¨ï¼Œå°†ä¸Šè¾¹çš„ä¸¤ç§è¿›ä¸€æ­¥åœ°å°è£…ï¼Œå°†å…¶æ‹†åˆ†æˆä¸ºæ›´ç»†çš„è£…é¥°å™¨åº”ç”¨ï¼Œç›®å‰æ”¯æŒä»¥ä¸‹å‡ å¤„ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Class&lt;/li&gt;
&lt;li&gt;å‡½æ•°&lt;/li&gt;
&lt;li&gt;get setè®¿é—®å™¨&lt;/li&gt;
&lt;li&gt;å®ä¾‹å±æ€§ã€é™æ€å‡½æ•°åŠå±æ€§&lt;/li&gt;
&lt;li&gt;å‡½æ•°å‚æ•°&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;@Decoratorçš„è¯­æ³•è§„å®šæ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯é€šè¿‡&lt;code&gt;@&lt;/code&gt;ç¬¦å·åè¾¹è·Ÿä¸€ä¸ªè£…é¥°å™¨å‡½æ•°çš„å¼•ç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;@tag
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;A&lt;/span&gt; &lt;/span&gt;{ 
  @method
  hi () {}
}

&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;tag&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;constructor&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-keyword&quot;&gt;constructor&lt;/span&gt; === A) // true
}

function method(target) {
  &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(target.constructor === A, target === A.prototype) &lt;span class=&quot;hljs-comment&quot;&gt;// true, true&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å‡½æ•°&lt;code&gt;tag&lt;/code&gt;ä¸&lt;code&gt;method&lt;/code&gt;ä¼šåœ¨&lt;code&gt;class A&lt;/code&gt;å®šä¹‰çš„æ—¶å€™æ‰§è¡Œã€‚&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-5&quot;&gt;@Decorator åœ¨ Class ä¸­çš„ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;è¯¥è£…é¥°å™¨ä¼šåœ¨classå®šä¹‰å‰è°ƒç”¨ï¼Œå¦‚æœå‡½æ•°æœ‰è¿”å›å€¼ï¼Œåˆ™ä¼šè®¤ä¸ºæ˜¯ä¸€ä¸ªæ–°çš„æ„é€ å‡½æ•°æ¥æ›¿ä»£ä¹‹å‰çš„æ„é€ å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;constructor ä¹‹å‰çš„æ„é€ å‡½æ•°&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥é’ˆå¯¹åŸæœ‰çš„æ„é€ å‡½æ•°è¿›è¡Œä¸€äº›æ”¹é€ :&lt;/p&gt;
&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-6&quot;&gt;æ–°å¢ä¸€äº›å±æ€§&lt;/h4&gt;
&lt;p&gt;å¦‚æœæƒ³è¦æ–°å¢ä¸€äº›å±æ€§ä¹‹ç±»çš„ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆå¯ä»¥é€‰æ‹©ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ›å»ºä¸€ä¸ªæ–°çš„&lt;code&gt;class&lt;/code&gt;ç»§æ‰¿è‡ªåŸæœ‰&lt;code&gt;class&lt;/code&gt;ï¼Œå¹¶æ·»åŠ å±æ€§&lt;/li&gt;
&lt;li&gt;é’ˆå¯¹å½“å‰&lt;code&gt;class&lt;/code&gt;è¿›è¡Œä¿®æ”¹&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åè€…çš„é€‚ç”¨èŒƒå›´æ›´çª„ä¸€äº›ï¼Œæ›´æ¥è¿‘mixinçš„å¤„ç†æ–¹å¼ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;@name
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Person&lt;/span&gt; &lt;/span&gt;{
  sayHi() {
    &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;`My name is: &lt;span class=&quot;hljs-subst&quot;&gt;${&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.name}&lt;/span&gt;`&lt;/span&gt;)
  }
}

&lt;span class=&quot;hljs-comment&quot;&gt;// åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ªPersonçš„åŒ¿åç±»&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;// ç›´æ¥è¿”å›å¹¶æ›¿æ¢åŸæœ‰çš„æ„é€ å‡½æ•°&lt;/span&gt;
&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;name&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;constructor&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;constructor&lt;/span&gt; &lt;/span&gt;{
    name = &lt;span class=&quot;hljs-string&quot;&gt;&#39;Niko&#39;&lt;/span&gt;
  }
}

&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; Person().sayHi()
&lt;/code&gt;&lt;/pre&gt;&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-7&quot;&gt;ä¿®æ”¹åŸæœ‰å±æ€§çš„æè¿°ç¬¦&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;@seal
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Person&lt;/span&gt; &lt;/span&gt;{
  sayHi() {}
}

&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;seal&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;constructor&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; descriptor = &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.getOwnPropertyDescriptor(&lt;span class=&quot;hljs-keyword&quot;&gt;constructor&lt;/span&gt;.prototype, &#39;sayHi&#39;)
  Object.defineProperty(&lt;span class=&quot;hljs-keyword&quot;&gt;constructor&lt;/span&gt;.prototype, &#39;sayHi&#39;, {
    ...descriptor,
    &lt;span class=&quot;hljs-attr&quot;&gt;writable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;
  })
}

Person.prototype.sayHi = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// æ— æ•ˆ&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-8&quot;&gt;ä½¿ç”¨é—­åŒ…æ¥å¢å¼ºè£…é¥°å™¨çš„åŠŸèƒ½&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨TSæ–‡æ¡£ä¸­è¢«ç§°ä¸ºè£…é¥°å™¨å·¥å‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å› ä¸º&lt;code&gt;@&lt;/code&gt;ç¬¦å·åè¾¹è·Ÿçš„æ˜¯ä¸€ä¸ªå‡½æ•°çš„å¼•ç”¨ï¼Œæ‰€ä»¥å¯¹äºmixinçš„å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ˜“çš„ä½¿ç”¨é—­åŒ…æ¥å®ç°ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;A&lt;/span&gt; &lt;/span&gt;{ say() { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; } }
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;B&lt;/span&gt; &lt;/span&gt;{ hi() { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; } }

@mixin(A, B)
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;C&lt;/span&gt; &lt;/span&gt;{ }

&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;mixin&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;...args&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-comment&quot;&gt;// è°ƒç”¨å‡½æ•°è¿”å›è£…é¥°å™¨å®é™…åº”ç”¨çš„å‡½æ•°&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;constructor&lt;/span&gt;) &lt;/span&gt;{
    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; arg &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; args) {
      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; key &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.getOwnPropertyNames(arg.prototype)) {
        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (key === &lt;span class=&quot;hljs-string&quot;&gt;&#39;constructor&#39;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;continue&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// è·³è¿‡æ„é€ å‡½æ•°&lt;/span&gt;
        &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.defineProperty(&lt;span class=&quot;hljs-keyword&quot;&gt;constructor&lt;/span&gt;.prototype, key, Object.getOwnPropertyDescriptor(arg.prototype, key))
      }
    }
  }
}

let c = new C()
console.log(c.say(), c.hi()) // 1, 2
&lt;/code&gt;&lt;/pre&gt;&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-9&quot;&gt;å¤šä¸ªè£…é¥°å™¨çš„åº”ç”¨&lt;/h4&gt;
&lt;p&gt;è£…é¥°å™¨æ˜¯å¯ä»¥åŒæ—¶åº”ç”¨å¤šä¸ªçš„ï¼ˆä¸ç„¶ä¹Ÿå°±å¤±å»äº†æœ€åˆçš„æ„ä¹‰ï¼‰ã€‚&lt;br&gt;
ç”¨æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;@decorator1
@decorator2
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;/span&gt;{ }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰§è¡Œçš„é¡ºåºä¸º&lt;code&gt;decorator2&lt;/code&gt; -&amp;gt; &lt;code&gt;decorator1&lt;/code&gt;ï¼Œç¦»&lt;code&gt;class&lt;/code&gt;å®šä¹‰æœ€è¿‘çš„å…ˆæ‰§è¡Œã€‚&lt;br&gt;
å¯ä»¥æƒ³åƒæˆå‡½æ•°åµŒå¥—çš„å½¢å¼ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;decorator1(decorator2(&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;/span&gt;{}))
&lt;/code&gt;&lt;/pre&gt;&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-10&quot;&gt;@Decorator åœ¨ Class æˆå‘˜ä¸­çš„ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;ç±»æˆå‘˜ä¸Šçš„ @Decorator åº”è¯¥æ˜¯åº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€å¤„äº†ï¼Œå‡½æ•°ï¼Œå±æ€§ï¼Œ&lt;code&gt;get&lt;/code&gt;ã€&lt;code&gt;set&lt;/code&gt;è®¿é—®å™¨ï¼Œè¿™å‡ å¤„éƒ½å¯ä»¥è®¤ä¸ºæ˜¯ç±»æˆå‘˜ã€‚&lt;br&gt;
åœ¨TSæ–‡æ¡£ä¸­è¢«åˆ†ä¸ºäº†&lt;code&gt;Method Decorator&lt;/code&gt;ã€&lt;code&gt;Accessor Decorator&lt;/code&gt;å’Œ&lt;code&gt;Property Decorator&lt;/code&gt;ï¼Œå®é™…ä¸Šå¦‚å‡ºä¸€è¾™ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºè¿™ç±»è£…é¥°å™¨ï¼Œä¼šæ¥æ”¶å¦‚ä¸‹ä¸‰ä¸ªå‚æ•°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¦‚æœè£…é¥°å™¨æŒ‚è½½äºé™æ€æˆå‘˜ä¸Šï¼Œåˆ™ä¼šè¿”å›æ„é€ å‡½æ•°ï¼Œå¦‚æœæŒ‚è½½äºå®ä¾‹æˆå‘˜ä¸Šåˆ™ä¼šè¿”å›ç±»çš„åŸå‹&lt;/li&gt;
&lt;li&gt;è£…é¥°å™¨æŒ‚è½½çš„æˆå‘˜åç§°&lt;/li&gt;
&lt;li&gt;æˆå‘˜çš„æè¿°ç¬¦ï¼Œä¹Ÿå°±æ˜¯&lt;code&gt;Object.getOwnPropertyDescriptor&lt;/code&gt;çš„è¿”å›å€¼&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Property Decorator&lt;/code&gt;ä¸ä¼šè¿”å›ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œä½†æ˜¯å¯ä»¥è‡ªå·±æ‰‹åŠ¨è·å–&lt;br&gt;
å‰ææ˜¯é™æ€æˆå‘˜ï¼Œè€Œéå®ä¾‹æˆå‘˜ï¼Œå› ä¸ºè£…é¥°å™¨éƒ½æ˜¯è¿è¡Œåœ¨ç±»åˆ›å»ºæ—¶ï¼Œè€Œå®ä¾‹æˆå‘˜æ˜¯åœ¨å®ä¾‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œçš„ï¼Œæ‰€ä»¥æ²¡æœ‰åŠæ³•è·å–å¯¹åº”çš„descriptor&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-11&quot;&gt;é™æ€æˆå‘˜ä¸å®ä¾‹æˆå‘˜åœ¨è¿”å›å€¼ä¸Šçš„åŒºåˆ«&lt;/h4&gt;
&lt;p&gt;å¯ä»¥ç¨å¾®æ˜ç¡®ä¸€ä¸‹ï¼Œé™æ€æˆå‘˜ä¸å®ä¾‹æˆå‘˜çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Model&lt;/span&gt; &lt;/span&gt;{
  &lt;span class=&quot;hljs-comment&quot;&gt;// å®ä¾‹æˆå‘˜&lt;/span&gt;
  method1 () {}
  method2 = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; {}

  &lt;span class=&quot;hljs-comment&quot;&gt;// é™æ€æˆå‘˜&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; method3 () {}
  &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; method4 = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; {}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;method1&lt;/code&gt;å’Œ&lt;code&gt;method2&lt;/code&gt;æ˜¯å®ä¾‹æˆå‘˜ï¼Œ&lt;code&gt;method1&lt;/code&gt;å­˜åœ¨äº&lt;code&gt;prototype&lt;/code&gt;ä¹‹ä¸Šï¼Œè€Œ&lt;code&gt;method2&lt;/code&gt;åªåœ¨å®ä¾‹åŒ–å¯¹è±¡ä»¥åæ‰æœ‰ã€‚&lt;br&gt;
ä½œä¸ºé™æ€æˆå‘˜çš„&lt;code&gt;method3&lt;/code&gt;å’Œ&lt;code&gt;method4&lt;/code&gt;ï¼Œä¸¤è€…çš„åŒºåˆ«åœ¨äºæ˜¯å¦å¯æšä¸¾æè¿°ç¬¦çš„è®¾ç½®ï¼Œæ‰€ä»¥å¯ä»¥ç®€å•åœ°è®¤ä¸ºï¼Œä¸Šè¿°ä»£ç è½¬æ¢ä¸ºES5ç‰ˆæœ¬åæ˜¯è¿™æ ·å­çš„ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Model&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-comment&quot;&gt;// æˆå‘˜ä»…åœ¨å®ä¾‹åŒ–æ—¶èµ‹å€¼&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.method2 = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;{}
}

&lt;span class=&quot;hljs-comment&quot;&gt;// æˆå‘˜è¢«å®šä¹‰åœ¨åŸå‹é“¾ä¸Š&lt;/span&gt;
&lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.defineProperty(Model.prototype, &lt;span class=&quot;hljs-string&quot;&gt;&#39;method1&#39;&lt;/span&gt;, {
  &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;{}, 
  &lt;span class=&quot;hljs-attr&quot;&gt;writable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, 
  &lt;span class=&quot;hljs-attr&quot;&gt;enumerable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;,  &lt;span class=&quot;hljs-comment&quot;&gt;// è®¾ç½®ä¸å¯è¢«æšä¸¾&lt;/span&gt;
  configurable: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;
})

&lt;span class=&quot;hljs-comment&quot;&gt;// æˆå‘˜è¢«å®šä¹‰åœ¨æ„é€ å‡½æ•°ä¸Šï¼Œä¸”æ˜¯é»˜è®¤çš„å¯è¢«æšä¸¾&lt;/span&gt;
Model.method4 = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;{}

&lt;span class=&quot;hljs-comment&quot;&gt;// æˆå‘˜è¢«å®šä¹‰åœ¨æ„é€ å‡½æ•°ä¸Š&lt;/span&gt;
&lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.defineProperty(Model, &lt;span class=&quot;hljs-string&quot;&gt;&#39;method3&#39;&lt;/span&gt;, {
  &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;{}, 
  &lt;span class=&quot;hljs-attr&quot;&gt;writable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, 
  &lt;span class=&quot;hljs-attr&quot;&gt;enumerable&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;,  &lt;span class=&quot;hljs-comment&quot;&gt;// è®¾ç½®ä¸å¯è¢«æšä¸¾&lt;/span&gt;
  configurable: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;
})
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œåªæœ‰&lt;code&gt;method2&lt;/code&gt;æ˜¯åœ¨å®ä¾‹åŒ–æ—¶æ‰èµ‹å€¼çš„ï¼Œä¸€ä¸ªä¸å­˜åœ¨çš„å±æ€§æ˜¯ä¸ä¼šæœ‰&lt;code&gt;descriptor&lt;/code&gt;çš„ï¼Œæ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆTSåœ¨é’ˆå¯¹&lt;code&gt;Property Decorator&lt;/code&gt;ä¸ä¼ é€’ç¬¬ä¸‰ä¸ªå‚æ•°çš„åŸå› ï¼Œè‡³äºä¸ºä»€ä¹ˆé™æ€æˆå‘˜ä¹Ÿæ²¡æœ‰ä¼ é€’&lt;code&gt;descriptor&lt;/code&gt;ï¼Œç›®å‰æ²¡æœ‰æ‰¾åˆ°åˆç†çš„è§£é‡Šï¼Œä½†æ˜¯å¦‚æœæ˜ç¡®çš„è¦ä½¿ç”¨ï¼Œæ˜¯å¯ä»¥æ‰‹åŠ¨è·å–çš„ã€‚&lt;/p&gt;
&lt;p&gt;å°±åƒä¸Šè¿°çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬é’ˆå¯¹å››ä¸ªæˆå‘˜éƒ½æ·»åŠ äº†è£…é¥°å™¨ä»¥åï¼Œ&lt;code&gt;method1&lt;/code&gt;å’Œ&lt;code&gt;method2&lt;/code&gt;ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯&lt;code&gt;Model.prototype&lt;/code&gt;ï¼Œè€Œ&lt;code&gt;method3&lt;/code&gt;å’Œ&lt;code&gt;method4&lt;/code&gt;çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯&lt;code&gt;Model&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Model&lt;/span&gt; &lt;/span&gt;{
  &lt;span class=&quot;hljs-comment&quot;&gt;// å®ä¾‹æˆå‘˜&lt;/span&gt;
  @instance
  method1 () {}
  @instance
  method2 = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; {}

  &lt;span class=&quot;hljs-comment&quot;&gt;// é™æ€æˆå‘˜&lt;/span&gt;
  @&lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; method3 () {}
  @&lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; method4 = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; {}
}

&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;instance&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;target&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(target.constructor === Model)
}

&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;static&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;target&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(target === Model)
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-12&quot;&gt;å‡½æ•°ï¼Œè®¿é—®å™¨ï¼Œå’Œå±æ€§è£…é¥°å™¨ä¸‰è€…ä¹‹é—´çš„åŒºåˆ«&lt;/h3&gt;
&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-13&quot;&gt;å‡½æ•°&lt;/h4&gt;
&lt;p&gt;é¦–å…ˆæ˜¯å‡½æ•°ï¼Œå‡½æ•°è£…é¥°å™¨çš„è¿”å›å€¼ä¼šé»˜è®¤ä½œä¸ºå±æ€§çš„&lt;code&gt;value&lt;/code&gt;æè¿°ç¬¦å­˜åœ¨ï¼Œå¦‚æœè¿”å›å€¼ä¸º&lt;code&gt;undefined&lt;/code&gt;åˆ™ä¼šå¿½ç•¥ï¼Œä½¿ç”¨ä¹‹å‰çš„&lt;code&gt;descriptor&lt;/code&gt;å¼•ç”¨ä½œä¸ºå‡½æ•°çš„æè¿°ç¬¦ã€‚&lt;br&gt;
æ‰€ä»¥é’ˆå¯¹æˆ‘ä»¬æœ€å¼€å§‹çš„ç»Ÿè®¡è€—æ—¶çš„é€»è¾‘å¯ä»¥è¿™ä¹ˆæ¥åšï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Model&lt;/span&gt; &lt;/span&gt;{
  @log1
  getData1() {}
  @log2
  getData2() {}
}

&lt;span class=&quot;hljs-comment&quot;&gt;// æ–¹æ¡ˆä¸€ï¼Œè¿”å›æ–°çš„valueæè¿°ç¬¦&lt;/span&gt;
&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;log1&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;tag, name, descriptor&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {
    ...descriptor,
    value(...args) {
      &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; start = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Date&lt;/span&gt;().valueOf()
      &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; descriptor.value.apply(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;, args)
      } &lt;span class=&quot;hljs-keyword&quot;&gt;finally&lt;/span&gt; {
        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; end = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Date&lt;/span&gt;().valueOf()
        &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;`start: &lt;span class=&quot;hljs-subst&quot;&gt;${start}&lt;/span&gt; end: &lt;span class=&quot;hljs-subst&quot;&gt;${end}&lt;/span&gt; consume: &lt;span class=&quot;hljs-subst&quot;&gt;${end - start}&lt;/span&gt;`&lt;/span&gt;)
      }
    }
  }
}

&lt;span class=&quot;hljs-comment&quot;&gt;// æ–¹æ¡ˆäºŒã€ä¿®æ”¹ç°æœ‰æè¿°ç¬¦&lt;/span&gt;
&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;log2&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;tag, name, descriptor&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; func = descriptor.value &lt;span class=&quot;hljs-comment&quot;&gt;// å…ˆè·å–ä¹‹å‰çš„å‡½æ•°&lt;/span&gt;

  &lt;span class=&quot;hljs-comment&quot;&gt;// ä¿®æ”¹å¯¹åº”çš„value&lt;/span&gt;
  descriptor.value = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;...args&lt;/span&gt;) &lt;/span&gt;{
    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; start = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Date&lt;/span&gt;().valueOf()
    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; func.apply(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;, args)
    } &lt;span class=&quot;hljs-keyword&quot;&gt;finally&lt;/span&gt; {
      &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; end = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Date&lt;/span&gt;().valueOf()
      &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;`start: &lt;span class=&quot;hljs-subst&quot;&gt;${start}&lt;/span&gt; end: &lt;span class=&quot;hljs-subst&quot;&gt;${end}&lt;/span&gt; consume: &lt;span class=&quot;hljs-subst&quot;&gt;${end - start}&lt;/span&gt;`&lt;/span&gt;)
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-14&quot;&gt;è®¿é—®å™¨&lt;/h4&gt;
&lt;p&gt;è®¿é—®å™¨å°±æ˜¯æ·»åŠ æœ‰&lt;code&gt;get&lt;/code&gt;ã€&lt;code&gt;set&lt;/code&gt;å‰ç¼€çš„å‡½æ•°ï¼Œç”¨äºæ§åˆ¶å±æ€§çš„èµ‹å€¼åŠå–å€¼æ“ä½œï¼Œåœ¨ä½¿ç”¨ä¸Šä¸å‡½æ•°æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œç”šè‡³åœ¨è¿”å›å€¼çš„å¤„ç†ä¸Šä¹Ÿæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚&lt;br&gt;
åªä¸è¿‡æˆ‘ä»¬éœ€è¦æŒ‰ç…§è§„å®šè®¾ç½®å¯¹åº”çš„&lt;code&gt;get&lt;/code&gt;æˆ–è€…&lt;code&gt;set&lt;/code&gt;æè¿°ç¬¦ç½¢äº†ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Modal&lt;/span&gt; &lt;/span&gt;{
  _name = &lt;span class=&quot;hljs-string&quot;&gt;&#39;Niko&#39;&lt;/span&gt;

  @prefix
  get name() { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;._name }
}

&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;prefix&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;target, name, descriptor&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {
    ...descriptor,
    get () {
      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;`wrap_&lt;span class=&quot;hljs-subst&quot;&gt;${&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;._name}&lt;/span&gt;`&lt;/span&gt;
    }
  }
}

&lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; Modal().name) &lt;span class=&quot;hljs-comment&quot;&gt;// wrap_Niko&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 class=&quot;heading&quot; data-id=&quot;heading-15&quot;&gt;å±æ€§&lt;/h4&gt;
&lt;p&gt;å¯¹äºå±æ€§çš„è£…é¥°å™¨ï¼Œæ˜¯æ²¡æœ‰è¿”å›&lt;code&gt;descriptor&lt;/code&gt;çš„ï¼Œå¹¶ä¸”è£…é¥°å™¨å‡½æ•°çš„è¿”å›å€¼ä¹Ÿä¼šè¢«å¿½ç•¥æ‰ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ä¿®æ”¹æŸä¸€ä¸ªé™æ€å±æ€§ï¼Œåˆ™éœ€è¦è‡ªå·±è·å–&lt;code&gt;descriptor&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Modal&lt;/span&gt; &lt;/span&gt;{
  @prefix
  &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; name1 = &lt;span class=&quot;hljs-string&quot;&gt;&#39;Niko&#39;&lt;/span&gt;
}

&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;prefix&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;target, name&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; descriptor = &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.getOwnPropertyDescriptor(target, name)

  &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.defineProperty(target, name, {
    ...descriptor,
    &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;`wrap_&lt;span class=&quot;hljs-subst&quot;&gt;${descriptor.value}&lt;/span&gt;`&lt;/span&gt;
  })
  
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; target
}

&lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(Modal.name1) &lt;span class=&quot;hljs-comment&quot;&gt;// wrap_Niko&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯¹äºä¸€ä¸ªå®ä¾‹çš„å±æ€§ï¼Œåˆ™æ²¡æœ‰ç›´æ¥ä¿®æ”¹çš„æ–¹æ¡ˆï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥ç»“åˆç€ä¸€äº›å…¶ä»–è£…é¥°å™¨æ¥æ›²çº¿æ•‘å›½ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªç±»ï¼Œä¼šä¼ å…¥å§“åå’Œå¹´é¾„ä½œä¸ºåˆå§‹åŒ–çš„å‚æ•°ï¼Œç„¶åæˆ‘ä»¬è¦é’ˆå¯¹è¿™ä¸¤ä¸ªå‚æ•°è®¾ç½®å¯¹åº”çš„æ ¼å¼æ ¡éªŒï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; validateConf = {} &lt;span class=&quot;hljs-comment&quot;&gt;// å­˜å‚¨æ ¡éªŒä¿¡æ¯&lt;/span&gt;

@validator
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Person&lt;/span&gt; &lt;/span&gt;{
  @validate(&lt;span class=&quot;hljs-string&quot;&gt;&#39;string&#39;&lt;/span&gt;)
  name
  @validate(&lt;span class=&quot;hljs-string&quot;&gt;&#39;number&#39;&lt;/span&gt;)
  age

  &lt;span class=&quot;hljs-keyword&quot;&gt;constructor&lt;/span&gt;(name, age) {
    &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.name = name
    &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.age = age
  }
}

&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;validator&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;constructor&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;constructor&lt;/span&gt; &lt;/span&gt;{
    &lt;span class=&quot;hljs-keyword&quot;&gt;constructor&lt;/span&gt;(...args) {
      &lt;span class=&quot;hljs-keyword&quot;&gt;super&lt;/span&gt;(...args)

      &lt;span class=&quot;hljs-comment&quot;&gt;// éå†æ‰€æœ‰çš„æ ¡éªŒä¿¡æ¯è¿›è¡ŒéªŒè¯&lt;/span&gt;
      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; [key, type] &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Object&lt;/span&gt;.entries(validateConf)) {
        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;[key] !== type) &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Error&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${key}&lt;/span&gt; must be &lt;span class=&quot;hljs-subst&quot;&gt;${type}&lt;/span&gt;`&lt;/span&gt;)
      }
    }
  }
}

&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;validate&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;type&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;target, name, descriptor&lt;/span&gt;) &lt;/span&gt;{
    &lt;span class=&quot;hljs-comment&quot;&gt;// å‘å…¨å±€å¯¹è±¡ä¸­ä¼ å…¥è¦æ ¡éªŒçš„å±æ€§ååŠç±»å‹&lt;/span&gt;
    validateConf[name] = type
  }
}

&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; Person(&lt;span class=&quot;hljs-string&quot;&gt;&#39;Niko&#39;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&#39;18&#39;&lt;/span&gt;)  &lt;span class=&quot;hljs-comment&quot;&gt;// throw new error: [age must be number]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é¦–å…ˆï¼Œåœ¨ç±»ä¸Šè¾¹æ·»åŠ è£…é¥°å™¨&lt;code&gt;@validator&lt;/code&gt;ï¼Œç„¶ååœ¨éœ€è¦æ ¡éªŒçš„ä¸¤ä¸ªå‚æ•°ä¸Šæ·»åŠ &lt;code&gt;@validate&lt;/code&gt;è£…é¥°å™¨ï¼Œä¸¤ä¸ªè£…é¥°å™¨ç”¨æ¥å‘ä¸€ä¸ªå…¨å±€å¯¹è±¡ä¼ å…¥ä¿¡æ¯ï¼Œæ¥è®°å½•å“ªäº›å±æ€§æ˜¯éœ€è¦è¿›è¡Œæ ¡éªŒçš„ã€‚&lt;br&gt;
ç„¶ååœ¨&lt;code&gt;validator&lt;/code&gt;ä¸­ç»§æ‰¿åŸæœ‰çš„ç±»å¯¹è±¡ï¼Œå¹¶åœ¨å®ä¾‹åŒ–ä¹‹åéå†åˆšæ‰è®¾ç½®çš„æ‰€æœ‰æ ¡éªŒä¿¡æ¯è¿›è¡ŒéªŒè¯ï¼Œå¦‚æœå‘ç°æœ‰ç±»å‹é”™è¯¯çš„ï¼Œç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚&lt;br&gt;
è¿™ä¸ªç±»å‹éªŒè¯çš„æ“ä½œå¯¹äºåŸ&lt;code&gt;Class&lt;/code&gt;æ¥è¯´å‡ ä¹æ˜¯æ— æ„ŸçŸ¥çš„ã€‚&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-16&quot;&gt;å‡½æ•°å‚æ•°è£…é¥°å™¨&lt;/h3&gt;
&lt;p&gt;æœ€åï¼Œè¿˜æœ‰ä¸€ä¸ªç”¨äºå‡½æ•°å‚æ•°çš„è£…é¥°å™¨ï¼Œè¿™ä¸ªè£…é¥°å™¨ä¹Ÿæ˜¯åƒå®ä¾‹å±æ€§ä¸€æ ·çš„ï¼Œæ²¡æœ‰åŠæ³•å•ç‹¬ä½¿ç”¨ï¼Œæ¯•ç«Ÿå‡½æ•°æ˜¯åœ¨è¿è¡Œæ—¶è°ƒç”¨çš„ï¼Œè€Œæ— è®ºæ˜¯ä½•ç§è£…é¥°å™¨ï¼Œéƒ½æ˜¯åœ¨å£°æ˜ç±»æ—¶ï¼ˆå¯ä»¥è®¤ä¸ºæ˜¯ä¼ªç¼–è¯‘æœŸï¼‰è°ƒç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;å‡½æ•°å‚æ•°è£…é¥°å™¨ä¼šæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç±»ä¼¼ä¸Šè¿°çš„æ“ä½œï¼Œç±»çš„åŸå‹æˆ–è€…ç±»çš„æ„é€ å‡½æ•°&lt;/li&gt;
&lt;li&gt;å‚æ•°æ‰€å¤„çš„å‡½æ•°åç§°&lt;/li&gt;
&lt;li&gt;å‚æ•°åœ¨å‡½æ•°ä¸­å½¢å‚ä¸­çš„ä½ç½®ï¼ˆå‡½æ•°ç­¾åä¸­çš„ç¬¬å‡ ä¸ªå‚æ•°ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆç€å‡½æ•°è£…é¥°å™¨æ¥å®Œæˆå¯¹å‡½æ•°å‚æ•°çš„ç±»å‹è½¬æ¢ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; parseConf = {}
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Modal&lt;/span&gt; &lt;/span&gt;{
  @parseFunc
  addOne(@parse(&lt;span class=&quot;hljs-string&quot;&gt;&#39;number&#39;&lt;/span&gt;) num) {
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; num + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;
  }
}

&lt;span class=&quot;hljs-comment&quot;&gt;// åœ¨å‡½æ•°è°ƒç”¨å‰æ‰§è¡Œæ ¼å¼åŒ–æ“ä½œ&lt;/span&gt;
&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;parseFunc&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;target, name, descriptor&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {
    ...descriptor,
    value (...arg) {
      &lt;span class=&quot;hljs-comment&quot;&gt;// è·å–æ ¼å¼åŒ–é…ç½®&lt;/span&gt;
      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; [index, type] &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; parseConf) {
        &lt;span class=&quot;hljs-keyword&quot;&gt;switch&lt;/span&gt; (type) {
          &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#39;number&#39;&lt;/span&gt;:  arg[index] = &lt;span class=&quot;hljs-built_in&quot;&gt;Number&lt;/span&gt;(arg[index])             &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;
          &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#39;string&#39;&lt;/span&gt;:  arg[index] = &lt;span class=&quot;hljs-built_in&quot;&gt;String&lt;/span&gt;(arg[index])             &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;
          &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#39;boolean&#39;&lt;/span&gt;: arg[index] = &lt;span class=&quot;hljs-built_in&quot;&gt;String&lt;/span&gt;(arg[index]) === &lt;span class=&quot;hljs-string&quot;&gt;&#39;true&#39;&lt;/span&gt;  &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;
        }
      }

      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; descriptor.value.apply(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;, arg)
    }
  }
}

&lt;span class=&quot;hljs-comment&quot;&gt;// å‘å…¨å±€å¯¹è±¡ä¸­æ·»åŠ å¯¹åº”çš„æ ¼å¼åŒ–ä¿¡æ¯&lt;/span&gt;
&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;type&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;target, name, index&lt;/span&gt;) &lt;/span&gt;{
    parseConf[index] = type
  }
}

&lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; Modal().addOne(&lt;span class=&quot;hljs-string&quot;&gt;&#39;10&#39;&lt;/span&gt;)) &lt;span class=&quot;hljs-comment&quot;&gt;// 11&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-17&quot;&gt;ä½¿ç”¨è£…é¥°å™¨å®ç°ä¸€ä¸ªæœ‰è¶£çš„Koaå°è£…&lt;/h2&gt;
&lt;p&gt;æ¯”å¦‚åœ¨å†™Nodeæ¥å£æ—¶ï¼Œå¯èƒ½æ˜¯ç”¨çš„&lt;code&gt;koa&lt;/code&gt;æˆ–è€…&lt;code&gt;express&lt;/code&gt;ï¼Œä¸€èˆ¬æ¥è¯´å¯èƒ½è¦å¤„ç†å¾ˆå¤šçš„è¯·æ±‚å‚æ•°ï¼Œæœ‰æ¥è‡ª&lt;code&gt;headers&lt;/code&gt;çš„ï¼Œæœ‰æ¥è‡ª&lt;code&gt;body&lt;/code&gt;çš„ï¼Œç”šè‡³æœ‰æ¥è‡ª&lt;code&gt;query&lt;/code&gt;ã€&lt;code&gt;cookie&lt;/code&gt;çš„ã€‚&lt;br&gt;
æ‰€ä»¥å¾ˆæœ‰å¯èƒ½åœ¨&lt;code&gt;router&lt;/code&gt;çš„å¼€å¤´æ•°è¡Œéƒ½æ˜¯è¿™æ ·çš„æ“ä½œï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;router.get(&lt;span class=&quot;hljs-string&quot;&gt;&#39;/&#39;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (ctx, next) =&amp;gt; {
  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; id = ctx.query.id
  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; uid = ctx.cookies.get(&lt;span class=&quot;hljs-string&quot;&gt;&#39;uid&#39;&lt;/span&gt;)
  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; device = ctx.header[&lt;span class=&quot;hljs-string&quot;&gt;&#39;device&#39;&lt;/span&gt;]
})
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»¥åŠå¦‚æœæˆ‘ä»¬æœ‰å¤§é‡çš„æ¥å£ï¼Œå¯èƒ½å°±ä¼šæœ‰å¤§é‡çš„&lt;code&gt;router.get&lt;/code&gt;ã€&lt;code&gt;router.post&lt;/code&gt;ã€‚&lt;br&gt;
ä»¥åŠå¦‚æœè¦é’ˆå¯¹æ¨¡å—è¿›è¡Œåˆ†ç±»ï¼Œå¯èƒ½è¿˜ä¼šæœ‰å¤§é‡çš„&lt;code&gt;new Router&lt;/code&gt;çš„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›ä»£ç éƒ½æ˜¯ä¸ä¸šåŠ¡é€»è¾‘æœ¬èº«æ— å…³çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥å°½å¯èƒ½çš„ç®€åŒ–è¿™äº›ä»£ç çš„å æ¯”ï¼Œè€Œä½¿ç”¨è£…é¥°å™¨å°±èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-18&quot;&gt;è£…é¥°å™¨çš„å‡†å¤‡&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// é¦–å…ˆï¼Œæˆ‘ä»¬è¦åˆ›å»ºå‡ ä¸ªç”¨æ¥å­˜å‚¨ä¿¡æ¯çš„å…¨å±€List&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; routerList      = []
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; controllerList  = []
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; parseList       = []
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; paramList       = []

&lt;span class=&quot;hljs-comment&quot;&gt;// è™½è¯´æˆ‘ä»¬è¦æœ‰ä¸€ä¸ªèƒ½å¤Ÿåˆ›å»ºRouterå®ä¾‹çš„è£…é¥°å™¨&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;// ä½†æ˜¯å¹¶ä¸ä¼šç›´æ¥å»åˆ›å»ºï¼Œè€Œæ˜¯åœ¨è£…é¥°å™¨æ‰§è¡Œçš„æ—¶å€™è¿›è¡Œä¸€æ¬¡æ³¨å†Œ&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Router&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;basename = &lt;span class=&quot;hljs-string&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;constrcutor&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {
    routerList.push({
      constrcutor,
      basename
    })
  }
}

&lt;span class=&quot;hljs-comment&quot;&gt;// ç„¶åæˆ‘ä»¬åœ¨åˆ›å»ºå¯¹åº”çš„Get Postè¯·æ±‚ç›‘å¬çš„è£…é¥°å™¨&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;// åŒæ ·çš„ï¼Œæˆ‘ä»¬å¹¶ä¸æ‰“ç®—å»ä¿®æ”¹ä»–çš„ä»»ä½•å±æ€§ï¼Œåªæ˜¯ä¸ºäº†è·å–å‡½æ•°çš„å¼•ç”¨&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Method&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;type&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;path&lt;/span&gt;) =&amp;gt;&lt;/span&gt; (target, name, descriptor) =&amp;gt; {
    controllerList.push({
      target,
      type,
      path,
      &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;: name,
      &lt;span class=&quot;hljs-attr&quot;&gt;controller&lt;/span&gt;: descriptor.value
    })
  }
}

&lt;span class=&quot;hljs-comment&quot;&gt;// æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦ç”¨æ¥æ ¼å¼åŒ–å‚æ•°çš„è£…é¥°å™¨&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Parse&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;type&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;target, name, index&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {
    parseList.push({
      target,
      type,
      &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;: name,
      index
    })
  }
}

&lt;span class=&quot;hljs-comment&quot;&gt;// ä»¥åŠæœ€åæˆ‘ä»¬è¦å¤„ç†çš„å„ç§å‚æ•°çš„è·å–&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Param&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;position&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;) =&amp;gt;&lt;/span&gt; (target, name, index) =&amp;gt; {
    paramList.push({
      target,
      key,
      position,
      &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;: name,
      index
    })
  }
}

&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; Body   = Param(&lt;span class=&quot;hljs-string&quot;&gt;&#39;body&#39;&lt;/span&gt;)
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; Header = Param(&lt;span class=&quot;hljs-string&quot;&gt;&#39;header&#39;&lt;/span&gt;)
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; Cookie = Param(&lt;span class=&quot;hljs-string&quot;&gt;&#39;cookie&#39;&lt;/span&gt;)
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; Query  = Param(&lt;span class=&quot;hljs-string&quot;&gt;&#39;query&#39;&lt;/span&gt;)
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; Get    = Method(&lt;span class=&quot;hljs-string&quot;&gt;&#39;get&#39;&lt;/span&gt;)
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; Post   = Method(&lt;span class=&quot;hljs-string&quot;&gt;&#39;post&#39;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-19&quot;&gt;KoaæœåŠ¡çš„å¤„ç†&lt;/h3&gt;
&lt;p&gt;ä¸Šè¾¹æ˜¯åˆ›å»ºäº†æ‰€æœ‰éœ€è¦ç”¨åˆ°çš„è£…é¥°å™¨ï¼Œä½†æ˜¯ä¹Ÿä»…ä»…æ˜¯æŠŠæˆ‘ä»¬æ‰€éœ€è¦çš„å„ç§ä¿¡æ¯å­˜äº†èµ·æ¥ï¼Œè€Œæ€ä¹ˆåˆ©ç”¨è¿™äº›è£…é¥°å™¨åˆ™æ˜¯ä¸‹ä¸€æ­¥éœ€è¦åšçš„äº‹æƒ…äº†ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; routers = []

&lt;span class=&quot;hljs-comment&quot;&gt;// éå†æ‰€æœ‰æ·»åŠ äº†è£…é¥°å™¨çš„Classï¼Œå¹¶åˆ›å»ºå¯¹åº”çš„Routerå¯¹è±¡&lt;/span&gt;
routerList.forEach(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt; =&amp;gt;&lt;/span&gt; {
  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; { basename, constrcutor } = item
  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; router = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; Router({
    &lt;span class=&quot;hljs-attr&quot;&gt;prefix&lt;/span&gt;: basename
  })

  controllerList
    .filter(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;i&lt;/span&gt; =&amp;gt;&lt;/span&gt; i.target === constrcutor.prototype)
    .forEach(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;controller&lt;/span&gt; =&amp;gt;&lt;/span&gt; {
      router[controller.type](controller.path, &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (ctx, next) =&amp;gt; {
        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; args = []
        &lt;span class=&quot;hljs-comment&quot;&gt;// è·å–å½“å‰å‡½æ•°å¯¹åº”çš„å‚æ•°è·å–&lt;/span&gt;
        paramList
          .filter( &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;param&lt;/span&gt; =&amp;gt;&lt;/span&gt; param.target === constrcutor.prototype &amp;amp;&amp;amp; param.method === controller.method )
          .map(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;param&lt;/span&gt; =&amp;gt;&lt;/span&gt; {
            &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; { index, key } = param
            &lt;span class=&quot;hljs-keyword&quot;&gt;switch&lt;/span&gt; (param.position) {
              &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#39;body&#39;&lt;/span&gt;:    args[index] = ctx.request.body[key] &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;
              &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#39;header&#39;&lt;/span&gt;:  args[index] = ctx.headers[key]      &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;
              &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#39;cookie&#39;&lt;/span&gt;:  args[index] = ctx.cookies.get(key)  &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;
              &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#39;query&#39;&lt;/span&gt;:   args[index] = ctx.query[key]        &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;
            }
          })

        &lt;span class=&quot;hljs-comment&quot;&gt;// è·å–å½“å‰å‡½æ•°å¯¹åº”çš„å‚æ•°æ ¼å¼åŒ–&lt;/span&gt;
        parseList
          .filter( &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;parse&lt;/span&gt; =&amp;gt;&lt;/span&gt; parse.target === constrcutor.prototype &amp;amp;&amp;amp; parse.method === controller.method )
          .map(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;parse&lt;/span&gt; =&amp;gt;&lt;/span&gt; {
            &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; { index } = parse
            &lt;span class=&quot;hljs-keyword&quot;&gt;switch&lt;/span&gt; (parse.type) {
              &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#39;number&#39;&lt;/span&gt;:  args[index] = &lt;span class=&quot;hljs-built_in&quot;&gt;Number&lt;/span&gt;(args[index])             &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;
              &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#39;string&#39;&lt;/span&gt;:  args[index] = &lt;span class=&quot;hljs-built_in&quot;&gt;String&lt;/span&gt;(args[index])             &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;
              &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#39;boolean&#39;&lt;/span&gt;: args[index] = &lt;span class=&quot;hljs-built_in&quot;&gt;String&lt;/span&gt;(args[index]) === &lt;span class=&quot;hljs-string&quot;&gt;&#39;true&#39;&lt;/span&gt;  &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;
            }
          })

        &lt;span class=&quot;hljs-comment&quot;&gt;// è°ƒç”¨å®é™…çš„å‡½æ•°ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘&lt;/span&gt;
        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; results = controller.controller(...args)

        ctx.body = results
      })
    })

  routers.push(router.routes())
})

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; app = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; Koa()

app.use(bodyParse())
app.use(compose(routers))

app.listen(&lt;span class=&quot;hljs-number&quot;&gt;12306&lt;/span&gt;, () =&amp;gt; &lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;&#39;server run as http://127.0.0.1:12306&#39;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šè¾¹çš„ä»£ç å°±å·²ç»æ­å»ºå‡ºæ¥äº†ä¸€ä¸ªKoaçš„å°è£…ï¼Œä»¥åŠåŒ…å«äº†å¯¹å„ç§è£…é¥°å™¨çš„å¤„ç†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è¿™äº›è£…é¥°å™¨çš„å®é™…åº”ç”¨äº†ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { Router, Get, Query, Parse } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;../decorators&quot;&lt;/span&gt;

@Router(&lt;span class=&quot;hljs-string&quot;&gt;&#39;&#39;&lt;/span&gt;)
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;/span&gt;{
  @Get(&lt;span class=&quot;hljs-string&quot;&gt;&#39;/&#39;&lt;/span&gt;)
  index (@Parse(&lt;span class=&quot;hljs-string&quot;&gt;&#39;number&#39;&lt;/span&gt;) @Query(&lt;span class=&quot;hljs-string&quot;&gt;&#39;id&#39;&lt;/span&gt;) id: number) {
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {
      &lt;span class=&quot;hljs-attr&quot;&gt;code&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;200&lt;/span&gt;,
      id,
      &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; id
    }
  }

  @Post(&lt;span class=&quot;hljs-string&quot;&gt;&#39;/detail&#39;&lt;/span&gt;)
  detail (
    @Parse(&lt;span class=&quot;hljs-string&quot;&gt;&#39;number&#39;&lt;/span&gt;) @Query(&lt;span class=&quot;hljs-string&quot;&gt;&#39;id&#39;&lt;/span&gt;) id: number, 
    @Parse(&lt;span class=&quot;hljs-string&quot;&gt;&#39;number&#39;&lt;/span&gt;) @Body(&lt;span class=&quot;hljs-string&quot;&gt;&#39;age&#39;&lt;/span&gt;) age: number
  ) {
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {
      &lt;span class=&quot;hljs-attr&quot;&gt;code&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;200&lt;/span&gt;,
      &lt;span class=&quot;hljs-attr&quot;&gt;age&lt;/span&gt;: age + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¾ˆè½»æ˜“çš„å°±å®ç°äº†ä¸€ä¸ª&lt;code&gt;router&lt;/code&gt;çš„åˆ›å»ºï¼Œè·¯å¾„ã€methodçš„å¤„ç†ï¼ŒåŒ…æ‹¬å„ç§å‚æ•°çš„è·å–ï¼Œç±»å‹è½¬æ¢ã€‚&lt;br&gt;
å°†å„ç§éä¸šåŠ¡é€»è¾‘ç›¸å…³çš„ä»£ç ç»Ÿç»Ÿäº¤ç”±è£…é¥°å™¨æ¥åšï¼Œè€Œå‡½æ•°æœ¬èº«åªè´Ÿè´£å¤„ç†è‡ªèº«é€»è¾‘å³å¯ã€‚&lt;br&gt;
è¿™é‡Œæœ‰å®Œæ•´çš„ä»£ç ï¼š&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FJiasm%2Fnotebook%2Ftree%2Fmaster%2Flabs%2Fdemo%2Ftypescript%2Fkoa-decorators&quot; title=&quot;https://github.com/Jiasm/notebook/tree/master/labs/demo/typescript/koa-decorators&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;GitHub&lt;/a&gt;ã€‚å®‰è£…ä¾èµ–å&lt;code&gt;npm start&lt;/code&gt;å³å¯çœ‹åˆ°æ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·å¼€å‘å¸¦æ¥çš„å¥½å¤„å°±æ˜¯ï¼Œè®©ä»£ç å¯è¯»æ€§å˜å¾—æ›´é«˜ï¼Œåœ¨å‡½æ•°ä¸­æ›´ä¸“æ³¨çš„åšè‡ªå·±åº”è¯¥åšçš„äº‹æƒ…ã€‚&lt;br&gt;
è€Œä¸”è£…é¥°å™¨æœ¬èº«å¦‚æœåå­—èµ·çš„è¶³å¤Ÿå¥½çš„å¥½ï¼Œä¹Ÿæ˜¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥å½“ä½œæ–‡æ¡£æ³¨é‡Šæ¥çœ‹å¾…äº†ï¼ˆJavaä¸­æœ‰ä¸ªç±»ä¼¼çš„ç©æ„å„¿å«åšæ³¨è§£ï¼‰ã€‚&lt;/p&gt;
&lt;h2 class=&quot;heading&quot; data-id=&quot;heading-20&quot;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;åˆç†åˆ©ç”¨è£…é¥°å™¨å¯ä»¥æå¤§çš„æé«˜å¼€å‘æ•ˆç‡ï¼Œå¯¹ä¸€äº›éé€»è¾‘ç›¸å…³çš„ä»£ç è¿›è¡Œå°è£…æç‚¼èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®Œæˆé‡å¤æ€§çš„å·¥ä½œï¼ŒèŠ‚çœæ—¶é—´ã€‚&lt;br&gt;
ä½†æ˜¯ç³–å†å¥½åƒï¼Œä¹Ÿä¸è¦åƒå¤ªå¤šï¼Œå®¹æ˜“åç‰™é½¿çš„ï¼ŒåŒæ ·çš„æ»¥ç”¨è£…é¥°å™¨ä¹Ÿä¼šä½¿ä»£ç æœ¬èº«é€»è¾‘å˜å¾—æ‰‘æœ”è¿·ç¦»ï¼Œå¦‚æœç¡®å®šä¸€æ®µä»£ç ä¸ä¼šåœ¨å…¶ä»–åœ°æ–¹ç”¨åˆ°ï¼Œæˆ–è€…ä¸€ä¸ªå‡½æ•°çš„æ ¸å¿ƒé€»è¾‘å°±æ˜¯è¿™äº›ä»£ç ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦å°†å®ƒå–å‡ºæ¥ä½œä¸ºä¸€ä¸ªè£…é¥°å™¨æ¥å­˜åœ¨ã€‚&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-21&quot;&gt;å‚è€ƒèµ„æ–™&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fwww.typescriptlang.org%2Fdocs%2Fhandbook%2Fdecorators.html&quot; title=&quot;https://www.typescriptlang.org/docs/handbook/decorators.html&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;typescript | decorators&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Ftypestack%2Frouting-controllers&quot; title=&quot;https://github.com/typestack/routing-controllers&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;koaç¤ºä¾‹çš„åŸç‰ˆï¼Œç®€åŒ–ä»£ç ä¾¿äºä¸¾ä¾‹&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-22&quot;&gt;One more thing&lt;/h3&gt;
&lt;p&gt;æˆ‘å¸ç°åœ¨å¤§é‡æ‹›äººå’¯ï¼Œå‰ç«¯ã€Nodeæ–¹å‘éƒ½æœ‰HC&lt;br&gt;
å…¬å¸åï¼š&lt;strong&gt;Blued&lt;/strong&gt;ï¼Œåæ ‡å¸éƒ½æœé˜³åŒäº•&lt;br&gt;
ä¸»è¦æŠ€æœ¯æ ˆæ˜¯Reactï¼Œä¹Ÿä¼šæœ‰æœºä¼šç©ReactNativeå’ŒElectron&lt;br&gt;
Nodeæ–¹å‘8.xç‰ˆæœ¬+koa æ–°é¡¹ç›®ä¼šä»¥TSä¸ºä¸»&lt;br&gt;
æœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è”ç³»æˆ‘è¯¦è°ˆï¼š&lt;br&gt;
email: jiashunming@blued.com&lt;br&gt;
wechat: github_jiasm&lt;/p&gt;
</description><link>https://juejin.cn/post/6844903635168526343</link><guid isPermaLink="false">https://juejin.cn/post/6844903635168526343</guid><pubDate>Mon, 09 Jul 2018 01:28:14 GMT</pubDate><author>Jiasm</author><category>å‰ç«¯</category><category>Node.js</category><category>JavaScript</category><category>koa</category></item><item><title>Reactæºç åˆ†æ - äº‹ä»¶æœºåˆ¶</title><description>&lt;p&gt;Reactçš„äº‹ä»¶æœºåˆ¶è¿˜æ˜¯å¾ˆå¥½ç©çš„ï¼Œå…¶ä¸­æ¨¡æ‹Ÿäº‹ä»¶ä¼ é€’å’Œåˆ©ç”¨documentå§”æ‰˜å¤§éƒ¨åˆ†äº‹ä»¶çš„æƒ³æ³•æ¯”è¾ƒæœ‰æ„æ€ã€‚&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-0&quot;&gt;äº‹ä»¶æœºåˆ¶æµç¨‹å›¾&lt;/h3&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;event-react&quot; src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/2/26/161cdbf9593d78f9~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-1&quot;&gt;ä»£ç åˆ†æ&lt;/h3&gt;
&lt;p&gt;ï¼ˆä»£ç ä»…åŒ…å«æ¶‰åŠäº‹ä»¶å‚æ•°çš„éƒ¨åˆ†ï¼‰&lt;/p&gt;
&lt;p&gt;_updateDOMPropertiesæ˜¯äº‹ä»¶å‚æ•°å¤„ç†çš„å…¥å£ï¼Œåªè¦æ³¨æ„enqueuePutListenerè¿™ä¸ªæ–¹æ³•å°±å¥½äº†ï¼Œè¿™æ˜¯æ³¨å†Œäº‹ä»¶çš„å…¥å£å‡½æ•°ã€‚registrationNameModuleså˜é‡ä¿å­˜äº‹ä»¶ç±»å‹å’Œå¯¹åº”çš„æ–¹æ³•çš„æ˜ å°„çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚å›¾ï¼š&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/2/26/161cdbf95a27460e~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; alt=&quot;registrationnamemodules&quot; width=&quot;539&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;
&lt;/p&gt;
&lt;p&gt;è¿™äº›æ˜ å°„çš„åˆå§‹åŒ–çš„åœ°æ–¹åœ¨ã€ŠReactæºç åˆ†æ - ç»„ä»¶åˆæ¬¡æ¸²æŸ“ã€‹è§£é‡Šè¿‡äº†ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;_updateDOMProperties: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;lastProps, nextProps, transaction&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; propKey;
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; styleName;
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; styleUpdates;
  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (propKey &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; lastProps) {
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (nextProps.hasOwnProperty(propKey) || !lastProps.hasOwnProperty(propKey) || lastProps[propKey] == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;hljs-keyword&quot;&gt;continue&lt;/span&gt;;
    }
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (registrationNameModules.hasOwnProperty(propKey)) {
      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (lastProps[propKey]) {
        &lt;span class=&quot;hljs-comment&quot;&gt;// Only call deleteListener if there was a listener previously or&lt;/span&gt;
        &lt;span class=&quot;hljs-comment&quot;&gt;// else willDeleteListener gets called when there wasn&#39;t actually a&lt;/span&gt;
        &lt;span class=&quot;hljs-comment&quot;&gt;// listener (e.g., onClick={null})&lt;/span&gt;
        deleteListener(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;, propKey);
      }
    }
  }
  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (propKey &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; nextProps) {
    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; nextProp = nextProps[propKey];
    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; lastProp = propKey === STYLE ? &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;._previousStyleCopy : lastProps != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; ? lastProps[propKey] : &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;;
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!nextProps.hasOwnProperty(propKey) || nextProp === lastProp || nextProp == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; lastProp == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;hljs-keyword&quot;&gt;continue&lt;/span&gt;;
    }
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (registrationNameModules.hasOwnProperty(propKey)) { &lt;span class=&quot;hljs-comment&quot;&gt;// å¤„ç†äº‹ä»¶å‚æ•°ã€‚&lt;/span&gt;
      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (nextProp) {
        enqueuePutListener(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;, propKey, nextProp, transaction); &lt;span class=&quot;hljs-comment&quot;&gt;// æ³¨å†Œäº‹ä»¶ï¼Œå§”æ‰˜åˆ°å±äºçš„documentä¸Š&lt;/span&gt;
      } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (lastProp) {
        deleteListener(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;, propKey);
      }
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;enqueuePutListener&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;listenTo&lt;/li&gt;
&lt;li&gt;putListener&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;enqueuePutListener&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;inst, registrationName, listener, transaction&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; containerInfo = inst._nativeContainerInfo;
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; doc = containerInfo._ownerDocument; &lt;span class=&quot;hljs-comment&quot;&gt;// å¤§éƒ¨åˆ†çš„äº‹ä»¶éƒ½è¢«åˆ°å¯¹åº”çš„documentä¸Š&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!doc) { &lt;span class=&quot;hljs-comment&quot;&gt;// ssr&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;// Server rendering.&lt;/span&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;
  }
  listenTo(registrationName, doc);
  transaction.getReactMountReady().enqueue(putListener, {
    &lt;span class=&quot;hljs-attr&quot;&gt;inst&lt;/span&gt;: inst,
    &lt;span class=&quot;hljs-attr&quot;&gt;registrationName&lt;/span&gt;: registrationName,
    &lt;span class=&quot;hljs-attr&quot;&gt;listener&lt;/span&gt;: listener
  });
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;listenTo&lt;/strong&gt;æ˜¯å°†äº‹ä»¶å§”æ‰˜åˆ°documentçš„æ–¹æ³•ï¼Œå¤§éƒ¨åˆ†äº‹ä»¶æ˜¯å§”æ‰˜åˆ°documentä¸Šçš„ã€‚ä½†æ˜¯å› ä¸ºdocumentä¸Šèƒ½å¤Ÿcatchçš„äº‹ä»¶ç±»å‹çš„é™åˆ¶(&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fwww.w3.org%2FTR%2F2000%2FREC-DOM-Level-2-Events-20001113%2Fevents.html%23Events-DocumentEvent&quot; title=&quot;https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-DocumentEvent&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;Document Object Model Events&lt;/a&gt;)ï¼Œä¸æ˜¯æ‰€æœ‰çš„äº‹ä»¶ç±»å‹éƒ½å§”æ‰˜åˆ°documentï¼Œå°‘éƒ¨åˆ†æ˜¯ç›´æ¥å§”æ‰˜åˆ°å…ƒç´ æœ¬èº«ä¸Šçš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;putListener&lt;/strong&gt;å°†å¯¹åº”çš„ç±»å‹çš„äº‹ä»¶ã€äº‹ä»¶çš„ç›®æ ‡å¯¹è±¡å’Œäº‹ä»¶è§¦å‘æ—¶æ‰§è¡Œçš„æ–¹æ³•æ·»åŠ åˆ°listenerBankå¯¹è±¡ä¸­ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;listenTo: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;registrationName, contentDocumentHandle&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; mountAt = contentDocumentHandle;
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; isListening = getListeningForDocument(mountAt);
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; dependencies = EventPluginRegistry.registrationNameDependencies[registrationName];

  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; topLevelTypes = EventConstants.topLevelTypes;
  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; dependencies.length; i++) {
    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; dependency = dependencies[i];
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!(isListening.hasOwnProperty(dependency) &amp;amp;&amp;amp; isListening[dependency])) {
      &lt;span class=&quot;hljs-comment&quot;&gt;// å…ˆåˆ¤æ–­å…ˆå‡ ä¸ªéœ€è¦ç‰¹æ®Šå¤„ç†çš„äº‹ä»¶ï¼Œä¸»è¦éƒ½æ˜¯å…¼å®¹æ€§çš„åŸå› ã€‚&lt;/span&gt;
      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (...) {
        ......
      } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (topEventMapping.hasOwnProperty(dependency)) {
        ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(dependency, topEventMapping[dependency], mountAt);
      }
      isListening[dependency] = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;
    }
  }
}

&lt;span class=&quot;hljs-comment&quot;&gt;// å†’æ³¡é˜¶æ®µçš„è§¦å‘çš„äº‹ä»¶çš„å§”æ‰˜&lt;/span&gt;
trapBubbledEvent: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;topLevelType, handlerBaseName, handle&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelType, handlerBaseName, handle);
},

&lt;span class=&quot;hljs-comment&quot;&gt;// æ•è·é˜¶æ®µçš„è§¦å‘çš„äº‹ä»¶çš„å§”æ‰˜&lt;/span&gt;
trapCapturedEvent: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;topLevelType, handlerBaseName, handle&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelType, handlerBaseName, handle);
},

&lt;span class=&quot;hljs-attr&quot;&gt;trapBubbledEvent&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;topLevelType, handlerBaseName, handle&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; EventListener.listen(element, handlerBaseName, ReactEventListener.dispatchEvent.bind(&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, topLevelType));
},

&lt;span class=&quot;hljs-attr&quot;&gt;trapCapturedEvent&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;topLevelType, handlerBaseName, handle&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; EventListener.capture(element, handlerBaseName, ReactEventListener.dispatchEvent.bind(&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, topLevelType));
},

&lt;span class=&quot;hljs-attr&quot;&gt;listen&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;listen&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;target, eventType, callback&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (target.addEventListener) {
    target.addEventListener(eventType, callback, &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;);
  }
},

&lt;span class=&quot;hljs-attr&quot;&gt;capture&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;capture&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;target, eventType, callback&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (target.addEventListener) {
    target.addEventListener(eventType, callback, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);
  }
},
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é‡ç‚¹åœ¨äºæ‰€æœ‰çš„å§”æ‰˜çš„äº‹ä»¶çš„å›è°ƒå‡½æ•°éƒ½æ˜¯ReactEventListener.dispatchEventã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;dispatchEvent: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;topLevelType, nativeEvent&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-comment&quot;&gt;// bookKeepingçš„åˆå§‹åŒ–ä½¿ç”¨äº†reactåœ¨æºç ä¸­ç”¨åˆ°çš„å¯¹è±¡æ± çš„æ–¹æ³•æ¥é¿å…å¤šä½™çš„åƒåœ¾å›æ”¶ã€‚&lt;/span&gt;
  &lt;span class=&quot;hljs-comment&quot;&gt;// bookKeepingçš„ä½œç”¨çœ‹taçš„å®šä¹‰å°±çŸ¥é“äº†ï¼Œå°±æ˜¯ä¸€ä¸ªç”¨æ¥ä¿å­˜è¿‡ç¨‹ä¸­ä¼šä½¿ç”¨åˆ°çš„å˜é‡çš„å¯¹è±¡ã€‚&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bookKeeping = TopLevelCallbackBookKeeping.getPooled(topLevelType, nativeEvent);
  &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {
    ReactUpdates.batchedUpdates(handleTopLevelImpl, bookKeeping);
  } &lt;span class=&quot;hljs-keyword&quot;&gt;finally&lt;/span&gt; {
    TopLevelCallbackBookKeeping.release(bookKeeping);
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;handleTopLevelImplæ–¹æ³•éå†äº‹ä»¶è§¦å‘å¯¹è±¡ä»¥åŠå…¶çš„çˆ¶çº§å…ƒç´ ï¼ˆäº‹ä»¶ä¼ é€’ï¼‰ï¼Œå¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œ_handleTopLevelæ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;handleTopLevelImpl&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;bookKeeping&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; nativeEventTarget = getEventTarget(bookKeeping.nativeEvent);
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; targetInst = ReactDOMComponentTree.getClosestInstanceFromNode(nativeEventTarget);
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; ancestor = targetInst;
  &lt;span class=&quot;hljs-keyword&quot;&gt;do&lt;/span&gt; {
    bookKeeping.ancestors.push(ancestor);
    ancestor = ancestor &amp;amp;&amp;amp; findParent(ancestor);
  } &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (ancestor);

  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; bookKeeping.ancestors.length; i++) {
    targetInst = bookKeeping.ancestors[i];
    ReactEventListener._handleTopLevel(bookKeeping.topLevelType, targetInst, bookKeeping.nativeEvent, getEventTarget(bookKeeping.nativeEvent));
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;handleTopLevelæ ¹æ®äº‹ä»¶å¯¹è±¡ä»¥åŠè§¦å‘çš„äº‹ä»¶ç±»å‹æå–å‡ºæ‰€æœ‰éœ€è¦è¢«æ‰§è¡Œçš„äº‹ä»¶ä»¥åŠå¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œç»Ÿä¸€ç”±runEventQueueInBatchæ‰§è¡Œã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;handleTopLevel: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;topLevelType, targetInst, nativeEvent, nativeEventTarget&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; events = EventPluginHub.extractEvents(topLevelType, targetInst, nativeEvent, nativeEventTarget);
  runEventQueueInBatch(events);
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;extractEventsæ–¹æ³•è°ƒç”¨äº†å¯¹åº”çš„pluginçš„extractEventsæ–¹æ³•æ¥è·å–å¯¹åº”çš„pluginç±»å‹çš„éœ€è¦æ‰§è¡Œçš„äº‹ä»¶ï¼Œç„¶åaccumulateIntoåˆ°ä¸€èµ·ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;extractEvents: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;topLevelType, targetInst, nativeEvent, nativeEventTarget&lt;/span&gt;) &lt;/span&gt;{
   &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; events;
   &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; plugins = EventPluginRegistry.plugins;
   &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; plugins.length; i++) {
     &lt;span class=&quot;hljs-comment&quot;&gt;// Not every plugin in the ordering may be loaded at runtime.&lt;/span&gt;
     &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; possiblePlugin = plugins[i];
     &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (possiblePlugin) {
       &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; extractedEvents = possiblePlugin.extractEvents(topLevelType, targetInst, nativeEvent, nativeEventTarget);
       &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (extractedEvents) {
         events = accumulateInto(events, extractedEvents);
       }
     }
   }
   &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; events;
 }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;pluginçš„extractEventsæ–¹æ³•ä¸­çš„æœ‰æ„æ€çš„åœ°æ–¹åœ¨äº &lt;strong&gt;EventPropagators.accumulateTwoPhaseDispatches(event)&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;p&gt;EventPropagators.accumulateTwoPhaseDispatchesä¸­æ¨¡æ‹Ÿäº†äº‹ä»¶ä¼ é€’çš„è¿‡ç¨‹å³ï¼šcapture -&amp;gt; target -&amp;gt; bubble çš„è¿‡ç¨‹ï¼Œå°†è¿™ä¸ªè·¯å¾„ä¸Šçš„æ‰€æœ‰çš„ç¬¦åˆäº‹ä»¶ç±»å‹çš„å›è°ƒå‡½æ•°ä»¥åŠå¯¹åº”çš„å…ƒç´ æŒ‰ç…§äº‹ä»¶ä¼ é€’çš„é¡ºåºè¿”å›ã€‚&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/2/26/161cdbf95a3f8121~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; width=&quot;400&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;
&lt;/p&gt;
&lt;p&gt;ï¼ˆå›¾ç‰‡æ¥è‡ª&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fwww.w3.org%2FTR%2FDOM-Level-3-Events%2F%23event-flow&quot; title=&quot;https://www.w3.org/TR/DOM-Level-3-Events/#event-flow&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;Event dispatch and DOM event flow&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;traverseTwoPhase&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;inst, fn, arg&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; path = [];
  &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (inst) {
    path.push(inst);
    inst = inst._nativeParent;
  }
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i;
  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (i = path.length; i-- &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;) {
    fn(path[i], &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;, arg);
  }
  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; path.length; i++) {
    fn(path[i], &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, arg);
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;traverseTwoPhaseæ–¹æ³•æ¨¡æ‹Ÿäº†äº‹ä»¶ä¼ é€’çš„è¿‡ç¨‹å¹¶ä¸”è·å–å¯¹åº”çš„å›è°ƒå‡½æ•°å’Œäº‹ä»¶å¯¹è±¡ä¿å­˜åœ¨reactåˆæˆçš„eventå¯¹è±¡çš„_dispatchListenerså’Œ_dispatchInstancesä¸Š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;accumulateDirectionalDispatches&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;inst, upwards, event&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; phase = upwards ? PropagationPhases.bubbled : PropagationPhases.captured;
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; listener = listenerAtPhase(inst, event, phase);
  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (listener) {
    &lt;span class=&quot;hljs-comment&quot;&gt;// event._dispatchListenersç»“æœå°±æ˜¯è¿™ä¸ªeventåœ¨event flowçš„è¿‡ç¨‹ä¸­ä¼šè§¦å‘é‚£äº›listenterçš„callbackã€æŒ‰ç…§event flowçš„é¡ºåºpushåˆ°ä¸€ä¸ªæ•°ç»„ä¸­äº†ã€‘&lt;/span&gt;
    event._dispatchListeners = accumulateInto(event._dispatchListeners, listener);
    event._dispatchInstances = accumulateInto(event._dispatchInstances, inst);
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æŸ¥è¯¢listenerå’Œå¯¹åº”çš„instä½¿ç”¨çš„æ˜¯äº‹ä»¶çš„ç±»å‹ä»¥åŠ_rootNodeIDï¼ŒlistenerBankä¸­ä¿å­˜äº†å¯¹åº”ä¸€ä¸ªç±»å‹ä¸‹å…ƒç´ çš„å›è°ƒå‡½æ•°ï¼š&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/2/26/161cdbf95a22ace2~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png&quot; alt=&quot;listenerBank&quot; width=&quot;200&quot; loading=&quot;lazy&quot; referrerpolicy=&quot;no-referrer&quot;&gt;
&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;listenerAtPhase&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;inst, event, propagationPhase&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; registrationName = event.dispatchConfig.phasedRegistrationNames[propagationPhase];
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; getListener(inst, registrationName);
}

getListener: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;inst, registrationName&lt;/span&gt;) &lt;/span&gt;{
    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bankForRegistrationName = listenerBank[registrationName];
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; bankForRegistrationName &amp;amp;&amp;amp; bankForRegistrationName[inst._rootNodeID];
  },
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯¹äºlistenerBankå†…å®¹çš„ç”Ÿæˆç”±ä¹‹å‰è¯´çš„ç¬¬äºŒä¸ªä¸»è¦æ–¹æ³•putListenerå®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;putListener&lt;/strong&gt; ä½¿ç”¨äº‹åŠ¡çš„æ–¹å¼ç»Ÿä¸€åœ¨ReactMountReadyé˜¶æ®µæ‰§è¡Œã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;putListener: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;inst, registrationName, listener&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bankForRegistrationName = listenerBank[registrationName] || (listenerBank[registrationName] = {});
  bankForRegistrationName[inst._rootNodeID] = listener;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨extractEventsäº†å¯¹åº”è§¦å‘çš„äº‹ä»¶ç±»å‹çš„eventsåé€šè¿‡runEventQueueInBatch(events)å°†æ‰€æœ‰çš„åˆæˆäº‹ä»¶æ”¾åˆ°äº‹ä»¶é˜Ÿåˆ—é‡Œé¢ï¼Œç¬¬äºŒæ­¥æ˜¯é€ä¸ªæ‰§è¡Œ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs javascript&quot; lang=&quot;javascript&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;runEventQueueInBatch&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;events&lt;/span&gt;) &lt;/span&gt;{
  EventPluginHub.enqueueEvents(events);
  EventPluginHub.processEventQueue(&lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;);
}

&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;executeDispatchesInOrder&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;event, simulated&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; dispatchListeners = event._dispatchListeners;
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; dispatchInstances = event._dispatchInstances;
  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (process.env.NODE_ENV !== &lt;span class=&quot;hljs-string&quot;&gt;&#39;production&#39;&lt;/span&gt;) {
    validateEventDispatches(event);
  }
  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;Array&lt;/span&gt;.isArray(dispatchListeners)) {
    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; dispatchListeners.length; i++) {
      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (event.isPropagationStopped()) {
        &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;;
      }
      &lt;span class=&quot;hljs-comment&quot;&gt;// Listeners and Instances are two parallel arrays that are always in sync.&lt;/span&gt;
      executeDispatch(event, simulated, dispatchListeners[i], dispatchInstances[i]);
    }
  } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (dispatchListeners) {
    executeDispatch(event, simulated, dispatchListeners, dispatchInstances);
  }
  event._dispatchListeners = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;
  event._dispatchInstances = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;
}

&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;executeDispatch&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;event, simulated, listener, inst&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; type = event.type || &lt;span class=&quot;hljs-string&quot;&gt;&#39;unknown-event&#39;&lt;/span&gt;;
  event.currentTarget = EventPluginUtils.getNodeFromInstance(inst);
  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (simulated) {
    ReactErrorUtils.invokeGuardedCallbackWithCatch(type, listener, event);
  } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {
    ReactErrorUtils.invokeGuardedCallback(type, listener, event);
  }
  event.currentTarget = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;
}

&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;invokeGuardedCallback&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;name, func, a, b&lt;/span&gt;) &lt;/span&gt;{
  &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; func(a, b);
  } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (x) {
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (caughtError === &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {
      caughtError = x;
    }
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;;
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-2&quot;&gt;æ€»ç»“&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç»Ÿä¸€çš„åˆ†å‘å‡½æ•°dispatchEventã€‚&lt;/li&gt;
&lt;li&gt;Reactçš„äº‹ä»¶å¯¹è±¡æ˜¯åˆæˆå¯¹è±¡(SyntheticEvent)ã€‚&lt;/li&gt;
&lt;li&gt;å‡ ä¹æ‰€æœ‰çš„äº‹ä»¶éƒ½å§”æ‰˜åˆ°documentï¼Œè¾¾åˆ°æ€§èƒ½ä¼˜åŒ–çš„ç›®çš„ã€‚&lt;/li&gt;
&lt;li&gt;åˆæˆäº‹ä»¶ä¸åŸç”Ÿäº‹ä»¶æ··ç”¨è¦æ³¨æ„Reactçš„äº‹ä»¶åŸºæœ¬éƒ½æ˜¯å§”æ‰˜åˆ°documentã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Fzhenhua-lee.github.io%2Freact%2Freact-event.html&quot; title=&quot;http://zhenhua-lee.github.io/react/react-event.html&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;Reactæºç è§£è¯»ç³»åˆ— â€“ äº‹ä»¶æœºåˆ¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fwww.w3.org%2FTR%2FDOM-Level-3-Events%2F%23ui-events-intro&quot; title=&quot;https://www.w3.org/TR/DOM-Level-3-Events/#ui-events-intro&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;UI Events&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.juejin.cn/?target=https%3A%2F%2Fwww.w3.org%2FTR%2F2000%2FREC-DOM-Level-2-Events-20001113%2Fevents.html%23Events-EventTarget&quot; title=&quot;https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;Document Object Model Events&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description><link>https://juejin.cn/post/6844903566801534990</link><guid isPermaLink="false">https://juejin.cn/post/6844903566801534990</guid><pubDate>Sun, 25 Feb 2018 16:16:45 GMT</pubDate><author>é¼“å»¶</author><category>å‰ç«¯</category><category>React.js</category><category>æºç </category></item><item><title>VueJS ç»„ä»¶ç¼–ç è§„èŒƒ</title><description>&lt;p&gt;åŸæ–‡åœ°å€ï¼š&lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fpablohpsilva%2Fvuejs-component-style-guide%2Fblob%2Fmaster%2FREADME-CN.md%2523%2525E7%25259B%2525AE%2525E5%2525BD%252595&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=https%3A//github.com/pablohpsilva/vuejs-component-style-guide/blob/master/README-CN.md%23%25E7%259B%25AE%25E5%25BD%2595&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;pablohpsilva/vuejs-component-style-guide&lt;i&gt;&lt;/i&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 data-id=&quot;heading-0&quot;&gt;ç›®æ ‡&lt;/h2&gt;
&lt;p&gt;æœ¬è§„èŒƒæä¾›äº†ä¸€ç§ç»Ÿä¸€çš„ç¼–ç è§„èŒƒæ¥ç¼–å†™ &lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttp%253A%2F%2Fvuejs.org%2F&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=http%3A//vuejs.org/&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;Vue.js&lt;i&gt;&lt;/i&gt;&lt;/a&gt; ä»£ç ã€‚è¿™ä½¿å¾—ä»£ç å…·æœ‰å¦‚ä¸‹çš„ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
    &lt;li&gt;å…¶å®ƒå¼€å‘è€…æˆ–æ˜¯å›¢é˜Ÿæˆå‘˜æ›´å®¹æ˜“é˜…è¯»å’Œç†è§£ã€‚&lt;/li&gt;
    &lt;li&gt;IDEs æ›´å®¹æ˜“ç†è§£ä»£ç ï¼Œä»è€Œæä¾›é«˜äº®ã€æ ¼å¼åŒ–ç­‰è¾…åŠ©åŠŸèƒ½&lt;/li&gt;
    &lt;li&gt;æ›´å®¹æ˜“ä½¿ç”¨ç°æœ‰çš„å·¥å…·&lt;/li&gt;
    &lt;li&gt;æ›´å®¹æ˜“å®ç°ç¼“å­˜ä»¥åŠä»£ç åŒ…çš„åˆ†æ‹†&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ¬æŒ‡å—ä¸º &lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fvoorhoede&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=https%3A//github.com/voorhoede&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;De Voorhoede&lt;i&gt;&lt;/i&gt;&lt;/a&gt; å‚è€ƒ &lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fvoorhoede%2Friotjs-style-guide&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=https%3A//github.com/voorhoede/riotjs-style-guide&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;RiotJS ç¼–ç è§„èŒƒ&lt;i&gt;&lt;/i&gt;&lt;/a&gt; è€Œå†™ã€‚&lt;/p&gt;
&lt;h2 data-id=&quot;heading-1&quot;&gt;ç›®å½•&lt;/h2&gt;
&lt;ul&gt;
    &lt;li&gt;åŸºäºæ¨¡å—å¼€å‘&lt;/li&gt;
    &lt;li&gt;vue ç»„ä»¶å‘½å&lt;/li&gt;
    &lt;li&gt;ç»„ä»¶è¡¨è¾¾å¼ç®€å•åŒ–&lt;/li&gt;
    &lt;li&gt;ç»„ä»¶ props åŸå­åŒ–&lt;/li&gt;
    &lt;li&gt;éªŒè¯ç»„ä»¶çš„ props&lt;/li&gt;
    &lt;li&gt;å°† this èµ‹å€¼ç»™ component å˜é‡&lt;/li&gt;
    &lt;li&gt;ç»„ä»¶ç»“æ„åŒ–&lt;/li&gt;
    &lt;li&gt;ç»„ä»¶äº‹ä»¶å‘½å&lt;/li&gt;
    &lt;li&gt;é¿å… this.$parent&lt;/li&gt;
    &lt;li&gt;è°¨æ…ä½¿ç”¨ this.$refs&lt;/li&gt;
    &lt;li&gt;ä½¿ç”¨ç»„ä»¶åä½œä¸ºæ ·å¼ä½œç”¨åŸŸç©ºé—´&lt;/li&gt;
    &lt;li&gt;æä¾›ç»„ä»¶ API æ–‡æ¡£&lt;/li&gt;
    &lt;li&gt;æä¾›ç»„ä»¶ demo&lt;/li&gt;
    &lt;li&gt;å¯¹ç»„ä»¶æ–‡ä»¶è¿›è¡Œä»£ç æ ¡éªŒ&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 data-id=&quot;heading-2&quot;&gt;åŸºäºæ¨¡å—å¼€å‘&lt;/h2&gt;
&lt;p&gt;å§‹ç»ˆåŸºäºæ¨¡å—çš„æ–¹å¼æ¥æ„å»ºä½ çš„ appï¼Œæ¯ä¸€ä¸ªå­æ¨¡å—åªåšä¸€ä»¶äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;Vue.js çš„è®¾è®¡åˆè¡·å°±æ˜¯å¸®åŠ©å¼€å‘è€…æ›´å¥½çš„å¼€å‘ç•Œé¢æ¨¡å—ã€‚ä¸€ä¸ªæ¨¡å—æ˜¯åº”ç”¨ç¨‹åºä¸­ç‹¬ç«‹çš„ä¸€ä¸ªéƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;h3 data-id=&quot;heading-3&quot;&gt;æ€ä¹ˆåšï¼Ÿ&lt;/h3&gt;
&lt;p&gt;æ¯ä¸€ä¸ª Vue ç»„ä»¶(ç­‰åŒäºæ¨¡å—)é¦–å…ˆå¿…é¡»ä¸“æ³¨äºè§£å†³ä¸€ä¸ªå•ä¸€çš„é—®é¢˜ï¼Œ&lt;em&gt;ç‹¬ç«‹çš„&lt;/em&gt;, &lt;em&gt;å¯å¤ç”¨çš„&lt;/em&gt;, &lt;em&gt;å¾®å°çš„&lt;/em&gt; and &lt;em&gt;å¯æµ‹è¯•çš„&lt;/em&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ çš„ç»„ä»¶åšäº†å¤ªå¤šçš„äº‹æˆ–æ˜¯å˜å¾—è‡ƒè‚¿ï¼Œè¯·å°†å…¶æ‹†åˆ†æˆæ›´å°çš„ç»„ä»¶å¹¶ä¿æŒå•ä¸€çš„åŸåˆ™ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå°½é‡ä¿è¯æ¯ä¸€ä¸ªæ–‡ä»¶çš„ä»£ç è¡Œæ•°ä¸è¦è¶…è¿‡ 100 è¡Œã€‚ä¹Ÿè¯·ä¿è¯ç»„ä»¶å¯ç‹¬ç«‹çš„è¿è¡Œã€‚æ¯”è¾ƒå¥½çš„åšæ³•æ˜¯å¢åŠ ä¸€ä¸ªå•ç‹¬çš„ demo ç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;Vue ç»„ä»¶å‘½å&lt;br&gt;&lt;/p&gt;
&lt;p&gt;ç»„ä»¶çš„å‘½åéœ€éµä»ä»¥ä¸‹åŸåˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;
    &lt;li&gt;æœ‰æ„ä¹‰çš„: ä¸è¿‡äºå…·ä½“ï¼Œä¹Ÿä¸è¿‡äºæŠ½è±¡&lt;/li&gt;
    &lt;li&gt;ç®€çŸ­: 2 åˆ° 3 ä¸ªå•è¯&lt;/li&gt;
    &lt;li&gt;å…·æœ‰å¯è¯»æ€§: ä»¥ä¾¿äºæ²Ÿé€šäº¤æµ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åŒæ—¶è¿˜éœ€è¦æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
    &lt;li&gt;å¿…é¡»ç¬¦åˆè‡ªå®šä¹‰å…ƒç´ è§„èŒƒ: &lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fwww.w3.org%2FTR%2Fcustom-elements%2F%2523concepts&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=https%3A//www.w3.org/TR/custom-elements/%23concepts&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;ä½¿ç”¨è¿å­—ç¬¦&lt;i&gt;&lt;/i&gt;&lt;/a&gt;åˆ†éš”å•è¯ï¼Œåˆ‡å‹¿ä½¿ç”¨ä¿ç•™å­—ã€‚&lt;/li&gt;
    &lt;li&gt;app- å‰ç¼€ä½œä¸ºå‘½åç©ºé—´: å¦‚æœéå¸¸é€šç”¨çš„è¯å¯ä½¿ç”¨ä¸€ä¸ªå•è¯æ¥å‘½åï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿äºå…¶å®ƒé¡¹ç›®é‡Œå¤ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 data-id=&quot;heading-4&quot;&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
    &lt;li&gt;ç»„ä»¶æ˜¯é€šè¿‡ç»„ä»¶åæ¥è°ƒç”¨çš„ã€‚æ‰€ä»¥ç»„ä»¶åå¿…é¡»ç®€çŸ­ã€å¯Œæœ‰å«ä¹‰å¹¶ä¸”å…·æœ‰å¯è¯»æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 data-id=&quot;heading-5&quot;&gt;å¦‚ä½•åšï¼Ÿ&lt;/h3&gt;&lt;br&gt; &lt;pre&gt;&lt;code&gt;&amp;lt;!-- æ¨è --&amp;gt;
&amp;lt;app-header&amp;gt;&amp;lt;/app-header&amp;gt;
&amp;lt;user-list&amp;gt;&amp;lt;/user-list&amp;gt;
&amp;lt;range-slider&amp;gt;&amp;lt;/range-slider&amp;gt;

&amp;lt;!-- é¿å… --&amp;gt;
&amp;lt;btn-group&amp;gt;&amp;lt;/btn-group&amp;gt; &amp;lt;!-- è™½ç„¶ç®€çŸ­ä½†æ˜¯å¯è¯»æ€§å·®. ä½¿ç”¨ `button-group` æ›¿ä»£ --&amp;gt;
&amp;lt;ui-slider&amp;gt;&amp;lt;/ui-slider&amp;gt; &amp;lt;!-- ui å‰ç¼€å¤ªè¿‡äºå®½æ³›ï¼Œåœ¨è¿™é‡Œæ„ä¹‰ä¸æ˜ç¡® --&amp;gt;
&amp;lt;slider&amp;gt;&amp;lt;/slider&amp;gt; &amp;lt;!-- ä¸è‡ªå®šä¹‰å…ƒç´ è§„èŒƒä¸å…¼å®¹ --&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç»„ä»¶è¡¨è¾¾å¼ç®€å•åŒ–&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Vue.js çš„è¡¨è¾¾å¼æ˜¯ 100% çš„ Javascript è¡¨è¾¾å¼ã€‚è¿™ä½¿å¾—å…¶åŠŸèƒ½æ€§å¾ˆå¼ºå¤§ï¼Œä½†ä¹Ÿå¸¦æ¥æ½œåœ¨çš„å¤æ‚æ€§ã€‚å› æ­¤ï¼Œä½ åº”è¯¥å°½é‡ä¿æŒè¡¨è¾¾å¼çš„ç®€å•åŒ–ã€‚&lt;/p&gt;
&lt;h3 data-id=&quot;heading-6&quot;&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
    &lt;li&gt;å¤æ‚çš„è¡Œå†…è¡¨è¾¾å¼éš¾ä»¥é˜…è¯»ã€‚&lt;/li&gt;
    &lt;li&gt;è¡Œå†…è¡¨è¾¾å¼æ˜¯ä¸èƒ½å¤Ÿé€šç”¨çš„ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´é‡å¤ç¼–ç çš„é—®é¢˜ã€‚&lt;/li&gt;
    &lt;li&gt;IDE åŸºæœ¬ä¸Šä¸èƒ½è¯†åˆ«è¡Œå†…è¡¨è¾¾å¼è¯­æ³•ï¼Œæ‰€ä»¥ä½¿ç”¨è¡Œå†…è¡¨è¾¾å¼ IDE ä¸èƒ½æä¾›è‡ªåŠ¨è¡¥å…¨å’Œè¯­æ³•æ ¡éªŒåŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 data-id=&quot;heading-7&quot;&gt;æ€ä¹ˆåšï¼Ÿ&lt;/h3&gt;
&lt;p&gt;å¦‚æœä½ å‘ç°å†™äº†å¤ªå¤šå¤æ‚å¹¶éš¾ä»¥é˜…è¯»çš„è¡Œå†…è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ method æˆ–æ˜¯ computed å±æ€§æ¥æ›¿ä»£å…¶åŠŸèƒ½ã€‚&lt;/p&gt;&lt;br&gt; &lt;pre&gt;&lt;code&gt;&amp;lt;!-- æ¨è --&amp;gt;
&amp;lt;template&amp;gt;
    &amp;lt;h1&amp;gt;
        {{ `${year}-${month}` }}
    &amp;lt;/h1&amp;gt;
&amp;lt;/template&amp;gt;
&amp;lt;script type=&quot;text/javascript&quot;&amp;gt;
  export default {
    computed: {
      month() {
        return this.twoDigits((new Date()).getUTCMonth() + 1);
      },
      year() {
        return (new Date()).getUTCFullYear();
      }
    },
    methods: {
      twoDigits(num) {
        return (&#39;0&#39; + num).slice(-2);
      }
    },
  };
&amp;lt;/script&amp;gt;

&amp;lt;!-- é¿å… --&amp;gt;
&amp;lt;template&amp;gt;
    &amp;lt;h1&amp;gt;
        {{ `${(new Date()).getUTCFullYear()}-${(&#39;0&#39; + ((new Date()).getUTCMonth()+1)).slice(-2)}` }}
    &amp;lt;/h1&amp;gt;
&amp;lt;/template&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç»„ä»¶ props åŸå­åŒ–&lt;br&gt;&lt;/p&gt;
&lt;p&gt;è™½ç„¶ Vue.js æ”¯æŒä¼ é€’å¤æ‚çš„ JavaScript å¯¹è±¡é€šè¿‡ props å±æ€§ï¼Œä½†æ˜¯ä½ åº”è¯¥å°½å¯èƒ½çš„ä½¿ç”¨åŸå§‹ç±»å‹çš„æ•°æ®ã€‚å°½é‡åªä½¿ç”¨&lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FGlossary%2FPrimitive&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Glossary/Primitive&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;JavaScript åŸå§‹ç±»å‹&lt;i&gt;&lt;/i&gt;&lt;/a&gt;(å­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼) å’Œ å‡½æ•°ã€‚å°½é‡é¿å…å¤æ‚çš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;h3 data-id=&quot;heading-8&quot;&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
    &lt;li&gt;ä½¿å¾—ç»„ä»¶ API æ¸…æ™°ç›´è§‚&lt;/li&gt;
    &lt;li&gt;åªä½¿ç”¨åŸå§‹ç±»å‹å’Œå‡½æ•°ä½œä¸º props ä½¿å¾—ç»„ä»¶çš„ API æ›´æ¥è¿‘äº HTML(5) åŸç”Ÿå…ƒç´ ã€‚&lt;/li&gt;
    &lt;li&gt;å…¶å®ƒå¼€å‘è€…æ›´å¥½çš„ç†è§£æ¯ä¸€ä¸ª prop çš„å«ä¹‰ï¼Œä½œç”¨&lt;/li&gt;
    &lt;li&gt;ä¼ é€’è¿‡äºå¤æ‚çš„å¯¹è±¡ä½¿å¾—æˆ‘ä»¬ä¸èƒ½å¤Ÿæ¸…æ¥šçš„çŸ¥é“å“ªäº›å±æ€§æˆ–æ–¹æ³•è¢«è‡ªå®šä¹‰ç»„ä»¶ä½¿ç”¨ï¼Œè¿™ä½¿å¾—ä»£ç éš¾ä»¥é‡æ„å’Œç»´æŠ¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 data-id=&quot;heading-9&quot;&gt;æ€ä¹ˆåšï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ç»„ä»¶çš„æ¯ä¸€ä¸ªå±æ€§å•ç‹¬ä½¿ç”¨ä¸€ä¸ª propsï¼Œå¹¶ä¸”ä½¿ç”¨å‡½æ•°æˆ–æ˜¯åŸå§‹ç±»å‹çš„å€¼ã€‚&lt;/p&gt;&lt;br&gt; &lt;pre&gt;&lt;code&gt;&amp;lt;!-- æ¨è --&amp;gt;
&amp;lt;range-slider
  :values=&quot;[10, 20]&quot;
  min=&quot;0&quot;
  max=&quot;100&quot;
  step=&quot;5&quot;
  :on-slide=&quot;updateInputs&quot;
  :on-end=&quot;updateResults&quot;&amp;gt;
&amp;lt;/range-slider&amp;gt;

&amp;lt;!-- é¿å… --&amp;gt;
&amp;lt;range-slider :config=&quot;complexConfigObject&quot;&amp;gt;&amp;lt;/range-slider&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 data-id=&quot;heading-10&quot;&gt;éªŒè¯ç»„ä»¶çš„ props&lt;/h2&gt;
&lt;p&gt;åœ¨ Vue.js ä¸­ï¼Œç»„ä»¶çš„ props å³ APIï¼Œä¸€ä¸ªç¨³å®šå¹¶å¯é¢„æµ‹çš„ API ä¼šä½¿å¾—ä½ çš„ç»„ä»¶æ›´å®¹æ˜“è¢«å…¶ä»–å¼€å‘è€…ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ç»„ä»¶ props é€šè¿‡è‡ªå®šä¹‰æ ‡ç­¾çš„å±æ€§æ¥ä¼ é€’ã€‚å±æ€§çš„å€¼å¯ä»¥æ˜¯ Vue.js å­—ç¬¦ä¸²(:attr=&quot;value&quot; æˆ– v-bind:attr=&quot;value&quot;)æˆ–æ˜¯ä¸ä¼ ã€‚ä½ éœ€è¦ä¿è¯ç»„ä»¶çš„ props èƒ½åº”å¯¹ä¸åŒçš„æƒ…å†µã€‚&lt;/p&gt;
&lt;h3 data-id=&quot;heading-11&quot;&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;p&gt;éªŒè¯ç»„ä»¶ props å¯ä»¥ä¿è¯ä½ çš„ç»„ä»¶æ°¸è¿œæ˜¯å¯ç”¨çš„(é˜²å¾¡æ€§ç¼–ç¨‹)ã€‚å³ä½¿å…¶ä»–å¼€å‘è€…å¹¶æœªæŒ‰ç…§ä½ é¢„æƒ³çš„æ–¹æ³•ä½¿ç”¨æ—¶ä¹Ÿä¸ä¼šå‡ºé”™ã€‚&lt;/p&gt;
&lt;h3 data-id=&quot;heading-12&quot;&gt;æ€ä¹ˆåšï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
    &lt;li&gt;æä¾›é»˜è®¤å€¼&lt;/li&gt;
    &lt;li&gt;ä½¿ç”¨ type å±æ€§&lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttp%253A%2F%2Fvuejs.org%2Fv2%2Fguide%2Fcomponents.html%2523Prop-Validation&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=http%3A//vuejs.org/v2/guide/components.html%23Prop-Validation&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;æ ¡éªŒç±»å‹&lt;i&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;ä½¿ç”¨ props ä¹‹å‰å…ˆæ£€æŸ¥è¯¥ prop æ˜¯å¦å­˜åœ¨&lt;/li&gt;
&lt;/ul&gt; &lt;pre&gt;&lt;code&gt;&amp;lt;template&amp;gt;
  &amp;lt;input type=&quot;range&quot; v-model=&quot;value&quot; :max=&quot;max&quot; :min=&quot;min&quot;&amp;gt;
&amp;lt;/template&amp;gt;
&amp;lt;script type=&quot;text/javascript&quot;&amp;gt;
  export default {
    props: {
      max: {
        type: Number, // è¿™é‡Œæ·»åŠ äº†æ•°å­—ç±»å‹çš„æ ¡éªŒ
        default() { return 10; },
      },
      min: {
        type: Number,
        default() { return 0; },
      },
      value: {
        type: Number,
        default() { return 4; },
      },
    },
  };
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;br&gt;
&lt;h2 data-id=&quot;heading-13&quot;&gt;å°† this èµ‹å€¼ç»™ component å˜é‡(&lt;/h2&gt;
&lt;p&gt;åœ¨ Vue.js ç»„ä»¶ä¸Šä¸‹æ–‡ä¸­ï¼ŒthisæŒ‡å‘äº†ç»„ä»¶å®ä¾‹ã€‚å› æ­¤å½“ä½ åˆ‡æ¢åˆ°äº†ä¸åŒçš„ä¸Šä¸‹æ–‡æ—¶ï¼Œè¦ç¡®ä¿ this æŒ‡å‘ä¸€ä¸ªå¯ç”¨çš„ component å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;æ¢å¥è¯è¯´ï¼Œä¸è¦åœ¨ç¼–å†™è¿™æ ·çš„ä»£ç  const self = this; ï¼Œè€Œæ˜¯åº”è¯¥ç›´æ¥ä½¿ç”¨å˜é‡ componentã€‚&lt;/p&gt;
&lt;h3 data-id=&quot;heading-14&quot;&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
    &lt;li&gt;å°†ç»„ä»¶ this èµ‹å€¼ç»™å˜é‡ componentå¯ç”¨è®©å¼€å‘è€…æ¸…æ¥šçš„çŸ¥é“ä»»ä½•ä¸€ä¸ªè¢«ä½¿ç”¨çš„åœ°æ–¹ï¼Œå®ƒä»£è¡¨çš„æ˜¯ç»„ä»¶å®ä¾‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 data-id=&quot;heading-15&quot;&gt;æ€ä¹ˆåšï¼Ÿ&lt;/h3&gt;&lt;br&gt; &lt;pre&gt;&lt;code&gt;&amp;lt;script type=&quot;text/javascript&quot;&amp;gt;
export default {
  methods: {
    hello() {
      return &#39;hello&#39;;
    },
    printHello() {
      console.log(this.hello());
    },
  },
};
&amp;lt;/script&amp;gt;

&amp;lt;!-- é¿å… --&amp;gt;
&amp;lt;script type=&quot;text/javascript&quot;&amp;gt;
export default {
  methods: {
    hello() {
      return &#39;hello&#39;;
    },
    printHello() {
      const self = this; // æ²¡æœ‰å¿…è¦
      console.log(self.hello());
    },
  },
};
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;br&gt;
&lt;h2 data-id=&quot;heading-16&quot;&gt;ç»„ä»¶ç»“æ„åŒ–&lt;/h2&gt;
&lt;p&gt;æŒ‰ç…§ä¸€å®šçš„ç»“æ„ç»„ç»‡ï¼Œä½¿å¾—ç»„ä»¶ä¾¿äºç†è§£ã€‚&lt;/p&gt;
&lt;h3 data-id=&quot;heading-17&quot;&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
    &lt;li&gt;å¯¼å‡ºä¸€ä¸ªæ¸…æ™°ã€ç»„ç»‡æœ‰åºçš„ç»„ä»¶ï¼Œä½¿å¾—ä»£ç æ˜“äºé˜…è¯»å’Œç†è§£ã€‚åŒæ—¶ä¹Ÿä¾¿äºæ ‡å‡†åŒ–ã€‚&lt;/li&gt;
    &lt;li&gt;æŒ‰é¦–å­—æ¯æ’åºå±æ€§ï¼Œdata, computed, watches å’Œ methods ä½¿å¾—å±æ€§ä¾¿äºæŸ¥æ‰¾ã€‚&lt;/li&gt;
    &lt;li&gt;åˆç†ç»„ç»‡ï¼Œä½¿å¾—ç»„ä»¶æ˜“äºé˜…è¯»ã€‚(name; extends; props, data and computed; components; watch and methods; lifecycle methods, ç­‰.);&lt;/li&gt;
    &lt;li&gt;ä½¿ç”¨ name å±æ€§ã€‚å€ŸåŠ©äº&lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fchrome.google.com%2Fwebstore%2Fdetail%2Fvuejs-devtools%2Fnhdogjmejiglipccpnnnanhbledajbpd%253Fhl%253Den&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=https%3A//chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd%3Fhl%3Den&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;vue devtools&lt;i&gt;&lt;/i&gt;&lt;/a&gt;å¯ä»¥è®©ä½ æ›´æ–¹ä¾¿çš„æµ‹è¯•&lt;/li&gt;
    &lt;li&gt;åˆç†çš„ CSS ç»“æ„ï¼Œå¦‚ &lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fmedium.com%2Ftldr-tech%2Fbem-blocks-elements-and-modifiers-6b3b0af9e3ea%2523.bhnomd7gw&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=https%3A//medium.com/tldr-tech/bem-blocks-elements-and-modifiers-6b3b0af9e3ea%23.bhnomd7gw&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;BEM&lt;i&gt;&lt;/i&gt;&lt;/a&gt; æˆ– oo&lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Frstacruz%2Frscss&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=https%3A//github.com/rstacruz/rscss&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;css&lt;i&gt;&lt;/i&gt;&lt;/a&gt;        - &lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fpablohpsilva%2Fvuejs-component-style-guide%2Fblob%2Fmaster%2FREADME-CN.md%2523%2525E4%2525BD%2525BF%2525E7%252594%2525A8%2525E7%2525BB%252584%2525E4%2525BB%2525B6%2525E5%252590%25258D%2525E4%2525BD%25259C%2525E4%2525B8%2525BA%2525E6%2525A0%2525B7%2525E5%2525BC%25258F%2525E4%2525BD%25259C%2525E7%252594%2525A8%2525E5%25259F%25259F%2525E7%2525A9%2525BA%2525E9%252597%2525B4&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=https%3A//github.com/pablohpsilva/vuejs-component-style-guide/blob/master/README-CN.md%23%25E4%25BD%25BF%25E7%2594%25A8%25E7%25BB%2584%25E4%25BB%25B6%25E5%2590%258D%25E4%25BD%259C%25E4%25B8%25BA%25E6%25A0%25B7%25E5%25BC%258F%25E4%25BD%259C%25E7%2594%25A8%25E5%259F%259F%25E7%25A9%25BA%25E9%2597%25B4&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;è¯¦æƒ…?&lt;i&gt;&lt;/i&gt;&lt;/a&gt;;&lt;/li&gt;
    &lt;li&gt;ä½¿ç”¨å•æ–‡ä»¶ .vue æ–‡ä»¶æ ¼å¼æ¥ç»„ä»¶ä»£ç &lt;/li&gt;
&lt;/ul&gt;
&lt;h3 data-id=&quot;heading-18&quot;&gt;æ€ä¹ˆåšï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ç»„ä»¶ç»“æ„åŒ–&lt;/p&gt;&lt;br&gt; &lt;pre&gt;&lt;code&gt;&amp;lt;template lang=&quot;html&quot;&amp;gt;
    &amp;lt;div class=&quot;Ranger__Wrapper&quot;&amp;gt;
        &amp;lt;!-- ... --&amp;gt;
    &amp;lt;/div&amp;gt;
&amp;lt;/template&amp;gt;

&amp;lt;script type=&quot;text/javascript&quot;&amp;gt;
  export default {
        // ä¸è¦å¿˜è®°äº† name å±æ€§
    name: &#39;RangeSlider&#39;,
    // ç»„åˆå…¶å®ƒç»„ä»¶
    extends: {},
    // ç»„ä»¶å±æ€§ã€å˜é‡
    props: {
            bar: {}, // æŒ‰å­—æ¯é¡ºåº
            foo: {},
            fooBar: {},
        },
    // å˜é‡
    data() {},
    computed: {},
    // ä½¿ç”¨å…¶å®ƒç»„ä»¶
    components: {},
    // æ–¹æ³•
    watch: {},
    methods: {},
    // ç”Ÿå‘½å‘¨æœŸå‡½æ•°
    beforeCreate() {},
    mounted() {},
};
&amp;lt;/script&amp;gt;

&amp;lt;style scoped&amp;gt;
  .Ranger__Wrapper { /* ... */ }
&amp;lt;/style&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;br&gt;
&lt;h2 data-id=&quot;heading-19&quot;&gt;ç»„ä»¶äº‹ä»¶å‘½å&lt;/h2&gt;
&lt;p&gt;Vue.js æä¾›çš„å¤„ç†å‡½æ•°å’Œè¡¨è¾¾å¼éƒ½æ˜¯ç»‘å®šåœ¨ ViewModel ä¸Šçš„ï¼Œç»„ä»¶çš„æ¯ä¸€ä¸ªäº‹ä»¶éƒ½åº”è¯¥æŒ‰ç…§ä¸€ä¸ªå¥½çš„å‘½åè§„èŒƒæ¥ï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸å°‘çš„å¼€å‘é—®é¢˜ï¼Œå…·ä½“å¯è§å¦‚ä¸‹ ** ä¸ºä»€ä¹ˆ**ã€‚&lt;/p&gt;
&lt;h3 data-id=&quot;heading-20&quot;&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
    &lt;li&gt;å¼€å‘è€…å¯ä»¥éšæ„ç»™äº‹ä»¶å‘½åï¼Œå³ä½¿æ˜¯åŸç”Ÿäº‹ä»¶çš„åå­—ï¼Œè¿™æ ·ä¼šå¸¦æ¥è¿·æƒ‘æ€§ã€‚&lt;/li&gt;
    &lt;li&gt;è¿‡äºå®½æ¾çš„äº‹ä»¶å‘½åå¯èƒ½ä¸&lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fvuejs.org%2Fv2%2Fguide%2Fcomponents.html%2523DOM-Template-Parsing-Caveats&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=https%3A//vuejs.org/v2/guide/components.html%23DOM-Template-Parsing-Caveats&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;DOMæ¨¡æ¿ä¸å…¼å®¹&lt;i&gt;&lt;/i&gt;&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 data-id=&quot;heading-21&quot;&gt;æ€ä¹ˆåšï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
    &lt;li&gt;äº‹ä»¶å‘½åä¹Ÿè¿å­—ç¬¦å‘½å&lt;/li&gt;
    &lt;li&gt;ä¸€ä¸ªäº‹ä»¶çš„åå­—å¯¹åº”ç»„ä»¶å¤–çš„ä¸€ç»„æ„ä¹‰æ“ä½œï¼Œå¦‚ï¼šupload-success, upload-error ä»¥åŠ dropzone-upload-success, dropzone-upload-error (å¦‚æœéœ€è¦å‰ç¼€çš„è¯)ã€‚&lt;/li&gt;
    &lt;li&gt;äº‹ä»¶å‘½ååº”è¯¥ä»¥åŠ¨è¯(å¦‚ client-api-load) æˆ–æ˜¯ å½¢å®¹è¯(å¦‚ drive-upload-success)ç»“å°¾ã€‚(&lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2FGoogleWebComponents%2Fstyle-guide%2523events&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=https%3A//github.com/GoogleWebComponents/style-guide%23events&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;å‡ºå¤„&lt;i&gt;&lt;/i&gt;&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;&lt;br&gt;
&lt;h2 data-id=&quot;heading-22&quot;&gt;é¿å… this.$parent&lt;/h2&gt;
&lt;p&gt;Vue.js æ”¯æŒç»„ä»¶åµŒå¥—ï¼Œå¹¶ä¸”å­ç»„ä»¶å¯è®¿é—®çˆ¶ç»„ä»¶çš„ä¸Šä¸‹æ–‡ã€‚è®¿é—®ç»„ä»¶ä¹‹å¤–çš„ä¸Šä¸‹æ–‡è¿åäº†åŸºäºæ¨¡å—å¼€å‘çš„ç¬¬ä¸€åŸåˆ™ã€‚å› æ­¤ä½ åº”è¯¥å°½é‡é¿å…ä½¿ç”¨ this.$parentã€‚&lt;/p&gt;
&lt;h3 data-id=&quot;heading-23&quot;&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
    &lt;li&gt;ç»„ä»¶å¿…é¡»ç›¸äº’ä¿æŒç‹¬ç«‹ï¼ŒVue ç»„ä»¶ä¹Ÿæ˜¯ã€‚å¦‚æœç»„ä»¶éœ€è¦è®¿é—®å…¶çˆ¶å±‚çš„ä¸Šä¸‹æ–‡å°±è¿åäº†è¯¥åŸåˆ™ã€‚&lt;/li&gt;
    &lt;li&gt;å¦‚æœä¸€ä¸ªç»„ä»¶éœ€è¦è®¿é—®å…¶çˆ¶ç»„ä»¶çš„ä¸Šä¸‹æ–‡ï¼Œé‚£ä¹ˆè¯¥ç»„ä»¶å°†ä¸èƒ½å†å…¶å®ƒä¸Šä¸‹æ–‡ä¸­å¤ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 data-id=&quot;heading-24&quot;&gt;æ€ä¹ˆåšï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
    &lt;li&gt;é€šè¿‡ props å°†å€¼ä¼ é€’ç»™å­ç»„ä»¶&lt;/li&gt;
    &lt;li&gt;é€šè¿‡ props ä¼ é€’å›è°ƒå‡½æ•°ç»™å­ç»„ä»¶æ¥è¾¾åˆ°è°ƒç”¨çˆ¶ç»„ä»¶æ–¹æ³•çš„ç›®çš„&lt;/li&gt;
    &lt;li&gt;é€šè¿‡åœ¨å­ç»„ä»¶è§¦å‘äº‹ä»¶æ¥é€šçŸ¥çˆ¶ç»„ä»¶&lt;/li&gt;
&lt;/ul&gt;&lt;br&gt;
&lt;h2 data-id=&quot;heading-25&quot;&gt;è°¨æ…ä½¿ç”¨ this.$refs&lt;/h2&gt;
&lt;p&gt;Vue.js æ”¯æŒé€šè¿‡ ref å±æ€§æ¥è®¿é—®å…¶å®ƒç»„ä»¶å’Œ HTML å…ƒç´ ã€‚å¹¶é€šè¿‡ this.$refs å¯ä»¥å¾—åˆ°ç»„ä»¶æˆ– HTML å…ƒç´ çš„ä¸Šä¸‹æ–‡ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé€šè¿‡ this.$refsæ¥è®¿é—®å…¶å®ƒç»„ä»¶çš„ä¸Šä¸‹æ–‡æ˜¯å¯ä»¥é¿å…çš„ã€‚åœ¨ä½¿ç”¨çš„çš„æ—¶å€™ä½ éœ€è¦æ³¨æ„é¿å…è°ƒç”¨äº†ä¸æ°å½“çš„ç»„ä»¶ APIï¼Œæ‰€ä»¥åº”è¯¥å°½é‡é¿å…ä½¿ç”¨ this.$refsã€‚&lt;/p&gt;
&lt;h3 data-id=&quot;heading-26&quot;&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
    &lt;li&gt;ç»„ä»¶å¿…é¡»æ˜¯ä¿æŒç‹¬ç«‹çš„ï¼Œå¦‚æœä¸€ä¸ªç»„ä»¶çš„ API ä¸èƒ½å¤Ÿæä¾›æ‰€éœ€çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆè¿™ä¸ªç»„ä»¶åœ¨è®¾è®¡ã€å®ç°ä¸Šæ˜¯æœ‰é—®é¢˜çš„ã€‚&lt;/li&gt;
    &lt;li&gt;ç»„ä»¶çš„å±æ€§å’Œäº‹ä»¶å¿…é¡»è¶³å¤Ÿçš„ç»™å¤§å¤šæ•°çš„ç»„ä»¶ä½¿ç”¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 data-id=&quot;heading-27&quot;&gt;æ€ä¹ˆåšï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
    &lt;li&gt;æä¾›è‰¯å¥½çš„ç»„ä»¶ API&lt;/li&gt;
    &lt;li&gt;æ€»æ˜¯å…³æ³¨äºç»„ä»¶æœ¬èº«çš„ç›®çš„&lt;/li&gt;
    &lt;li&gt;æ‹’ç»å®šåˆ¶ä»£ç ã€‚å¦‚æœä½ åœ¨ä¸€ä¸ªé€šç”¨çš„ç»„ä»¶å†…éƒ¨ç¼–å†™ç‰¹å®šéœ€æ±‚çš„ä»£ç ï¼Œé‚£ä¹ˆä»£è¡¨è¿™ä¸ªç»„ä»¶çš„ API ä¸å¤Ÿé€šç”¨ï¼Œæˆ–è€…ä½ å¯èƒ½éœ€è¦ä¸€ä¸ªæ–°çš„ç»„ä»¶æ¥åº”å¯¹è¯¥éœ€æ±‚&lt;/li&gt;
    &lt;li&gt;æ£€æŸ¥æ‰€æœ‰çš„ props æ˜¯å¦æœ‰ç¼ºå¤±çš„ï¼Œå¦‚æœæœ‰æä¸€ä¸ª issue æˆ–æ˜¯å®Œå–„è¿™ä¸ªç»„ä»¶&lt;/li&gt;
    &lt;li&gt;æ£€æŸ¥æ‰€æœ‰çš„äº‹ä»¶ã€‚å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡ä¸€èˆ¬æ˜¯é€šè¿‡äº‹ä»¶æ¥å®ç°çš„ï¼Œä½†æ˜¯å¤§å¤šæ•°çš„å¼€å‘è€…æ›´å¤šçš„å…³æ³¨äº props ä»å¿½è§†äº†è¿™ç‚¹ã€‚&lt;/li&gt;
    &lt;li&gt;Propså‘ä¸‹ä¼ é€’ï¼Œäº‹ä»¶å‘ä¸Šä¼ é€’ï¼ã€‚ä»¥æ­¤ä¸ºç›®æ ‡å‡çº§ä½ çš„ç»„ä»¶ï¼Œæä¾›è‰¯å¥½çš„ API å’Œ ç‹¬ç«‹æ€§ã€‚&lt;/li&gt;
    &lt;li&gt;å½“é‡åˆ° props å’Œ events éš¾ä»¥å®ç°çš„åŠŸèƒ½æ—¶ï¼Œé€šè¿‡ this.$refsæ¥å®ç°ã€‚&lt;/li&gt;
    &lt;li&gt;å½“éœ€è¦æ“ä½œ DOM æ— æ³•é€šè¿‡æŒ‡ä»¤æ¥åšçš„æ—¶å€™å¯ä½¿ç”¨ this..$ref è€Œä¸æ˜¯ JQuery, document.getElement* , document.queryElementã€‚&lt;/li&gt;
&lt;/ul&gt; &lt;pre&gt;&lt;code&gt;&amp;lt;!-- æ¨èï¼Œå¹¶æœªä½¿ç”¨ this.$refs --&amp;gt;
&amp;lt;range :max=&quot;max&quot;
  :min=&quot;min&quot;
  @current-value=&quot;currentValue&quot;
  :step=&quot;1&quot;&amp;gt;&amp;lt;/range&amp;gt;
&lt;/code&gt;&lt;/pre&gt; &lt;pre&gt;&lt;code&gt;&amp;lt;!-- ä½¿ç”¨ this.$refs çš„é€‚ç”¨æƒ…å†µ--&amp;gt;
&amp;lt;modal ref=&quot;basicModal&quot;&amp;gt;
  &amp;lt;h4&amp;gt;Basic Modal&amp;lt;/h4&amp;gt;
  &amp;lt;button class=&quot;primary&quot; @click=&quot;$refs.basicModal.close()&quot;&amp;gt;Close&amp;lt;/button&amp;gt;
&amp;lt;/modal&amp;gt;
&amp;lt;button @click=&quot;$refs.basicModal.open()&quot;&amp;gt;Open modal&amp;lt;/button&amp;gt;

&amp;lt;!-- Modal component --&amp;gt;
&amp;lt;template&amp;gt;
  &amp;lt;div v-show=&quot;active&quot;&amp;gt;
    &amp;lt;!-- ... --&amp;gt;
  &amp;lt;/div&amp;gt;
&amp;lt;/template&amp;gt;

&amp;lt;script&amp;gt;
  export default {
    // ...
    data() {
        return {
            active: false,
        };
    },
    methods: {
      open() {
        this.active = true;
      },
      hide() {
        this.active = false;
      },
    },
    // ...
  };
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt; &lt;pre&gt;&lt;code&gt;&amp;lt;!-- å¦‚æœå¯é€šè¿‡ emited æ¥åšåˆ™é¿å…é€šè¿‡ this.$refs ç›´æ¥è®¿é—® --&amp;gt;
&amp;lt;template&amp;gt;
  &amp;lt;range :max=&quot;max&quot;
    :min=&quot;min&quot;
    ref=&quot;range&quot;
    :step=&quot;1&quot;&amp;gt;&amp;lt;/range&amp;gt;
&amp;lt;/template&amp;gt;

&amp;lt;script&amp;gt;
  export default {
    // ...
    methods: {
      getRangeCurrentValue() {
        return this.$refs.range.currentValue;
      },
    },
    // ...
  };
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;br&gt;
&lt;h2 data-id=&quot;heading-28&quot;&gt;ä½¿ç”¨ç»„ä»¶åä½œä¸ºæ ·å¼ä½œç”¨åŸŸç©ºé—´&lt;/h2&gt;
&lt;p&gt;Vue.js çš„ç»„ä»¶æ˜¯è‡ªå®šä¹‰å…ƒç´ ï¼Œè¿™éå¸¸é€‚åˆç”¨æ¥ä½œä¸ºæ ·å¼çš„æ ¹ä½œç”¨åŸŸç©ºé—´ã€‚å¯ä»¥å°†ç»„ä»¶åä½œä¸º css ç±»çš„å‘½åç©ºé—´ã€‚&lt;/p&gt;
&lt;h3 data-id=&quot;heading-29&quot;&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
    &lt;li&gt;ç»™æ ·å¼åŠ ä¸Šä½œç”¨åŸŸç©ºé—´å¯ä»¥é¿å…ç»„ä»¶æ ·å¼å½±å“å¤–éƒ¨çš„æ ·å¼&lt;/li&gt;
    &lt;li&gt;ä¿æŒæ¨¡å—åã€ç›®å½•åã€æ ·å¼æ ¹ä½œç”¨åŸŸåä¸€æ ·ï¼Œå¯ä»¥å¾ˆå¥½çš„å°†å…¶å…³è”èµ·æ¥ï¼Œä¾¿äºå¼€å‘è€…ç†è§£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 data-id=&quot;heading-30&quot;&gt;æ€ä¹ˆåšï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ç»„ä»¶åä½œä¸ºæ ·å¼å‘½åçš„å‰ç¼€ï¼Œå¯åŸºäº BEM æˆ– OOCSS èŒƒå¼ã€‚åŒæ—¶ç»™styleæ ‡ç­¾åŠ ä¸Š scoped å±æ€§ã€‚åŠ ä¸Š scoped å±æ€§ç¼–è¯‘åä¼šç»™ç»„ä»¶çš„ class è‡ªåŠ¨åŠ ä¸Šå”¯ä¸€çš„å‰ç¼€ä»è€Œé¿å…æ ·å¼çš„å†²çªã€‚&lt;/p&gt;&lt;br&gt; &lt;pre&gt;&lt;code&gt;&amp;lt;style scoped&amp;gt;
    /* æ¨è */
    .MyExample { }
    .MyExample li { }
    .MyExample__item { }

    /* é¿å… */
    .My-Example { } /* not scoped to component or module name, not BEM compliant */
&amp;lt;/style&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;br&gt;
&lt;h2 data-id=&quot;heading-31&quot;&gt;æä¾›ç»„ä»¶ API æ–‡æ¡£&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ Vue.js ç»„ä»¶çš„è¿‡ç¨‹ä¸­ä¼šåˆ›å»º Vue ç»„ä»¶å®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹æ˜¯é€šè¿‡è‡ªå®šä¹‰å±æ€§é…ç½®çš„ã€‚ä¸ºäº†ä¾¿äºå…¶ä»–å¼€å‘è€…ä½¿ç”¨è¯¥ç»„ä»¶ï¼Œå¯¹äºè¿™äº›è‡ªå®šä¹‰å±æ€§å³ç»„ä»¶APIåº”è¯¥åœ¨ README.md æ–‡ä»¶ä¸­è¿›è¡Œè¯´æ˜ã€‚&lt;/p&gt;
&lt;h2 data-id=&quot;heading-32&quot;&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/h2&gt;
&lt;ul&gt;
    &lt;li&gt;è‰¯å¥½çš„æ–‡æ¡£å¯ä»¥è®©å¼€å‘è€…æ¯”è¾ƒå®¹æ˜“çš„å¯¹ç»„ä»¶æœ‰ä¸€ä¸ªæ•´ä½“çš„è®¤è¯†ï¼Œè€Œä¸ç”¨å»é˜…è¯»ç»„ä»¶çš„æºç ï¼Œä¹Ÿæ›´æ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨&lt;/li&gt;
    &lt;li&gt;ç»„ä»¶é…ç½®å±æ€§å³ç»„ä»¶çš„ APIï¼Œå¯¹äºç»„ä»¶çš„ç”¨æˆ·æ¥è¯´ä»–ä»¬æ›´æ„Ÿå…´è¶£çš„æ˜¯ API è€Œä¸æ˜¯å®ç°åŸç†ã€‚&lt;/li&gt;
    &lt;li&gt;æ­£å¼çš„æ–‡æ¡£ä¼šå‘Šè¯‰å¼€å‘è€…ç»„ä»¶ API å˜æ›´ä»¥åŠå‘åçš„å…¼å®¹æ€§æƒ…å†µ&lt;/li&gt;
    &lt;li&gt;README.md æ˜¯æ ‡å‡†çš„æˆ‘ä»¬åº”è¯¥é¦–å…ˆé˜…è¯»çš„æ–‡æ¡£æ–‡ä»¶ã€‚ä»£ç æ‰˜ç®¡ç½‘ç«™ (github/bitbucket/gitlab ç­‰) ä¼šé»˜è®¤åœ¨ä»“åº“ä¸­å±•ç¤º è¯¥æ–‡ä»¶ä½œä¸ºä»“åº“çš„ä»‹ç»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 data-id=&quot;heading-33&quot;&gt;æ€ä¹ˆåšï¼Ÿ&lt;/h3&gt;
&lt;p&gt;åœ¨æ¨¡å—ç›®å½•ä¸­æ·»åŠ  README.md æ–‡ä»¶ï¼š&lt;/p&gt; &lt;pre&gt;&lt;code&gt;range-slider/
â”œâ”€â”€ range-slider.vue
â”œâ”€â”€ range-slider.less
â””â”€â”€ README.md
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨ README æ–‡ä»¶ä¸­è¯´æ˜æ¨¡å—çš„åŠŸèƒ½ä»¥åŠä½¿ç”¨åœºæ™¯ã€‚å¯¹äº vue ç»„ä»¶æ¥è¯´ï¼Œæ¯”è¾ƒæœ‰ç”¨çš„æè¿°æ˜¯ç»„ä»¶çš„è‡ªå®šä¹‰å±æ€§å³ API çš„æè¿°ä»‹ç»ã€‚&lt;/p&gt;
&lt;h1 data-id=&quot;heading-34&quot;&gt;Range slider&lt;/h1&gt;
&lt;h2 data-id=&quot;heading-35&quot;&gt;åŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;range slider ç»„ä»¶å¯é€šè¿‡æ‹–åŠ¨çš„æ–¹å¼æ¥è®¾ç½®ä¸€ä¸ªç»™å®šèŒƒå›´å†…çš„æ•°å€¼ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥æ¨¡å—ä½¿ç”¨ &lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttp%253A%2F%2Frefreshless.com%2Fnouislider%2F&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=http%3A//refreshless.com/nouislider/&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;noUiSlider&lt;i&gt;&lt;/i&gt;&lt;/a&gt; æ¥å®ç°å¤¸æµè§ˆå™¨å’Œ touch åŠŸèƒ½çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;h2 data-id=&quot;heading-36&quot;&gt;å¦‚ä½•ä½¿ç”¨&lt;/h2&gt;
&lt;p&gt;&amp;lt;range-slider&amp;gt; æ”¯æŒå¦‚ä¸‹çš„è‡ªå®šä¹‰å±æ€§ï¼š&lt;/p&gt;* attributetypedescriptionminNumber
&lt;p&gt;å¯æ‹–åŠ¨çš„æœ€å°å€¼.maxNumberå¯æ‹–åŠ¨çš„æœ€å¤§å€¼.&lt;/p&gt;
&lt;p&gt;* valuesNumber&lt;/p&gt;
&lt;p&gt;&lt;em&gt;optionalï¼Œ&lt;/em&gt;åŒ…å«æœ€å¤§å€¼å’Œæœ€å°å€¼çš„æ•°ç»„. å¦‚. values=&quot;[10, 20]&quot;. Defaults to [opts.min, opts.max].&lt;/p&gt;
&lt;p&gt;* stepNumber &lt;/p&gt;
&lt;p&gt;&lt;em&gt;optionalï¼Œ&lt;/em&gt;å¢åŠ å‡å°çš„æ•°å€¼å•ä½ï¼Œé»˜è®¤ä¸º 1.&lt;/p&gt;
&lt;p&gt;* on-slideFunction &lt;/p&gt;
&lt;p&gt;&lt;em&gt;optionalï¼Œ&lt;/em&gt;ç”¨æˆ·æ‹–åŠ¨å¼€å§‹æŒ‰é’®æˆ–è€…ç»“æŸæŒ‰é’®æ—¶çš„å›è°ƒå‡½æ•°ï¼Œå‡½æ•°æ¥å— (values, HANDLE) æ ¼å¼çš„å‚æ•°ã€‚ å¦‚ï¼š on-slide={ updateInputs }, component.updateInputs = (values, HANDLE) =&amp;gt; { const value = values[HANDLE]; }.&lt;/p&gt;
&lt;p&gt;* on-endFunction &lt;/p&gt;
&lt;p&gt;&lt;em&gt;optionalï¼Œ&lt;/em&gt;å½“ç”¨æˆ·åœæ­¢æ‹–åŠ¨æ—¶è§¦å‘çš„å›è°ƒå‡½æ•°ï¼Œå‡½æ•°æ¥å— (values, HANDLE) æ ¼å¼çš„å‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚éœ€è¦è‡ªå®šä¹‰ slider çš„æ ·å¼å¯å‚è€ƒ noUiSlider æ–‡æ¡£&lt;/p&gt;&lt;br&gt;
&lt;h2 data-id=&quot;heading-37&quot;&gt;æä¾›ç»„ä»¶ demo&lt;/h2&gt;
&lt;p&gt;æ·»åŠ  index.html æ–‡ä»¶ä½œä¸ºç»„ä»¶çš„ demo ç¤ºä¾‹ï¼Œå¹¶æä¾›ä¸åŒé…ç½®æƒ…å†µçš„æ•ˆæœï¼Œè¯´æ˜ç»„ä»¶æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚&lt;/p&gt;
&lt;h3 data-id=&quot;heading-38&quot;&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
    &lt;li&gt;demo å¯ä»¥è¯´æ˜ç»„ä»¶æ˜¯ç‹¬ç«‹å¯ä½¿ç”¨çš„&lt;/li&gt;
    &lt;li&gt;demo å¯ä»¥è®©å¼€å‘è€…é¢„è§ˆç»„ä»¶çš„åŠŸèƒ½æ•ˆæœ&lt;/li&gt;
    &lt;li&gt;demo å¯ä»¥å±•ç¤ºç»„ä»¶å„ç§é…ç½®å‚æ•°ä¸‹çš„åŠŸèƒ½&lt;/li&gt;
&lt;/ul&gt;&lt;br&gt;
&lt;h2 data-id=&quot;heading-39&quot;&gt;å¯¹ç»„ä»¶æ–‡ä»¶è¿›è¡Œä»£ç æ ¡éªŒ&lt;/h2&gt;
&lt;p&gt;ä»£ç æ ¡éªŒå¯ä»¥ä¿æŒä»£ç çš„ç»Ÿä¸€æ€§ä»¥åŠè¿½è¸ªè¯­æ³•é”™è¯¯ã€‚.vue æ–‡ä»¶å¯ä»¥é€šè¿‡ä½¿ç”¨ eslint-plugin-htmlæ’ä»¶æ¥æ ¡éªŒä»£ç ã€‚ä½ å¯ä»¥é€šè¿‡ vue-cli æ¥å¼€å§‹ä½ çš„é¡¹ç›®ï¼Œvue-cli é»˜è®¤ä¼šå¼€å¯ä»£ç æ ¡éªŒåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h2 data-id=&quot;heading-40&quot;&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/h2&gt;
&lt;ul&gt;
    &lt;li&gt;ä¿è¯æ‰€æœ‰çš„å¼€å‘è€…ä½¿ç”¨åŒæ ·çš„ç¼–ç è§„èŒƒã€‚&lt;/li&gt;
    &lt;li&gt;æ›´æ—©çš„æ„ŸçŸ¥åˆ°è¯­æ³•é”™è¯¯&lt;/li&gt;
    &lt;li&gt;æ€ä¹ˆåšï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºäº†æ ¡éªŒå·¥å…·èƒ½å¤Ÿæ ¡éªŒ *.vueæ–‡ä»¶ï¼Œä½ éœ€è¦å°†ä»£ç ç¼–å†™åœ¨ &amp;lt;script&amp;gt;æ ‡ç­¾ä¸­ï¼Œå¹¶ä½¿ç»„ä»¶è¡¨è¾¾å¼ç®€å•åŒ–ï¼Œå› ä¸ºæ ¡éªŒå·¥å…·æ— æ³•ç†è§£è¡Œå†…è¡¨è¾¾å¼ï¼Œé…ç½®æ ¡éªŒå·¥å…·å¯ä»¥è®¿é—®å…¨å±€å˜é‡ vue å’Œç»„ä»¶çš„ propsã€‚&lt;/p&gt;
&lt;h2 data-id=&quot;heading-41&quot;&gt;ESLint&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttp%253A%2F%2Feslint.org%2F&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=http%3A//eslint.org/&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;ESLint&lt;i&gt;&lt;/i&gt;&lt;/a&gt; éœ€è¦é€šè¿‡ &lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2FBenoitZugmeyer%2Feslint-plugin-html%2523eslint-plugin-html&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=https%3A//github.com/BenoitZugmeyer/eslint-plugin-html%23eslint-plugin-html&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;ESLint HTML æ’ä»¶&lt;i&gt;&lt;/i&gt;&lt;/a&gt;æ¥æŠ½å–ç»„ä»¶ä¸­çš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ .eslintrc æ–‡ä»¶æ¥é…ç½® ESlintï¼Œè¿™æ · IED å¯ä»¥æ›´å¥½çš„ç†è§£æ ¡éªŒé…ç½®é¡¹ã€‚ ESlintï¼Œè¿™æ ·.&lt;/p&gt;&lt;br&gt; &lt;pre&gt;&lt;code&gt;{
  &quot;extends&quot;: &quot;eslint:recommended&quot;,
  &quot;plugins&quot;: [&quot;html&quot;],
  &quot;env&quot;: {
    &quot;browser&quot;: true
  },
  &quot;globals&quot;: {
    &quot;opts&quot;: true,
    &quot;vue&quot;: true
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿è¡Œ ESLint&lt;/p&gt;&lt;br&gt; &lt;pre&gt;&lt;code&gt;eslint src/**/*.vue
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 data-id=&quot;heading-42&quot;&gt;JSHint&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://link.juejin.cn/?target=http%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttp%253A%2F%2Fjshint.com%2F&quot; target=&quot;_blank&quot; title=&quot;http://link.zhihu.com/?target=http%3A//jshint.com/&quot; ref=&quot;nofollow noopener noreferrer&quot;&gt;JSHint&lt;i&gt;&lt;/i&gt;&lt;/a&gt; å¯ä»¥è§£æ HTML (ä½¿ç”¨ --extra-extå‘½ä»¤å‚æ•°) å’Œ æŠ½å–ä»£ç ï¼ˆä½¿ç”¨ --extract=autoå‘½ä»¤å‚æ•°).&lt;/p&gt;
&lt;p&gt;é€šè¿‡ .jshintrc æ–‡ä»¶æ¥é…ç½® ESlintï¼Œè¿™æ · IED å¯ä»¥æ›´å¥½çš„ç†è§£æ ¡éªŒé…ç½®é¡¹ã€‚&lt;/p&gt;&lt;br&gt; &lt;pre&gt;&lt;code&gt;{
  &quot;browser&quot;: true,
  &quot;predef&quot;: [&quot;opts&quot;, &quot;vue&quot;]
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿è¡Œ JSHint&lt;/p&gt;&lt;br&gt; &lt;pre&gt;&lt;code&gt;jshint --config modules/.jshintrc --extra-ext=html --extract=auto modules/
&lt;/code&gt;&lt;/pre&gt;&lt;br&gt;
&lt;p&gt;æ³¨ï¼šJSHint ä¸æ¥å— vue æ‰©å±•åçš„æ–‡ä»¶ï¼Œåªæ”¯æŒ htmlã€‚&lt;/p&gt; </description><link>https://juejin.cn/post/6844903466465230861</link><guid isPermaLink="false">https://juejin.cn/post/6844903466465230861</guid><pubDate>Thu, 09 Mar 2017 03:19:39 GMT</pubDate><author>æ¨å°ç¦</author><category>å‰ç«¯</category><category>Vue.js</category></item></channel></rss>